(self.webpackChunkfitt=self.webpackChunkfitt||[]).push([[2813],{88025:(e,t,n)=>{var r=n(45697),a=r.func;e.exports=r.shape({init:a,destroy:a,whenReady:a,getAuthProvider:a,getAuthStates:a,getBestUserStream:a,getCountryCode:a,getDSSSubscriptions:a,getPlayedVideos:a,getUserAuth:a,getUserAuthNetworks:a,_queuedTask:a,setTDA:a})},95304:(e,t,n)=>{var r,a=n(85893),o=(n(67294),n(3896)),i=n(45697),s=n(50239),c=n(84967),l=n(5902),u=n(51409),d=n(21800),p=n(39233).localStorage,h=c.attr,y=c.attach,f=c.detach,E=n(27361),m=n(82492),P=n(36968),v=n(35161),g=n(52628),_=n(42348),A=n(13880),b=n(88025),T=n(14390),I=n(9831).getPlayerOptions,S=n(20263),C=n(93467),N=n(7949).getBAMPlayerConfig,{updateDataLayerPage:D}=n(45547),O=n(94184),R=n(11227)("watch:espn-watch-video-player:event"),w=n(71683).trackSeenVideo,k=n(71683).trackVideoListenerOff,M=n(1810),L=n(15351).Z,V=n(22154),B=n(49109),x=n(85477).Z,U=V.WATCH_SUBPAGE_TYPES,F=U.SYNDICATED_PLAYER,H=U.STANDALONE_PLAYER,Y=V.APP_ENVS,G=Y.QA,W=Y.SANDBOX,$=C.WATCH_PLAYER_EVENTS,j=$.PLAYED_VIDEO,K=$.READY,z=C.PLAYER_CONTROLS.PLAY,Z=S.CONTENT_TYPES,q=S.PROP_NAMES,Q=q.STREAMS,X=q.ID,J=q.IMAGE,ee=q.PROGRESS,te=q.TYPE,ne=s.NULL,re=s.UNDEF,ae=s.TRUE,oe=s.FALSE,ie=s.cbool,se=s.empty,ce=s.emptyObj,le=s.strlc,ue=s.idxOf,de=s.isFunc,pe=s.passThru,he=s.first,ye=s.emptyAry,fe=s.noop,Ee=s.cnum,me=s.getGlobal(),Pe=`bucketItem.${Q}[0].${X}`,ve=C.BRIGHTCOVE_EVENTS,ge=C.NEXT_EVENTS,_e=C.BAM_EVENTS,Ae=x.EVENT_NAMES.GENERAL_INTERACTION,be=0,Te="login",Ie="close",Se="click",Ce="app.watch.error.stream-limiting-violation",Ne="props.initOptions.disableProviderLogo",De="bucketItem.id",Oe="AUTHZ_FAILURE",Re="",we=C.STREAM_LIMIT_ERROR,ke=C.VOLUME_SETTINGS_NAMESPACE,Me=C.VOLUME_SETTINGS_KEY,Le=/[A-Za-z0-9]+:/i,Ve="mvpd interaction";n(75303),r=o({displayName:"WatchVideoPlayer",getInitialState:function(){return{bamAuthRetries:5,containerID:re,error:re,embedding:oe,hideError:oe,didPlay:oe,startType:re,hideBackgroundImage:oe,logo:ne}},componentDidMount:function(){var e,t,n,r=this,a=r.context||ce,o=a.watchSession,i=N(o),d=function(e){var t=c.view()||ce;return!E(e,"appState.request.vary.secure",oe)||"MediaKeys"in t||"WebKitMediaKeys"in t||"MSMediaKeys"in t}(o),p=o.getUserAuth();d?(r.useInitialThumbnail=!!E(r,"props.initialThumbnail"),r.videoPlayer=new T({bamPlayerOptions:i,brightcovePlayerOptions:{techOptions:{hasDRM:ae,type:"video"}}}),r.videoPlayer.userAuth=p,r.videoPlayer&&(r.videoPlayer.addEventListener=r.videoPlayer.on,r.videoPlayer.removeEventListener=r.videoPlayer.off),s.ns("espn.video",r.videoPlayer,me),r.videoPlayer.on(_e.PLAYBACK_ERROR,r.onBAMPlaybackError),r.videoPlayer.on(_e.AUTHORIZE_USER,r.onBAMAuthorizeUser),r.videoPlayer.on(_e.PLAYBACK_INITIALIZED,r.emitPlayedVideo),r.videoPlayer.on(_e.FEED_CHANGE_REQUEST,r.onBAMFeedChange),r.videoPlayer.on(ve.ESPN_PLAYING,r.emitPlayedVideo),r.videoPlayer.on(ve.ESPN_CONTENT_LOADED,r.onContentLoaded),r.videoPlayer.on(ve.ESPN_ERROR,r.onBCError),r.videoPlayer.on(ve.ESPN_DRM_ERROR,r.onBCError),r.videoPlayer.on(ve.ADS_AD_SKIPPED,r.trackSkipAd),r.videoPlayer.on(ve.DTCI_GET_NEXT_CONTENT,r.getNextContent),v(_([_e.PLAYBACK_INITIALIZED,_e.PLAYBACK_ERROR,_e.AUTHORIZE_USER,g(ve)]),(function(e){r.videoPlayer.on(e,(function(e,t){l.emit("espn.video",e,t)}))})),w(),r.fireVisionEvent(),y(r.node,Se,r.trackSocialShare),r.setState({containerID:"watch-video-"+be++},(function(){r.videoPlayer&&r.embedWatchPlayer()}))):r.setState({error:(e=a.translate||pe,n=u.UA(),t=n.safari?"Safari":n.ie?"Internet Explorer":e("browser"),e({key:"watch.player.unsupportedBrowser",browserName:t})),hideError:oe})},onBCError:function(e,t){R("onBCError",e,t);var n=E(this,"props.onError");404===E(t,"data.code")&&this.displayError(),de(n)&&n(e,t)},onBAMAuthorizeUser:function(e,t){var n,r=this,a=(t||ce).success,o=E(r,"state.bamAuthRetries",0),i=E(r,"context.watchSession",ce).guest||ce,s=i.disneyInstance,c=ie(i.loggedIn);if(!a)return n=s&&o?c?s.forceTokenRefresh:function(){return new Promise((function(e){function t(){s.off(Te,t),s.off(Ie,t),e()}s.on(Te,t),s.on(Ie,t),s.launchIdentityFlow()}))}:function(){return Promise.reject("Authentication error")},r.setState({hideError:ae}),n.call(s).then((function(){r.setState({hideError:oe,bamAuthRetries:o-1},r.embedWatchPlayer)})).catch((function(e){r.setState({error:e})}))},onBAMPlaybackError(e,t){var n,r,a,o=this,i=o.props,s=i.onError,l=t||ce,u=l.exception||E(l,"exception.message",Re),d=le(u),p=-1!==ue(d,"blackout"),h=-1!==ue(d,"streamconcurrencyviolation"),y=o.context||ce,f=y.watchSession||ce,m=y.translate||pe,P=y.subPageType===H,g=y.emitStreampickerState||pe,_=E(o,"props.bucketItem",ce),A=f.subscriber,b=E(A,"data.envName"),T=_[Q]||ye,I=_[X],S=T.length>1,C=v(T,X),N=_.evtId,D=_.hrf,O=i.streamId||he(C),R={statusCode:l.statusCode,message:u,errDetails:JSON.stringify(l),ctxBktItmID:I,ctxStrmID:O};b!==G&&b!==W||(n=new Error(`BAM Player Error: ${e}`),r=R,(a=(c.view()||ce).newrelic)&&a.noticeError&&a.noticeError(n,r)),de(s)&&s(e,t),"NotEntitled"===u?f.openPaywall():S&&!P&&(O=i.streamId||he(C),g(N,C,D,{message:m(p?"streampicker.card.blackout":h?Ce:u),id:O}))},trackSkipAd:function(e,t){R("trackSkipAd",e,t),(((this.context||ce).analytics||ce).track||fe)(Se,{event_detail:"preroll ad skip",event_name:Ae})},trackVolumeChange:function(e,t){var n,r,a,o,i,s=t||ce;e===_e.SYNDICATED_PLAYER_VOLUME_CHANGED?(n=s.body||ce,i=Ee(n.level),o={namespace:ke,volume:i/100}):e===ve.ESPN_VOLUME_CHANGED&&(i=(r=s.data||ce).value,a=r.muted,o={namespace:ke,volume:i,muted:a}),o&&p.setItem(Me,o)},trackSocialShare:function(e){var t,n=(this.context||ce).analytics||ce,r=e&&e.target||ce,a=this.props||ce,o=E(a,"bucketItem.tl"),i=n.track||fe,s=a?.analyticsConfig?.pageName||Re;-1!==ue(r.classList,"vjs-social-share-link")&&(t=le(h(r,"title")),i(Se,{event_name:"share interaction",event_detail:`social share:${s}:${t}:${o}`}))},getNextContent:function(){D({placement:Re})},componentDidUpdate:function(e){var t=this,n=t.props||ce,r=(t.state||ce).videoAutoplay,a=e.streamId||E(e,Pe),o=n.streamId||E(n,Pe),i=E(e,De),s=E(n,De),c=e.toggleMute,l=n.toggleMute,u=e.togglePlay,d=n.togglePlay,p=e.toggleCaptions,h=n.toggleCaptions;i!==s&&t.fireVisionEvent(),c!==l&&t.toggleVideoControl(l),u!==d&&t.toggleVideoControl(d),p!==h&&t.toggleVideoControl(h),a!==o&&(r?(t.updateAnalytics(n),t.setState({videoAutoplay:oe})):t.embedWatchPlayer(n))},onBAMFeedChange:function(e,t){var n=E(t,"body.stream");this.onFeedClick(n)},onFeedClick:function(e){var t=this.props||ce,n=(this.context||ce).onSelectBucketItem,r=e&&e.id,a=t.onVideoChange;r&&de(n)&&n({strms:[e]},{onPlayCallback:a.bind(ne,r)})},toggleVideoControl:function(e){var t=this,n=t.videoPlayer||ce,r=n[e],a=n.player;de(r)&&(a?r.call(n):n.on(K,t.videoPlayer[e]),e===z?t.setFadeToArtworkTimeout():t.clearFadeToArtworkTimeout(ae))},setFadeToArtworkTimeout:function(){var e=this;((e.props||ce).initOptions||ce).chromeless&&!e.timeout&&(e.timeout=setTimeout(e.videoPlayer.destroy,6e5))},clearFadeToArtworkTimeout:function(e){var t=this;t.timeout&&(clearTimeout(t.timeout),t.timeout=re,e&&t.setFadeToArtworkTimeout())},componentWillUnmount:function(){var e=this,t=(e.props||ce).onDestroyPlayer,n=e.videoPlayer,r=e.node;n&&(n.off(_e.PLAYBACK_ERROR,e.onBAMPlaybackError),n.off(_e.AUTHORIZE_USER,e.onBAMAuthorizeUser),n.off(_e.PLAYBACK_INITIALIZED,e.emitPlayedVideo),n.off(_e.FEED_CHANGE_REQUEST,e.onBAMFeedChange),n.off(_e.SYNDICATED_PLAYER_VOLUME_CHANGED,e.trackVolumeChange),n.off(ve.ESPN_PLAYING,e.emitPlayedVideo),n.off(ve.ESPN_CONTENT_LOADED,e.onContentLoaded),n.off(ve.ESPN_ERROR,e.onBCError),n.off(ve.ESPN_DRM_ERROR,e.onBCError),n.off(ve.ESPN_VOLUME_CHANGED,e.trackVolumeChange),n.off(ve.ADS_AD_SKIPPED,e.trackSkipAd),n.off(ve.DTCI_GET_NEXT_CONTENT,e.getNextContent),de(t)&&t(n),k(),e.videoPlayer.destroy(),e.videoPlayer=re),f(r,Se,e.trackSocialShare),e.clearFadeToArtworkTimeout(oe)},displayError:function(e,t){var n=this,r=(n.state||ce).containerID,a=n.videoPlayer,o=E(n,"context.translate",pe),i={container:`#${r}`},s={type:t||"NOT_FOUND",message:e||o("app.error.video.unavailable")};if(t===Oe){let t=A(e,Le,Re);return n.setState({error:t,hideError:oe})}return a.error(s,i)},getPlayerProps:function(e){var t=this,n=t.state||ce,r=n.containerID,a=n.startType,o=t.context||ce,i=o.subPageType===F,s=o.watchSession,l=(o.analytics||ce).track||fe,u=e||t.props||ce,p=u.bucketItem,h=u.streamId,y=u.mediaItem,f=u.initialThumbnail,E=u.initOptions||{},m=E.playlist,v=u.playerLocation||s?.appState?.routing?.params?.playLocation||Re,g=c.view(),_=u.pageUrlOverride||g?.location?.href,A=u.refererOverride,b=he(m),T={container:`#${r}`},S=(p&&p[te])===Z.VOD,C=u.fetchProgress;return d(E,{startType:a}),(C?C():Promise.resolve()).then((function(e){var n=p,r={};return S||l(Se,{event_name:Ve,event_detail:"authorization start"}),e&&(r[ee]={progress:e},n=d({},p,r),b&&b.id===n.id&&d(b,r)),I(h,n,s,E,t,y)})).then((function(e){var n=e||ce,r=n.options||ce,a=n.playerTech,o=n.authError||se(r);return S||l(Se,{event_name:Ve,event_detail:"authorization complete"}),f&&t.useInitialThumbnail&&(P(r,"mediaItem.images[0].url",void 0),t.useInitialThumbnail=oe),r.interceptors&&(r.interceptors[ve.ESPN_PROGRAM_CHANGE]=t.onProgramChange),d(T,{options:r,playerTech:a,hasError:o,playerLocation:v,skipPageName:i,pageUrl:_,refererOverride:A})})).catch(t.displayError)},embedWatchPlayer:function(e){var t=this,n=t.context||ce,r=n.translate||pe,a=t.videoPlayer,o=t.props?.onPlayerCreated,i=n?.watchSession;return t.getPlayerProps(e).then((e=>{var n=e||ce,r=n.hasError;return r?t.displayError(r,r?Oe:re):a.create(n,i)})).then((e=>{var t=e?._player?._bundlePlayerAPI;de(o)&&t&&o(t),Promise.resolve(e)})).catch((e=>{if(e&&e.message===we)return t.setState({error:r(Ce),hideError:oe});Promise.reject(e)}))},emitPlayedVideo:function(e,t){R("emitPlayedVideo",e,t);var n=this,r=n.props||ce,a=(n.state||ce).didPlay,o=r.onPlaying,i=E(t,"success")===oe,s=E(r,["bucketItem",X]),c=E(n,Ne),u=n.videoPlayer;!i&&de(o)&&o(e,t),l.emit(j,s),!a&&u&&(u.on(_e.SYNDICATED_PLAYER_VOLUME_CHANGED,n.trackVolumeChange),u.on(ve.ESPN_VOLUME_CHANGED,n.trackVolumeChange),n.setState({didPlay:ae,syndicatedPlayerLogoClassName:c?"WatchSyndicated__Logo--hide":"WatchSyndicated__Logo"}))},onContentLoaded:function(e,t){R("onContentLoaded",e,t);var n=this||ce,r=(t||ce).data||ce,a=n.props||ce,o=r.clipId||r.id,i=E(r,"mediainfo.startType"),s=a.onVideoChange;a.streamId!==o&&de(s)?(s(o),n.setState({videoAutoplay:ae,hideBackgroundImage:ae,startType:i})):n.setState({startType:re,hideBackgroundImage:ae})},updateAnalytics:function(e){var t=((this.videoPlayer||ce).player||ce).analytics||ce;this.getPlayerProps(e).then((e=>{var n=E(e||ce,"options.analytics",ce);de(t.configure)&&t.configure(n)}))},setNodeRef:function(e){(this||{}).node=e||ne},getLogo:function(){var e=this||ce,t=e.context?.watchSession||ce;t.whenReady().then((()=>{var n=t?.authenticationManager?.primaryAuthenticatedProvider?.logoUrl;n&&e.setState({logo:n})}))},handleHideLogo:function(){this.setState({syndicatedPlayerLogoClassName:"WatchSyndicated__Logo--hide"})},handleShowLogo:function(){E(this,Ne)||this.setState({syndicatedPlayerLogoClassName:"WatchSyndicated__Logo"})},render:function(){var e,t=this,n=t&&t.props||ce,r=n.bucketItem||ce,o=r.dscrptn||Re,i=r.drtn||Re,s=o?`${o} ${i?`(${i})`:Re}`:Re,c=t.context,l=n.className,u=O("WatchVideoPlayer__Player",l),p=n.style||{},h=n.showWatchProvider,y=n.noImageOnAutoplay,f=t&&t.state||ce,m=c.subPageType===F,P=f.error,v=f.hideError,g=f.containerID,_=f.didPlay,A=f.hideBackgroundImage,b=f.logo,T=O("WatchVideoPlayer__Wrapper",{"WatchVideoPlayer__Wrapper--hideBG":A}),I=E(n,`bucketItem.${J}`);return!I||A||y||(p=d({},[p,{backgroundImage:`url(${I})`}])),g&&!v&&(e=`<div id="${g}"></div>`),a.jsxs("div",{className:T,onMouseEnter:t.handleShowLogo,onMouseLeave:t.handleHideLogo,ref:t.setNodeRef,children:[!A&&n?.hasCaption&&s?a.jsx("div",{className:"WatchVideoPlayer__Caption",children:s}):ne,a.jsx("div",{className:u,"data-error":P,style:p,dangerouslySetInnerHTML:{__html:e}}),_&&m&&b?a.jsx("div",{className:t.state.syndicatedPlayerLogoClassName,onClick:h,children:a.jsx("img",{src:b})}):ne]})},onProgramChange:function(e){R("onProgramChange",e);var t=this,n=e||ce,r=n.id;return r?t.getPlayerProps(d({initOptions:{}},t.props,{streamId:r,mediaItem:n})).then((function(n){var r=(n||ce).options,a=E(t,"videoPlayer.player._bundlePlayerAPI.bundle_");return a&&m(a.configs_,r),t.onContentLoaded(ne,{data:e}),r})):Promise.reject("Missing mediaItem.id")},fireVisionEvent:function(){var e=this.props||ce;((this.context||ce).fireVisionConsumedEvent||fe)(e.bucketItem,{isWatchVideo:ae})}}),r.propTypes={chromeless:i.bool,style:i.object,bucketItem:i.object,initOptions:i.object,onDestroyPlayer:i.func,onError:i.func,onPlayerCreated:i.func,onPlaying:i.func,streamId:i.oneOfType([i.number,i.string])},r.contextTypes={analytics:i.object,emitStreampickerState:i.func,fireVisionConsumedEvent:i.func,onSelectBucketItem:i.func,openPaywall:i.func,translate:i.func,watchSession:b,subPageType:i.string},(r=M(r,L)).defaultProps={propagateEvents:ge},e.exports=B(r,"analytics")},52813:(e,t,n)=>{e.exports=n(95304)},36790:(e,t,n)=>{var r=n(50239),a=n(17805),o=n(27361),i=n(32409).BAM_EVENTS,s=r.emptyAry,c=r.emptyObj,l=r.forEach,u=r.keys,d=r.PROTO,p=r.first,h=r.inherits,y=r.isNum,f=r.isFunc,E=r.UNDEF,m="player._playerExtension",P=`${m}.eventBus`,v={};function g(e){var t=this;t.player=e,t.eventHandlers=[],t.bindEventListeners()}v[i.MEDIA_TIMEUPDATE]="currentTime",v[i.MEDIA_PAUSED]="pause",v[i.MEDIA_LOADED]="loadedMetadata",v[i.MEDIA_SEEKED]="seeked",v[i.MEDIA_START]="start",v[i.MEDIA_PLAY]="playing",v[i.MEDIA_ENDED]="stop",v[i.MEDIA_DISPOSE]="dispose",v[i.MEDIA_ENDED]="complete",g[d]={getTimeUpdateData:function(e){var t=o(e,"body.timeupdate");return y(t)?t:o(e,"body.mediaInfo.media_current_position")},bindEventListeners:function(){var e=this,t=o(e,m)||c,n=t.eventBus,r=t.events;n&&l(u(v),(function(t){var a=r&&r.get(t);a&&n.on(a,(function(n){var r=e.getTimeUpdateData(n);e.emit(e.getMappedEventName(t),{timeStamp:r})}))}))},getMappedEventName:function(e){return v[e]||e},getIndexOfHandlerForCallback(e){for(var t,n=this.eventHandlers||s,r=n.length,a=0;a<r;a+=1)if(p(n[a])===e){t=a;break}return t},on:function(e,t){var n=this,r=function(e,n){return t(n)};n.eventHandlers.push([t,r]),n.super(n.on)(e,r)},off:function(e,t){var n,r=this,a=r.eventHandlers,i=r.getIndexOfHandlerForCallback(t);i>-1&&(n=o(a,`${i}.1`),r.super(r.off)(e,n),a.splice(i,1))},dispose:function(){var e=o(this,P);this.player=E,e&&f(e.removeAllListeners)&&e.removeAllListeners()}},h(g,a),e.exports=g},56041:(e,t,n)=>{var r,a=n(50239),o=n(62412),i="BamVideoExtension";e.exports=function(e){var t=a.getGlobal(),n=t&&t[i],s=e||a.emptyObj,c=`${s.host||"https://beta.web.plus.espn.com"}/builds/${s.version||"1.4.12"}/dist/index.js`;return n?r=Promise.resolve(n):r||(r=new Promise((function(e,n){function r(e){n(new Error(`Failed to load ${i},`+e))}o.script(c).then((function(){var n=t&&t[i];n?e(n):r(`win.${i} missing after loading ${c}`)})).catch(r)}))),r}},9658:(e,t,n)=>{var r,a=n(79857),o=n(36790),i=n(56041),s=n(50239),c=n(84967),l=n(36968),u=n(27361),d=n(11227)("watch:espn-watch-video-player:player-tech:bam"),p=n(11227)("watch:espn-watch-video-player:player-tech:bam:errors"),h=n(93467),y=n(56830),f=h.PLAYER_TECH.BAM,E=h.BAM_EVENTS,m=n(83383),P=m.defineGetter,v=m.selectorToId,g=s.emptyObj,_=s.emptyAry,A=s.isAry,b=s.isFunc,T=s.forEach,I=s.mix,S=s.PROTO,C=s.TYPE_UNDEF,N="beta",D="SDKData",O=s.UNDEF,R=4e3,w={},k=O;function M(e){var t=this,n=e||g,r=n.bamlogging,o=n.sdkHost,s=n.env||N,c=n.playerVersion,l=n.sdkTimeout||R,u=n.continueWatchingEnabled,d=n.loader;a.call(t),r&&typeof console!==C&&(t.debug=console.log,t.debugError=console.error),t._sdkHost=o,t._playerVersion=c,t._extensionConfig={environment:s},t._sdkTimeout=l,t._loader=d||i,t._continueWatching=u,t._PlayerExtensionClass=O,t._playerPluginManager=O}function L(e,t){return t&&!t.isLive}function V(e,t,n,r){var a=this,o=r&&r.eventBus,i=r&&r.events,s=e&&e.timeout,d=c.view(),p=M&&M[D];return T(n,(function(e){var n,r,c,h,y=w[e]||g,f=y.emitEvent,E=y.defaultData,m=y.path,P=i&&i.get(f);if(t&&p&&(r=p[t])&&(n=r[e])&&u(n,m)&&a.emit(f,n),!r&&o&&i&&d){function v(n){d.clearTimeout(h),o.off(P,v),l(M,[D,t,e],n),a.emit(f,n)}s&&(h=d.setTimeout((function(){o.off(P,v),c={error:"timeout",body:E},a.emit(f,c)}),a._sdkTimeout)),o.on(P,v)}})),r.createSDKWrapper(e.container,e)}function B(e){var t=this,n=t&&t._loader||Promise.reject("No loader");return t.debug("loadPlayer",e),n({host:t._sdkHost,version:t._playerVersion}).then(x.bind(t)).catch(F)}function x(e){var t=this,n=t&&t._extensionConfig,r=t&&t._playerExtension;return!r&&n&&e&&(t._playerExtension=r=new e(n)),r?G(r):Promise.reject("Error instantiating player")}function U(e,t){var n=this,r=n&&n._playerExtension,a=n&&n._playerId,o=r&&r[e],i=t&&t.container,s=i?I({},[t,{container:i}]):t;return n.debug(e,a,s),o&&a?o.apply(r,[a,s]):G()}function F(e){throw new Error(`Error with BAMPlayer ${e}`)}function H(){var e=this,t=e._playerExtension||g,n=t.eventBus,r=t.events,a=r&&r.forEach;b(a)&&r.forEach((function(t,r){n.on(t,(function(t,n){e.debug("bam emit",r,n,t),e.emit(r,t)}))}))}function Y(){var e=(this._playerExtension||g).eventBus;e&&s.isFunc(e.removeAllListeners)&&e.removeAllListeners()}function G(e){return Promise.resolve(e)}function W(){return g}w.sessionToken={emitEvent:E.SESSIONTOKEN_READY,path:"body.token",defaultData:{token:O}},w.subscriptions={emitEvent:E.SUBSCRIPTIONS_READY,path:"body",defaultData:{subscriptions:[]}},w.userAuthorized={emitEvent:E.AUTHORIZE_USER,path:"success",defaultData:!1},w.userAccountStatus={emitEvent:E.USER_ACCOUNT_RECEIVED,path:"body",defaultData:!1},w.sessionInfo={emitEvent:E.SESSIONINFO_READY,path:"body.sessionInfo",defaultData:!1},r={EVENTS:E,changeFeed:function(e){return U.call(this,"changeFeed",e)},create:function(e){var t,n=this,r=e||g,a=r.options,o=a&&a.mediaItem,i=a&&a.seriesId||"",s=u(a,"playlist.0.startTime"),d=r.container;return d?B.call(n).then((function(e){var r=n&&!n._playerId,p=e||g,h=p.eventBus,y=p.events,f=r?"createPlayer":"loadMedia",m=u(a,"auth.swid","");return n.debug(f,a),!n._playerPluginManager&&n._continueWatching&&(s&&(t={minimumProgressBeforeTrack:0}),n.initPlayerPluginManager(m,t)),n._playerPluginManager&&b(n._playerPluginManager.setMediaItem)&&o&&(l(o,'tracking.heartbeats["a.media.asset"]',i),n._playerPluginManager.setMediaItem(o)),b(p[f])?new Promise((function(e,t){p[f](d,a).then((function(t){var a,o=c.view();if(r){if(!t)throw new Error("playerId missing after instantiating BAM Player Extension");return n._playerId=t,H.call(n),o&&(a=o.setTimeout(e.bind(O,n),100),h&&h.once(y.get(E.EMBED_PLAYER_READY),(function(){o.clearTimeout(a),e(n)}))),p.insertPlayer(t)}e(n)})).catch(t)})):Promise.reject(new Error(`${f} is not a method of the BAM Player Extension`))})).catch(n.debugError):Promise.reject(`Invalid container passed in ${a}`)},destroy:function(){var e,t=this,n=t&&t._playerExtension,r=t&&t._playerId,a=n&&n.players,o=r&&a&&a.get(r),i=t.container,s=c.par(i);return e=o&&o.delete?o.delete(r):G(),new Promise((function(n,a){e.then((function(){var e;Y.call(t),t._playerPluginManager&&b(t._playerPluginManager.dispose)&&t._playerPluginManager.dispose(),t._playerExtension=O,t._playerId=O,t._playerPluginManager=O,e=c.make("div"),c.attr(e,"id",v(r)),c.append(s,e),n(t)})).catch(a)}))},error:F,getPlayerConfigs:function(){return U.call(this,"getPlayerConfigs")},mute:function(){return U.call(this,"mutePlayer")},pause:function(){return U.call(this,"pausePlayer")},play:function(){return U.call(this,"playPlayer")},unmute:function(){return U.call(this,"unmutePlayer")},updatePlayerConfigs:function(e){return U.call(this,"updatePlayerConfigs",e)},debug:function(){d.apply(O,arguments)},debugError:function(){p.apply(O,arguments)},createSDKWrapper:function(e){var t=this,n=e||g,r=n.requests,a=n.transactionId,o=(A(r)?r:_).join();return t.debug("createSDKWrapper",n),B.call(t,o).then(V.bind(t,n,a,r))},fetchSDKData:function(e){var t=this,n=e||g,r=n.requests,a=[],o=function(e){return t.destroy(),e};return T(r,(function(e){var n=w[e]||g,r=n.emitEvent,o=n.path;a.push(new Promise((function(e){t.once(r,(function(t,n){var r=n||g,a=u(r,o);e({value:a,payload:r})}))})))})),k=(k||G()).then((function(){return t.createSDKWrapper(n),Promise.all(a).then(o).catch(o)}))},renderPaywall:function(e){var t=this,n=e||g,r=n.options,a=n.container;return t.debug("renderPaywall",n),B.call(t).then((e=>{var n=e.eventBus,o=e.events;return e.renderPaywall(a,r).then((()=>{t._playerId=r&&r.container,n.once(o.get(E.LOGIN_REQUESTED),(e=>{t.emit(E.LOGIN_REQUESTED,e)}))})).catch(t.debugError)})).catch(t.debugError)},sendContentReward:function(e,t,n,r,a){var o=this;return B.call(o).then((function(o){return o.sendContentReward(e,t,n,r,a)})).then((function(e){return o.debug("sendContentReward result:",e),e})).catch(o.debugError)},initPlayerPluginManager:function(e,t){var n,r,a,i,s,l=c.view(),d=u(l,"WatchSDK",g),p=d.PlayerPluginManager,h=d.ProgressTracker,f=d.CallbackStorage,E=d.FuseStorage,m=d.QueueMode,P=t||g;p&&h&&E&&m&&(a=new p(r=new o(this),[],{}),i=new h(r,P),n=new E({source:"web",queueMode:m.last,customHeaders:{"X-Personalization-Source":"ESPN.com - FAM"}},{id:e}),s=new f({callback:y.setSessionProgressData}),i.setStorage(s,L),i.setStorage(n,L),a.addPlugin(i),this._playerPluginManager=a)}},M[S]=r,a.inherits(M,a),P(r=M[S],"tech",(function(){return f})),P(r,"player",(function(){return this._playerExtension})),P(r,"container",(function(){return c.qsa(this._playerId,!0)})),P(r,"analytics",W),P(r,"advertising",W),M.SDKPromises={},M[D]={},e.exports=M},97707:(e,t,n)=>{var r,a=n(50239),o=n(62412),i=n(22154).WATCH_VIDEO_BUNDLE.JS,s="DTCIVideoPlayer";e.exports=function(){var e=a.getGlobal(),t=e&&e[s];return t?r=Promise.resolve(t):r||(r=new Promise((function(t,n){function r(e){n(new Error(`Failed to load ${s} Bundle,`+e))}o.script(i).then((function(){var n=e&&e[s];n?t(n):r(`win.${s} missing after loading ${i}`)})).catch(r)}))),r}},30166:(e,t,n)=>{var r,a=n(79857),o=n(97707),i=n(50239),s=n(35161),c=n(27361),l=n(11227)("watch:espn-watch-video-player:player-tech:brightcove"),u=n(83383).defineGetter,d=n(93467),p=n(83383).selectorToId,h=d.BRIGHTCOVE_EVENTS,y=d.PLAYER_TECH,f=i.PROTO,E=i.FALSE,m=i.TRUE,P=i.emptyObj,v=i.getGlobal,g=i.isFunc,_=i.isObj,A=d.STREAM_LIMIT_ERROR;function b(e){var t=this,n=_(e)?e:P,r=n.playerTech,i=n.techOptions;a.apply(t,arguments),t._bundlePlayerTech=r,t._bundleTechOptions=i,t._loader=n.loader||o}function T(e){var t=this._bundlePlayerAPI;return c(t,e)}function I(e,t){var n,r,a=this._bundleTechOptions;return t?(n=new t(e,a),this._bundlePlayerAPI=n,r=w(n)):r=k("Error instantiating player"),r}function S(){var e=this,t=c(e,"_bundlePlayerAPI"),n=i.keys(h);t&&(e._unsubscribes=s(n,(function(n){var r=h[n],a=function(t){l("emit",r,t),e.emit(r,{data:t})};return t.addEventListener(r,a),function(){t.removeEventListener(r,a)}})))}function C(){var e,t=this;if(t._unsubscribes){for(;t._unsubscribes.length;)e=t._unsubscribes.pop(),g(e)&&e();t._unsubscribes=null}}function N(e,t,n){var r=this,a=r._bundlePlayerAPI,o=t.interceptors||P;l("bundlePlayerAPI.load",t),a.load(t),S.call(r),l("interceptors",o),i.forEach(o,(function(e,t){var n=function(n){var r=e(n);return l("intercepted",t,r),r};a.addEventInterceptor(t,n),r._unsubscribes.push((function(){a&&a.removeEventInterceptor&&a.removeEventInterceptor(t,n)}))})),n()}function D(e){var t,n=this,r=n._bundlePlayerAPI;return new Promise((function(a,o){function i(){a(n)}try{(t=r[e]())instanceof Promise?t.then(i):i()}catch(e){o(e)}}))}function O(e){var t=this,n=t._bundlePlayerAPI;return new Promise((function(r,a){try{n.captions(e),r(t)}catch(e){a(e)}}))}function R(e){var t=this,n=t._bundlePlayerAPI;return new Promise((function(r,a){try{n.muted(e),r(t)}catch(e){a(e)}}))}function w(e){return Promise.resolve(e)}function k(e){return Promise.reject(e)}r={Events:h,captionsOn:function(){return O.call(this,m)},captionsOff:function(){return O.call(this,E)},changeFeed:function(e){var t=this;t.destroy().then(t.create.bind(t,e))},create:function(e,t){var n=this,r=e||P,a=r.container,o=p(a),i=r.options||P,s=function(){return n.loadPlayer(o)},c=n.player?n.destroy().then(s):s(),l=v().requestAnimationFrame;return("DIRECT"===i?.authorizationPayload?.authenticationType?n.createPlaybackSession(i,t):w(E)).then((e=>(e&&(i.playbackSession=e),new Promise((function(e,t){c.then((function(){try{l?l((function(){N.call(n,o,i,e)})):N.call(n,o,i,e)}catch(e){t(e)}}))})))))},createPlaybackSession:function(e,t){const n=t?.authenticationManager,r=e?.mediaItem,a=e?.authorizationPayload,o=t?.guest?.profile?.swid,i=n?.playbackSessionFactories?.[r?.source?.type];return new Promise((function(e,t){i?.initPlaybackSession(r,{},a).then((function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.authenticatedIdentity=o;const a=n?.concurrencyMonitorBuilder?.withSession(r).build();a?.createSession().then((t=>{r.concurrencyMonitorSessionId=t,e(r)})).catch((e=>{console.error("Concurrency Monitor Init Error",e);const n=new Error(A);t(n)}))})).catch((e=>{console.error("Playback Session Init Error",e)}))}))},destroy:function(){var e=this,t=e._bundlePlayerAPI;return C.call(e),t&&t.unembed(),w(e)},error:function(e,t){var n=this,r=n._bundlePlayerAPI;return new Promise((function(a,o){try{r.error(e,t),a(n)}catch(e){o(e)}}))},getPlayerConfigs:function(){return w(c(this,"_bundlePlayerAPI.bundle.options"))},loadPlayer:function(e){return(this._loader||k("No loader"))().then(I.bind(this,e)).catch((function(e){throw new Error(`Error loading Brightcove player ${e}`)}))},mute:function(){return R.call(this,m)},pause:function(){return D.call(this,"pause")},play:function(){return D.call(this,"play")},unmute:function(){return R.call(this,E)},updatePlayerConfigs:function(e){return w(e)},currentTime:function(e){var t=this,n=t._bundlePlayerAPI;return new Promise((function(r,a){try{if(e&&n)return n.currentTime(e),void r(t);r(n&&n.currentTime())}catch(e){a(e)}}))},exitFullscreen:function(){return D.call(this,"exitFullscreen")},requestFullscreen:function(){return D.call(this,"requestFullscreen")}},b[f]=r,a.inherits(b,a),u(r=b[f],"tech",(function(){return y.BRIGHTCOVE})),u(r,"container",(function(){return T.call(this,"container_")})),u(r,"player",(function(){return T.call(this,"bundle_")})),u(r,"analytics",(function(){return T.call(this,"bundle_.configs_.analytics")})),u(r,"advertising",(function(){return T.call(this,"bundle_.advertisingInfo")})),e.exports=b},79857:(e,t,n)=>{var r=n(50239),a=n(17805),o=r.PROTO,i=r.inherits;function s(e,t){}function c(e){return Promise.resolve(e)}s.inherits=function(e,t){t=t||s,e.espn=!0,i.call(s,e,t)},s[o]={create:c,destroy:c,play:c,pause:c,mute:c,unmute:c,error:c,getPlayerConfigs:c,updatePlayerConfigs:c},i(s,a),e.exports=s},14390:(e,t,n)=>{var r,a=n(79857),o=n(50239),i=n(84967),s=n(27361),c=n(11227)("espn-watch-video-player:player-tech:base"),l=n(83383).defineGetter,{updateDataLayer:u}=n(45547),d=n(93467),p=d.WATCH_PLAYER_EVENTS.READY,h=d.PLAYER_TECH,y=h.BAM,f=h.BRIGHTCOVE,E=d.BRIGHTCOVE_EVENTS,m=d.BAM_EVENTS,P=o.isAry,v=o.mix,g=o.forEach,_=o.emptyObj,A=o.emptyAry,b=o.TYPE_STR,T=o.PROTO,I=null,S=!0,C={};function N(e){var t=this,n=e||_;a.apply(t,arguments),t.playerTechConfigs={},g(C,(function(e,r){var a=e&&e.optsProp,o=n[a]||{};t.playerTechConfigs[r]={instance:I,opts:o}}))}function D(e){var t=this,n=s(t,`playerTechConfigs.${e}`,_),r=C[e]||_,a=r.events||A,o=n.opts,i=n.instance,l=r.cls;if(!i&&o&&(i=new l(o)),!i)throw Error(`Tried to re-initialize ${e}. It should have been destroyed before re-initializing`);return g(a,(function(e){i.on(e,(function(e,n){c("emit",e,n),t.emit(e,n)}))})),i}function O(e,t){var n=this,r=e||_,a=r.playerTech,o=r.container,s=r.options?.mediaItem,c=r.pageUrl,l=n&&n._player,d=l&&l.tech,h=w(l),y=n.userAuth||A;return a!==d&&(h=h.then(n.destroy.bind(n)).then(D.bind(n,a))),u({mediaItem:s,options:r,userAuth:y,pageUrl:c}),h.then((function(e){var a,s=typeof o===b?i.qsa(o,S):o;return e&&(s||e.container)?(n._player=e,a=v({},[r,{el:s,selector:o}],{owned:S,noRecurse:S}),n._player.create(a,t)):Promise.reject(new Error("cannot create player."))})).then((function(){return n.emit(p),n}))}function R(e){var t=this,n=t&&t._player,r=n&&n[e],a=Array.prototype.slice.call(arguments,1),o=r&&r.apply(n,a);return(o instanceof Promise?o:w()).then((function(){return t})).catch((function(e){throw e}))}function w(e){return Promise.resolve(e)}C[y]={cls:n(9658),optsProp:"bamPlayerOptions",events:m},C[f]={cls:n(30166),optsProp:"brightcovePlayerOptions",events:E},r={captionsOff:function(){return R.call(this,"captionsOff")},captionsOn:function(){return R.call(this,"captionsOn")},create:O,destroy:function(e){var t=this,n=t&&t._player;return(n&&n.destroy||w).call(n).then((function(){g(t.playerTechConfigs,(function(e){var t,n=e.instance;n&&n.eventNames&&n.listeners&&(t=n.eventNames())&&g(t,(function(e){var t,r=n.listeners(e),a=0;if(P(r))for(;t=r[a++];)n.off(e,t)})),e.instance=I})),t._player=I}))},changeFeed:function(e){return R.call(this,"changeFeed",e)},play:function(){return R.call(this,"play")},pause:function(){return R.call(this,"pause")},mute:function(){return R.call(this,"mute")},unmute:function(){return R.call(this,"unmute")},error:function(e,t){var n=this;return t.playerTech=f,O.call(n,t).then((function(){return R.call(n,"error",e)}))},getPlayerConfigs:function(){return R.call(this,"getPlayerConfigs")},updatePlayerConfigs:function(){return R.call(this,"updatePlayerConfigs",arguments)}},N[T]=r,a.inherits(N,a),l(r=N[T],"player",(function(e){return this&&this._player})),e.exports=N},75303:(e,t,n)=>{"use strict";n.r(t)}}]);