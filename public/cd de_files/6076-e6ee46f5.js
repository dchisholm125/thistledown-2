(self.webpackChunkfitt=self.webpackChunkfitt||[]).push([[6076],{36076:(e,t,n)=>{var a,s,o,i,r,u,c,p,h,m,d,l,g,w,P,f,E,y,v,C=n(50239),S=n(41541),T=n(45697),_=n(40924),b=n(60210),k=n(11227)("watch:page"),D=n(22154),N=n(38169),A=n(13311),L=n(27361),R=n(98611),I=n(35161),W=n(82729),O=n(23992).getTimeZoneOffset,F=n(84967),V=n(19495),z=n(39233),U=n(56830),{getEntitlementsCookie:x}=n(59766),B=U.getWatchEditionCountry,H=U.getWatchPlayerURL,G=U.getWatchURL,Y=U.mixWatchHashParams,$=U.parseWebLink,Z=n(20263),j=n(34248),K=j.toJS,M=j.reaction,q=j.observe,J=n(53781),Q=J.Condition,X=J.Rule,ee=J.Ruleset,te=J.constants,ne=te.COND_TYPE_CHANGE,ae=te.COND_TYPE_CHANGE_TO,se=te.COND_TYPE_CHANGE_FROM,oe=C.emptyObj,ie=C.FALSE,re=C.TRUE,ue=C.UNDEF,ce=C.empty,pe=C.forEach,he=C.last,me=C.mix,de=C.isAry,le=C.passThru,ge=C.struc,we=C.isFunc,Pe=C.ues,fe=F.loc,Ee="state.routing.params",ye=`${Ee}.bucketId`,ve="page.content",Ce=`${ve}.watch`,Se=`${Ce}.bkts`,Te=`${Ce}.p13n`,_e=Z.PROP_NAMES,be=_e.VIDEO,ke=D.WATCH_SUBPAGE_TYPES,De=ke.SCHEDULE,Ne="rawPageType",Ae="isEspnPlus",Le=Z.RAW_PAGE_TYPES.PLAYER,Re={noRecurse:re,owned:re},Ie=Z.WATCH_LAST_VISITED_KEY,We=",",Oe="/watch/",Fe="context.emit",Ve="stateChange";function ze(e,t){var n=t||oe,a=(e||oe).country,s=(L(n,"request.vary")||oe).country,o=a||s;return B(o)||o}function Ue(){var e=V.loc();return e&&e.hash||""}function xe(e){var t,n=e||oe,a=n.pathname,s=n.search,o=n.hash;a&&(t=a),s&&(t=R([t,s],"")),o&&(t=R([t,o],"")),t&&this.setLastVisited(t)}a={componentName:"WatchDescriptor",metaData:_,updateState:b,getPersonalizedAPIParams:function(e,t,n,a){var s,o,i=e||oe,r=L(t,"isEspnPlus"),u=r?"ESPN_PLUS":ue,c="home"===L(t,"rawPageType"),p=L(a,"fan.data",oe),h=p.teamsPreferences,m=p.sportsPreferences,d=L(n,"page.content.watch.p13n",oe),l=d.authNetworks,g=d.authStates,w=i.edition||oe,P=w.config,f=w.language,E=L(P,"dateTime.timeZoneBucket",null),y=L(P,"watch.apiParams",{}),v=d.zipcode,C=d.countryCode||ze(t,n),S=d.entitlements||Pe(L(n,"request.vary.dtcAuth")),T=d.lang||f,_=d.tz||O(E),b=me({},y,Re);return h&&c&&(s=I(h,(function(e){return L(e,"metaData.team.uid")})),b.favoriteTeam=R(s,We)),m&&c&&(o=I(m,(function(e){return L(e,"metaData.sport.uid")})),b.favoriteSport=R(o,We)),l&&(b.authNetworks=l),g&&(b.authStates=g),C&&(b.countryCode=ge(C)),S&&(b.entitlements=S),T&&(b.lang=T),_&&(b.tz=_),v&&(b.zipcode=v),r&&(b.sourcePageType=u),b},render:function(){return null},transition:{reload:(s=[new Q(ne,"subPageType",re)],o=new X(s,ie,14),i=[new Q(ae,Ne,"news")],r=new X(i,re,4),u=[new Q(ae,Ne,"tools")],c=new X(u,re,4),p=[new Q(se,Ne,Le)],h=new X(p,re,4),m=[new Q(ae,Ae,re)],d=new X(m,re,4),l=[new Q(se,Ae,re)],g=new X(l,re,4),w=[new Q(ae,Ne,Le)],P=new X(w,ie,3),f=[new Q(se,Ne,De)],E=new X(f,re,2),y=[new Q(ae,Ne,De)],v=new X(y,re,2),new ee([o,E,v,h,d,g,P,r,c]))},instanceAug:{componentDidMount:function(){var e,t,n=this,a=n&&n.props||oe,s=(a.history||oe).listen,o=a.state||oe,i=L(n,Fe,le),r=o.routing||oe,u=r.params||oe,c=r.location||oe,p=a.subscriber||oe,h=L(o,"app.edition"),m=L(h,"config.dateTime.timeZoneBucket"),d=N(xe,n),l=ze(u,o),g=u.rawPageType===Le,w=c.hash||Ue(),P=u._watchP13n===ie,f=O(m),E=L(p,"options.language"),y=x();n._disposers=[],n.setLastVisited(),s&&(n.historyListen=s(d)),P?(e=L(o,ve),t=me({},[e,{personalized:re}],Re),i({type:Ve,ns:ve,value:t})):(n.emitP13nStateChange({countryCode:l,lang:E,tz:f}),(!y&&p?.whenBrowserSDKReady?p?.whenBrowserSDKReady():Promise.resolve()).then((function(){n._disposers.push(M((()=>L(o,Te)),n.personalizePage,{delay:50})),n._disposers.push(q(p.data,n.updateWatchP13nFromSubscriber)),n.updateWatchP13nFromSubscriber()}))),g&&!w&&(L(o,`${Ce}.${be}`)||fe(G(Oe,{edition:h,params:u,isEspnPlus:u.isEspnPlus}),re))},componentWillUnmount:function(){var e=this,t=e.historyListen,n=e._disposers;t&&(t(),e.historyListen=ue),n&&(pe(n,(e=>e())),e._disposers=ue)},emitP13nStateChange:function(e){var t,n=this,a=(n&&n.props||oe).state,s=L(n,Fe,le),o=L(a,Ce,oe),i=o.p13n||{},r=me(i,e,Re);e&&(t=me({},[o,{p13n:K(r,ie)}],Re),s({type:Ve,ns:Ce,value:t}))},personalizePage:function(e){var t=this,n=L(t,"props.state",oe),a=L(t,"props.fan"),s=L(t,Fe,le),o=n.app||oe,i=n.routing||oe,r=L(o,"featureGating.continueWatching"),u=i.params||oe,c=t&&t.constructor,p=i.location||oe,h=p.hash||Ue();return k("p13n fetch",e),h&&Y(u,h),t&&e&&"mock"!==u._dataType?S({components:[c]},n,o,{fan:a,withCredentials:r}).then((e=>(k("p13n parse"),c.parser(e,p,n)))).then((e=>me({},[e,{personalized:re}],Re))).then((e=>b.call(null,e,n))).then((e=>{var t=L(n,ve),a=me({},[t,e],Re);k("emit updates"),s({type:Ve,ns:ve,value:a})})).catch((function(e){var t=(e||oe).type,a=L(n,"app.edition");"INVALID_VIDEO"===t&&fe(G(Oe,{edition:a,params:u,isEspnPlus:u.isEspnPlus}),re)})):Promise.resolve()},setLastVisited:function(e){var t,n=(this&&this.props||oe).state,a=z.sessionStorage||oe,s=L(n,"page.subType"),o=e||L(n,"routing.location.originalPathName");s!==ke.LISTING&&s!==ke.SCHEDULE||we(a.getItem)&&we(a.setItem)&&(t=a.getItem(Ie),de(t)?he(t)!==o&&(t.push(o),t.length>=10&&(t=t.slice(1,10)),a.setItem(Ie,t)):a.setItem(Ie,[o]))},onVideoChange:function(e,t){var n=this||oe,a=n.props||oe,s=L(n,"props.history.push"),o=(t||oe)[_e.HREF],i=t?ue:L(a,ye),r=L(a,"state.app.edition"),u=L(a,Ee);o||(o=H({id:e}),o=$(o,i,{edition:r,params:u})),we(s)?s(o,{anConfig:{autoTrackPageView:ie}}):fe(o,re)},removeFromBucket:function(e,t){var n=this,a=(n&&n.props||oe).state,s=L(n,Fe,le),o=L(a,Se,oe),i=A(o,{id:e})||oe,r=i.itms;i&&t&&(W(r,{id:t}),r&&0===r.length&&W(o,{id:e}),s({type:Ve,ns:Se,value:K(o,ie)}))},updateWatchP13nFromSubscriber:function(){var e=this.props||oe,t=e.subscriber||oe,n=e.state||oe,a=t.data||oe,s=(a.mvpd||oe).authNetworks,o=a.authStates,i=x()||t.browserSDK?.getEntitlementNames(),r=a.userZip||L(e,"guest.profile.userZip"),u=L(n,Te,oe),c={};pe({authNetworks:s&&R(s,We),authStates:o&&R(o,We),entitlements:i,zipcode:r},(function(e,t){e&&t&&u[t]!==e&&(c[t]=e)})),ce(c)||this.emitP13nStateChange(c)},contextTypes:{emit:T.func,translate:T.func,watchSession:T.object},childContextTypes:{watchOnVideoChange:T.func,watchP13n:T.object,watchRemoveFromBucket:T.func},getChildContext:function(){var e=this,t=(e&&e.props||oe).state;return{watchOnVideoChange:e.onVideoChange,watchP13n:L(t,Te),watchRemoveFromBucket:e.removeFromBucket}}}},e.exports=a},60210:(e,t,n)=>{var a=n(50239),s=a.emptyObj,o=a.mix,i=a.TRUE,r=n(27361),u={noRecurse:i,owned:i};e.exports=function(e,t){var n=r(t,"page.content.watch",{});return{watch:o({},[n,e||s],u)}}}}]);