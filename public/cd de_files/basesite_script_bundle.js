!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("basesite_script_bundle",[],t):"object"==typeof exports?exports.basesite_script_bundle=t():e.basesite_script_bundle=t()}(this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="builds/e8295bc77e3033a936b6beee53064edf3ed05443_1723137415672",n(n.s=13)}([function(e,t,n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){"use strict";var e=document.querySelectorAll("meta"),t=Array.prototype.slice.call(e),n={};return t.forEach((function(e,t){var r=e.getAttribute("name")||e.getAttribute("property");if(r){var i="bam-override-"+r+"=",o=window.location.href.indexOf(i);if(-1!==o){var a=window.location.href.substr(o+i.length),s=a.indexOf("&");-1!==s&&(a=a.substr(0,s)),n[r]=a}else n[r]=e.getAttribute("content");switch(e.getAttribute("data-type")){case"json":n[r]=JSON.parse(n[r])}}})),n})?r.apply(t,i):r)||(e.exports=o)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(14)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){(function(r){var i;!function(o){var a="undefined"!=typeof window?window:void 0!==r?r:this;void 0===(i=function(){return function(e){var t=document;if(e.MessageChannel)var n=MessageChannel;else{function n(){this.port1=t.createElement("div")}n.prototype={port1:null,port2:null}}return n}(a)}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(1))},function(e,t,n){(function(r){var i;!function(o){var a=void 0!==typeof window?window:void 0!==typeof r?r:this;void 0===(i=function(){return function(e){var t={bubbles:!1,cancelable:!1},n=e.document;function r(){this.store={}}r.prototype={get:function(e){return this.store[(e||"").toString()]},set:function(e,t){this.store[(e||"").toString()]=t},has:function(e){return(e||"").toString()in this.store},delete:function(e){delete this.store[(e||"").toString()]},forEach:function(e,t){var n,r=this.store;for(n in r)e.call(t||this,r[n],n,this)}};var i=e.Map||r;function o(e,t,n,r,i){this.scope=e,this.originalConsumer=t,this.name=i,n&&(this.handleEvent=this.handleEventOnce,this.topics=r)}o.prototype={handleEvent:function(e){return this.originalConsumer.call(this.scope,e.data,e)},handleEventOnce:function(e){return u(this.scope,this.topics,this.name,this.originalConsumer),this.originalConsumer.call(this.scope,e.data,e)}};var a=s.createEvent="function"==typeof CustomEvent?function(e,n){var r=new CustomEvent(e,t);return r.originalType=n||e,r}:function(e,r){var i=n.createEvent("Events");return i.initEvent(e,t.bubbles,t.cancelable),i.originalType=r||e,i};function s(e,t){this.name=e,this.consumers=new i,this.consumerCount=0,this.hub=t}function c(e,t,n){for(var r=0,i=e.length,o=this.hub,a=this.name;r<i;r++)o.removeEventListener(a,e[r],!1,!0);n.delete(t)}function u(e,t,n,r){var i=t[n];i&&r&&(i.removeConsumer(e,r),i.consumerCount<=0&&delete t[n])}return s.prototype.publish=function(e,t){var n=a(this.name,t);n.data=e,this.hub.dispatchEvent(n)},s.prototype.addConsumer=function(e,t,n,r){var i=t,a=this.hub,s=this.consumers.get(i),c=new o(e,t,n,r,this.name);s?this.removeConsumer(e,t):s=[],s.push(c),this.consumerCount++,this.consumers.set(i,s),a.addEventListener(this.name,c,!1,!0)},s.prototype.removeConsumer=function(e,t){var n,r=t,i=this.consumers.get(r),o=this.name;if(i)for(var a=i.length,s=0;s<a;s++)if((n=i[s]).originalConsumer===t&&(!e||n.scope===e)){this.hub.removeEventListener(o,n,!1,!0),i.splice(s,1),i.length||this.consumers.delete(r),this.consumerCount--;break}},s.prototype.removeAllConsumers=function(){var e=this.consumers;this.name;e.forEach(c,this),this.consumerCount=0},s.publishTopic=function(e,t,n){return e&&e.publish(t,n)},s.addTopicListener=function(e,t,n,r,i,o){if(!i)throw new Error("message-service : no listener specified for topic : "+r);(n[r]||(n[r]=new s(r,t))).addConsumer(e,i,o,n)},s.removeTopicListener=u,s.removeAllTopicListeners=function(e,t){var n=e[t];n&&(n.removeAllConsumers(),delete e[t])},s}(a)}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(1))},function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,c,"next",e)}function c(e){n(a,i,o,s,c,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r,i,o,a,s;a=this,s=function(){var e=function(e,t){return new RegExp(e,t||"i")},t="iP(?:hone|ad|od)",n="(?:BlackBerry|BB10| RIM )",r="Windows",i=r+" Phone",o="Trident(?:.*?Touch(?:.*?Mobile))",a="Linux(?!.*Android)",s="Macintosh",c="CrOS",u="(?:"+[s,r,a,c].join("|")+")",l=/[\._]/,p={windowsphone:e(o+"|"+i+"|WPDesktop"),windows:e(r),ios:e(t),blackberry:e(n),android:e("Android"),linux:e(a),macintosh:e(s),chromebook:e(c)},d={desktop:/(?:Windows NT(?!.*WPDesktop)(?!.*Xbox))/i,tablet:e("("+["Tablet|iPad","\\sNT.*?"+o,"Android(?!.*Mobi)","silk",n+".*?Tablet","xbox"].join("|")+")"),phone:e("("+["Mobi|Mobile","WPDesktop",t,o,n].join("|")+")")},y={tablet:e("("+["Tablet|iPad","\\sNT.*?"+o,"Android(?!.*Mobi)","silk",n+".*?Tablet"].join("|")+")"),phone:e("("+["Mobi|Mobile",t,o,n].join("|")+")"),desktop:e(u)},f={msie:/msie|iemobile|trident/i,edge:/edge/i,android:/android(?!.+(?:chrome|silk))/i,chrome:/chrome|crios/i,firefox:/firefox/i,opera:/opera(?!.*?mini)\//i,operamini:/opera mini/i,silk:/silk/i,safari:/safari/i},h={webkit:/AppleWebKit/i,gecko:/gecko\//i,trident:/trident/i,edge:/Edge/i},v={desktop:"desktop",other:"desktop",phone:"phone",tablet:"tablet"},g={};function m(e){var t=e.split(l).slice(0,3);return e&&t.length<2&&t.push(0),t.join(".")}function b(e){return e=e||navigator.userAgent,g[e]?g[e]:this instanceof b?(g[e]=this,this.userAgent=e,this.is={},this.platform=this.getPlatform(),this.platformVersion=this.getPlatformVersion(),this.browser=this.getBrowser(),this.browserVersion=this.getBrowserVersion(),void(this.formFactor=this.getFormFactor())):new b(e)}return b.prototype={getPlatform:function(){return this.test(p)||"desktop"},getPlatformVersion:function(){return m(this.match(e("(?:"+(this.is.blackberry?"version":this.platform)+"|"+i+"|OS)[^\\d]+([\\d\\.\\_]+)","ig"),1))},getBrowser:function(){return this.test(h),this.test(f)||"desktop"},getFormFactor:function(){var e="";return e=this.is.msie?d:y,v[this.test(e)]||v.other},getBrowserVersion:function(){var t=this.browser,n="[\\/\\s]";return this.is.chrome&&this.is.ios?t="crios":this.is.opera?t="version":this.is.msie&&(t+="|IEMobile|rv",n="[\\/\\:\\s]"),m(this.match(e("(?:"+t+"|version)"+n+"([\\d\\.]+)","i"),1))},match:function(e,t){return function(e,t){return e&&t?e[t]:e}(e.exec(this.userAgent),t)||""},test:function(e){var t,n,r,i=this.userAgent;for(t in e)n=e[t].test(i),this.is[t]=this.is[t]||n&&!r,n&&!r&&(r=t);return r}},b},"undefined"==typeof bam||"function"!=typeof bam.define?(i=[],void 0===(o="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=o)):a.deviceBootstrap=s()},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"_functionName",(function(){return a})),n.d(t,"deepGet",(function(){return c})),n.d(t,"deepGetOfType",(function(){return u}));var r=n(0),i=n.n(r),o={array:[],function:function(){},string:"",boolean:!1,number:0,object:{}};function a(e){var t=/^\s*function\s+([\w$]+)\s*\(/.exec(e.toString());return t?t[1]:""}function s(e,t){return void 0!==t?t:o[e]}function c(e,t,n){return t.replace(/\[/g,".").replace(/]/g,"").split(".").filter(Boolean).some((function(t){return!(t&&null!=e&&void 0!==(e=e[t]))}))?n:e}function u(e,t,n,r){var o=c(e,t,r),u="function"==typeof n?a(n).toLowerCase():n;if("string"===u){if("string"==typeof o||o instanceof String)return o}else if("number"===u){if("number"==typeof o||o instanceof Number)return o}else if("boolean"===u){if("boolean"==typeof o||o instanceof Boolean)return o}else if("function"===u){if("function"==typeof o||o instanceof Function)return o}else{if("object"===u)return"object"===i()(o)&&null!==o?o:s(u,r);if(o instanceof n)return o}return s(u,r)}}])},function(e,t,n){var r;void 0===(r=function(){var e={},t=new RegExp("([^&\\?]+?)=([^&]*)","ig"),n=decodeURIComponent,r={true:!0,false:!1,null:null};function i(e){var t;return"string"==typeof e&&(t=isNaN(e)?e in r?r[e]:e:parseFloat(e)),t}return e.Location=function(t){var n=(t=function(e){for(var t=["constructor","hash","host","hostname","href","origin","pathname","port","protocol","search"],n={},r=0,i=t.length;r<i;r++)n[t[r]]=e?e[t[r]]:window.location[t[r]];return n.toString=function(){return this.href},n}(t)).search||"",r=e.parseQueryParameters(n);return t.getParam=function(e){return e+""in r?r[e]:null},t.getParams=function(t){return e.parseQueryParameters(n,t)},t.isSecure=function(){return/^https/i.test(t.protocol)},t.getDomain=function(){var e=t.hostname.split(".");return e[e.length-2]},t},e.parseQueryParameters=function(e,r){e=e||window.location.search,r=void 0!==r&&r;var o,a,s={};return"string"==typeof e&&n(e).replace(t,(function(){o=arguments[1],a=r?i(n(arguments[2])):n(arguments[2]),o in s?Array.isArray(s[o])?s[o].push(a):s[o]=[s[o],a]:s[o]=a})),s},e.parseEncodedQueryParameters=function(e,r){e=e||window.location.search,r=void 0!==r&&r;var o,a,s={};return"string"==typeof e&&e.replace(t,(function(){o=arguments[1],a=r?i(n(arguments[2])):n(arguments[2]),o in s?Array.isArray(s[o])?s[o].push(a):s[o]=[s[o],a]:s[o]=a})),s},e.parseFragmentIdentifiers=function(t,n){var r=(t=t||window.location.hash).substring(t.indexOf("#")+1);return e.parseQueryParameters(r,n)},e}.apply(t,[]))||(e.exports=r)},function(e,t,n){(function(t){t.bamShared||(t.bamShared={}),e.exports=t.bamShared.bamBrowserSDK=n(16)}).call(this,n(1))},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,n)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function p(e,t,n,r){var i,o,a,s;if(u(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(e))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=d.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):v(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,l=v(c,u);for(n=0;n<u;++n)o(l[n],this,t)}return!0},s.prototype.addListener=function(e,t){return p(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return p(this,e,t,!0)},s.prototype.once=function(e,t){return u(t),this.on(e,y(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,y(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,a;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},s.prototype.listenerCount=h,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){var r,i,o;i=[n(17)],void 0===(o="function"==typeof(r=function(e){"use strict";var t,n={global:{}},r={};function i(){o()}var o=function(){};return i.prototype={registerEvents:function(e,t){e?n[e]?this.merge(t,e):n[e]=t:this.merge(t,e)},merge:function(e,t){for(var r in e)e.hasOwnProperty(r)&&(n[t||"global"][r]=e[r])},deleteEventsByKey:function(e){e&&n[e]?delete n[e]:console.log("bandwagon: specified namespace does not exist in events cache to delete",e)},getRegisteredEvents:function(){return n},getRegisteredEventsByKey:function(e){var t;return e&&n[e]?t=n[e]:console.log("please provide valid event key you want to retrieve from the events cache",e),t},getInstanceByKey:function(t){return t&&!r[t]?r[t]=e.create():r[t]},getInstancesAvailable:function(){return r},deleteInstanceByKey:function(e){e&&r[e]?delete r[e]:console.log("bandwagon: specified key does not exist in cache to delete",e)}},t=t||new i})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Location",(function(){return s})),n.d(t,"parseQueryParameters",(function(){return c})),n.d(t,"parseEncodedQueryParameters",(function(){return u})),n.d(t,"parseFragmentIdentifiers",(function(){return l}));var r=new RegExp("([^&\\?]+?)=([^&]*)","ig"),i=decodeURIComponent,o={true:!0,false:!1,null:null};function a(e){var t=void 0;return"string"==typeof e&&(t=isNaN(e)?e in o?o[e]:e:parseFloat(e)),t}function s(e){var t=(e=function(e){for(var t=["constructor","hash","host","hostname","href","origin","pathname","port","protocol","search"],n={},r=0,i=t.length;r<i;r++)n[t[r]]=e?e[t[r]]:window.location[t[r]];return n.toString=function(){return this.href},n}(e)).search||"",n=c(t);return e.getParam=function(e){return""+e in n?n[e]:null},e.getParams=function(e){return c(t,e)},e.isSecure=function(){return/^https/i.test(e.protocol)},e.getDomain=function(){var t=e.hostname.split(".");return t[t.length-2]},e}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},o=void 0,s=void 0;return"string"==typeof e&&e.replace(r,(function(){o=arguments[1],s=t?a(i(arguments[2])):i(arguments[2]),o in n?Array.isArray(n[o])?n[o].push(s):n[o]=[n[o],s]:n[o]=s})),n}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},o=void 0,s=void 0;return"string"==typeof e&&e.replace(r,(function(){o=arguments[1],s=t?a(i(arguments[2])):i(arguments[2]),o in n?Array.isArray(n[o])?n[o].push(s):n[o]=[n[o],s]:n[o]=s})),n}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.hash,t=arguments[1];return c(e.substring(e.indexOf("#")+1),t)}}])},function(e,t,n){console.log("site-core: desktop"),n(21)},function(e,t,n){var r=n(15).default;function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=i=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",p=c.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(t){d=function(e,t,n){return e[t]=n}}function y(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,o=Object.create(i.prototype),a=new O(r||[]);return s(o,"_invoke",{value:C(e,n,a)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=y;var h="suspendedStart",v="executing",g="completed",m={};function b(){}function T(){}function k(){}var S={};d(S,u,(function(){return this}));var P=Object.getPrototypeOf,E=P&&P(P(I([])));E&&E!==o&&a.call(E,u)&&(S=E);var Z=k.prototype=b.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function n(i,o,s,c){var u=f(e[i],e,o);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==r(p)&&a.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,c)}))}c(u.arg)}var i;s(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}})}function C(e,n,r){var i=h;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=A(s,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var u=f(e,n,r);if("normal"===u.type){if(i=r.done?g:"suspendedYield",u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=g,r.method="throw",r.arg=u.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=f(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(a.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(r(e)+" is not iterable")}return T.prototype=k,s(Z,"constructor",{value:k,configurable:!0}),s(k,"constructor",{value:T,configurable:!0}),T.displayName=d(k,p,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===T||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,d(e,p,"GeneratorFunction")),e.prototype=Object.create(Z),e},n.awrap=function(e){return{__await:e}},w(D.prototype),d(D.prototype,l,(function(){return this})),n.AsyncIterator=D,n.async=function(e,t,r,i,o){void 0===o&&(o=Promise);var a=new D(y(e,t,r,i),o);return n.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(Z),d(Z,p,"Generator"),d(Z,u,(function(){return this})),d(Z,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=I,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},n}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r;"undefined"!=typeof self&&self,r=function(){return function(){var e={87757:function(e,t,n){e.exports=n(35666)},27124:function(e){var t={},n={};[{n:"undefined",f:l,s:"be undefined"},{n:"null",f:function(e){return null===e},s:"be null"},{n:"assigned",f:p,s:"be assigned"},{n:"primitive",f:function(e){switch(e){case null:case void 0:case!1:case!0:return!0;default:return"string"==typeof e||"number"==typeof e||a&&"symbol"==typeof e}},s:"be primitive type"},{n:"contains",f:D,s:"contain {e}"},{n:"in",f:function(e,t){return D(t,e)},s:"be in {e}"},{n:"containsKey",f:C,s:"contain key {e}"},{n:"keyIn",f:function(e,t){return C(t,e)},s:"be key in {e}"},{n:"infinity",f:function(e){return e===Number.NEGATIVE_INFINITY||e===Number.POSITIVE_INFINITY},s:"be infinity"},{n:"number",f:d,s:"be Number"},{n:"integer",f:y,s:"be integer"},{n:"float",f:function(e){return d(e)&&e%1!=0},s:"be non-integer number"},{n:"even",f:function(e){return y(e)&&e%2==0},s:"be even number"},{n:"odd",f:function(e){return y(e)&&e%2!=0},s:"be odd number"},{n:"greater",f:f,s:"be greater than {e}"},{n:"less",f:h,s:"be less than {e}"},{n:"between",f:function(e,t,n){return t<n?f(e,t)&&e<n:h(e,t)&&e>n},s:"be between {e} and {e2}"},{n:"greaterOrEqual",f:v,s:"be greater than or equal to {e}"},{n:"lessOrEqual",f:g,s:"be less than or equal to {e}"},{n:"inRange",f:function(e,t,n){return t<n?v(e,t)&&e<=n:g(e,t)&&e>=n},s:"be in the range {e} to {e2}"},{n:"positive",f:function(e){return f(e,0)},s:"be positive number"},{n:"negative",f:function(e){return h(e,0)},s:"be negative number"},{n:"string",f:m,s:"be String"},{n:"emptyString",f:function(e){return m(e)&&""===e},s:"be empty string"},{n:"nonEmptyString",f:b,s:"be non-empty string"},{n:"match",f:function(e,t){return m(e)&&S(t,RegExp)&&!!e.match(t)},s:"match {e}"},{n:"boolean",f:function(e){return P(e,Boolean)},s:"be Boolean"},{n:"object",f:T,s:"be Object"},{n:"emptyObject",f:function(e){return T(e)&&!k(e,(function(){return!0}))},s:"be empty object"},{n:"nonEmptyObject",f:function(e){return T(e)&&k(e,(function(){return!0}))},s:"be non-empty object"},{n:"inheritance",f:function(e,t){try{return p(e)&&e.prototype instanceof t}catch(e){return!1}},s:"inherit from {t}"},{n:"instanceStrict",f:S,s:"be instanceof {t}"},{n:"thenable",f:function(e){return p(e)&&A(e.then)},s:"be promise-like"},{n:"instance",f:P,s:"be {t}"},{n:"like",f:E,s:"be like {e}"},{n:"array",f:function(e){return Array.isArray(e)},s:"be Array"},{n:"emptyArray",f:function(e){return Array.isArray(e)&&0===e.length},s:"be empty array"},{n:"nonEmptyArray",f:function(e){return Array.isArray(e)&&e.length>0},s:"be non-empty array"},{n:"arrayLike",f:Z,s:"be array-like"},{n:"iterable",f:w,s:"be iterable"},{n:"date",f:function(e){return S(e,Date)&&y(e.getTime())},s:"be valid Date"},{n:"function",f:A,s:"be Function"},{n:"hasLength",f:function(e,t){return p(e)&&d(t)&&e.length===t},s:"have length {e}"},{n:"throws",f:function(e){if(!A(e))return!1;try{e()}catch(e){return!0}return!1},s:"throw"},{n:"arrayBuffer",f:function(e){return u&&S(e,ArrayBuffer)},s:"be ArrayBuffer"},{n:"arrayBufferView",f:function(e){return u&&ArrayBuffer.isView(e)},s:"be ArrayBufferView"}].forEach((function(e){var r=e.n;t[r]="assert failed: expected {a} to "+e.s,n[r]=e.f}));var r=U(M,L),i=U(N,B),o=U((function(e){var t=function(){return!!i.assigned(arguments[0])||e.apply(null,arguments)};return t.l=e.length,t.m=!0,t}),(function(e){return!1===p(e)||e}));r.not=K(M,i,"not "),r.maybe=K(M,o,"maybe "),["array","arrayLike","iterable","object"].forEach((function(e){n[e].of=q([_.bind(null,null),n[e],n,{},""]),r[e].of=K(M,n[e].of),i[e].of=K(N,n[e].of),o[e].of=q([_.bind(null,"maybe"),n[e],n,{},""]),r.maybe[e].of=K(M,o[e].of),r.not[e].of=K(M,i[e].of)}));var a="function"==typeof Symbol,s="function"==typeof Map,c="function"==typeof Set,u="undefined"!=typeof ArrayBuffer;function l(e){return void 0===e}function p(e){return null!=e}function d(e){return P(e,Number)&&e>Number.NEGATIVE_INFINITY&&e<Number.POSITIVE_INFINITY}function y(e){return d(e)&&e%1==0}function f(e,t){return d(e)&&d(t)&&e>t}function h(e,t){return d(e)&&d(t)&&e<t}function v(e,t){return d(e)&&d(t)&&e>=t}function g(e,t){return d(e)&&d(t)&&e<=t}function m(e){return P(e,String)}function b(e){return m(e)&&""!==e}function T(e){return"[object Object]"===Object.prototype.toString.call(e)}function k(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n]))return!0;return!1}function S(e,t){try{return e instanceof t}catch(e){return!1}}function P(e,t){try{return S(e,t)||e.constructor.name===t.name||Object.prototype.toString.call(e)==="[object "+t.name+"]"}catch(e){return!1}}function E(e,t){var n=p(e),r=p(t);if(!n&&r||n&&!r)return!1;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(!1===Object.prototype.hasOwnProperty.call(e,i)||typeof e[i]!=typeof t[i])return!1;if(T(e[i])&&!1===E(e[i],t[i]))return!1}return!0}function Z(e){return p(e)&&e.length>=0}function w(e){return a?p(e)&&A(e[Symbol.iterator]):Z(e)}function D(e,t){if(!p(e))return!1;if(c&&S(e,Set))return e.has(t);if(m(e))return-1!==e.indexOf(t);if(a&&e[Symbol.iterator]&&A(e.values)){var n,r=e.values();do{if((n=r.next()).value===t)return!0}while(!n.done);return!1}return k(e,(function(e,n){return n===t}))}function C(e,t){return!!p(e)&&(s&&S(e,Map)?e.has(t):!(w(e)&&!d(+t))&&Object.prototype.hasOwnProperty.call(e,t))}function A(e){return"function"==typeof e}function R(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function x(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return t;return!t}function O(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];if(T(r)&&O(r,t)===t)return t;if(r===t)return t}return!t}function I(e,t){return R(t,(function(t,n){e[t]=n})),e}function M(e,t){return function(){var n=arguments,r=e.l||e.length,i=n[r],o=n[r+1];return L(e.apply(null,n),b(i)?i:t.replace("{a}",j(n[0])).replace("{e}",j(n[1])).replace("{e2}",j(n[2])).replace("{t}",(function(){var e=n[1];return e&&e.name?e.name:e})),A(o)?o:TypeError),n[0]}}function j(e){return function(){return m(e)?'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"':e&&!0!==e&&e.constructor&&!S(e,RegExp)&&"number"!=typeof e?e.constructor.name:e}}function L(e,t,n){if(e)return e;throw new(n||Error)(t||"assert failed")}function N(e){var t=function(){return B(e.apply(null,arguments))};return t.l=e.length,t}function B(e){return!e}function _(e,t,n){var r=function(){var r=arguments[0];if("maybe"===e&&i.assigned(r))return!0;if(!t(r))return!1;r=F(t,r);var o=Array.prototype.slice.call(arguments,1);try{if(Array.isArray(r))for(var a=0;a<r.length;a++){var s=r[a];if(("maybe"!==e||p(s)&&n!==l)&&!n.apply(null,[s].concat(o)))throw Error}else r.forEach((function(t){if(("maybe"!==e||p(t))&&!n.apply(null,[t].concat(o)))throw Error}))}catch(e){return!1}return!0};return r.l=n.length,r}function F(e,t){switch(e){case Z:return Array.prototype.slice.call(t);case T:return Object.keys(t).map((function(e){return t[e]}));default:return t}}function U(e,t){return q([e,n,t,""])}function q(e){var n=e.shift(),r=e.pop(),i=e.pop();return R(e.pop(),(function(o,a){var s=t[o];s&&r&&(s=s.replace("to",r+"to")),Object.defineProperty(i,o,{configurable:!1,enumerable:!0,writable:!1,value:n.apply(null,e.concat(a,s))})})),i}function K(e,t,n){return q([e,t,{},n])}var V=I({map:function e(t,n){var o;if(o=Array.isArray(t)?[]:{},A(n))R(t,(function(e,t){o[e]=n(t)}));else{!1===Array.isArray(n)&&r.object(n);var a=Object.keys(t||{});R(n,(function(n,r){a.some((function(e,t){return e===n&&(a.splice(t,1),!0)})),A(r)?i.assigned(t)?o[n]=!!r.m:o[n]=r(t[n]):o[n]=e(t[n],r)}))}return o},all:function(e){return Array.isArray(e)?x(e,!1):(r.object(e),O(e,!1))},any:function(e){return Array.isArray(e)?x(e,!0):(r.object(e),O(e,!0))}},n),H=I(V,{assert:r,not:i,maybe:o});e.exports={Check:H}},67682:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49735);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}))},41866:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var r=n(27124),i=n(37415);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),r)}var i,a}var s,c,u=TypeError,l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"DefaultError",get:function(){return u}},{key:"ErrorType",get:function(){return s},set:function(e){if(!r.Check.instance(e.prototype,Error))throw TypeError("Config.ErrorType expected a Type that inherits from Error.");s=e}},{key:"logger",get:function(){return c},set:function(e){c=new i.Logger(e)}},{key:"setup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.Check.not.object(t)||(r.Check.assigned(t.ErrorType)&&(e.ErrorType=t.ErrorType),r.Check.assigned(t.logger)&&(e.logger=t.logger))}},{key:"reset",value:function(){e.resetErrorType(),e.resetLogger()}},{key:"resetErrorType",value:function(){e.ErrorType=u}},{key:"resetLogger",value:function(){e.logger=console}}],(n=null)&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Config=l,l.reset()},49735:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(27124);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=n(41866);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var o=n(47167);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=n(78222);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}))},37415:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var r=n(27124);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}var s,c,u,l,p,d,y=(s=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a;r.Check.function(t[e])?t[e].apply(t,i):(a=console)[e].apply(a,i)};e.methods.forEach((function(e){(r.Check.not.assigned(t)||r.Check.not.function(t[e]))&&console.warn('Provided logger is missing the expected "'.concat(e,'" function, falling back to console.')),n[e]=i.bind(null,e)}))},c&&o(s.prototype,c),u&&o(s,u),Object.defineProperty(s,"prototype",{writable:!1}),s);t.Logger=y,l=y,d=["warn"],(p=a(p="methods"))in l?Object.defineProperty(l,p,{value:d,enumerable:!0,configurable:!0,writable:!0}):l[p]=d},97410:function(e,t){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.buildExpectedMessage=function(e){var t,r=e.type,i=e.expectedArgs,o=void 0===i?[]:i,a=e.message,s=r.toString.apply(r,[a].concat(function(e){if(Array.isArray(e))return n(e)}(t=o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()));return"expected ".concat(s)}},93055:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildReceivedMessage=function(e){var t=(0,r.getValueName)(e,{includeTypeName:!0});return"but received ".concat(t)};var r=n(45350)},88871:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97410);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=n(93055);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var o=n(20632);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=n(59274);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=n(47698);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var c=n(1815);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}))},20632:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageBuilder=void 0;var r=n(47698),i=n(97410),o=n(93055);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),r)}var i,o}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.methodSignature=t,this.param=null}var t,n,a;return t=e,(n=[{key:"setCurrentParam",value:function(e,t){this.param=this.methodSignature.findParam(e,t)}},{key:"setParentParams",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==this.param)throw ReferenceError("setParentParams(...) this.param is null. Call setCurrentParam() before.");return this.param.params=new r.Params(e,{parent:this.param}),this.param.isArray=t,this.param}},{key:"buildCustomMessage",value:function(e){return"".concat(this.methodSignature," ").concat(e,".")}},{key:"buildMessage",value:function(e){var t=e.value,n=(0,i.buildExpectedMessage)(e),r=(0,o.buildReceivedMessage)(t);return"".concat(this.methodSignature," ").concat(this.param," ").concat(n).concat(this.param.extension," ").concat(r,".")}}])&&s(t.prototype,n),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.MessageBuilder=c},59274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MethodSignature=void 0;var r=n(27124),i=n(67590),o=n(47698);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),r)}var i,o}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.object,r=void 0===n?null:n,a=t.method,s=void 0===a?null:a,c=t.objParams,u=void 0===c?null:c,l=t.displayBrackets,p=void 0!==l&&l,d=(0,i.hasSuperclass)(r)&&null==s;this.object=r,this.method=s,this.params=new o.Params(u,{displayEtcetera:d,displayBrackets:p})}var t,n,a;return t=e,(n=[{key:"name",get:function(){var e,t=(0,i.getTypeToString)(this.object,""),n=(0,i.getTypeToString)(this.method,"");return e=r.Check.nonEmptyString(t)&&r.Check.nonEmptyString(n)?".":"","".concat(t).concat(e).concat(n)}},{key:"parameters",get:function(){var e="",t="";return r.Check.nonEmptyString(this.name)?(e="(",t=")"):this.params.length>0&&(e="{",t="}"),"".concat(e).concat(this.params).concat(t)}},{key:"findParam",value:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null!==(t=null==n?void 0:n.params)&&void 0!==t?t:this.params,a=null,s=0;s<i.length&&(a=i.get(s),r.Check.instanceStrict(a,o.Params)&&(a=this.findParam(e,n,a)),null==a||a.name!==e||a.parent!==n);s++);if(null==a)throw ReferenceError("findParam(...) not able to find param: ".concat(e,"."));return a}},{key:"toString",value:function(){return"".concat(this.name).concat(this.parameters)}}])&&s(t.prototype,n),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.MethodSignature=c},1815:function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Param=void 0;var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.name,r=t.parent,i=void 0===r?null:r,o=t.isOptional,a=void 0!==o&&o;this.name=n,this.parent=i,this.isOptional=a,this.isArray=!1,this.params=null}var t,n,i;return t=e,(n=[{key:"isRequired",get:function(){return!1===this.isOptional}},{key:"isNonRequired",get:function(){return this.isOptional}},{key:"extension",get:function(){return this.isOptional?" or null or undefined":""}},{key:"toString",value:function(){var e=null!=this.parent?"".concat(this.parent.name,"."):"";return"".concat(e).concat(this.name)}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Param=i},47698:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;var r=n(27124),i=n(1815);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),r)}var i,a}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=null!=n?n:{},o=i.parent,a=i.displayEtcetera,s=void 0!==a&&a,c=i.displayBrackets,u=void 0!==c&&c;r.Check.object(t)?this.params=e.toArray(t,o):this.params=[],this.displayBrackets=u,this.displayEtcetera=s,this.atLeastOne=!1}var t,n,o;return t=e,o=[{key:"toArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null==e?[]:Object.keys(e).map((function(n){var r=e[n].isOptional;return new i.Param({name:n,parent:t,isOptional:r})}))}}],(n=[{key:"length",get:function(){return this.params.length}},{key:"isSomeParamRequired",get:function(){return this.params.some((function(e){return e.isRequired}))}},{key:"isEveryParamNonRequired",get:function(){return this.length>0&&this.params.every((function(e){return e.isNonRequired}))}},{key:"map",value:function(e){return this.params.map(e)}},{key:"get",value:function(e){return this.params[e]}},{key:"toString",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params,n=t.map((function(t){return e.stringify(t)})),r=this.displayBrackets&&this.atLeastOne?"{":"",i=this.displayBrackets&&this.atLeastOne?"}":"";return"".concat(r).concat(n.join(", ")).concat(i)}},{key:"stringify",value:function(e){if(r.Check.not.assigned(e.params))return"".concat(e.name);var t=this.displayEtcetera?", ...":"",n=e.isArray?"[":"",i=e.isArray?"]":"",o=this.toString(e.params);return"".concat(n,"{").concat(o).concat(t,"}").concat(i)}}])&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Params=s},10642:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30908);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=n(64294);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},64294:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.TypeCheckerAtLeastOne=void 0;var i=n(27124),o=n(67590);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===r(a)?a:String(a)),i)}var o,a}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=c(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(p,e);var t,n,r,c=l(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=c.call(this,e)).messageBuilder.methodSignature.params.atLeastOne=!0,t}return t=p,(n=[{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(d(p.prototype),"execute",this).call(this,e);var t=e.userData,n=void 0===t?this.userArguments:t,r=e.objParams,a=void 0===r?this.objParams:r,c=!1;if(Object.keys(a).forEach((function(e,t){var r=(0,o.getValue)(n,t,e);i.Check.assigned(r)&&(c=!0)})),!1===c){var u=this.messageBuilder.buildCustomMessage("at least one parameter must be provided");throw new this.ErrorType(u)}}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(n(30908).TypeChecker);t.TypeCheckerAtLeastOne=y},30908:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeChecker=void 0;var r=n(41866),i=n(67590);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),r)}var i,a}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.messageBuilder,i=t.userArguments,o=t.objParams,a=t.ErrorType,s=void 0===a?r.Config.ErrorType:a,c=t.signature,u=t.loggingFunc;this.messageBuilder=n,this.userArguments=i,this.objParams=o,this.ErrorType=s,this.signature=c,this.loggingFunc=u}var t,n,o;return t=e,(n=[{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.userData,r=void 0===n?this.userArguments:n,o=t.objParams,a=void 0===o?this.objParams:o,s=t.parent;Object.keys(a).forEach((function(t,n){var o=a[t];e.messageBuilder.setCurrentParam(t,s),o((0,i.getValue)(r,n,t),e)}))}}])&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.TypeChecker=s},78222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(57578);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=n(51457);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var o=n(90371);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},90371:function(e,t,n){"use strict";var r=n(10642),i=n(57578),o=n(53921);i.typecheck.atLeastOne=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=(0,o.validateArguments)(t,"typecheck.atLeastOne"),a=new r.TypeCheckerAtLeastOne(i);a.execute()}},57578:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typecheck=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=(0,i.validateArguments)(t),a=new r.TypeChecker(o);a.execute()};var r=n(10642),i=n(53921)},51457:function(e,t,n){"use strict";var r=n(10642),i=n(53921);n(57578).typecheck.warn=function(){for(var e="warn",t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=(0,i.validateArguments)(n,"typecheck.".concat(e)),s=new r.TypeChecker(a);s.loggingFunc=e,s.execute()}},24584:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.composeOverloading=function(e){var t,n,o,a,s,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"typecheck",u="".concat(c,"(...)");switch(e.length){case 5:var l=i(e,5);t=l[0],n=l[1],o=l[2],a=l[3],s=l[4];break;case 4:if(r.Check.inheritance(e[3],Error))if(r.Check.function(e[0])||r.Check.string(e[0])){var p=i(e,4);n=p[0],o=p[1],a=p[2],s=p[3]}else{var d=i(e,4);t=d[0],o=d[1],a=d[2],s=d[3]}else{var y=i(e,4);t=y[0],n=y[1],o=y[2],a=y[3]}break;case 3:if(r.Check.inheritance(e[2],Error)){var f=i(e,3);o=f[0],a=f[1],s=f[2]}else if(r.Check.function(e[0])||r.Check.string(e[0])){var h=i(e,3);n=h[0],o=h[1],a=h[2]}else{var v=i(e,3);t=v[0],o=v[1],a=v[2]}break;case 2:var g=i(e,2);o=g[0],a=g[1];break;default:var m=i(e,1);o=m[0]}return{signature:u,object:t,method:n,c:o,d:a,ErrorType:s}};var r=n(27124);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},53921:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24584);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=n(62810);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var o=n(77778);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},62810:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUserInput=function(e){return r.Check.arrayLike(e)&&r.Check.not.string(e)||r.Check.object(e)};var r=n(27124)},77778:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateArguments=function(e,t){var n=(0,o.composeOverloading)(e,t),a=n.signature,s=n.object,c=n.method,u=n.c,l=n.d,p=n.ErrorType,d=(0,i.getUserArgumentsType)(l);if(d===i.UserArgumentsType.none)throw TypeError("".concat(a," arguments expected an Array or an Object. Make sure you invoke typecheck correctly."));var y=d===i.UserArgumentsType.object,f=new r.MethodSignature({object:s,method:c,objParams:u,displayBrackets:y}),h=new r.MessageBuilder(f);return{signature:a,messageBuilder:h,objParams:u,userArguments:l,ErrorType:p}};var r=n(88871),i=n(67590),o=n(24584)},34718:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Asserts=void 0;var r=n(69870),i=n(67590),o=n(43388),a=[{assertName:"array",singular:"an Array",plural:"arrays",expectArgs:!1,isArrayable:!1,validateCreator:r.genericValidateCreator},{assertName:"arrayBuffer",singular:"an ArrayBuffer",plural:"arrayBuffers",expectArgs:!1,isArrayable:!1,validateCreator:r.genericValidateCreator},{assertName:"arrayBufferView",singular:"an ArrayBufferView",plural:"arrayBufferViews",expectArgs:!1,isArrayable:!1,validateCreator:r.genericValidateCreator},{assertName:"assigned",singular:"an assigned value",plural:"assigned values",expectArgs:!1,isArrayable:!1,validateCreator:r.genericValidateCreator},{assertName:"boolean",singular:"a Boolean",plural:"booleans",expectArgs:!1,isArrayable:!1,validateCreator:r.genericValidateCreator},{assertName:"custom",expectArgs:!0,isArrayable:!1,validateCreator:r.customValidateCreator},{assertName:"date",singular:"a Date",plural:"dates",expectArgs:!1,isArrayable:!1,validateCreator:r.genericValidateCreator},{assertName:"dateString",singular:"a String in ISO date format",plural:"strings in ISO date format",expectArgs:!1,isArrayable:!1,validateCreator:r.genericValidateCreator,validator:o.dateStringValidator},{assertName:"function",singular:"a Function",plural:"functions",expectArgs:!1,isArrayable:!1,validateCreator:r.genericValidateCreator},{assertName:"greaterOrEqual",singular:"a Number greater or equal to {a}",plural:"numbers greater or equal to {a}",expectArgs:!0,isArrayable:!1,validateCreator:r.genericValidateCreator},{assertName:"in",singular:"one of [{a}]",plural:"one of [{a}]",expectArgs:!0,isArrayable:!0,stringifyArgs:i.stringifyValues,validateCreator:r.genericValidateCreator},{assertName:"inheritance",arrayLike:"inheritance",singular:"a type that inherits from {a}",plural:"types that inherit from {a}",expectArgs:!0,isArrayable:!0,stringifyArgs:i.getTypeToString,validateCreator:r.genericValidateCreator},{assertName:"instanceStrict",singular:"an instance of {a}",plural:"instances of {a}",expectArgs:!0,isArrayable:!0,stringifyArgs:i.getTypeToString,validateCreator:r.genericValidateCreator},{assertName:"integer",singular:"an integer",plural:"integers",expectArgs:!1,isArrayable:!1,validateCreator:r.genericValidateCreator},{assertName:"keyIn",singular:"as a key in [{a}]",plural:"as keys in [{a}]",expectArgs:!0,isArrayable:!1,stringifyArgs:i.stringifyKeys,validateCreator:r.genericValidateCreator},{assertName:"like",singular:"an Object that matches {{a}}",plural:"objects that match {{a}}",expectArgs:!0,isArrayable:!1,stringifyArgs:i.stringifyKeys,validateCreator:r.genericValidateCreator},{assertName:"match",singular:"a String that matches /{a}/",plural:"strings that match /{a}/",expectArgs:!0,isArrayable:!1,stringifyArgs:i.stringifyRegExp,validateCreator:r.genericValidateCreator},{assertName:"nonEmptyObject",singular:"a non-empty Object",plural:"non-empty objects",expectArgs:!1,isArrayable:!0,validateCreator:r.genericValidateCreator},{assertName:"nonEmptyString",singular:"a non-empty String",plural:"non-empty strings",expectArgs:!1,isArrayable:!0,validateCreator:r.genericValidateCreator},{assertName:"number",singular:"a Number",plural:"numbers",expectArgs:!1,isArrayable:!0,validateCreator:r.genericValidateCreator},{assertName:"object",singular:"an Object",plural:"objects",expectArgs:!0,isArrayable:!0,validateCreator:r.objectValidateCreator},{assertName:"positive",singular:"a Number greater than 0",plural:"numbers greater than 0",expectArgs:!1,isArrayable:!1,validateCreator:r.genericValidateCreator},{assertName:"skip",singular:"a value",expectArgs:!1,isExtensible:!1,isArrayable:!1,validateCreator:r.skipValidateCreator},{assertName:"string",singular:"a String",plural:"strings",expectArgs:!1,isArrayable:!0,validateCreator:r.genericValidateCreator}];t.Asserts=a},29022:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTypes=function e(t){var n={};return i.Asserts.forEach((function(i){var a=i.assertName,s=i.isArrayable;if(!t||!1!==s){var u=new o.Type(a,c(c({},i),{},{isArray:t}));if((0,r.defineProperty)(n,a,u.createValidator()),"array"===a){if(t)return;(0,r.defineProperty)(n.array,"of",e(!0))}}})),n};var r=n(75751),i=n(34718),o=n(56173);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},56173:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Type=void 0;var r=n(79907);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),r)}var o,a}var s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var i=null!=n?n:{},a=i.assert,s=void 0===a?t:a,c=i.singular,u=void 0===c?t:c,l=i.plural,p=void 0===l?"".concat(t,"s"):l,d=i.isArray,y=void 0!==d&&d,f=i.expectArgs,h=void 0!==f&&f,v=i.isExtensible,g=void 0===v||v,m=i.isArrayable,b=void 0===m||m,T=i.autoDisplayArgs,k=void 0===T||T,S=i.firstType,P=i.validator,E=i.operator,Z=i.validateCreator,w=void 0===Z?function(){return!1}:Z,D=i.stringifyArgs,C=void 0===D?function(e){return(0,r.stringify)(e)}:D;this.name=t,this.assert=s,this.plural=p,this.isArray=y,this.singular=y?"an Array of ".concat(this.plural):u,this.firstType=S,this.validator=P,this.expectArgs=!!h,this.isExtensible=!!g,this.isArrayable=!!b,this.autoDisplayArgs=!!k,this.operator=E,this.validateCreator=w,this.stringifyArgs=C}var t,n,i;return t=e,(n=[{key:"createValidator",value:function(){return this.expectArgs?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.validateCreator.apply(this,[this].concat(t))}.bind(this):this.validateCreator(this)}},{key:"toString",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.name,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if("custom"===this.name)return t;var o=this.singular;if(/{[a-k]}/.test(o))["a","b","c","d","e","f"].forEach((function(t,n){var i=r[n];if(void 0!==i){var a=e.stringifyArgs(i);o=o.replace(new RegExp("{".concat(t,"}"),"i"),a).trim()}else o=o.replace(new RegExp("{".concat(t,"}"),"i"),"").trim()}));else if(this.autoDisplayArgs&&r.length>0){var a=r.map((function(t){return"".concat(e.stringifyArgs(t))})).join();o+=": ".concat(a)}return o}}])&&a(t.prototype,n),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Type=s},47167:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Types=void 0;var r=(0,n(29022).createTypes)();t.Types=r},57475:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dateStringValidator=function(e){return n.test(e)};var n=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([.,]\d+(?!:))?)?(\17[0-5]\d([.,]\d+)?)?(Z|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/},43388:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(57475);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}))},73234:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCustomValidator=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!1},n=arguments.length>2?arguments[2]:void 0;if(e.expectArgs){var i=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r.customValidateCreator.apply(void 0,[e,t,n].concat(o))};return i.bind(e)}return(0,r.customValidateCreator)(e,t,n)};var r=n(69870)},75751:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineProperty=function(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1})}},63202:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getArticle=function(e){switch(i(e)){case"string":case"number":case"function":case"boolean":return"a ";case"object":return function(e){if(r.Check.not.function(e.constructor))return"";switch(e.constructor.name.substr(0,1).toLowerCase()){case"a":case"e":case"i":case"o":case"u":return"an ";default:return"a "}}(e);default:return""}};var r=n(27124);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},68782:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTypeName=function(e,t){return r.Check.not.assigned(e)||Number.isNaN(e)?r.Check.string(t)?t:String(e):r.Check.function(e)?function(e){return e.name||(0,i.getTypeToString)(e)}(e):function(e){var t;return(null===(t=e.constructor)||void 0===t?void 0:t.name)||(0,i.getTypeToString)(e)}(e)};var r=n(27124),i=n(75794)},75794:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTypeToString=function(e,t){return r.Check.not.assigned(e)||Number.isNaN(e)?r.Check.string(t)?t:String(e):r.Check.string(e)?e:r.Check.function(e)?function(e){var t,n="";switch(e){case Date:case String:case Number:case Boolean:n=e.name;break;default:if(r.Check.function(null===(t=e.prototype)||void 0===t?void 0:t.toString))try{n=e.prototype.toString()}catch(e){}}return i(n)?n:e.name||"a Function"}(e):function(e){var t,n="";try{n=e.toString()}catch(e){}return i(n)?n:(null===(t=e.constructor)||void 0===t?void 0:t.name)||"an Object"}(e)};var r=n(27124);function i(e){return""!==e&&-1===e.indexOf("[object")}},81567:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserArgumentsType=void 0,t.getUserArgumentsType=function(e){return r.Check.object(e)?i.object:r.Check.arrayLike(e)&&r.Check.not.string(e)?i.array:i.none};var r=n(27124),i={object:1,array:2,none:0};t.UserArgumentsType=i},5251:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getValue=function(e,t,n){switch((0,r.getUserArgumentsType)(e)){case r.UserArgumentsType.array:return e[t];case r.UserArgumentsType.object:return e[n];default:throw ReferenceError("typecheckParams(...) error in step2.")}};var r=n(81567)},45350:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getValueName=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.includeTypeName,c=void 0!==n&&n;if(r.Check.not.assigned(e)||Number.isNaN(e))return String(e);if(r.Check.function(e))return(0,a.getTypeToString)(e);if(r.Check.object(e)){var u=(0,a.getTypeToString)(e);if("Object"!==u&&"an Object"!==u)return u}var l=(0,s.stringify)(e);if(c){var p="".concat((0,i.getArticle)(e)).concat((0,o.getTypeName)(e));return l?"".concat(p,": ").concat(l):p}return l};var r=n(27124),i=n(63202),o=n(68782),a=n(75794),s=n(79907)},20901:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasSuperclass=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null!=e?Object.getPrototypeOf(e):null,n=null!=t?Object.getPrototypeOf(t):null,r=null!=n?Object.getPrototypeOf(n):null;return null!=r}},67590:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(73234);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=n(75751);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var o=n(63202);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=n(68782);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=n(75794);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var c=n(81567);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var u=n(5251);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var l=n(45350);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var p=n(20901);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var d=n(70153);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var y=n(31487);Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}));var f=n(79907);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var h=n(91808);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var v=n(56991);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var g=n(76345);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var m=n(19543);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}))},70153:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEveryParamNonRequired=function(e){return null!=e&&Object.keys(e).every((function(t){var n=e[t];return n&&(n.isOptional||n.isUndefinable)}))}},31487:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObjectTypes=function(e){return!!r.Check.nonEmptyObject(e)&&Object.values(e).every((function(e){return r.Check.function(e)&&r.Check.string(e.typeName)}))};var r=n(27124)},79907:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=l;var r=n(75794);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'"',"\\":"\\\\"};function s(e){return o.lastIndex=0,o.test(e)?'"'.concat(e.replace(o,(function(e){var t=a[e];return"string"==typeof t?t:"\\u".concat("0000".concat(e.charCodeAt(0).toString(16)).slice(-4))})),'"'):'"'.concat(e,'"')}function c(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(-1===r)return e.length>0?"[...]":"[]";var i=[];for(t=0;t<e.length&&(0===r||t<r);t++){var o=e[t];i[t]=l(o,-1)||"null"}return 0===i.length?n="[]":(n="[".concat(i.join(", ")),r>0&&e.length>r?n+=", ...]":n+="]"),n}function u(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(-1===r)return Object.keys(e).length>0?"{...}":"{}";var i=[],o=Object.keys(e);for(t=0;t<o.length&&(0===r||t<r);t++){var a=o[t];if(Object.prototype.hasOwnProperty.call(e,a)){var s=e[a];(n=l(s,-1))&&i.push("".concat(a,":").concat(n))}}return 0===i.length?n="{}":(n="{".concat(i.join(", ")),r>0&&o.length>r?n+=", ...}":n+="}"),n}function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;switch(i(e)){case"string":return s(e);case"boolean":case"number":case"undefined":return String(e);case"function":return(0,r.getTypeToString)(e);case"object":if(null==e)return"null";switch(null===(t=e.constructor)||void 0===t?void 0:t.name){case"Boolean":case"Number":return String(e.valueOf());case"Array":return c(e,n);case"Object":return u(e,n);case"String":return s(e.valueOf());default:if("function"==typeof e.toJSON)return s(e.toJSON());if("function"==typeof e.toString){var o=e.toString();if(""!==o&&-1===o.indexOf("[object"))return o}return u(e,n)}default:return""}}},91808:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyKeys=function(e){return Object.keys(e).map((function(e){return'"'.concat(e,'"')}))}},56991:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyRegExp=function(e){return e.source}},76345:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyValues=function(e){return Object.values(e).map((function(e){return(0,r.stringify)(e)}))};var r=n(79907)},19543:function(){},73499:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customValidateCreator=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!1},n=arguments.length>2?arguments[2]:void 0,a=arguments.length,s=new Array(a>3?a-3:0),c=3;c<a;c++)s[c-3]=arguments[c];var u=e.isArray;function l(o,a,c){var l=a.ErrorType,p=a.userArguments,d=a.messageBuilder.buildMessage({value:o,type:e,message:n,expectedArgs:s});function y(e){var n=!1;try{n=!!(n=t.apply(void 0,[e,p].concat(s)))}catch(e){i.Config.logger.warn("TypeChecking",e)}if(!1===n){if(!c)throw new l(d);i.Config.logger[c](d)}}u?(r.Check.assert.array(o,d,l),o.forEach((function(e){return y(e)}))):y(o)}return(0,o.extendValidateCreator)(l,e)};var r=n(27124),i=n(41866),o=n(79905)},79905:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendValidateCreator=function(e,t){var n=t.name;return e=(0,o.logValidateCreator)(e,{typeName:n}),(0,i.defineProperty)(e,"optional",(0,o.logValidateCreator)((function(t,n,i,o){r.Check.not.assigned(t)||e(t,n,i,o)}),{typeName:n,isOptional:!0})),e};var r=n(27124),i=n(75751),o=n(40073)},45962:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genericValidateCreator=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];var c=e.name,u=e.isExtensible;function l(t,o,a){if(r.Check.not.assigned(o))throw TypeError("typecheck(...) params expected Types.".concat(c," not Types.").concat(c,"()"));i.checkValue.apply(void 0,[t,e,o,a].concat(n))}return u?(0,o.extendValidateCreator)(l,e):(0,a.logValidateCreator)(l,{typeName:c})};var r=n(27124),i=n(24638),o=n(79905),a=n(40073)},69870:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(73499);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=n(45962);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var o=n(40073);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=n(66007);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=n(62620);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}))},40073:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logValidateCreator=function(e,t){var n=t.typeName,i=t.isOptional;return(0,r.defineProperty)(e,"warn",(function(t,n){e(t,n,"warn")})),(0,r.defineProperty)(e.warn,"isLogging",!0),(0,r.defineProperty)(e.warn,"typeName",n),(0,r.defineProperty)(e.warn,"isOptional",i),(0,r.defineProperty)(e,"typeName",n),(0,r.defineProperty)(e,"isOptional",i),e};var r=n(75751)},66007:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectValidateCreator=function(e,t){var n=e.isArray,a=r.Check.nonEmptyObject(t);return(0,o.extendValidateCreator)((function(r,o,s){if((0,i.checkValue)(r,e,o,s)&&a){var c=o.messageBuilder.setParentParams(t,n);n?r.forEach((function(e){return o.execute({objParams:t,parent:c,userData:e})})):o.execute({objParams:t,parent:c,userData:r})}}),e)};var r=n(27124),i=n(24638),o=n(79905)},62620:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipValidateCreator=function(e){var t=e.name;return(0,o.logValidateCreator)((function(t,n,o){if(r.Check.not.assigned(n))throw TypeError("typecheck(...) params expected Types.skip not Types.skip()");var a=n.messageBuilder;if(o){var s=a.buildMessage({value:t,type:e});i.Config.logger[o](s)}}),{typeName:t})};var r=n(27124),i=n(41866),o=n(40073)},24638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkValue=function(e,t,n,o){for(var a=n.messageBuilder,s=n.ErrorType,c=o||n.loggingFunc,u=arguments.length,l=new Array(u>4?u-4:0),p=4;p<u;p++)l[p-4]=arguments[p];var d=i.isValueOk.apply(void 0,[e,t].concat(l));if(!1===d){var y=a.buildMessage({value:e,type:t,expectedArgs:l});if(!c)throw new s(y);r.Config.logger[c](y)}return d};var r=n(41866),i=n(88837)},88837:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValueOk=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];var a,s=t.assert,c=t.isArray,u=t.validator,l=!0;return r.Check.function(u)?(c?(l=r.Check.assert.array(e))&&e.forEach((function(e){l=l&&u.apply(void 0,[e].concat(i))})):l=u.apply(void 0,[e].concat(i)),l):l=c?l&&(a=r.Check.array.of)[s].apply(a,[e].concat(i)):r.Check[s].apply(r.Check,[e].concat(i))};var r=n(27124)},60340:function(e,t,n){"use strict";var r,i,o,a,s,c,u,l,p,d,y,f,h,v,g,m,b,T,k,S,P,E,Z,w,D,C,A,R,x,O,I,M,j,L;n.d(t,{TV:function(){return r}}),function(e){e.Account="Account",e.AccountWithoutActiveProfile="AccountWithoutActiveProfile",e.Device="Device"}(r||(r={})),function(e){e.AccountHolder="AccountHolder",e.Minor="Minor",e.Teen="Teen"}(i||(i={})),function(e){e.Noah="Noah",e.Sash="Sash"}(o||(o={})),function(e){e.Icons="Icons",e.Standard="Standard"}(a||(a={})),function(e){e.Icons="Icons",e.Standard="Standard"}(s||(s={})),function(e){e.Standard="Standard",e.TenPercent="TenPercent"}(c||(c={})),function(e){e.Man="Man",e.NonBinary="NonBinary",e.PreferNotToSay="PreferNotToSay",e.Woman="Woman"}(u||(u={})),function(e){e.DateOfBirth="DateOfBirth",e.Gender="Gender"}(l||(l={})),function(e){e.NotEligible="NotEligible",e.Optional="Optional",e.Required="Required"}(p||(p={})),function(e){e.DisneyPlus="DisneyPlus",e.EspnPlus="EspnPlus",e.StarPlus="StarPlus",e.WaltDisneyFamily="WaltDisneyFamily"}(d||(d={})),function(e){e.Login="Login",e.RegisterAccount="RegisterAccount"}(y||(y={})),function(e){e.Agreed="Agreed",e.NotAgreed="NotAgreed"}(f||(f={})),function(e){e.Login="Login",e.PlanSwitch="PlanSwitch",e.Register="Register"}(h||(h={})),function(e){e.Login="Login",e.Otp="OTP",e.Register="Register",e.RegisterAccount="RegisterAccount"}(v||(v={})),function(e){e.AuthOk="AuthOk",e.PaymentOk="PaymentOk",e.Pending="Pending",e.Redirect="Redirect",e.Success="Success",e.TemporaryDefaultAccess="TemporaryDefaultAccess"}(g||(g={})),function(e){e.ChangePassword="ChangePassword"}(m||(m={})),function(e){e.MultiUse="multi_use",e.SingleUse="single_use"}(b||(b={})),function(e){e.Blockout="Blockout",e.ComingSoon="ComingSoon",e.Expired="Expired",e.Other="Other",e.PlatformUnavailable="PlatformUnavailable",e.PurchaseAllowed="PurchaseAllowed",e.Purchased="Purchased"}(T||(T={})),function(e){e.AnonymousIp="ANONYMOUS_IP",e.CountryCode="COUNTRY_CODE",e.LowConfidence="LOW_CONFIDENCE",e.ProxiedIp="PROXIED_IP",e.Unavailable="UNAVAILABLE",e.Unknown="UNKNOWN",e.ZipCode="ZIP_CODE"}(k||(k={})),function(e){e.DateOfBirth="DateOfBirth",e.Gender="Gender",e.MinorConsent="MinorConsent",e.SuggestedMaturityRating="SuggestedMaturityRating",e.TeenConsent="TeenConsent"}(S||(S={})),function(e){e.NotEligible="NotEligible",e.Optional="Optional",e.Required="Required"}(P||(P={})),function(e){e.AccountDetails="AccountDetails",e.AppleDirectBillingEarlyAccess="AppleDirectBillingEarlyAccess",e.EarlyAccess="EarlyAccess",e.EarlyAccessPlanPicker="EarlyAccessPlanPicker",e.PlanPicker="PlanPicker",e.PlanSwitch="PlanSwitch"}(E||(E={})),function(e){e.DateOfBirth="DateOfBirth",e.Gender="Gender",e.MinorConsent="MinorConsent",e.SuggestedMaturityRating="SuggestedMaturityRating"}(Z||(Z={})),function(e){e.DateOfBirth="DateOfBirth",e.Gender="Gender",e.MinorConsent="MinorConsent",e.SuggestedMaturityRating="SuggestedMaturityRating"}(w||(w={})),function(e){e.ChangePassword="ChangePassword"}(D||(D={})),function(e){e.Kt="KT",e.LguPlus="LGUPlus",e.Mvnokt="MVNOKT",e.MvnolguPlus="MVNOLGUPlus",e.Mvnoskt="MVNOSKT",e.Skt="SKT"}(C||(C={})),function(e){e.Active="Active",e.Cancelled="Cancelled",e.Churned="Churned",e.Grace="Grace",e.Hold="Hold",e.Paused="Paused"}(A||(A={})),function(e){e.Cancelled="Cancelled",e.Grace="Grace",e.Hold="Hold"}(R||(R={})),function(e){e.AbuseRevocation="AbuseRevocation",e.AutoCancel="AutoCancel",e.Chargeback="Chargeback",e.InvoluntaryCancel="InvoluntaryCancel",e.PlanSwitched="PlanSwitched",e.Unknown="Unknown",e.VoluntaryCancel="VoluntaryCancel"}(x||(x={})),function(e){e.Comcast="Comcast",e.Roku="Roku"}(O||(O={})),function(e){e.Annual="Annual",e.Monthly="Monthly",e.MultiAnnual="MultiAnnual"}(I||(I={})),function(e){e.Discounted="Discounted",e.DoubleBilled="DoubleBilled",e.Stacked="Stacked"}(M||(M={})),function(e){e.Active="Active",e.Cancelled="Cancelled",e.Churned="Churned",e.Grace="Grace",e.Hold="Hold",e.Paused="Paused"}(j||(j={})),function(e){e.Comp="Comp",e.GiftCard="GiftCard",e.GiftSub="GiftSub",e.Initial="Initial",e.Paid="Paid",e.PlanSwitched="PlanSwitched",e.PromoRedemption="PromoRedemption",e.Recurring="Recurring",e.Temp="Temp"}(L||(L={}))},17389:function(e,t,n){"use strict";n.d(t,{hs:function(){return r},nk:function(){return s},pm:function(){return i},q5:function(){return a},tL:function(){return o}});var r="mutation refreshToken($input:RefreshTokenInput!){refreshToken(refreshToken:$input){activeSession{sessionId}}}",i="mutation exchangeDeviceGrantForAccessToken($input:ExchangeDeviceGrantForAccessTokenInput!){exchangeDeviceGrantForAccessToken(exchangeDeviceGrantForAccessToken:$input){accepted}}",o="mutation registerDevice($input:RegisterDeviceInput!){registerDevice(registerDevice:$input){grant{grantType assertion}}}",a="mutation updateDeviceOperatingSystem($input:UpdateDeviceOperatingSystemInput!){updateDeviceOperatingSystem(updateDeviceOperatingSystem:$input){accepted}}",s="query activeSession{activeSession{device{id platform}entitlements inSupportedLocation isSubscriber location{type countryCode dma asn regionName connectionType zipCode}sessionId experiments{featureId variantId version}account{id}profile{id}preferredMaturityRating{impliedMaturityRating ratingSystem}homeLocation{countryCode}portabilityLocation{countryCode}partnerName}}"},9310:function(e,t,n){"use strict";n.d(t,{$p:function(){return s},$y:function(){return l},gh:function(){return i},oC:function(){return o},sF:function(){return c},xe:function(){return u}}),n(74916),n(15306);var r=n(4484),i=/^(\d+\.)?(\d+).(.*)/,o=function(e){return e.replace(i,"$1$2")},a="bam-sdk-configs.bamgrid.com/bam-sdk",s={dev:{baseUrl:"https://dev-".concat(a)},release:{baseUrl:"https://".concat(a)},staging:{baseUrl:"https://staging-".concat(a)}},c="\n    {baseUrl}/\n    v{configVersion}/\n    {clientId}/{deviceFamily}/v{sdkVersion}/\n    {deviceProfile}/{applicationRuntime}/{environment}.json\n".replace(/(?:\n?\s+)/g,""),u=r.Z.release,l="5.0"},26390:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(15671),i=n(43144),o=function(){function e(t){(0,r.Z)(this,e),this.accessToken=t}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.AccessChangedEvent"}}]),e}()},79457:function(e,t,n){"use strict";n.d(t,{Z:function(){return L}}),n(12419),n(47941),n(82526),n(57327),n(54747),n(49337);var r,i,o,a,s,c,u=n(54546),l=n(15861),p=n(4942),d=n(15671),y=n(43144),f=n(97326),h=n(2291),v=n(60136),g=n(82963),m=n(61120),b=n(53229),T=n(87757),k=n.n(T),S=(n(41539),n(39714),n(38880),n(67682)),P=n(42033),E=n(18788),Z=n(82625),w=n(9598),D=n(95400),C=n(70986),A=n(84983),R=n(9978);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,m.Z)(e);if(t){var i=(0,m.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,g.Z)(this,n)}}var M=A.Z.account.accountApi,j=w.Z.apiMethodDecorator.bind(null,M),L=(r=j({paramTypes:{token:S.Types.nonEmptyString,provider:S.Types.nonEmptyString}}),i=j({paramTypes:{token:S.Types.nonEmptyString,attributes:S.Types.object().optional,metadata:S.Types.object().optional}}),o=j(),a=j({paramTypes:{account:S.Types.instanceStrict(P.Z)}}),s=j(),c=function(e){(0,v.Z)(s,e);var t,n,r,i,o,a=I(s);function s(e){var t;(0,d.Z)(this,s),t=a.call(this,O({accessTokenProvider:e.tokenManager},e));var n={options:S.Types.object({accountClient:S.Types.instanceStrict(E.Z),tokenManager:S.Types.instanceStrict(D.Z),subscriptionClient:S.Types.instanceStrict(R.Z)})};(0,S.typecheck)((0,f.Z)(t),n,arguments);var r=e.accountClient,i=e.tokenManager,o=e.subscriptionClient;return t.accountClient=r,t.tokenManager=i,t.subscriptionClient=o,t.logger.info(t.toString(),"Created."),t}return(0,y.Z)(s,[{key:"authorize",value:(o=(0,l.Z)(k().mark((function e(t){var n,r,i,o,a,c,l;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,u.Z)(n.args,2),o=i[0],a=i[1],e.next=3,this.accountClient.createAccountGrant(o,(0,h.Z)((0,m.Z)(s.prototype),"accessToken",this),r);case 3:return c=e.sent,l=new C.Z([a]),e.next=7,this.tokenManager.exchangeAccountGrant(c,l,r);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"createAccount",value:(i=(0,l.Z)(k().mark((function e(t){var n,r,i,o,a,c,l;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,u.Z)(n.args,3),o=i[0],a=i[1],c=void 0===a?{}:a,l=i[2],e.abrupt("return",this.accountClient.createAccount({identityToken:o,attributes:c,metadata:l,logTransaction:r,accessToken:(0,h.Z)((0,m.Z)(s.prototype),"accessToken",this)}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getAccount",value:(r=(0,l.Z)(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.logTransaction,e.abrupt("return",this.accountClient.getCurrentAccount((0,h.Z)((0,m.Z)(s.prototype),"accessToken",this),n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"updateAccount",value:(n=(0,l.Z)(k().mark((function e(t){var n,r,i,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,u.Z)(n.args,1),o=i[0],e.abrupt("return",this.accountClient.updateAttributes(o.attributes,(0,h.Z)((0,m.Z)(s.prototype),"accessToken",this),r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"linkSubscriptionsFromDevice",value:(t=(0,l.Z)(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.logTransaction,e.abrupt("return",this.subscriptionClient.linkSubscriptionsFromDevice((0,h.Z)((0,m.Z)(s.prototype),"accessToken",this),n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Account.AccountApi"}}]),s}(Z.Z),(0,b.Z)(c.prototype,"authorize",[r],Object.getOwnPropertyDescriptor(c.prototype,"authorize"),c.prototype),(0,b.Z)(c.prototype,"createAccount",[i],Object.getOwnPropertyDescriptor(c.prototype,"createAccount"),c.prototype),(0,b.Z)(c.prototype,"getAccount",[o],Object.getOwnPropertyDescriptor(c.prototype,"getAccount"),c.prototype),(0,b.Z)(c.prototype,"updateAccount",[a],Object.getOwnPropertyDescriptor(c.prototype,"updateAccount"),c.prototype),(0,b.Z)(c.prototype,"linkSubscriptionsFromDevice",[s],Object.getOwnPropertyDescriptor(c.prototype,"linkSubscriptionsFromDevice"),c.prototype),c)},90262:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(15671),i=n(43144),o=(n(41539),n(39714),n(67682)),a=n(87891),s=n(51431),c=n(9588),u=function(){function e(t){(0,r.Z)(this,e);var n={logger:o.Types.instanceStrict(a.Z).optional};(0,o.typecheck)(this,n,arguments),this.logger=t||a.Z.instance,this.advertisingId=c.DEFAULT_ZERO_GUID,this.logger.log(this.toString(),"Created.")}return(0,i.Z)(e,[{key:"getId",value:function(){return this.logger.info(this.toString(),"Advertising id cannot be determined, sending: ".concat(this.advertisingId,".")),this.advertisingId}},{key:"getLimitAdTrackingEnabled",value:function(){return this.logger.info(this.toString(),"LimitAdTrackingEnabled: ".concat(s.Z.ERROR,".")),s.Z.ERROR}},{key:"toString",value:function(){return"SDK.Advertising.AdvertisingIdProvider"}}]),e}()},51431:function(e,t){"use strict";var n;!function(e){e.YES="YES",e.NO="NO",e.NOT_SUPPORTED="NOT_SUPPORTED",e.ERROR="ERROR"}(n||(n={})),t.Z=n},48900:function(e,t){"use strict";var n;!function(e){e.YES="YES",e.NO="NO",e.ERROR="ERROR"}(n||(n={})),t.Z=n},53744:function(e,t){"use strict";var n;!function(e){e.redeem="redeem",e.request="request"}(n||(n={})),t.Z=n},82625:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(15671),i=n(43144),o=n(67682),a=n(87891),s=n(27216),c=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({logger:o.Types.instanceStrict(a.Z),accessTokenProvider:o.Types.instanceStrict(s.Z)})};(0,o.typecheck)(this,n,arguments);var i=t.logger,c=t.accessTokenProvider;this.logger=i,this.accessTokenProvider=c}return(0,i.Z)(e,[{key:"accessToken",get:function(){return this.accessTokenProvider.getAccessToken()}},{key:"toString",value:function(){return"SDK.BaseApi"}}]),e}()},19612:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(15671),i=n(43144),o=(n(41539),n(39714),n(47042),n(67682)),a=n(40815),s=n(40467),c=n(87891),u=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({logger:o.Types.instanceStrict(c.Z).optional})};(0,o.typecheck)(this,n,arguments);var i=t.logger;this.logger=i||c.Z.instance,this.global=(0,s.Z)(),this.acceptHeader=this.getAcceptHeader(),this.colorDepth=this.getColorDepth(),this.javaEnabled=this.getJavaEnabled(),this.language=this.getLanguage(),this.screenHeight=this.getScreenHeight(),this.screenWidth=this.getScreenWidth(),this.timeZoneOffset=this.getTimeZoneOffset(),this.userAgent=this.getUserAgent(),this.logger.info(this.toString(),"Created.")}return(0,i.Z)(e,[{key:"getBrowserInfo",value:function(){var e=this.acceptHeader,t=this.colorDepth,n=this.javaEnabled,r=this.language,i=this.screenHeight,o=this.screenWidth,s=this.timeZoneOffset,c=this.userAgent;return new a.Z({acceptHeader:e,colorDepth:t,javaEnabled:n,language:r,screenHeight:i,screenWidth:o,timeZoneOffset:s,userAgent:c})}},{key:"getAcceptHeader",value:function(){return"text/html"}},{key:"getColorDepth",value:function(){var e,t,n;return null!==(e=null===(t=this.global)||void 0===t||null===(n=t.screen)||void 0===n?void 0:n.colorDepth)&&void 0!==e?e:0}},{key:"getJavaEnabled",value:function(){var e,t,n;return null!==(e=null===(t=this.global)||void 0===t||null===(n=t.navigator)||void 0===n?void 0:n.javaEnabled())&&void 0!==e&&e}},{key:"getLanguage",value:function(){var e,t,n;return(null!==(e=null===(t=this.global)||void 0===t||null===(n=t.navigator)||void 0===n?void 0:n.language)&&void 0!==e?e:"en-US").slice(-2)}},{key:"getScreenHeight",value:function(){var e,t,n;return null!==(e=null===(t=this.global)||void 0===t||null===(n=t.screen)||void 0===n?void 0:n.height)&&void 0!==e?e:0}},{key:"getScreenWidth",value:function(){var e,t,n;return null!==(e=null===(t=this.global)||void 0===t||null===(n=t.screen)||void 0===n?void 0:n.width)&&void 0!==e?e:0}},{key:"getTimeZoneOffset",value:function(){return(new Date).getTimezoneOffset()}},{key:"getUserAgent",value:function(){var e,t,n;return null!==(e=null===(t=this.global)||void 0===t||null===(n=t.navigator)||void 0===n?void 0:n.userAgent)&&void 0!==e?e:"JS-SDK-userAgent (N/A)"}},{key:"toString",value:function(){return"SDK.Commerce.BrowserInfoProvider"}}]),e}()},75621:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}}),n(12419);var r,i,o,a,s=n(54546),c=n(15861),u=n(15671),l=n(43144),p=n(97326),d=n(2291),y=n(60136),f=n(82963),h=n(61120),v=n(53229),g=n(87757),m=n.n(g),b=(n(41539),n(39714),n(38880),n(67682)),T=n(99426),k=n(74023),S=n(82625),P=n(84983),E=n(9598);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var i=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var w=P.Z.commerce.comcastApi,D=E.Z.apiMethodDecorator.bind(null,w),C=(r=D({paramTypes:{request:b.Types.object(T.ComcastPaymentRequestTypedef)}}),i=D({paramTypes:{request:b.Types.object(T.CreateComcastPaymentMethodRequestTypedef)}}),o=D({paramTypes:{request:b.Types.object(T.ComcastConsentRequestTypedef)}}),a=function(e){(0,y.Z)(o,e);var t,n,r,i=Z(o);function o(e){var t;(0,u.Z)(this,o),t=i.call(this,e);var n={options:b.Types.object({commerceClient:b.Types.instanceStrict(k.Z)})};(0,b.typecheck)((0,p.Z)(t),n,arguments);var r=e.commerceClient;return t.commerceClient=r,t.logger.info(t.toString(),"Created."),t}return(0,l.Z)(o,[{key:"submitPayment",value:(r=(0,c.Z)(m().mark((function e(t){var n,r,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,s.Z)(n.args,1),a=i[0],e.abrupt("return",this.commerceClient.submitComcastPayment(a,(0,d.Z)((0,h.Z)(o.prototype),"accessToken",this),r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"createComcastPaymentMethod",value:(n=(0,c.Z)(m().mark((function e(t){var n,r,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,s.Z)(n.args,1),a=i[0],e.abrupt("return",this.commerceClient.createComcastPaymentMethod(a,(0,d.Z)((0,h.Z)(o.prototype),"accessToken",this),r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getComcastConsent",value:(t=(0,c.Z)(m().mark((function e(t){var n,r,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,s.Z)(n.args,1),a=i[0],e.abrupt("return",this.commerceClient.getComcastConsent(a,(0,d.Z)((0,h.Z)(o.prototype),"accessToken",this),r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Commerce.Comcast.ComcastApi"}}]),o}(S.Z),(0,v.Z)(a.prototype,"submitPayment",[r],Object.getOwnPropertyDescriptor(a.prototype,"submitPayment"),a.prototype),(0,v.Z)(a.prototype,"createComcastPaymentMethod",[i],Object.getOwnPropertyDescriptor(a.prototype,"createComcastPaymentMethod"),a.prototype),(0,v.Z)(a.prototype,"getComcastConsent",[o],Object.getOwnPropertyDescriptor(a.prototype,"getComcastConsent"),a.prototype),a)},99426:function(e,t,n){"use strict";n.d(t,{ComcastConsentRequestTypedef:function(){return d},ComcastConsentResponseTypedef:function(){return f},ComcastPaymentMethodTypedef:function(){return c},ComcastPaymentRequestTypedef:function(){return u},ComcastUpdatePaymentMethodRequestTypedef:function(){return l},CreateComcastPaymentMethodRequestTypedef:function(){return p}}),n(47941),n(82526),n(57327),n(41539),n(38880),n(54747),n(49337);var r=n(4942),i=n(67682),o=n(94037);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=s(s({},o.PaymentMethodTypedef),{},{isDefault:i.Types.boolean,usage:i.Types.nonEmptyString,isShared:i.Types.boolean.optional,billingAddress:i.Types.object(o.BillingAddressTypedef),msoPartner:i.Types.nonEmptyString}),u={oat:i.Types.nonEmptyString,consentPresentedTime:i.Types.nonEmptyString,msoPartner:i.Types.nonEmptyString,offerId:i.Types.nonEmptyString.optional,campaignCode:i.Types.nonEmptyString.optional,voucherCode:i.Types.nonEmptyString.optional,redemptionCode:i.Types.nonEmptyString.optional,skus:i.Types.array.of.nonEmptyString},l=s(s({},o.UpdatePaymentMethodBaseTypedef),{},{consentToken:i.Types.nonEmptyString,msoPartner:i.Types.nonEmptyString,billingAddress:i.Types.object(o.BillingAddressTypedef).optional}),p={consentToken:i.Types.nonEmptyString,msoPartner:i.Types.nonEmptyString,obfuscatedAccountToken:i.Types.nonEmptyString,billingAddress:i.Types.object(o.BillingAddressTypedef)},d={campaignCode:i.Types.nonEmptyString.optional,consentPresentedTime:i.Types.nonEmptyString.optional,msoPartner:i.Types.nonEmptyString,oat:i.Types.nonEmptyString,offerId:i.Types.nonEmptyString.optional,redemptionCode:i.Types.nonEmptyString.optional,requestedTime:i.Types.nonEmptyString.optional,skus:i.Types.array.of.nonEmptyString,voucherCode:i.Types.nonEmptyString.optional},y={chargeAmount:i.Types.nonEmptyString,chargeCategory:i.Types.nonEmptyString,description:i.Types.nonEmptyString,endDate:i.Types.nonEmptyString.optional,frequency:i.Types.nonEmptyString.optional,productCategory:i.Types.nonEmptyString,productPrice:i.Types.nonEmptyString,sku:i.Types.nonEmptyString,startDate:i.Types.nonEmptyString},f={appId:i.Types.nonEmptyString,consentPresentedTime:i.Types.nonEmptyString,currency:i.Types.nonEmptyString,msoPartner:i.Types.nonEmptyString,oat:i.Types.nonEmptyString,productDetails:i.Types.array.of.object(y),requestedTime:i.Types.nonEmptyString,totalChargeAmount:i.Types.nonEmptyString}},35659:function(e,t,n){"use strict";n.d(t,{Z:function(){return Y}}),n(12419);var r,i,o,a,s,c,u,l,p,d,y,f,h,v,g,m,b,T=n(54546),k=n(15861),S=n(15671),P=n(43144),E=n(97326),Z=n(2291),w=n(60136),D=n(82963),C=n(61120),A=n(53229),R=n(87757),x=n.n(R),O=(n(41539),n(39714),n(26699),n(32023),n(38880),n(67682)),I=n(99426),M=n(21590),j=n(76266),L=n(60493),N=n(11850),B=n(92421),_=n(94037),F=n(31658),U=n(74023),q=n(30253),K=n(82625),V=n(84983),H=n(9598),G=n(79337);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,C.Z)(e);if(t){var i=(0,C.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,D.Z)(this,n)}}var z=V.Z.commerce.commerceApi,W=H.Z.apiMethodDecorator.bind(null,z),Y=(r=W({paramTypes:{request:O.Types.object(_.PriceOrderRequestTypedef)}}),i=W({paramTypes:{zipCode:O.Types.nonEmptyString}}),o=W({paramTypes:{request:O.Types.object(_.RedeemRequestTypedef)}}),a=W({paramTypes:{request:O.Types.object(_.SubmitOrderWithPaymentMethodRequestTypedef),deviceProfile:O.Types.nonEmptyString.optional}}),s=W({paramTypes:{request:O.Types.object(_.UpdateOrderRequestTypedef)}}),c=W({paramTypes:{orderId:O.Types.nonEmptyString}}),u=W(),l=W({paramTypes:{request:O.Types.object(_.UpdatePaymentMethodBaseTypedef)}}),p=W(),d=W({paramTypes:{request:O.Types.object(_.AccountResumeRequestTypedef),deviceProfile:O.Types.nonEmptyString.optional}}),y=W(),f=W({paramTypes:{request:O.Types.object(_.PlanSwitchRequestTypedef)}}),h=W(),v=W({paramTypes:{request:O.Types.object(_.RestartSubscriptionRequestTypedef)}}),g=W({paramTypes:{paymentMethodId:O.Types.nonEmptyString}}),m=W({paramTypes:{request:O.Types.object(_.AssociateAuthValuesWithPaymentMethodRequestTypedef)}}),b=function(e){(0,w.Z)(m,e);var t,n,r,i,o,a,s,c,u,l,p,d,y,f,h,v,g=Q(m);function m(e){var t;(0,S.Z)(this,m),t=g.call(this,e);var n={options:O.Types.object({commerceClient:O.Types.instanceStrict(U.Z),configExtras:O.Types.instanceStrict(q.Z)})};(0,O.typecheck)((0,E.Z)(t),n,arguments);var r=e.commerceClient,i=e.configExtras;return t.commerceClient=r,t.configExtras=i,t.getOrderStatusCounter=0,t.logger.info(t.toString(),"Created."),t}return(0,P.Z)(m,[{key:"priceOrder",value:(v=(0,k.Z)(x().mark((function e(t){var n,r,i,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,T.Z)(n.args,1),o=i[0],e.abrupt("return",this.commerceClient.priceOrder(o,(0,Z.Z)((0,C.Z)(m.prototype),"accessToken",this),r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"getLocationCandidates",value:(h=(0,k.Z)(x().mark((function e(t){var n,r,i,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,T.Z)(n.args,1),o=i[0],e.abrupt("return",this.commerceClient.lookupByZipCode(o,r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"redeem",value:(f=(0,k.Z)(x().mark((function e(t){var n,r,i,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,T.Z)(n.args,1),o=i[0],e.abrupt("return",this.commerceClient.redeem(o,(0,Z.Z)((0,C.Z)(m.prototype),"accessToken",this),r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"submitOrderWithPaymentMethod",value:(y=(0,k.Z)(x().mark((function e(t){var n,r,i,o,a,s;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,T.Z)(n.args,2),o=i[0],a=i[1],e.next=3,this.commerceClient.submitOrderWithPaymentMethod({request:o,deviceProfile:a,accessToken:(0,Z.Z)((0,C.Z)(m.prototype),"accessToken",this),logTransaction:r});case 3:return s=e.sent,e.abrupt("return",s.guid);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"updateOrder",value:(d=(0,k.Z)(x().mark((function e(t){var n,r,i,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,T.Z)(n.args,1),o=i[0],e.abrupt("return",this.commerceClient.updateOrder(o,(0,Z.Z)((0,C.Z)(m.prototype),"accessToken",this),r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"validateOrder",value:(p=(0,k.Z)(x().mark((function e(t){var n,r,i,o,a,s,c,u,l,p;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,T.Z)(n.args,1),o=i[0],a=1e3*this.configExtras.checkOrderStatusDelay,e.next=4,(0,G.Z)(a);case 4:return e.prev=4,e.next=7,this.commerceClient.getOrderStatus(o,this.getOrderStatusCounter,this.accessToken,r);case 7:return s=e.sent,e.abrupt("return",s);case 11:if(e.prev=11,e.t0=e.catch(4),c=e.t0.status,u=this.configExtras,l=u.validateOrderNonRetryCodes,p=u.retryPolicy.retryMaxAttempts,!(this.getOrderStatusCounter>=p||l.includes(c))){e.next=18;break}throw this.getOrderStatusCounter=0,e.t0;case 18:return this.getOrderStatusCounter++,e.abrupt("return",this.validateOrder(o));case 20:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(e){return p.apply(this,arguments)})},{key:"getDefaultPaymentMethod",value:(l=(0,k.Z)(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.logTransaction,e.abrupt("return",this.commerceClient.getDefaultPaymentMethod((0,Z.Z)((0,C.Z)(m.prototype),"accessToken",this),n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"updatePaymentMethod",value:(u=(0,k.Z)(x().mark((function e(t){var n,r,i,o,a,s,c;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,T.Z)(n.args,1),o=i[0],a=this.getUpdatePaymentMethodInfo(o.type),s=a.updateType,c=a.paymentType,(0,O.typecheck)(s,o),e.abrupt("return",this.commerceClient.updatePaymentMethod(o,c,(0,Z.Z)((0,C.Z)(m.prototype),"accessToken",this),r));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"listAllPaymentMethods",value:(c=(0,k.Z)(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.logTransaction,e.abrupt("return",this.commerceClient.listAllPaymentMethods((0,Z.Z)((0,C.Z)(m.prototype),"accessToken",this),n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"resumeAccount",value:(s=(0,k.Z)(x().mark((function e(t){var n,r,i,o,a,s;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,T.Z)(n.args,2),o=i[0],a=i[1],e.next=3,this.commerceClient.resumeAccount({request:o,deviceProfile:a,accessToken:(0,Z.Z)((0,C.Z)(m.prototype),"accessToken",this),logTransaction:r});case 3:return s=e.sent,e.abrupt("return",s.guid);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"getDdcJwtToken",value:(a=(0,k.Z)(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.logTransaction,e.abrupt("return",this.commerceClient.getDdcJwtToken((0,Z.Z)((0,C.Z)(m.prototype),"accessToken",this),n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"planSwitch",value:(o=(0,k.Z)(x().mark((function e(t){var n,r,i,o,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,T.Z)(n.args,1),o=i[0],e.next=3,this.commerceClient.planSwitch({request:o,accessToken:(0,Z.Z)((0,C.Z)(m.prototype),"accessToken",this),logTransaction:r});case 3:return a=e.sent,e.abrupt("return",a.guid);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"shareDefaultPaymentMethod",value:(i=(0,k.Z)(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.logTransaction,e.abrupt("return",this.commerceClient.shareDefaultPaymentMethod((0,Z.Z)((0,C.Z)(m.prototype),"accessToken",this),n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"restartSubscription",value:(r=(0,k.Z)(x().mark((function e(t){var n,r,i,o,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,T.Z)(n.args,1),o=i[0],e.next=3,this.commerceClient.restartSubscription(o,(0,Z.Z)((0,C.Z)(m.prototype),"accessToken",this),r);case 3:return a=e.sent,e.abrupt("return",a.guid);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getPaymentMethod",value:(n=(0,k.Z)(x().mark((function e(t){var n,r,i,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,T.Z)(n.args,1),o=i[0],e.abrupt("return",this.commerceClient.getPaymentMethod(o,(0,Z.Z)((0,C.Z)(m.prototype),"accessToken",this),r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"associateAuthValuesWithPaymentMethod",value:(t=(0,k.Z)(x().mark((function e(t){var n,r,i,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,T.Z)(n.args,1),o=i[0],e.next=3,this.commerceClient.associateAuthValuesWithPaymentMethod(o,(0,Z.Z)((0,C.Z)(m.prototype),"accessToken",this),r);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setUbaToken",value:function(e){var t={token:O.Types.nonEmptyString};(0,O.typecheck)(this,"setUbaToken",t,arguments),this.commerceClient.setUbaToken(e)}},{key:"getUpdatePaymentMethodInfo",value:function(e){var t,n;switch(e){case F.PaymentMethodType.PaymentCard:t=B.CardUpdatePaymentMethodRequestTypedef,n=F.PaymentType.paymentCards;break;case F.PaymentMethodType.PayPalExpress:t=N.PayPalUpdatePaymentMethodRequestTypedef,n=F.PaymentType.paypalExpress;break;case F.PaymentMethodType.MercadoPagoPayment:t=L.MercadoUpdatePaymentMethodRequestTypedef,n=F.PaymentType.mercadopagoPayments;break;case F.PaymentMethodType.KlarnaPayment:t=j.KlarnaUpdatePaymentMethodRequestTypedef,n=F.PaymentType.klarnaPayments;break;case F.PaymentMethodType.IDealPayment:t=M.IDealUpdatePaymentMethodRequestTypedef,n=F.PaymentType.idealPayments;break;case F.PaymentMethodType.ComcastPayment:t=I.ComcastUpdatePaymentMethodRequestTypedef,n=F.PaymentType.comcastPayments}return{updateType:t,paymentType:n}}},{key:"toString",value:function(){return"SDK.Commerce.CommerceApi"}}]),m}(K.Z),(0,A.Z)(b.prototype,"priceOrder",[r],Object.getOwnPropertyDescriptor(b.prototype,"priceOrder"),b.prototype),(0,A.Z)(b.prototype,"getLocationCandidates",[i],Object.getOwnPropertyDescriptor(b.prototype,"getLocationCandidates"),b.prototype),(0,A.Z)(b.prototype,"redeem",[o],Object.getOwnPropertyDescriptor(b.prototype,"redeem"),b.prototype),(0,A.Z)(b.prototype,"submitOrderWithPaymentMethod",[a],Object.getOwnPropertyDescriptor(b.prototype,"submitOrderWithPaymentMethod"),b.prototype),(0,A.Z)(b.prototype,"updateOrder",[s],Object.getOwnPropertyDescriptor(b.prototype,"updateOrder"),b.prototype),(0,A.Z)(b.prototype,"validateOrder",[c],Object.getOwnPropertyDescriptor(b.prototype,"validateOrder"),b.prototype),(0,A.Z)(b.prototype,"getDefaultPaymentMethod",[u],Object.getOwnPropertyDescriptor(b.prototype,"getDefaultPaymentMethod"),b.prototype),(0,A.Z)(b.prototype,"updatePaymentMethod",[l],Object.getOwnPropertyDescriptor(b.prototype,"updatePaymentMethod"),b.prototype),(0,A.Z)(b.prototype,"listAllPaymentMethods",[p],Object.getOwnPropertyDescriptor(b.prototype,"listAllPaymentMethods"),b.prototype),(0,A.Z)(b.prototype,"resumeAccount",[d],Object.getOwnPropertyDescriptor(b.prototype,"resumeAccount"),b.prototype),(0,A.Z)(b.prototype,"getDdcJwtToken",[y],Object.getOwnPropertyDescriptor(b.prototype,"getDdcJwtToken"),b.prototype),(0,A.Z)(b.prototype,"planSwitch",[f],Object.getOwnPropertyDescriptor(b.prototype,"planSwitch"),b.prototype),(0,A.Z)(b.prototype,"shareDefaultPaymentMethod",[h],Object.getOwnPropertyDescriptor(b.prototype,"shareDefaultPaymentMethod"),b.prototype),(0,A.Z)(b.prototype,"restartSubscription",[v],Object.getOwnPropertyDescriptor(b.prototype,"restartSubscription"),b.prototype),(0,A.Z)(b.prototype,"getPaymentMethod",[g],Object.getOwnPropertyDescriptor(b.prototype,"getPaymentMethod"),b.prototype),(0,A.Z)(b.prototype,"associateAuthValuesWithPaymentMethod",[m],Object.getOwnPropertyDescriptor(b.prototype,"associateAuthValuesWithPaymentMethod"),b.prototype),b)},11893:function(e,t,n){"use strict";n.d(t,{DisneyRewardsPaymentMethodTypedef:function(){return s}}),n(47941),n(82526),n(57327),n(41539),n(38880),n(54747),n(49337);var r=n(4942),i=n(67682);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=a(a({},n(94037).PaymentMethodTypedef),{},{maskedCard:i.Types.nonEmptyString,country:i.Types.nonEmptyString,issuer:i.Types.nonEmptyString})},7126:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}}),n(12419);var r,i,o=n(54546),a=n(15861),s=n(15671),c=n(43144),u=n(97326),l=n(2291),p=n(60136),d=n(82963),y=n(61120),f=n(53229),h=n(87757),v=n.n(h),g=(n(41539),n(39714),n(38880),n(67682)),m=n(21590),b=n(74023),T=n(82625),k=n(84983),S=n(9598);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,y.Z)(e);if(t){var i=(0,y.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var E=k.Z.commerce.iDealApi,Z=(r=S.Z.apiMethodDecorator.bind(null,E)({paramTypes:{request:g.Types.object(m.IDealPaymentRequestTypedef)}}),i=function(e){(0,p.Z)(r,e);var t,n=P(r);function r(e){var t;(0,s.Z)(this,r),t=n.call(this,e);var i={options:g.Types.object({commerceClient:g.Types.instanceStrict(b.Z)})};(0,g.typecheck)((0,u.Z)(t),i,arguments);var o=e.commerceClient;return t.commerceClient=o,t.logger.info(t.toString(),"Created."),t}return(0,c.Z)(r,[{key:"submitPayment",value:(t=(0,a.Z)(v().mark((function e(t){var n,i,a,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=t).logTransaction,a=(0,o.Z)(n.args,1),s=a[0],e.abrupt("return",this.commerceClient.submitIDealPayment(s,(0,l.Z)((0,y.Z)(r.prototype),"accessToken",this),i));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Commerce.IDeal.IDealApi"}}]),r}(T.Z),(0,f.Z)(i.prototype,"submitPayment",[r],Object.getOwnPropertyDescriptor(i.prototype,"submitPayment"),i.prototype),i)},21590:function(e,t,n){"use strict";n.d(t,{IDealPaymentMethodTypedef:function(){return c},IDealPaymentRequestTypedef:function(){return u},IDealUpdatePaymentMethodRequestTypedef:function(){return l}}),n(47941),n(82526),n(57327),n(41539),n(38880),n(54747),n(49337);var r=n(4942),i=n(67682),o=n(94037);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=s(s({},o.PaymentMethodTypedef),{},{isDefault:i.Types.boolean,shopperBankCode:i.Types.nonEmptyString,bankName:i.Types.nonEmptyString,usage:i.Types.nonEmptyString,isShared:i.Types.boolean.optional,billingAddress:i.Types.object(o.BillingAddressTypedef),orderCode:i.Types.nonEmptyString.optional}),u={bankCode:i.Types.nonEmptyString,bankName:i.Types.nonEmptyString,callbackUrl:i.Types.object(o.CallbackUrlTypedef),campaignCode:i.Types.nonEmptyString,voucherCode:i.Types.nonEmptyString,redemptionCode:i.Types.nonEmptyString,offerId:i.Types.nonEmptyString,skus:i.Types.array.of.nonEmptyString,isDefault:i.Types.boolean,usage:i.Types.nonEmptyString},l=s(s({},o.UpdatePaymentMethodBaseTypedef),{},{orderCode:i.Types.nonEmptyString.optional,customerToken:i.Types.nonEmptyString.optional})},96522:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}}),n(12419);var r,i,o=n(54546),a=n(15861),s=n(15671),c=n(43144),u=n(97326),l=n(2291),p=n(60136),d=n(82963),y=n(61120),f=n(53229),h=n(87757),v=n.n(h),g=(n(41539),n(39714),n(38880),n(67682)),m=n(76266),b=n(74023),T=n(82625),k=n(84983),S=n(9598);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,y.Z)(e);if(t){var i=(0,y.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var E=k.Z.commerce.klarnaApi,Z=(r=S.Z.apiMethodDecorator.bind(null,E)({paramTypes:{request:g.Types.object(m.KlarnaPaymentRequestTypedef)}}),i=function(e){(0,p.Z)(r,e);var t,n=P(r);function r(e){var t;(0,s.Z)(this,r),t=n.call(this,e);var i={options:g.Types.object({commerceClient:g.Types.instanceStrict(b.Z)})};(0,g.typecheck)((0,u.Z)(t),i,arguments);var o=e.commerceClient;return t.commerceClient=o,t.logger.info(t.toString(),"Created."),t}return(0,c.Z)(r,[{key:"submitPayment",value:(t=(0,a.Z)(v().mark((function e(t){var n,i,a,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=t).logTransaction,a=(0,o.Z)(n.args,1),s=a[0],e.abrupt("return",this.commerceClient.submitKlarnaPayment(s,(0,l.Z)((0,y.Z)(r.prototype),"accessToken",this),i));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Commerce.Klarna.KlarnaApi"}}]),r}(T.Z),(0,f.Z)(i.prototype,"submitPayment",[r],Object.getOwnPropertyDescriptor(i.prototype,"submitPayment"),i.prototype),i)},76266:function(e,t,n){"use strict";n.d(t,{KlarnaPaymentMethodTypedef:function(){return c},KlarnaPaymentRequestTypedef:function(){return u},KlarnaUpdatePaymentMethodRequestTypedef:function(){return l}}),n(47941),n(82526),n(57327),n(41539),n(38880),n(54747),n(49337);var r=n(4942),i=n(67682),o=n(94037);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=s(s({},o.PaymentMethodTypedef),{},{isDefault:i.Types.boolean,country:i.Types.nonEmptyString.optional,usage:i.Types.nonEmptyString,isShared:i.Types.boolean.optional,billingAddress:i.Types.object(o.BillingAddressTypedef),orderCode:i.Types.nonEmptyString}),u={callbackUrl:i.Types.object(o.CallbackUrlTypedef),termsUrl:i.Types.nonEmptyString,campaignCode:i.Types.nonEmptyString,voucherCode:i.Types.nonEmptyString,redemptionCode:i.Types.nonEmptyString.optional,skus:i.Types.array.of.nonEmptyString,isDefault:i.Types.boolean,usage:i.Types.nonEmptyString},l=s(s({},o.UpdatePaymentMethodBaseTypedef),{},{customerToken:i.Types.nonEmptyString,country:i.Types.nonEmptyString})},91564:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}}),n(12419);var r,i,o=n(54546),a=n(15861),s=n(15671),c=n(43144),u=n(97326),l=n(2291),p=n(60136),d=n(82963),y=n(61120),f=n(53229),h=n(87757),v=n.n(h),g=(n(41539),n(39714),n(38880),n(67682)),m=n(60493),b=n(74023),T=n(82625),k=n(84983),S=n(9598);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,y.Z)(e);if(t){var i=(0,y.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var E=k.Z.commerce.mercadoApi,Z=(r=S.Z.apiMethodDecorator.bind(null,E)({paramTypes:{request:g.Types.object(m.MercadoPaymentRequestTypedef)}}),i=function(e){(0,p.Z)(r,e);var t,n=P(r);function r(e){var t;(0,s.Z)(this,r),t=n.call(this,e);var i={options:g.Types.object({commerceClient:g.Types.instanceStrict(b.Z)})};(0,g.typecheck)((0,u.Z)(t),i,arguments);var o=e.commerceClient;return t.commerceClient=o,t.logger.info(t.toString(),"Created."),t}return(0,c.Z)(r,[{key:"submitPayment",value:(t=(0,a.Z)(v().mark((function e(t){var n,i,a,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=t).logTransaction,a=(0,o.Z)(n.args,1),s=a[0],e.abrupt("return",this.commerceClient.submitMercadoPayment(s,(0,l.Z)((0,y.Z)(r.prototype),"accessToken",this),i));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Commerce.Mercado.MercadoApi"}}]),r}(T.Z),(0,f.Z)(i.prototype,"submitPayment",[r],Object.getOwnPropertyDescriptor(i.prototype,"submitPayment"),i.prototype),i)},60493:function(e,t,n){"use strict";n.d(t,{MercadoPaymentMethodTypedef:function(){return u},MercadoPaymentRequestTypedef:function(){return l},MercadoUpdatePaymentMethodRequestTypedef:function(){return p}}),n(47941),n(82526),n(57327),n(41539),n(38880),n(54747),n(49337);var r=n(4942),i=n(67682),o=n(94037);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={payer:i.Types.nonEmptyString.optional,payerId:i.Types.nonEmptyString,payerName:i.Types.object(o.PayerNameTypedef),payerAddress:i.Types.object(o.PayerAddressTypedef)},u=s(s({},o.PaymentMethodTypedef),{},{isDefault:i.Types.boolean,usage:i.Types.nonEmptyString,isShared:i.Types.boolean.optional,orderCode:i.Types.nonEmptyString,billingAddress:i.Types.object(o.BillingAddressTypedef),payerInfo:i.Types.object(c).optional}),l={billingAddress:i.Types.object(o.BillingAddressTypedef),successUrl:i.Types.nonEmptyString,cancelUrl:i.Types.nonEmptyString,pendingUrl:i.Types.nonEmptyString,failureUrl:i.Types.nonEmptyString,campaignCode:i.Types.nonEmptyString.optional,voucherCode:i.Types.nonEmptyString.optional,redemptionCode:i.Types.nonEmptyString.optional,offerId:i.Types.nonEmptyString.optional,isDefault:i.Types.boolean.optional,skus:i.Types.array.of.nonEmptyString.optional,usage:i.Types.nonEmptyString},p=s(s({},o.UpdatePaymentMethodBaseTypedef),{},{customerToken:i.Types.nonEmptyString,payerInfo:i.Types.object(c)})},93776:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}}),n(12419);var r,i,o,a,s,c=n(54546),u=n(15861),l=n(15671),p=n(43144),d=n(97326),y=n(2291),f=n(60136),h=n(82963),v=n(61120),g=n(53229),m=n(87757),b=n.n(m),T=(n(41539),n(39714),n(38880),n(67682)),k=n(11850),S=n(74023),P=n(82625),E=n(84983),Z=n(9598);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,v.Z)(e);if(t){var i=(0,v.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,h.Z)(this,n)}}var D=E.Z.commerce.payPalApi,C=Z.Z.apiMethodDecorator.bind(null,D),A=(r=C(),i=C({paramTypes:{billingAgreementId:T.Types.nonEmptyString}}),o=C({paramTypes:{request:T.Types.object(k.CreateBraintreePaymentMethodRequestTypedef)}}),a=C({paramTypes:{request:T.Types.object(k.UpdateBraintreePaymentMethodRequestTypedef)}}),s=function(e){(0,f.Z)(a,e);var t,n,r,i,o=w(a);function a(e){var t;(0,l.Z)(this,a),t=o.call(this,e);var n={options:T.Types.object({commerceClient:T.Types.instanceStrict(S.Z)})};(0,T.typecheck)((0,d.Z)(t),n,arguments);var r=e.commerceClient;return t.commerceClient=r,t.logger.info(t.toString(),"Created."),t}return(0,p.Z)(a,[{key:"createBraintreeToken",value:(i=(0,u.Z)(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.logTransaction,e.abrupt("return",this.commerceClient.createBraintreeToken((0,y.Z)((0,v.Z)(a.prototype),"accessToken",this),n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getBraintreePaymentMethodId",value:(r=(0,u.Z)(b().mark((function e(t){var n,r,i,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,c.Z)(n.args,1),o=i[0],e.abrupt("return",this.commerceClient.getBraintreePaymentMethodId(o,(0,y.Z)((0,v.Z)(a.prototype),"accessToken",this),r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"createBraintreePaymentMethod",value:(n=(0,u.Z)(b().mark((function e(t){var n,r,i,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,c.Z)(n.args,1),o=i[0],e.abrupt("return",this.commerceClient.createBraintreePaymentMethod(o,(0,y.Z)((0,v.Z)(a.prototype),"accessToken",this),r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"updateBraintreePaymentMethod",value:(t=(0,u.Z)(b().mark((function e(t){var n,r,i,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,c.Z)(n.args,1),o=i[0],e.next=3,this.commerceClient.updateBraintreePaymentMethod(o,(0,y.Z)((0,v.Z)(a.prototype),"accessToken",this),r);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Commerce.PayPal.PayPalApi"}}]),a}(P.Z),(0,g.Z)(s.prototype,"createBraintreeToken",[r],Object.getOwnPropertyDescriptor(s.prototype,"createBraintreeToken"),s.prototype),(0,g.Z)(s.prototype,"getBraintreePaymentMethodId",[i],Object.getOwnPropertyDescriptor(s.prototype,"getBraintreePaymentMethodId"),s.prototype),(0,g.Z)(s.prototype,"createBraintreePaymentMethod",[o],Object.getOwnPropertyDescriptor(s.prototype,"createBraintreePaymentMethod"),s.prototype),(0,g.Z)(s.prototype,"updateBraintreePaymentMethod",[a],Object.getOwnPropertyDescriptor(s.prototype,"updateBraintreePaymentMethod"),s.prototype),s)},11850:function(e,t,n){"use strict";n.d(t,{CreateBraintreePaymentMethodRequestTypedef:function(){return p},PayPalPaymentMethodTypedef:function(){return u},PayPalUpdatePaymentMethodRequestTypedef:function(){return l},UpdateBraintreePaymentMethodRequestTypedef:function(){return d}}),n(47941),n(82526),n(57327),n(41539),n(38880),n(54747),n(49337);var r=n(4942),i=n(67682),o=n(94037);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={payer:i.Types.nonEmptyString,payerId:i.Types.nonEmptyString,payerName:i.Types.object(o.PayerNameTypedef),payerCountry:i.Types.nonEmptyString},u=s(s({},o.PaymentMethodTypedef),{},{isDefault:i.Types.boolean,usage:i.Types.nonEmptyString,isShared:i.Types.boolean.optional,payerInfo:i.Types.object(c).optional,billingAddress:i.Types.object(o.BillingAddressTypedef)}),l=s(s({},o.UpdatePaymentMethodBaseTypedef),{},{payerInfo:i.Types.object(c).optional,billingAgreementId:i.Types.nonEmptyString.optional,isShared:i.Types.boolean.optional}),p={nonce:i.Types.nonEmptyString,isDefault:i.Types.boolean,isShared:i.Types.boolean.optional},d={paymentMethodId:i.Types.nonEmptyString,nonce:i.Types.nonEmptyString.optional,isDefault:i.Types.boolean.optional,isShared:i.Types.boolean.optional}},15399:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}}),n(12419);var r,i,o,a=n(55786),s=n(54546),c=n(15861),u=n(15671),l=n(43144),p=n(97326),d=n(2291),y=n(60136),f=n(82963),h=n(61120),v=n(53229),g=n(87757),m=n.n(g),b=(n(41539),n(39714),n(38880),n(67682)),T=n(92421),k=n(25652),S=n(74023),P=n(82625),E=n(84983),Z=n(9598),w=["creditCardNumber"];function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var i=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var C=E.Z.commerce.paymentCardApi,A=Z.Z.apiMethodDecorator.bind(null,C),R=(r=A({paramTypes:{request:b.Types.object(T.SubmitOrderWithCardPaymentMethodRequestTypedef),deviceProfile:b.Types.nonEmptyString.optional}}),i=A({paramTypes:{paymentInformation:b.Types.object(T.CardPaymentMethodInformationTypedef),createPaymentMethodRequired:b.Types.object(k.CreatePaymentMethodRequiredInputTypedef)}}),o=function(e){(0,y.Z)(i,e);var t,n,r=D(i);function i(e){var t;(0,u.Z)(this,i),t=r.call(this,e);var n={options:b.Types.object({commerceClient:b.Types.instanceStrict(S.Z)})};(0,b.typecheck)((0,p.Z)(t),n,arguments);var o=e.commerceClient;return t.commerceClient=o,t.logger.info(t.toString(),"Created."),t}return(0,l.Z)(i,[{key:"submitOrderWithCardPaymentMethod",value:(n=(0,c.Z)(m().mark((function e(t){var n,r,o,a,c,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,o=(0,s.Z)(n.args,2),a=o[0],c=o[1],e.next=3,this.commerceClient.submitOrderWithPaymentMethod({request:a,deviceProfile:c,accessToken:(0,d.Z)((0,h.Z)(i.prototype),"accessToken",this),logTransaction:r});case 3:return u=e.sent,e.abrupt("return",u.guid);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"createCardPaymentMethod",value:(t=(0,c.Z)(m().mark((function e(t){var n,r,o,c,u,l,p,y,f,v,g,b;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,o=(0,s.Z)(n.args,2),c=o[0],u=o[1],l=c.creditCardNumber,p=(0,a.Z)(c,w),y=u.region,p.usage=p.isReusable?"multi_use":"single_use",f=this.commerceClient.getNamespaceID(),v={creditCardNumber:l,namespaceId:f,passthroughData:p},e.next=8,this.commerceClient.createCardPaymentMethod({request:v,region:y,accessToken:(0,d.Z)((0,h.Z)(i.prototype),"accessToken",this),logTransaction:r});case 8:return g=e.sent,b=g.paymentMethodId,e.abrupt("return",b);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Commerce.PaymentCard.PaymentCardApi"}}]),i}(P.Z),(0,v.Z)(o.prototype,"submitOrderWithCardPaymentMethod",[r],Object.getOwnPropertyDescriptor(o.prototype,"submitOrderWithCardPaymentMethod"),o.prototype),(0,v.Z)(o.prototype,"createCardPaymentMethod",[i],Object.getOwnPropertyDescriptor(o.prototype,"createCardPaymentMethod"),o.prototype),o)},92421:function(e,t,n){"use strict";n.d(t,{CardPaymentMethodInformationTypedef:function(){return l},CardPaymentMethodTypedef:function(){return u},CardUpdatePaymentMethodRequestTypedef:function(){return p},CreateCardPaymentMethodRequestTypedef:function(){return y},SubmitOrderWithCardPaymentMethodRequestTypedef:function(){return f}}),n(47941),n(82526),n(57327),n(41539),n(38880),n(54747),n(49337);var r=n(4942),i=n(67682),o=n(94037),a=n(31658);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=c(c({},o.PaymentMethodTypedef),{},{isDefault:i.Types.boolean,usage:i.Types.nonEmptyString,isShared:i.Types.boolean.optional,alternateName:i.Types.nonEmptyString.optional,cardType:i.Types.in(a.PaymentCardType),cardTypeOverride:i.Types.in(a.PaymentCardType).optional,firstSix:i.Types.nonEmptyString,lastFour:i.Types.nonEmptyString,expiryMonth:i.Types.number,expiryYear:i.Types.number,brand:i.Types.nonEmptyString,country:i.Types.nonEmptyString,issuer:i.Types.nonEmptyString,isCorporate:i.Types.boolean,ownerFullName:i.Types.nonEmptyString,billingAddress:i.Types.object(o.BillingAddressTypedef),schemeTransactionIdentifier:i.Types.nonEmptyString.optional,networkTxReference:i.Types.nonEmptyString.optional}),l={creditCardNumber:i.Types.nonEmptyString,alternateName:i.Types.nonEmptyString.optional,cardTypeOverride:i.Types.in(a.PaymentCardType).optional,billingAddress:i.Types.object(o.BillingAddressTypedef),expiryMonth:i.Types.number,expiryYear:i.Types.number,ownerFullName:i.Types.nonEmptyString,isDefault:i.Types.boolean,isReusable:i.Types.boolean,isShared:i.Types.boolean},p=c(c({},o.UpdatePaymentMethodBaseTypedef),{},{expiryMonth:i.Types.number.optional,expiryYear:i.Types.number.optional,alternateName:i.Types.nonEmptyString.optional,schemeTransactionIdentifier:i.Types.nonEmptyString.optional,isShared:i.Types.boolean.optional,networkTxReference:i.Types.nonEmptyString.optional,dateOfBirth:i.Types.dateString.optional,pin:i.Types.nonEmptyString.optional,cvv:i.Types.nonEmptyString.optional}),d={alternateName:i.Types.nonEmptyString.optional,cardTypeOverride:i.Types.in(a.PaymentCardType).optional,expiryMonth:i.Types.number,expiryYear:i.Types.number,ownerFullName:i.Types.nonEmptyString,billingAddress:i.Types.object(o.BillingAddressTypedef),isDefault:i.Types.boolean,isShared:i.Types.boolean,usage:i.Types.nonEmptyString},y={creditCardNumber:i.Types.nonEmptyString,namespaceId:i.Types.number,passthroughData:i.Types.object(d)},f={affiliateTracking:i.Types.object(o.AffiliateTrackingTypedef).optional,cardSecurityCode:i.Types.nonEmptyString,lineItems:i.Types.array.of.object(o.LineItemTypedef),paymentMethodId:i.Types.nonEmptyString,orderCampaigns:i.Types.array.of.object(o.OrderCampaignTypedef),sca:i.Types.object(o.StrongCustomerAuthTypedef).optional,offerId:i.Types.nonEmptyString.optional,attributes:i.Types.object().optional}},94037:function(e,t,n){"use strict";n.d(t,{AccountResumeRequestTypedef:function(){return k},AffiliateTrackingTypedef:function(){return o},AssociateAuthValuesWithPaymentMethodRequestTypedef:function(){return D},BillingAddressTypedef:function(){return a},CallbackUrlTypedef:function(){return s},LineItemTypedef:function(){return c},OrderCampaignTypedef:function(){return u},OrderSubmissionRequestTypedef:function(){return w},PayerAddressTypedef:function(){return l},PayerNameTypedef:function(){return p},PaymentMethodTypedef:function(){return b},PlanSwitchRequestTypedef:function(){return P},PriceOrderRequestTypedef:function(){return Z},RedeemRequestTypedef:function(){return y},RestartSubscriptionRequestTypedef:function(){return f},StrongCustomerAuthTypedef:function(){return h},SubmitOrderWithPaymentMethodRequestTypedef:function(){return E},UpdateOrderRequestTypedef:function(){return m},UpdatePaymentMethodBaseTypedef:function(){return T}});var r=n(67682),i=n(31658),o={affiliateId:r.Types.nonEmptyString.optional,partnerId:r.Types.nonEmptyString.optional,source:r.Types.nonEmptyString.optional},a={line1:r.Types.nonEmptyString.optional,line2:r.Types.nonEmptyString.optional,line3:r.Types.nonEmptyString.optional,city:r.Types.nonEmptyString.optional,state:r.Types.nonEmptyString.optional,country:r.Types.nonEmptyString,postalCode:r.Types.nonEmptyString.optional},s={cancelUrl:r.Types.nonEmptyString,pendingUrl:r.Types.nonEmptyString,successUrl:r.Types.nonEmptyString,failureUrl:r.Types.nonEmptyString},c={sku:r.Types.nonEmptyString},u={campaignCode:r.Types.nonEmptyString.optional,voucherCode:r.Types.nonEmptyString.optional,redemptionCode:r.Types.nonEmptyString.optional},l={payerCountry:r.Types.nonEmptyString,payerPostalCode:r.Types.nonEmptyString.optional,payerCity:r.Types.nonEmptyString.optional,payerState:r.Types.nonEmptyString.optional},p={firstName:r.Types.nonEmptyString,middleName:r.Types.nonEmptyString.optional,lastName:r.Types.nonEmptyString,suffix:r.Types.nonEmptyString.optional},d={zipCode:r.Types.nonEmptyString.optional,city:r.Types.nonEmptyString.optional,state:r.Types.nonEmptyString.optional,country:r.Types.nonEmptyString.optional},y={redemptionCode:r.Types.nonEmptyString,skuList:r.Types.array.of.nonEmptyString},f={subscriptionId:r.Types.nonEmptyString},h={sessionId:r.Types.nonEmptyString,returnUrl:r.Types.nonEmptyString},v={subscriptionId:r.Types.nonEmptyString.optional},g={offerId:r.Types.nonEmptyString.optional,promotionId:r.Types.nonEmptyString.optional,sku:r.Types.nonEmptyString,campaignCode:r.Types.nonEmptyString,voucherCode:r.Types.nonEmptyString},m={operation:r.Types.in(i.UpdateOrderType),guid:r.Types.nonEmptyString},b={paymentMethodId:r.Types.nonEmptyString,type:r.Types.in(i.PaymentMethodType),walletId:r.Types.nonEmptyString,metadata:r.Types.object().optional,partner:r.Types.nonEmptyString,identityId:r.Types.nonEmptyString.optional},T={paymentMethodId:r.Types.nonEmptyString,type:r.Types.in(i.PaymentMethodType)},k={paymentMethodId:r.Types.nonEmptyString,subscriptions:r.Types.array.of.nonEmptyString,cardSecurityCode:r.Types.nonEmptyString.optional,sca:r.Types.object(h).optional,isImmediateRetry:r.Types.boolean.optional},S={from:r.Types.object(v),to:r.Types.object(g)},P={paymentMethodId:r.Types.nonEmptyString,cardSecurityCode:r.Types.nonEmptyString.optional,sca:r.Types.object(h).optional,switchContext:r.Types.object(S)},E={affiliateTracking:r.Types.object(o).optional,lineItems:r.Types.array.of.object(c),paymentMethodId:r.Types.nonEmptyString,orderCampaigns:r.Types.array.of.object(u),sca:r.Types.object(h).optional,offerId:r.Types.nonEmptyString.optional,attributes:r.Types.object().optional},Z={offerId:r.Types.nonEmptyString.optional,productIdentifiers:r.Types.array.of.nonEmptyString.optional,identifierType:r.Types.number.optional,campaignCode:r.Types.nonEmptyString.optional,voucherCode:r.Types.nonEmptyString.optional,redemptionCode:r.Types.nonEmptyString.optional,address:r.Types.object(d).optional},w={affiliateTracking:r.Types.object(o).optional,cardSecurityCode:r.Types.nonEmptyString.optional,lineItems:r.Types.array.of.object(c),paymentMethodId:r.Types.nonEmptyString,orderCampaigns:r.Types.array.of.object(u),sca:r.Types.object(h).optional,offerId:r.Types.nonEmptyString.optional,attributes:r.Types.object().optional},D={paymentMethodId:r.Types.nonEmptyString,dateOfBirth:r.Types.nonEmptyString.optional,pin:r.Types.nonEmptyString.optional}},55322:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(87757),c=n.n(s),u=(n(74916),n(15306),n(92222),n(41539),n(39714),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337),n(67682)),l=n(87891),p=n(19496),d=n(14008),y=n(81350),f=n(64932),h=n(10664),v=n(27089),g=n(1206),m=n(58405),b=n(84983),T=n(75742),k=n(49160),S=n(53514),P=n(9310),E=function(){function e(t){(0,o.Z)(this,e);var n={options:u.Types.object({isFallback:u.Types.boolean.optional})};(0,u.typecheck)(this,n,arguments);var r=t.isFallback,i=void 0!==r&&r,a=P.sF;i&&(a=a.replace(/\{deviceProfile\}/gi,"default").replace(/\{applicationRuntime\}/gi,"browser"));var s={bootstrap:new S.Z({rel:"bootstrap",href:a,ttl:0,timeout:30,templated:!0,headers:e.headers})};this.defaultConfigHostName=P.xe,this.client=new T.Z({baseUrl:P.xe,endpoints:s,extras:new k.Z(P.$p)})}return(0,a.Z)(e,[{key:"toString",value:function(){return"SDK.Configuration.EmbeddedConfiguration"}}]),e}();(0,r.Z)(E,"headers",{Accept:"application/json"});var Z=n(9588);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=b.Z.configuration.configurationManager,A=function(){function e(t){(0,o.Z)(this,e);var n={options:u.Types.object({bootstrapConfiguration:u.Types.instanceStrict(f.Z),logger:u.Types.instanceStrict(l.Z),httpClient:u.Types.instanceStrict(p.Z),storage:u.Types.instanceStrict(d.Z.Storage)})};(0,u.typecheck)(this,n,arguments);var r=t.bootstrapConfiguration,i=t.logger,a=t.httpClient,s=t.storage;this.bootstrapConfiguration=r,this.logger=i,this.httpClient=a,this.storage=s,this.environmentConfiguration=e.createEnvironmentConfiguration(this.bootstrapConfiguration),this.configurationClientConfiguration=e.getClientConfiguration(),this.client=new v.Z({config:this.configurationClientConfiguration,logger:i,httpClient:a}),this.cacheKey="\n            ".concat(y.SDKSESSION_CONFIGURATION_KEY,"\n            ").concat(this.bootstrapConfiguration.clientId,"_\n            ").concat(this.bootstrapConfiguration.environment,"\n        ").replace(Z.REPLACE_NL_WS,""),this.logger.log(this.toString(),"Created.")}var t,n,r;return(0,a.Z)(e,[{key:"getConfiguration",value:(r=(0,i.Z)(c().mark((function e(t){var n,r,o,a,s,u,l,p,d,y=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getConfiguration,r=t.logTransaction,o=this.cacheKey,a=this.logger,s=this.bootstrapConfiguration,u=this.environmentConfiguration,l=new g.Z({logger:a,source:this.toString(),urn:C.getConfiguration,skipLogTransaction:!0}),a.info(this.toString(),'Getting configuration:\n            clientId: "'.concat(s.clientId,'",\n            environment: "').concat(s.environment,'",\n            deviceFamily: "').concat(u.deviceFamily,'",\n            sdkVersion: "').concat(u.sdkVersion,'",\n            configVersion: "').concat(u.configVersion,'",\n            configHostName: "').concat(s.configHostName,'",\n            configHostOverride: "').concat(s.configHostOverride,'",\n            configHostUrlOverride: "').concat(s.configHostUrlOverride,'"\n        ').replace(/(\s(?=\s))/g,"")),e.prev=5,p=!0,e.next=9,this.getSdkSessionConfiguration({getConfiguration:n||(0,i.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.client.getConfiguration(s,u,r);case 2:return t=e.sent,p=!1,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),logTransaction:r});case 9:return(d=e.sent).wasFetchedViaExternalGetter=p,a.log(this.toString(),"Successfully fetched configuration."),this.storage.remove(o),e.abrupt("return",d);case 16:return e.prev=16,e.t0=e.catch(5),a.error(this.toString(),"Unable to get configuration."),a.log(this.toString(),'Loading from storage, cache key: "'.concat(o,'".')),l.captureError(e.t0),e.next=23,this.getFallbackConfiguration(r);case 23:return e.abrupt("return",e.sent);case 24:return e.prev=24,l.log(),e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[5,16,24,27]])}))),function(e){return r.apply(this,arguments)})},{key:"getSdkSessionConfiguration",value:(n=(0,i.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getConfiguration,e.next=3,n();case 3:return r=e.sent,r=this.postConfigProcess(r),e.abrupt("return",new h.Z(D(D({},r),{},{environmentConfiguration:this.environmentConfiguration})));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"postConfigProcess",value:function(e){var t,n,r;return(null===(t=this.bootstrapConfiguration.extras)||void 0===t||null===(n=t.configExtensions)||void 0===n||null===(r=n.postConfig)||void 0===r?void 0:r.call(n,e))||e}},{key:"getFallbackConfiguration",value:(t=(0,i.Z)(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new E({isFallback:!0}),r=new v.Z({config:n.client,logger:this.logger,httpClient:this.httpClient}),this.logger.log(this.toString(),"Fetching fallback configuration."),e.next=5,r.getConfiguration(this.bootstrapConfiguration,this.environmentConfiguration,t);case 5:return i=e.sent,o=new h.Z(D(D({},i),{},{environmentConfiguration:this.environmentConfiguration})),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Configuration.ConfigurationManager"}}],[{key:"createEnvironmentConfiguration",value:function(e){var t,n,r,i,o,a,s,c=e.platform,u=e.extras,l=null==u||null===(t=u.configExtensions)||void 0===t?void 0:t.platformOverride;!l&&c&&(l=m.Z[c]);var p=(null==u||null===(n=u.configExtensions)||void 0===n||null===(r=n.configTokenReplacements)||void 0===r?void 0:r.platformId)||(null===(i=l)||void 0===i?void 0:i.applicationRuntime),y=(null==u||null===(o=u.configExtensions)||void 0===o||null===(a=o.platformOverride)||void 0===a?void 0:a.applicationRuntime)||(null===(s=l)||void 0===s?void 0:s.applicationRuntime),f=D(D({applicationVersion:e.application.version,applicationRuntimeConfigSegment:y},l),{},{applicationRuntime:p});return new d.Z.EnvironmentConfiguration(f)}},{key:"getClientConfiguration",value:function(){return new E({isFallback:!1}).client}}]),e}()},9588:function(e,t,n){"use strict";n.d(t,{DEFAULT_ZERO_GUID:function(){return r},REPLACE_NL_WS:function(){return i}});var r="00000000-0000-0000-0000-000000000000",i=/(?:\n\s+)/g},89789:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}}),n(12419);var r,i,o,a=n(54546),s=n(15861),c=n(15671),u=n(43144),l=n(97326),p=n(2291),d=n(60136),y=n(82963),f=n(61120),h=n(53229),v=n(87757),g=n.n(v),m=(n(41539),n(39714),n(38880),n(67682)),b=n(39507),T=n(10917),k=n(97264),S=n(86083),P=n(82625),E=n(59912),Z=n(9598);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.Z)(e);if(t){var i=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,y.Z)(this,n)}}var D=n(84983).Z.content.contentApi,C=Z.Z.apiMethodDecorator.bind(null,D),A=(r=C({paramTypes:{options:m.Types.object({query:m.Types.instanceStrict(T.Z),overrides:m.Types.instanceStrict(b.Z).optional,contentTransactionId:m.Types.nonEmptyString.optional})}}),i=C({paramTypes:{query:m.Types.instanceStrict(S.Z),overrides:m.Types.instanceStrict(b.Z).optional,contentTransactionId:m.Types.nonEmptyString.optional}}),o=function(e){(0,d.Z)(i,e);var t,n,r=w(i);function i(e){var t;(0,c.Z)(this,i),t=r.call(this,e);var n={options:m.Types.object({contentClient:m.Types.instanceStrict(E.Z)})};(0,m.typecheck)((0,l.Z)(t),n,arguments);var o=e.contentClient;return t.contentClient=o,t.logger.info(t.toString(),"Created."),t}return(0,u.Z)(i,[{key:"query",value:(n=(0,s.Z)(g().mark((function e(t){var n,r,o,s,c,u,l,d;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,o=n.dustLogUtility,s=(0,a.Z)(n.args,1),c=s[0],u=c.query,l=c.contentTransactionId,d=c.overrides,null==o||o.logData({context:u.context,contentTransactionId:l}),e.next=5,this.contentClient.query({context:u.context,queryBuilder:u.query,accessToken:(0,p.Z)((0,f.Z)(i.prototype),"accessToken",this),overrides:d,contentTransactionId:l,logTransaction:r});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"search",value:(t=(0,s.Z)(g().mark((function e(t){var n,r,o,s,c,u,l;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,o=(0,a.Z)(n.args,3),s=o[0],c=o[1],u=o[2],l=new k.Z(s),e.abrupt("return",this.contentClient.query({context:l.context,queryBuilder:l.query,accessToken:(0,p.Z)((0,f.Z)(i.prototype),"accessToken",this),overrides:c,contentTransactionId:u,logTransaction:r}));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Content.ContentApi"}}]),i}(P.Z),(0,h.Z)(o.prototype,"query",[r],Object.getOwnPropertyDescriptor(o.prototype,"query"),o.prototype),(0,h.Z)(o.prototype,"search",[i],Object.getOwnPropertyDescriptor(o.prototype,"search"),o.prototype),o)},10917:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(82886),s=function(){function e(t,n){(0,r.Z)(this,e);var i={context:o.Types.nonEmptyString,query:o.Types.instanceStrict(a.Z)};(0,o.typecheck)(this,i,arguments),this.context=t,this.query=n}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Content.ContentQuery"}}]),e}()},86083:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),u=n(67682),l=n(17563),p=n(81763),d=n(82886),y=n(29466);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var h=function(e){(0,a.Z)(n,e);var t=f(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,r.Z)(this,n),i=t.call(this);var c={query:u.Types.nonEmptyString,operationName:u.Types.string.optional,variables:u.Types.object().optional};return(0,u.typecheck)((0,o.Z)(i),c,arguments),i.query=e,i.operationName=a||"",i.variables=s||{},i}return(0,i.Z)(n,[{key:"createQueryUrl",value:function(e,t){var n={url:u.Types.nonEmptyString,method:u.Types.in(p.Z)};(0,u.typecheck)(this,n,arguments);var r=e;if(t===p.Z.GET){var i=l.stringify({query:this.query||"",operationName:this.operationName||"",variables:this.variables?JSON.stringify(this.variables):""});r=(0,y.Z)(r,i)}return r}},{key:"createPostContent",value:function(){return JSON.stringify(this)}},{key:"toString",value:function(){return"SDK.Content.GraphQlQuery"}}]),n}(d.Z)},97264:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),u=n(67682),l=n(86083);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var d=function(e){(0,a.Z)(n,e);var t=p(n);function n(e){var i;(0,r.Z)(this,n),i=t.call(this,"search",e);var a={query:u.Types.instanceStrict(l.Z)};return(0,u.typecheck)((0,o.Z)(i),a,arguments),i}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Content.Search.SearchQuery"}}]),n}(n(10917).Z)},39507:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({activeDate:o.Types.dateString.optional,countryCode:o.Types.nonEmptyString.optional,bypassCDNCache:o.Types.boolean.optional})};(0,o.typecheck)(this,n,arguments);var i=t.activeDate,a=t.countryCode,s=t.bypassCDNCache;this.activeDate=i,this.countryCode=a,this.bypassCDNCache=s}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Content.SearchOverrides"}}]),e}()},27838:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=(n(41539),n(39714),n(67682)),u=n(87891),l=n(10789),p=n(71111),d=function(){function e(t){(0,i.Z)(this,e);var n=c.Types.object({config:c.Types.instanceStrict(p.Z),customerServiceClient:c.Types.instanceStrict(l.Z),logger:c.Types.instanceStrict(u.Z)});(0,c.typecheck)(this,n,arguments);var r=t.config,o=t.customerServiceClient,a=t.logger;this.config=r,this.client=o,this.logger=a,this.logger.log(this.toString(),"Created.")}var t;return(0,o.Z)(e,[{key:"createSupportCode",value:(t=(0,r.Z)(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.createSupportCode(t,n);case 2:return r=e.sent,this.logger.info(this.toString(),"Customer support code created"),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.CustomerService.CustomerServiceManager"}}]),e}()},8535:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(15671),i=n(43144),o=(n(41539),n(39714),n(92222),n(67682)),a=n(10869),s=n(87891),c=n(25824),u=function(){function e(t){(0,r.Z)(this,e);var n={logger:o.Types.instanceStrict(s.Z).optional};(0,o.typecheck)(this,n,arguments),this.logger=t||s.Z.instance,this.logger.log(this.toString(),"Created provider.")}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Device.DeviceAttributeProvider"}}],[{key:"validateAttributes",value:function(t,n){var r={attributes:o.Types.instanceStrict(c.Z)};(0,o.typecheck)(e,"validateAttributes",r,[t],a.Z);var i=!!t.osDeviceIds.length,u=t.osDeviceIds.some((function(e){return e.identifier===n}));i&&!u&&s.Z.instance.warn("DeviceAttributeProvider",'Advertising Identifier: "'.concat(n,'" not found in provided osDeviceIds: ').concat(JSON.stringify(t.osDeviceIds),"."))}}]),e}()},25824:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}}),n(47941),n(82526),n(57327),n(41539),n(38880),n(54747),n(49337);var r=n(4942),i=n(15671),o=n(43144),a=n(67682),s=n(21288);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(){function e(t){(0,i.Z)(this,e);var n={options:a.Types.object({osDeviceIds:a.Types.array.of.instanceStrict(s.Z).optional,manufacturer:a.Types.string.optional,model:a.Types.string.optional,operatingSystem:a.Types.string.optional,operatingSystemVersion:a.Types.string.optional,browserName:a.Types.string.optional,browserVersion:a.Types.string.optional,deviceLanguage:a.Types.string.optional,modelFamily:a.Types.string.optional,passwordResetRequired:a.Types.boolean.optional,brand:a.Types.string.optional}).optional};(0,a.typecheck)(this,n,arguments);var r=t||{},o=r.osDeviceIds,c=r.manufacturer,u=r.model,l=r.operatingSystem,p=r.operatingSystemVersion,d=r.browserName,y=r.browserVersion,f=r.deviceLanguage,h=r.modelFamily,v=r.passwordResetRequired,g=r.brand;this.osDeviceIds=o||[],this.manufacturer=c||null,this.model=u||null,this.operatingSystem=l||"n/a",this.operatingSystemVersion=p||"n/a",this.browserName=d||null,this.browserVersion=y||null,this.deviceLanguage=f||null,this.modelFamily=h||null,this.passwordResetRequired=v||!1,this.brand=g}return(0,o.Z)(e,[{key:"toString",value:function(){return"SDK.Device.DeviceAttributes"}}],[{key:"normalizeAttributes",value:function(e){var t=e||{},n=t.manufacturer,r=t.operatingSystem,i=t.operatingSystemVersion;return u(u({},e),{},{manufacturer:n||"n/a",operatingSystem:r||"n/a",operatingSystemVersion:i||"n/a"})}}]),e}()},58665:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=(n(41539),n(39714),n(67682)),u=n(73492),l=n(87891),p=n(7135),d=n(74325),y=n(90262),f=n(8535),h=n(87020),v=n(14008),g=n(80540),m=function(){function e(t){(0,i.Z)(this,e);var n={options:c.Types.object({logger:c.Types.instanceStrict(l.Z),deviceGrantStorage:c.Types.instanceStrict(p.Z),environmentConfiguration:c.Types.instanceStrict(v.Z.EnvironmentConfiguration),advertisingIdProvider:c.Types.instanceStrict(y.Z),deviceAttributeProvider:c.Types.instanceStrict(f.Z),orchestrationManager:c.Types.instanceStrict(d.Z),tokenUpdater:c.Types.instanceStrict(u.Z),devicePlatformId:c.Types.nonEmptyString})};(0,c.typecheck)(this,n,arguments);var r=t.logger,o=t.deviceGrantStorage,a=t.environmentConfiguration,s=t.advertisingIdProvider,h=t.deviceAttributeProvider,g=t.orchestrationManager,m=t.tokenUpdater,b=t.devicePlatformId;this.logger=r,this.deviceGrantStorage=o,this.environmentConfiguration=a,this.advertisingIdProvider=s,this.deviceAttributeProvider=h,this.orchestrationManager=g,this.tokenUpdater=m,this.devicePlatformId=b,this.logger.log(this.toString(),"Created.")}var t,n;return(0,o.Z)(e,[{key:"getDeviceGrant",value:(n=(0,r.Z)(s().mark((function e(t,n){var r,i,o=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={options:c.Types.object({userToken:c.Types.nonEmptyString.optional}).optional},(0,c.typecheck)(this,"getDeviceGrant",r,o),i=this.deviceGrantStorage.getDeviceGrant(),!c.Check.assigned(i)){e.next=4;break}return e.abrupt("return",i);case 4:return e.abrupt("return",this.createDeviceGrant(t,n));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"createDeviceGrant",value:(t=(0,r.Z)(s().mark((function e(t,n){var r,i,o,a,u,l,p,d,y,v,m,b,T,k,S,P,E,Z,w=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.advertisingIdProvider,i=this.deviceGrantStorage,o=this.deviceAttributeProvider,a=this.logger,u=this.environmentConfiguration,l=this.devicePlatformId,p={options:c.Types.object({userToken:c.Types.nonEmptyString.optional}).optional},(0,c.typecheck)(this,"createDeviceGrant",p,w),d=(t||{}).userToken,y=u.deviceFamily,v=u.applicationRuntime,m=u.deviceProfile,b=o.getDeviceAttributes(),T=r.getId(),f.Z.validateAttributes(b,T),k=new h.Z({deviceFamily:y,applicationRuntime:v,deviceProfile:m,attributes:b,devicePlatformId:l}),e.prev=8,S={deviceMetadata:k,userToken:d},P=this.orchestrationManager.registerDevice(S,n),this.tokenUpdater.currentTokenRefreshPromise=P,e.next=14,P;case 14:return E=e.sent,Z=E.extensions.deviceGrant,a.info(this.toString(),"DeviceGrant Created"),e.next=19,i.saveDeviceGrant(Z);case 19:return this.tokenUpdater.emit(g.Z.DeviceRegistered,Z),e.abrupt("return",Z);case 21:return e.prev=21,this.tokenUpdater.currentTokenRefreshPromise=null,e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[8,,21,24]])}))),function(e,n){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Device.DeviceManager"}}]),e}()},87020:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(25824),s=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({deviceFamily:o.Types.nonEmptyString,applicationRuntime:o.Types.nonEmptyString,deviceProfile:o.Types.nonEmptyString,attributes:o.Types.instanceStrict(a.Z),devicePlatformId:o.Types.nonEmptyString})};(0,o.typecheck)(this,n,arguments);var i=t.deviceFamily,s=t.applicationRuntime,c=t.deviceProfile,u=t.attributes,l=t.devicePlatformId;this.deviceFamily=i,this.applicationRuntime=s,this.deviceProfile=c,this.attributes=u||{},this.devicePlatformId=l}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Device.DeviceMetadata"}}]),e}()},21288:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(35833),s=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({identifier:o.Types.nonEmptyString.optional,type:o.Types.in(a.Z).optional}).optional};(0,o.typecheck)(this,n,arguments);var i=t||{},s=i.identifier,c=i.type;o.Check.assigned(s)&&(this.identifier=s),o.Check.assigned(c)&&(this.type=c)}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Device.OsDeviceId"}}]),e}()},35833:function(e,t){"use strict";var n;!function(e){e.amazonAdvertisingId="amazon.advertising.id",e.androidAdvertisingId="android.advertising.id",e.androidDrmId="android.drm.id",e.androidVendorId="android.vendor.id",e.appleAdvertisingId="apple.advertising.id",e.appleVendorId="apple.vendor.id",e.bbdAdvertisingId="bbd.advertising.id",e.bbdDeviceId="bbd.device.id",e.chromecastDeviceId="chromecast.device.id",e.comcastAdvertisingId="comcast.advertising.id",e.fireboltAdvertisingId="firebolt.advertising.id",e.playstationDeviceId="playstation.device.id",e.rokuAdvertisingId="roku.advertising.id",e.tizenAdvertisingId="tizen.advertising.id",e.tizenDeviceId="tizen.device.id",e.unknown="unknown",e.vizioAdvertisingId="vizio.advertising.id",e.webosAdvertisingId="webos.advertising.id",e.webosDeviceId="webos.device.id",e.windowsAdvertisingId="windows.advertising.id",e.windowsHardwareId="windows.hardware.id",e.xboxAdvertisingId="xbox.advertising.id",e.xboxHardwareId="xbox.hardware.id"}(n||(n={})),t.Z=n},96497:function(e,t){"use strict";var n;!function(e){e.glimpseValidation="glimpseValidation",e.qoeValidation="qoeValidation"}(n||(n={})),t.Z=n},33238:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(15671),i=n(43144),o=(n(74916),n(15306),n(92222),n(66992),n(41539),n(82472),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016),n(21249),n(47941),n(88674),n(67682)),a=n(87891),s=n(14008),c=n(28928),u=n(81350),l=n(9588),p=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({drmType:o.Types.in(c.DrmType),clientId:o.Types.nonEmptyString,environment:o.Types.nonEmptyString,storage:o.Types.instanceStrict(s.Z.Storage),logger:o.Types.instanceStrict(a.Z)})};(0,o.typecheck)(this,n,arguments);var i=t.drmType,p=t.clientId,d=t.environment,y=t.storage,f=t.logger,h=c.DrmType[i].toLowerCase();this.certificateType=h,this.clientId=p,this.environment=d,this.storage=y,this.logger=f,this.oldCacheKey="\n            ".concat(u.BAM_DRM_KEY).concat(this.certificateType).concat(u.CERTIFICATE_KEY).concat(this.clientId,"_").concat(this.environment,"\n        ").replace(l.REPLACE_NL_WS,""),this.cacheKey="\n            ".concat(u.DSS_DRM_KEY).concat(this.certificateType).concat(u.CERTIFICATE_KEY).concat(this.clientId,"_").concat(this.environment,"\n        ").replace(l.REPLACE_NL_WS,""),this.storage.remove(this.oldCacheKey)}return(0,i.Z)(e,[{key:"getStoredCertificate",value:function(){var e=this.cacheKey;return this.storage.get(e).then((function(e){var t;try{t=new Uint8Array(Object.keys(e).map((function(t){return e[t]})))}catch(e){t=void 0}return Promise.resolve(t)}))}},{key:"storeCertificate",value:function(e){var t=this.cacheKey;return this.storage.set(t,new Uint8Array(e))}},{key:"toString",value:function(){return"SDK.Drm.CertificateStorage"}}]),e}()},66282:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}}),n(12419),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(4942),i=n(15671),o=n(43144),a=n(97326),s=n(60136),c=n(82963),u=n(61120),l=(n(41539),n(39714),n(74916),n(15306),n(21249),n(47941),n(67682)),p=n(17187),d=n(87891),y=n(95400),f=n(81374),h=n(34391),v=n(16576),g=n(28928);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var k=function(e){(0,s.Z)(n,e);var t=T(n);function n(e){var r;(0,i.Z)(this,n),r=t.call(this);var o={options:l.Types.object({drmClient:l.Types.instanceStrict(v.Z),tokenManager:l.Types.instanceStrict(y.Z),logger:l.Types.instanceStrict(d.Z),mediaItem:l.Types.instanceStrict(h.Z),type:l.Types.in(g.DrmType).optional,endpointKey:l.Types.nonEmptyString.optional,videoPlayerName:l.Types.nonEmptyString.optional,videoPlayerVersion:l.Types.nonEmptyString.optional})};(0,l.typecheck)((0,a.Z)(r),o,arguments);var s=e.drmClient,c=e.tokenManager,u=e.logger,p=e.mediaItem,f=e.type,m=e.endpointKey,b=e.videoPlayerName,T=e.videoPlayerVersion;return r.drmClient=s,r.tokenManager=c,r.logger=u,r.endpointKey=m,r.type=f||g.DrmType.NONE,r.mediaItem=p,r.videoPlayerName=b,r.videoPlayerVersion=T,r.logger.log(r.toString(),"Created: ".concat(r.type)),r}return(0,o.Z)(n,[{key:"licenseRequestUri",get:function(){var e,t=this.drmClient.config,n=t.endpoints,r=void 0===n?{}:n,i=t.extras,o=void 0===i?{}:i,a=(null===(e=r[f.Z.getEndpointLicense(this.type)])||void 0===e?void 0:e.href)||"",s=this.endpointKey;if(void 0!==s){var c,u,l,p=null===(c=o.licenseEndpoints)||void 0===c||null===(u=c[this.type])||void 0===u?void 0:u[s];if(p)return(null===(l=r[p])||void 0===l?void 0:l.href)||a}return a}},{key:"licenseRequestHeaders",get:function(){var e,t,n,r,i=this.drmClient.config,o=i.endpoints,a=void 0===o?{}:o,s=i.extras,c=void 0===s?{}:s,u=(null===(e=a[f.Z.getEndpointLicense(this.type)])||void 0===e?void 0:e.headers)||{},l=this.endpointKey;return void 0!==l&&(null===(r=a[null===(t=c.licenseEndpoints)||void 0===t||null===(n=t[this.type])||void 0===n?void 0:n[l]])||void 0===r?void 0:r.headers)||u}},{key:"certificateUri",get:function(){var e,t=f.Z.getEndpointCertificate(this.type);return(null===(e=this.drmClient.config.endpoints[t])||void 0===e?void 0:e.href)||""}},{key:"certificateHeaders",get:function(){var e,t=f.Z.getEndpointCertificate(this.type);return(null===(e=this.drmClient.config.endpoints[t])||void 0===e?void 0:e.headers)||{}}},{key:"accessToken",get:function(){return this.tokenManager.getAccessToken()}},{key:"processLicenseRequestHeaders",value:function(){var e=b({},this.licenseRequestHeaders),t=e.Authorization;return t&&(e.Authorization=t.replace("{accessToken}",this.accessToken.token)),e}},{key:"formatRequestHeadersList",value:function(e){var t={headers:l.Types.nonEmptyObject};return(0,l.typecheck)(this,"formatRequestHeadersList",t,arguments),Object.keys(e).map((function(t){return{name:t,value:e[t]}}))}},{key:"processCertificateHeaders",value:function(){var e=b({},this.certificateHeaders),t=e.Authorization;return t&&(e.Authorization=t.replace("{accessToken}",this.accessToken.token)),e}},{key:"toString",value:function(){return"SDK.Drm.DrmProvider"}}]),n}(p.EventEmitter)},91029:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(4942),i=n(15671),o=n(43144),a=n(60136),s=n(82963),c=n(61120),u=(n(41539),n(39714),n(33238)),l=n(28928);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var f=function(e){(0,a.Z)(n,e);var t=y(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,d(d({},e),{},{drmType:l.DrmType.FAIRPLAY}))).logger.log(r.toString(),"Created."),r}return(0,o.Z)(n,[{key:"toString",value:function(){return"SDK.Drm.FairPlayCertificateStorage"}}]),n}(u.Z)},35423:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}}),n(12419),n(47941),n(82526),n(57327),n(54747),n(49337);var r,i,o,a=n(54546),s=n(15861),c=n(4942),u=n(15671),l=n(43144),p=n(60136),d=n(82963),y=n(61120),f=n(53229),h=n(87757),v=n.n(h),g=(n(41539),n(39714),n(38880),n(67682)),m=n(31545),b=n(66282),T=n(91029),k=n(84983),S=n(9598),P=n(28928);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,y.Z)(e);if(t){var i=(0,y.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var D=k.Z.drm.fairPlayDrmProvider,C=S.Z.apiMethodDecorator.bind(null,D),A=(r=C({paramTypes:{serverPlaybackContext:g.Types.arrayBufferView}}),i=C(),o=function(e){(0,p.Z)(i,e);var t,n,r=w(i);function i(e){var t;return(0,u.Z)(this,i),(t=r.call(this,Z(Z({},e),{},{type:P.DrmType.FAIRPLAY}))).certificateStorage=new T.Z({clientId:t.drmClient.clientId,environment:t.drmClient.environment,storage:t.drmClient.storage,logger:t.logger}),t.logger.log(t.toString(),"Created."),t}return(0,l.Z)(i,[{key:"getFairPlayLicense",value:(n=(0,s.Z)(v().mark((function e(t){var n,r,i,o,s,c,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,a.Z)(n.args,1),o=i[0],s=this.mediaItem,c=this.endpointKey,u=this.accessToken,e.prev=2,e.next=5,this.drmClient.getFairPlayLicense({serverPlaybackContext:o,mediaItem:s,endpointKey:c,accessToken:u,logTransaction:r});case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(2),this.logger.error(this.toString(),"FairPlay license request failure."),this.logger.info(this.toString(),"Dispatch ".concat(m.Z.MediaFailure," event.")),this.emit(m.Z.MediaFailure,e.t0),e.t0;case 14:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e){return n.apply(this,arguments)})},{key:"getFairPlayCertificate",value:(t=(0,s.Z)(v().mark((function e(t){var n,r,i,o,a,s,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.logTransaction,r=this.mediaItem,i=this.videoPlayerName,o=this.videoPlayerVersion,a=this.accessToken,e.prev=2,e.next=5,this.certificateStorage.getStoredCertificate();case 5:if(s=e.sent,!g.Check.assigned(s)){e.next=8;break}return e.abrupt("return",s);case 8:return e.next=10,this.drmClient.getFairPlayCertificate({mediaItem:r,videoPlayerName:i,videoPlayerVersion:o,accessToken:a,logTransaction:n});case 10:return c=e.sent,e.next=13,this.certificateStorage.storeCertificate(c);case 13:return e.next=15,this.certificateStorage.getStoredCertificate();case 15:return e.abrupt("return",e.sent);case 18:throw e.prev=18,e.t0=e.catch(2),this.logger.error(this.toString(),"FairPlay certificate request failure."),this.logger.info(this.toString(),"Dispatch ".concat(m.Z.MediaFailure," event.")),this.emit(m.Z.MediaFailure,e.t0),e.t0;case 24:case"end":return e.stop()}}),e,this,[[2,18]])}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Drm.FairPlayDrmProvider"}}]),i}(b.Z),(0,f.Z)(o.prototype,"getFairPlayLicense",[r],Object.getOwnPropertyDescriptor(o.prototype,"getFairPlayLicense"),o.prototype),(0,f.Z)(o.prototype,"getFairPlayCertificate",[i],Object.getOwnPropertyDescriptor(o.prototype,"getFairPlayCertificate"),o.prototype),o)},91744:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(15861),i=n(4942),o=n(15671),a=n(43144),s=n(60136),c=n(82963),u=n(61120),l=n(87757),p=n.n(l),d=(n(41539),n(39714),n(66992),n(82472),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016),n(21249),n(74916),n(23123),n(33238)),y=n(28928);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var g=function(e){(0,s.Z)(c,e);var t,n,i=v(c);function c(e){var t;return(0,o.Z)(this,c),(t=i.call(this,h(h({},e),{},{drmType:y.DrmType.PRMNAGRA}))).logger.log(t.toString(),"Created."),t}return(0,a.Z)(c,[{key:"getStoredCertificate",value:(n=(0,r.Z)(p().mark((function e(){var t,n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.cacheKey,n=this.storage,e.prev=1,e.next=4,n.get(t);case 4:return r=e.sent,e.abrupt("return",new Uint8Array(JSON.stringify(r).split("").map((function(e){return e.charCodeAt(0)}))));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return n.apply(this,arguments)})},{key:"storeCertificate",value:(t=(0,r.Z)(p().mark((function e(t){var n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.cacheKey,r=this.storage,e.abrupt("return",r.set(n,t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Drm.NagraCertificateStorage"}}]),c}(d.Z)},34955:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}}),n(12419),n(47941),n(82526),n(57327),n(54747),n(49337);var r,i,o=n(15861),a=n(4942),s=n(15671),c=n(43144),u=n(60136),l=n(82963),p=n(61120),d=n(53229),y=n(87757),f=n.n(y),h=(n(41539),n(39714),n(38880),n(67682)),v=n(31545),g=n(66282),m=n(91744),b=n(51701),T=n(84983),k=n(9598),S=n(28928);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var w=T.Z.drm.nagraDrmProvider,D=(r=k.Z.apiMethodDecorator.bind(null,w)(),i=function(e){(0,u.Z)(r,e);var t,n=Z(r);function r(e){var t;return(0,s.Z)(this,r),(t=n.call(this,E(E({},e),{},{type:S.DrmType.PRMNAGRA}))).certificateStorage=new m.Z({clientId:t.drmClient.clientId,environment:t.drmClient.environment,storage:t.drmClient.storage,logger:t.logger}),t.logger.log(t.toString(),"Created."),t}return(0,c.Z)(r,[{key:"individualizationUri",get:function(){var e;return(null===(e=this.drmClient.config.endpoints[b.Z.individualization])||void 0===e?void 0:e.href)||""}},{key:"getNagraCertificate",value:(t=(0,o.Z)(f().mark((function e(t){var n,r,i,o,a,s,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.logTransaction,r=this.mediaItem,i=this.videoPlayerName,o=this.videoPlayerVersion,a=this.accessToken,e.prev=2,e.next=5,this.certificateStorage.getStoredCertificate();case 5:if(s=e.sent,!h.Check.assigned(s)){e.next=8;break}return e.abrupt("return",s);case 8:return e.next=10,this.drmClient.getNagraCertificate({mediaItem:r,videoPlayerName:i,videoPlayerVersion:o,accessToken:a,logTransaction:n});case 10:return c=e.sent,e.next=13,this.certificateStorage.storeCertificate(c);case 13:return e.next=15,this.certificateStorage.getStoredCertificate();case 15:return e.abrupt("return",e.sent);case 18:throw e.prev=18,e.t0=e.catch(2),this.logger.error(this.toString(),"Nagra certificate request failure."),this.logger.info(this.toString(),"Dispatch ".concat(v.Z.MediaFailure," event.")),this.emit(v.Z.MediaFailure,e.t0),e.t0;case 24:case"end":return e.stop()}}),e,this,[[2,18]])}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Drm.NagraDrmProvider"}}]),r}(g.Z),(0,d.Z)(i.prototype,"getNagraCertificate",[r],Object.getOwnPropertyDescriptor(i.prototype,"getNagraCertificate"),i.prototype),i)},1001:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}}),n(12419),n(47941),n(82526),n(57327),n(54747),n(49337);var r,i,o=n(54546),a=n(15861),s=n(4942),c=n(15671),u=n(43144),l=n(60136),p=n(82963),d=n(61120),y=n(53229),f=n(87757),h=n.n(f),v=(n(41539),n(39714),n(38880),n(67682)),g=n(31545),m=n(66282),b=n(28481),T=n(84983),k=n(9598),S=n(28928);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.Z)(e);if(t){var i=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,p.Z)(this,n)}}var w=T.Z.drm.playReadyDrmProvider,D=(r=k.Z.apiMethodDecorator.bind(null,w)({paramTypes:{body:v.Types.object().optional}}),i=function(e){(0,l.Z)(r,e);var t,n=Z(r);function r(e){var t;return(0,c.Z)(this,r),(t=n.call(this,E(E({},e),{},{type:S.DrmType.PLAYREADY}))).logger.log(t.toString(),"Created."),t}return(0,u.Z)(r,[{key:"getPlayReadyLicense",value:(t=(0,a.Z)(h().mark((function e(t){var n,r,i,a,s,c,u,l,p,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,o.Z)(n.args,1),a=i[0],s=void 0===a?{}:a,c=this.licenseRequestHeaders,u=this.mediaItem,l=this.endpointKey,p=this.accessToken,d=new b.Z(s,c),e.prev=3,e.next=6,this.drmClient.getPlayReadyLicense({message:d,mediaItem:u,endpointKey:l,accessToken:p,logTransaction:r});case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(3),this.logger.error(this.toString(),"PlayReady license request failure."),this.logger.info(this.toString(),"Dispatch ".concat(g.Z.MediaFailure," event.")),this.emit(g.Z.MediaFailure,e.t0),e.t0;case 15:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Drm.PlayReadyDrmProvider"}}]),r}(m.Z),(0,y.Z)(i.prototype,"getPlayReadyLicense",[r],Object.getOwnPropertyDescriptor(i.prototype,"getPlayReadyLicense"),i.prototype),i)},42018:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}}),n(12419),n(47941),n(82526),n(57327),n(54747),n(49337);var r,i,o=n(54546),a=n(15861),s=n(4942),c=n(15671),u=n(43144),l=n(60136),p=n(82963),d=n(61120),y=n(53229),f=n(87757),h=n.n(f),v=(n(41539),n(39714),n(38880),n(67682)),g=n(31545),m=n(66282),b=n(84983),T=n(9598),k=n(28928);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.Z)(e);if(t){var i=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,p.Z)(this,n)}}var Z=b.Z.drm.silkDrmProvider,w=(r=T.Z.apiMethodDecorator.bind(null,Z)({paramTypes:{keyLocation:v.Types.nonEmptyString,playheadPosition:v.Types.number.optional}}),i=function(e){(0,l.Z)(r,e);var t,n=E(r);function r(e){var t;return(0,c.Z)(this,r),(t=n.call(this,P(P({},e),{},{type:k.DrmType.SILK}))).logger.log(t.toString(),"Created."),t}return(0,u.Z)(r,[{key:"getSilkKey",value:(t=(0,a.Z)(h().mark((function e(t){var n,r,i,a,s,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,o.Z)(n.args,2),a=i[0],s=i[1],c=this.mediaItem,u=this.accessToken,e.prev=2,e.next=5,this.drmClient.getSilkKey({keyLocation:a,mediaItem:c,playheadPosition:s,accessToken:u,logTransaction:r});case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(2),this.logger.error(this.toString(),"SILK key request failure."),this.logger.info(this.toString(),"Dispatch ".concat(g.Z.MediaFailure," event.")),this.emit(g.Z.MediaFailure,e.t0),e.t0;case 14:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Drm.SilkDrmProvider"}}]),r}(m.Z),(0,y.Z)(i.prototype,"getSilkKey",[r],Object.getOwnPropertyDescriptor(i.prototype,"getSilkKey"),i.prototype),i)},81558:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(4942),i=n(15671),o=n(43144),a=n(60136),s=n(82963),c=n(61120),u=(n(41539),n(39714),n(33238)),l=n(28928);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var f=function(e){(0,a.Z)(n,e);var t=y(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,d(d({},e),{},{drmType:l.DrmType.WIDEVINE}))).logger.log(r.toString(),"Created."),r}return(0,o.Z)(n,[{key:"toString",value:function(){return"SDK.Drm.WidevineCertificateStorage"}}]),n}(u.Z)},1154:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}}),n(12419),n(47941),n(82526),n(57327),n(54747),n(49337);var r,i,o,a=n(54546),s=n(15861),c=n(4942),u=n(15671),l=n(43144),p=n(60136),d=n(82963),y=n(61120),f=n(53229),h=n(87757),v=n.n(h),g=(n(41539),n(39714),n(38880),n(67682)),m=n(31545),b=n(66282),T=n(81558),k=n(84983),S=n(9598),P=n(28928);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,y.Z)(e);if(t){var i=(0,y.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var D=k.Z.drm.widevineDrmProvider,C=S.Z.apiMethodDecorator.bind(null,D),A=(r=C({paramTypes:{buffer:g.Types.arrayBufferView}}),i=C(),o=function(e){(0,p.Z)(i,e);var t,n,r=w(i);function i(e){var t;return(0,u.Z)(this,i),(t=r.call(this,Z(Z({},e),{},{type:P.DrmType.WIDEVINE}))).certificateStorage=new T.Z({clientId:t.drmClient.clientId,environment:t.drmClient.environment,storage:t.drmClient.storage,logger:t.logger}),t.logger.log(t.toString(),"Created."),t}return(0,l.Z)(i,[{key:"getWidevineLicense",value:(n=(0,s.Z)(v().mark((function e(t){var n,r,i,o,s,c,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,a.Z)(n.args,1),o=i[0],s=this.mediaItem,c=this.endpointKey,u=this.accessToken,e.prev=2,e.next=5,this.drmClient.getWidevineLicense({buffer:o,mediaItem:s,endpointKey:c,accessToken:u,logTransaction:r});case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(2),this.logger.error(this.toString(),"Widevine license request failure."),this.logger.info(this.toString(),"Dispatch ".concat(m.Z.MediaFailure," event.")),this.emit(m.Z.MediaFailure,e.t0),e.t0;case 14:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e){return n.apply(this,arguments)})},{key:"getWidevineCertificate",value:(t=(0,s.Z)(v().mark((function e(t){var n,r,i,o,a,s,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.logTransaction,r=this.mediaItem,i=this.videoPlayerName,o=this.videoPlayerVersion,a=this.accessToken,e.prev=2,e.next=5,this.certificateStorage.getStoredCertificate();case 5:if(s=e.sent,!g.Check.assigned(s)){e.next=8;break}return e.abrupt("return",s);case 8:return e.next=10,this.drmClient.getWidevineCertificate({mediaItem:r,videoPlayerName:i,videoPlayerVersion:o,accessToken:a,logTransaction:n});case 10:return c=e.sent,e.next=13,this.certificateStorage.storeCertificate(c);case 13:return e.next=15,this.certificateStorage.getStoredCertificate();case 15:return e.abrupt("return",e.sent);case 18:throw e.prev=18,e.t0=e.catch(2),this.logger.error(this.toString(),"Widevine certificate request failure."),this.logger.info(this.toString(),"Dispatch ".concat(m.Z.MediaFailure," event.")),this.emit(m.Z.MediaFailure,e.t0),e.t0;case 24:case"end":return e.stop()}}),e,this,[[2,18]])}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Drm.WidevineDrmProvider"}}]),i}(b.Z),(0,f.Z)(o.prototype,"getWidevineLicense",[r],Object.getOwnPropertyDescriptor(o.prototype,"getWidevineLicense"),o.prototype),(0,f.Z)(o.prototype,"getWidevineCertificate",[i],Object.getOwnPropertyDescriptor(o.prototype,"getWidevineCertificate"),o.prototype),o)},88540:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}}),n(12419);var r,i,o=n(54546),a=n(15861),s=n(15671),c=n(43144),u=n(97326),l=n(2291),p=n(60136),d=n(82963),y=n(61120),f=n(53229),h=n(87757),v=n.n(h),g=(n(41539),n(39714),n(38880),n(67682)),m=n(82625),b=n(41361),T=n(84983),k=n(9598);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,y.Z)(e);if(t){var i=(0,y.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var P=T.Z.entitlement.entitlementApi,E=(r=k.Z.apiMethodDecorator.bind(null,P)({paramTypes:{mediaId:g.Types.nonEmptyString}}),i=function(e){(0,p.Z)(r,e);var t,n=S(r);function r(e){var t;(0,s.Z)(this,r),t=n.call(this,e);var i={options:g.Types.object({entitlementClient:g.Types.instanceStrict(b.Z)})};(0,g.typecheck)((0,u.Z)(t),i,arguments);var o=e.entitlementClient;return t.entitlementClient=o,t.logger.info(t.toString(),"Created."),t}return(0,c.Z)(r,[{key:"verifyMediaRights",value:(t=(0,a.Z)(v().mark((function e(t){var n,i,a,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=t).logTransaction,a=(0,o.Z)(n.args,1),s=a[0],e.abrupt("return",this.entitlementClient.verifyMediaRights(s,(0,l.Z)((0,y.Z)(r.prototype),"accessToken",this),i));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Entitlement.EntitlementApi"}}]),r}(m.Z),(0,f.Z)(i.prototype,"verifyMediaRights",[r],Object.getOwnPropertyDescriptor(i.prototype,"verifyMediaRights"),i.prototype),i)},31545:function(e,t){"use strict";var n;!function(e){e.ReauthorizationFailure="ReauthorizationFailure",e.OffDeviceTokenRefresh="OffDeviceTokenRefresh",e.AccessChanged="AccessChanged",e.SessionInfoChanged="SessionInfoChanged",e.MediaFailure="MediaFailure",e.AgeVerificationChanged="AgeVerificationChanged",e.FeatureFlagsChanged="FeatureFlagsChanged",e.AccountDelegationRefreshTokenChanged="AccountDelegationRefreshTokenChanged",e.ValidationResultsReceived="ValidationResultsReceived"}(n||(n={})),t.Z=n},92847:function(e,t,n){"use strict";n.d(t,{DeeplinkQueryTypedef:function(){return c},DownloadMetadataInputTypedef:function(){return v},ExploreQueryTypedef:function(){return a},GetPartnerContinueWatchingQueryTypedef:function(){return g},PageQueryTypedef:function(){return s},PlayerExperienceQueryTypedef:function(){return p},SearchQueryTypedef:function(){return h},SeasonQueryTypedef:function(){return y},SetQueryTypedef:function(){return u},UpNextQueryTypedef:function(){return f},UserStateInputTypedef:function(){return l},WatchlistRequestTypedef:function(){return d}}),n(26699),n(32023);var r=n(67682),i=n(2342);function o(e,t,n){if(r.Check.not.object(e))return!1;var i=JSON.stringify(e);return"PageQuery"===n?!i.includes("enhancedContainersLimit")&&!i.includes("limit"):"SetQuery"===n||"SeasonQuery"===n?!i.includes("offset")&&!i.includes("limit"):"GetPartnerContinueWatchingQuery"!==n||!i.includes("limit")}var a={context:r.Types.string,version:r.Types.nonEmptyString,variables:r.Types.object().optional,exploreParams:r.Types.object().optional},s={version:r.Types.nonEmptyString,pageId:r.Types.string,enhancedContainersLimit:r.Types.number.optional,limit:r.Types.number.optional,exploreParams:r.Types.custom(o,"keys that are not available on the root level of the query.","PageQuery").optional},c={version:r.Types.nonEmptyString,refId:r.Types.string,refIdType:r.Types.in(i.RefIdType),action:r.Types.in(i.ActionType).optional},u={version:r.Types.nonEmptyString,setId:r.Types.string,limit:r.Types.number.optional,offset:r.Types.number.optional,exploreParams:r.Types.custom(o,"keys that are not available on the root level of the query.","SetQuery").optional},l={pids:r.Types.array.of.nonEmptyString,version:r.Types.nonEmptyString},p={availId:r.Types.nonEmptyString,version:r.Types.nonEmptyString},d={actionInfoBlock:r.Types.nonEmptyString,pageInfoBlock:r.Types.nonEmptyString.optional,containerInfoBlock:r.Types.nonEmptyString.optional,itemInfoBlock:r.Types.nonEmptyString.optional},y={version:r.Types.nonEmptyString,seasonId:r.Types.string,limit:r.Types.number.optional,offset:r.Types.number.optional,exploreParams:r.Types.custom(o,"keys that are not available on the root level of the query.","SeasonQuery").optional},f={version:r.Types.nonEmptyString,contentId:r.Types.string},h={version:r.Types.nonEmptyString,query:r.Types.string.optional},v={availIds:r.Types.array.of.nonEmptyString,version:r.Types.nonEmptyString},g={version:r.Types.string,limit:r.Types.number.optional,exploreParams:r.Types.custom(o,"keys that are not available on the root level of the query.","GetPartnerContinueWatchingQuery").optional}},61650:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t,n){(0,r.Z)(this,e);var i={oldFeatureFlags:o.Types.object().optional,newFeatureFlags:o.Types.object()};o.typecheck.warn(this,i,arguments),this.oldFeatureFlags=t,this.newFeatureFlags=n}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.FeatureFlagsChangedEvent"}}]),e}()},40068:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}}),n(12419);var r,i,o,a=n(54546),s=n(15861),c=n(15671),u=n(43144),l=n(97326),p=n(2291),d=n(60136),y=n(82963),f=n(61120),h=n(53229),v=n(87757),g=n.n(v),m=(n(41539),n(39714),n(38880),n(67682)),b=n(82625),T=n(62370),k=n(84983),S=n(9598),P=n(5326);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.Z)(e);if(t){var i=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,y.Z)(this,n)}}var Z=k.Z.flex.flexApi,w=S.Z.apiMethodDecorator.bind(null,Z),D=(r=w({paramTypes:{options:m.Types.object(P.FlexOptionsTypedef)}}),i=w({paramTypes:{options:m.Types.object(P.FlexOptionsTypedef)}}),o=function(e){(0,d.Z)(i,e);var t,n,r=E(i);function i(e){var t;(0,c.Z)(this,i),t=r.call(this,e);var n={options:m.Types.object({flexClient:m.Types.instanceStrict(T.Z)})};(0,m.typecheck)((0,l.Z)(t),n,arguments);var o=e.flexClient;return t.flexClient=o,t.logger.info(t.toString(),"Created."),t}return(0,u.Z)(i,[{key:"getScreen",value:(n=(0,s.Z)(g().mark((function e(t){var n,r,o,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,o=(0,a.Z)(n.args,1),s=o[0],e.abrupt("return",this.flexClient.getScreen(s,(0,p.Z)((0,f.Z)(i.prototype),"accessToken",this),r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"execute",value:(t=(0,s.Z)(g().mark((function e(t){var n,r,o,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,o=(0,a.Z)(n.args,1),s=o[0],e.abrupt("return",this.flexClient.execute(s,(0,p.Z)((0,f.Z)(i.prototype),"accessToken",this),r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Flex.FlexApi"}}]),i}(b.Z),(0,h.Z)(o.prototype,"getScreen",[r],Object.getOwnPropertyDescriptor(o.prototype,"getScreen"),o.prototype),(0,h.Z)(o.prototype,"execute",[i],Object.getOwnPropertyDescriptor(o.prototype,"execute"),o.prototype),o)},5326:function(e,t,n){"use strict";n.d(t,{FlexOptionsTypedef:function(){return i}});var r=n(67682),i={key:r.Types.nonEmptyString,version:r.Types.nonEmptyString,queryParams:r.Types.object().optional,requestBody:r.Types.object().optional,configOverride:r.Types.function.optional,headers:r.Types.object().optional}},48387:function(e,t,n){"use strict";n.d(t,{j3:function(){return a},jx:function(){return p}});var r=n(67682),i=n(3920),o={file:r.Types.nonEmptyString,line:r.Types.number.optional},a={urn:r.Types.nonEmptyString,location:r.Types.object(o).optional},s={host:r.Types.nonEmptyString,path:r.Types.nonEmptyString,method:r.Types.nonEmptyString},c={statusCode:r.Types.number,requestId:r.Types.nonEmptyString.optional,roundTripTime:r.Types.number,region:r.Types.nonEmptyString.optional,cloudFrontPop:r.Types.nonEmptyString.optional,cloudFrontId:r.Types.nonEmptyString.optional},u={requestStart:r.Types.number,requestEnd:r.Types.number},l={endpoint:r.Types.nonEmptyString},p={request:r.Types.object(s),response:r.Types.object(c).optional,configuration:r.Types.object(l),timing:r.Types.object(u),error:r.Types.array.of.instanceStrict(i.Z).optional}},31880:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(54546),i=n(15671),o=n(43144),a=n(4942),s=(n(44048),n(9653),n(26699),n(32023),n(41539),n(39714),n(40561),n(34553),n(67682)),c=n(84983),u=n(87891),l=n(6438),p=c.Z.socket,d=function(){function e(t){var n;(0,i.Z)(this,e);var r={options:s.Types.object({logger:s.Types.instanceStrict(u.Z),unacknowledgedEventBuffer:s.Types.object(l.fP).optional})};(0,s.typecheck)(this,r,arguments),this.logger=t.logger;var o=null===(n=t.unacknowledgedEventBuffer)||void 0===n?void 0:n.maxSize,a=Number.isNaN(Number(o));this.maxUnacknowledgedBufferSize=a?e.fallbackMaxBufferSize:o,this.unacknowledgedBuffer=[],this.ignoreMessageAcknowledgementUrns=[p.socketManager.ping],this.messageBuffer=[]}return(0,o.Z)(e,[{key:"trackMessage",value:function(e){this.ignoreMessageAcknowledgementUrns.includes(e.message.eventType)||(this.unacknowledgedBuffer.length>this.maxUnacknowledgedBufferSize-1&&(this.logger.log(this.toString(),"Max unacknowledgedBuffer - removing oldest message"),this.unacknowledgedBuffer.shift()),0!==this.maxUnacknowledgedBufferSize&&this.unacknowledgedBuffer.push(e))}},{key:"enqueue",value:function(e){this.messageBuffer.push(e)}},{key:"dequeue",value:function(){return this.messageBuffer.shift()}},{key:"hasMessagesToSend",get:function(){return this.messageLength>0}},{key:"messageLength",get:function(){return this.messageBuffer.length}},{key:"getMessagesToSend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.messageLength,t=Math.min(e,this.messageLength);return this.messageBuffer.splice(0,t)}},{key:"processAcknowledgment",value:function(e,t,n){var i=n||{},o=i.eventId,a=i.status,s=i.retriesExhausted,c=this.unacknowledgedBuffer.findIndex((function(e){return o===e.message.id}));if(c>-1){var u=this.unacknowledgedBuffer.splice(c,1),l=(0,r.Z)(u,1)[0],p=l.message,d=l.accessToken;s||("rejected.internal-failure"===a?e(p):"rejected.envelope-subject-invalid"===a&&t(d,p))}}},{key:"clear",value:function(){this.messageBuffer=[]}},{key:"toString",value:function(){return"SDK.Internal.EnvelopeMessageQueue"}}]),e}();(0,a.Z)(d,"fallbackMaxBufferSize",100)},32696:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=(n(41539),n(39714),n(67682)),u=n(87891),l=n(67324),p=n(47642),d=n(31880),y=n(13127),f=function(){function e(t){(0,i.Z)(this,e);var n={options:c.Types.object({logger:c.Types.instanceStrict(u.Z),dustEnvelopeBuffer:c.Types.instanceStrict(y.Z),isEventsAtEdgeEnabled:c.Types.boolean,socketManager:c.Types.instanceStrict(l.Z).optional,envelopeMessageQueue:c.Types.instanceStrict(d.Z)})};(0,c.typecheck)(this,n,arguments);var r=t.logger,o=t.dustEnvelopeBuffer,a=t.isEventsAtEdgeEnabled,s=t.socketManager,p=t.envelopeMessageQueue;this.logger=r,this.dustEnvelopeBuffer=o,this.isEventsAtEdgeEnabled=a,this.socketManager=s,this.envelopeMessageQueue=p}var t;return(0,o.Z)(e,[{key:"route",value:(t=(0,r.Z)(s().mark((function e(t){var n,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.socketManager,r=this.dustEnvelopeBuffer,!((i=this.isEventsAtEdgeEnabled)&&n&&n.isSocketInReadyState(p.Z.OPEN))){e.next=7;break}return this.logger.info(this.toString(),"Edge message sent to socket."),e.next=6,n.sendMessage(t);case 6:return e.abrupt("return");case 7:this.envelopeMessageQueue.enqueue(t),this.logger.info(this.toString(),"Edge message sent to dust envelope buffer. [isEventsAtEdgeEnabled=".concat(i,"]")),r.scheduleNextBatch();case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Internal.EnvelopeMessageRouter"}}]),e}()},20832:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}}),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(60136),c=n(82963),u=n(61120),l=n(87757),p=n.n(l),d=(n(41539),n(39714),n(68309),n(67682)),y=n(17187),f=n(87891),h=n(80540),v=n(52662),g=n(84983),m=n(96497),b=n(95400),T=n(47940),k=n(32394),S=n(61205),P=n(70187),E=n(43425);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var w=g.Z.services.internal.telemetry.eventBuffer,D=function(e){(0,s.Z)(l,e);var t,n,c,u=Z(l);function l(e){var t;(0,i.Z)(this,l),t=u.call(this);var n={options:d.Types.object({bufferConfiguration:d.Types.instanceStrict(S.Z),tokenManager:d.Types.instanceStrict(b.Z),telemetryClient:d.Types.instanceStrict(T.Z),logger:d.Types.instanceStrict(f.Z),endpoint:d.Types.nonEmptyObject,prohibited:d.Types.object({urns:d.Types.array}),fastTrack:d.Types.object({urns:d.Types.array.of.nonEmptyString}).optional,diagnosticFeature:d.Types.in(m.Z).optional})};(0,d.typecheck)((0,a.Z)(t),n,arguments);var r=e.bufferConfiguration,o=e.tokenManager,s=e.telemetryClient,c=e.logger,p=e.endpoint,y=e.prohibited,v=e.diagnosticFeature,g=e.fastTrack,k=void 0===g?null:g;return t.config=r,t.tokenManager=o,t.client=s,t.logger=c,t.endpoint=p,t.fastTrack=k,t.prohibited=y,t.isScheduled=!1,t.replyAfter=t.config.replyAfterFallback,t.disabled=t.config.disabled,t.diagnosticFeature=v,t.validateEvents=!1,t.useProxy=!1,t.retryCount=0,t.nextBatchTimeoutId=0,t.tokenManager.on(h.Z.TokenRefreshFailed,(function(e){e&&e.hasResetToAnonymousToken||(t.disabled=!0)})),t.tokenManager.on(h.Z.AccessChanged,(function(){t.disabled=t.config.disabled})),t.logger.log(t.toString(),"Created."),t}return(0,o.Z)(l,[{key:"queueLimit",get:function(){return this.config.queueLimit}},{key:"minimumBatchSize",get:function(){return this.config.minimumBatchSize}},{key:"processBatch",value:(c=(0,r.Z)(p().mark((function e(t){var n,i,o,a,s,c,u,l,d,y=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!this.disabled){e.next=5;break}return this.logger.warn(this.toString(),"Buffering is disabled, events will not be posted."),this.clearSchedule(),e.abrupt("return");case 5:if(e.prev=5,this.retryCount++,!t){e.next=11;break}n=[t],e.next=17;break;case 11:if(this.hasMessagesToSend()){e.next=16;break}return this.clearSchedule(),e.abrupt("return");case 16:n=this.getMessagesToSend(this.config.batchLimit);case 17:return this.logger.info(this.toString(),"Posting ".concat(n.length," events")),e.next=20,this.tokenManager.refreshAccessToken();case 20:if(i=this.accessToken,o=this.useProxy,a=this.validateEvents,this.endpoint.rel!==k.Z.postEvent){e.next=25;break}s=v.Z.wrapLogTransaction({file:this.toString(),urn:w.processBatch,logger:this.logger,action:function(){var e=(0,r.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y.client.postEvents({accessToken:i,telemetryPayloads:n,useProxy:o},t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),e.next=34;break;case 25:if(!a){e.next=31;break}return e.next=28,this.client.horaEventValidation(i,n);case 28:s=e.sent,e.next=34;break;case 31:return e.next=33,this.postDust(n);case 33:s=e.sent;case 34:this.handleValidationResults(s,n),this.retryCount=0,this.replyAfter=s.replyAfter||this.config.replyAfterFallback,this.clearSchedule(),this.scheduleNextBatch(),e.next=49;break;case 41:e.prev=41,e.t0=e.catch(5),c=e.t0,u=c.status,l=c.data,d=(l=void 0===l?{}:l).name,(u<400||u>=500||d===P.Z.common.network.name)&&(this.requeuePayloadItems(n),this.replyAfter=(f=this.retryCount,h=this.config.maxBackOffRetrySeconds,g=void 0,g=1e3*h,Math.min(Math.pow(2,f)+5*Math.random(),g)),this.clearSchedule(),this.scheduleNextBatch()),this.logger.warn(this.toString(),c);case 49:case"end":return e.stop()}var f,h,g}),e,this,[[5,41]])}))),function(e){return c.apply(this,arguments)})},{key:"scheduleNextBatch",value:function(e){this.isScheduled||(null==e&&(e=this.replyAfter||this.config.replyAfterFallback),this.isScheduled=!0,this.nextBatchTimeoutId=setTimeout(this.processBatch.bind(this),1e3*e))}},{key:"clearSchedule",value:function(){this.isScheduled=!1}},{key:"drain",value:(n=(0,r.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=this.getMessagesToSend()).length){e.next=3;break}return e.abrupt("return");case 3:return this.clearQueue(),this.clearSchedule(),e.next=7,this.postDust(t);case 7:n=e.sent,this.handleValidationResults(n,t),this.replyAfter=n.replyAfter||this.config.replyAfterFallback;case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"isValidationEnabled",value:function(){return this.validateEvents||this.useProxy}},{key:"enableValidation",value:function(e){this.validateEvents=!e,this.useProxy=e}},{key:"disableValidation",value:function(){this.validateEvents=!1,this.useProxy=!1}},{key:"accessToken",get:function(){return this.tokenManager.getAccessToken()}},{key:"handleValidationResults",value:function(e,t){if(e.results){try{this.logger.diagnostics("TelemetryValidation",JSON.stringify(e,(0,E.Z)(),"  "))}catch(e){this.logger.diagnostics("TelemetryValidation","Could not stringify the validation response: ".concat(e))}this.emit(h.Z.ValidationResultsReceived,{telemetryPayloads:t,telemetryResponse:e})}}},{key:"dispose",value:(t=(0,r.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.disabled=!0,e.prev=1,e.next=4,this.drain();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),this.logger.error(this.toString(),e.t0);case 9:clearTimeout(this.nextBatchTimeoutId),this.clearSchedule();case 11:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Internal.Telemetry.EventBufferBase"}}]),l}(y.EventEmitter)},13127:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}}),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(60136),c=n(82963),u=n(61120),l=n(87757),p=n.n(l),d=(n(21249),n(41539),n(54747),n(57327),n(67682)),y=n(20832),f=n(31880),h=n(84983);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var g=function(e){(0,s.Z)(c,e);var t,n=v(c);function c(e){var t;(0,i.Z)(this,c),t=n.call(this,e);var r={options:d.Types.object({envelopeMessageQueue:d.Types.instanceStrict(f.Z),sourceUrn:d.Types.nonEmptyString})};(0,d.typecheck)((0,a.Z)(t),r,arguments);var o=e.envelopeMessageQueue,s=e.sourceUrn;return t.envelopeMessageQueue=o,t.sourceUrn=s,t}return(0,o.Z)(c,[{key:"postDust",value:(t=(0,r.Z)(p().mark((function e(t){var n,r,i,o,a,s=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.accessToken,r=this.useProxy,i=t.map((function(e){var t={message:e,accessToken:n.token};return s.envelopeMessageQueue.trackMessage(t),e.getSocketMessage({source:s.sourceUrn})})),e.next=4,this.client.postDustEnvelopes({accessToken:n,messageEnvelopes:i,useProxy:r});case 4:return o=e.sent,Array.isArray(o)&&(a=function(){},o.forEach((function(e){s.envelopeMessageQueue.processAcknowledgment(a,a,e)}))),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getMessagesToSend",value:function(e){return this.envelopeMessageQueue.getMessagesToSend(e).filter((function(e){return e.eventType===h.Z.socket.socketManager.event}))}},{key:"hasMessagesToSend",value:function(){return this.envelopeMessageQueue.messageLength>=this.minimumBatchSize}},{key:"clearQueue",value:function(){this.envelopeMessageQueue.clear()}},{key:"requeuePayloadItems",value:function(e){}},{key:"toString",value:function(){return"SDK.Internal.Telemetry.EventBufferMessageEnvelope"}}]),c}(y.Z)},55214:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}}),n(12419);var r=n(42138),i=n(15861),o=n(15671),a=n(43144),s=n(97326),c=n(60136),u=n(82963),l=n(61120),p=n(87757),d=n.n(p),y=(n(41539),n(39714),n(26699),n(32023),n(40561),n(67682)),f=n(20832),h=n(95);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var g=function(e){(0,c.Z)(u,e);var t,n=v(u);function u(e){var t;(0,o.Z)(this,u),t=n.call(this,e);var r={options:y.Types.object({bufferName:y.Types.nonEmptyString})};(0,y.typecheck)((0,s.Z)(t),r,arguments);var i=e.bufferName;return t.bufferName=i,t.queue=[],t}return(0,a.Z)(u,[{key:"postEvent",value:function(e){var t,n={telemetryEvent:y.Types.instanceStrict(h.Z)};if((0,y.typecheck)(this,"postEvent",n,arguments),this.disabled)this.logger.warn(this.toString(),"Buffering is disabled, events will not be posted.");else{var r=e.getPayload(),i=r.client.event,o=null===(t=this.fastTrack)||void 0===t?void 0:t.urns.includes(i),a=this.prohibited.urns.includes(i);if(a)this.logger.warn(this.toString(),"Event will not be posted because it is prohibited: ".concat(i));else if(o)this.logger.info(this.toString(),"Event added to beginning of queue: ".concat(i)),this.processBatch(r);else{if(this.queueLimit)for(;this.queue.length>this.queueLimit-1;)this.queue.shift();this.queue.push(r),this.logger.info(this.toString(),"Event added to end of queue: ".concat(i)),this.scheduleNextBatch()}}}},{key:"postDust",value:(t=(0,i.Z)(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.accessToken,r=this.useProxy,e.next=3,this.client.postDustEvents({accessToken:n,telemetryPayloads:t,useProxy:r});case 3:return i=e.sent,this.handleValidationResults(i,t),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getMessagesToSend",value:function(e){return this.queue.splice(0,e||this.queue.length)}},{key:"hasMessagesToSend",value:function(){return this.queue.length>=this.minimumBatchSize}},{key:"requeuePayloadItems",value:function(e){var t;(t=this.queue).unshift.apply(t,(0,r.Z)(e))}},{key:"clearQueue",value:function(){this.queue=[]}},{key:"toString",value:function(){return"SDK.Internal.Telemetry.EventBufferTelemetryPayload [".concat(this.bufferName,"]")}}]),u}(f.Z)},28892:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),u=n(67682),l=n(95),p=n(23404),d=n(66796),y=n(84983);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var h=function(e){(0,a.Z)(n,e);var t=f(n);function n(e){var i;(0,r.Z)(this,n),i=t.call(this);var a={options:u.Types.object({playbackSessionId:u.Types.nonEmptyString,playhead:u.Types.greaterOrEqual(0).optional,bitrate:u.Types.number.optional,serverData:u.Types.object().optional,interactionId:u.Types.nonEmptyString.optional,extraData:u.Types.object().optional})};(0,u.typecheck)((0,o.Z)(i),a,arguments);var s=e.playbackSessionId,c=e.playhead,l=e.bitrate,p=e.serverData,d=void 0===p?{}:p,f=e.interactionId,h=e.extraData,v=void 0===h?{}:h;return i.serverData=d,i.playbackSessionId=s,i.playhead=c||0,i.bitrate=l||0,i.event=y.Z.streamSample,i.timestamp=Date.now(),i.interactionId=f,i.extraData=v,i}return(0,i.Z)(n,[{key:"getPayload",value:function(){var e=this.serverData,t=this.event,n=this.playbackSessionId,r=this.playhead,i=this.bitrate,o=this.timestamp,a=this.interactionId,s=this.extraData.groupId,c=new p.Z({event:t,timestamp:o,playbackSessionId:n,playhead:r,bitrate:i,interactionId:a,groupId:s});return new d.Z({server:e,client:c})}},{key:"toString",value:function(){return"SDK.Internal.Telemetry.StreamSampleTelemetryEvent"}}]),n}(l.Z)},95:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(15671),i=n(43144),o=function(){function e(){(0,r.Z)(this,e)}return(0,i.Z)(e,[{key:"getPayload",value:function(){throw new Error("TelemetryEvent#getPayload - not-implemented")}},{key:"toString",value:function(){return"SDK.Internal.Telemetry.TelemetryEvent"}}]),e}()},48269:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}}),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(60136),c=n(82963),u=n(61120),l=n(87757),p=n.n(l),d=(n(41539),n(39714),n(66992),n(88674),n(78783),n(33948),n(67682)),y=n(17187),f=n(87891),h=n(96497),v=n(80540),g=n(19307),m=n(47940),b=n(95400),T=n(55214),k=n(13127),S=n(31880);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var E=function(e){(0,s.Z)(c,e);var t,n=P(c);function c(e){var t;(0,i.Z)(this,c),t=n.call(this);var r={options:d.Types.object({telemetryManagerConfiguration:d.Types.instanceStrict(g.Z),tokenManager:d.Types.instanceStrict(b.Z),telemetryClient:d.Types.instanceStrict(m.Z),logger:d.Types.instanceStrict(f.Z),envelopeMessageQueue:d.Types.instanceStrict(S.Z),sourceUrn:d.Types.nonEmptyString})};(0,d.typecheck)((0,a.Z)(t),r,arguments);var o=e.telemetryManagerConfiguration,s=e.tokenManager,u=e.telemetryClient,l=e.logger,p=e.envelopeMessageQueue,y=e.sourceUrn,P=o.extras,E=P.dustEnvelopeBufferConfiguration,Z=P.eventBufferConfiguration,w=P.fastTrack,D=P.glimpseBufferConfiguration,C=P.prohibited,A=P.qoeBufferConfiguration,R=P.streamSampleBufferConfiguration;return t.logger=l,t.config=o,t.streamSampleBuffer=new T.Z({bufferConfiguration:R,tokenManager:s,endpoint:u.config.endpoints.postEvent,telemetryClient:u,logger:l,fastTrack:w,prohibited:C,bufferName:"StreamSampleBuffer"}),t.eventBuffer=new T.Z({bufferConfiguration:Z,tokenManager:s,endpoint:u.config.endpoints.dustEvent,telemetryClient:u,logger:l,fastTrack:w,prohibited:C,diagnosticFeature:h.Z.glimpseValidation,bufferName:"EventBuffer"}),t.trackingBuffer=new T.Z({bufferConfiguration:D,tokenManager:s,endpoint:u.config.endpoints.dustEvent,telemetryClient:u,logger:l,fastTrack:w,prohibited:C,diagnosticFeature:h.Z.glimpseValidation,bufferName:"TrackingBuffer"}),t.qoeBuffer=new T.Z({bufferConfiguration:A,tokenManager:s,endpoint:u.config.endpoints.dustEvent,telemetryClient:u,logger:l,fastTrack:w,prohibited:C,diagnosticFeature:h.Z.qoeValidation,bufferName:"QoEBuffer"}),t.dustEnvelopeBuffer=new k.Z({bufferConfiguration:E,tokenManager:s,endpoint:u.config.endpoints.envelopeEvent,telemetryClient:u,logger:l,fastTrack:w,prohibited:C,diagnosticFeature:h.Z.glimpseValidation,envelopeMessageQueue:p,sourceUrn:y}),t.trackingBuffer.on(v.Z.ValidationResultsReceived,(function(e){t.emit(v.Z.ValidationResultsReceived,e)})),t.qoeBuffer.on(v.Z.ValidationResultsReceived,(function(e){t.emit(v.Z.ValidationResultsReceived,e)})),t.logger.log(t.toString(),"Created."),t}return(0,o.Z)(c,[{key:"dispose",value:(t=(0,r.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.qoeBuffer.dispose(),this.trackingBuffer.dispose(),this.eventBuffer.dispose(),this.streamSampleBuffer.dispose(),this.dustEnvelopeBuffer.dispose()]);case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Internal.Telemetry.TelemetryManager"}}]),c}(y.EventEmitter)},80540:function(e,t){"use strict";var n;!function(e){e.TokenRefreshFailed="TokenRefreshFailed",e.AccessChanged="AccessChanged",e.SessionInfoChanged="SessionInfoChanged",e.UpdateAdEngine="UpdateAdEngine",e.ValidationResultsReceived="ValidationResultsReceived",e.DeviceRegistered="DeviceRegistered"}(n||(n={})),t.Z=n},52414:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}}),n(12419);var r,i,o,a=n(54546),s=n(15861),c=n(15671),u=n(43144),l=n(97326),p=n(2291),d=n(60136),y=n(82963),f=n(61120),h=n(53229),v=n(87757),g=n.n(v),m=(n(41539),n(39714),n(38880),n(67682)),b=n(82625),T=n(70280),k=n(84983),S=n(9598);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.Z)(e);if(t){var i=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,y.Z)(this,n)}}var E=k.Z.invoice.invoiceApi,Z=S.Z.apiMethodDecorator.bind(null,E),w=(r=Z({paramTypes:{link:m.Types.nonEmptyString}}),i=Z({paramTypes:{pageToken:m.Types.nonEmptyString.optional,pageSize:m.Types.number.optional}}),o=function(e){(0,d.Z)(i,e);var t,n,r=P(i);function i(e){var t;(0,c.Z)(this,i),t=r.call(this,e);var n={options:m.Types.object({invoiceClient:m.Types.instanceStrict(T.Z)})};(0,m.typecheck)((0,l.Z)(t),n,arguments);var o=e.invoiceClient;return t.invoiceClient=o,t.logger.info(t.toString(),"Created."),t}return(0,u.Z)(i,[{key:"getInvoice",value:(n=(0,s.Z)(g().mark((function e(t){var n,r,o,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,o=(0,a.Z)(n.args,1),s=o[0],e.abrupt("return",this.invoiceClient.getInvoice({link:s,accessToken:(0,p.Z)((0,f.Z)(i.prototype),"accessToken",this),logTransaction:r}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getPaginatedInvoices",value:(t=(0,s.Z)(g().mark((function e(t){var n,r,o,s,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,o=(0,a.Z)(n.args,2),s=o[0],c=o[1],e.abrupt("return",this.invoiceClient.getPaginatedInvoices({pageToken:s,pageSize:c,accessToken:(0,p.Z)((0,f.Z)(i.prototype),"accessToken",this),logTransaction:r}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Invoice.InvoiceApi"}}]),i}(b.Z),(0,h.Z)(o.prototype,"getInvoice",[r],Object.getOwnPropertyDescriptor(o.prototype,"getInvoice"),o.prototype),(0,h.Z)(o.prototype,"getPaginatedInvoices",[i],Object.getOwnPropertyDescriptor(o.prototype,"getPaginatedInvoices"),o.prototype),o)},60387:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=(n(92222),n(33044)),a=function(){function e(t){(0,r.Z)(this,e);var n=t.isPublic,i=t.level,o=t.source,a=t.message,s=t.extraData;this.isPublic=n,this.level=i,this.source=o,this.message=a,this.extraData=s||{}}return(0,i.Z)(e,[{key:"toJSON",value:function(){return JSON.stringify({isPublic:this.isPublic,level:o.Z[this.level],source:this.source,message:this.message,extraData:this.extraData})}},{key:"toString",value:function(){return"(".concat(o.Z[this.level],"): ").concat(this.source," - ").concat(this.message)}}],[{key:"getExtraData",value:function(e){return(e||{}).extraData||{}}}]),e}()},33044:function(e,t){"use strict";var n;!function(e){e[e.none=0]="none",e[e.trace=1]="trace",e[e.debug=2]="debug",e[e.info=3]="info",e[e.warn=4]="warn",e[e.error=5]="error",e[e.diagnostics=6]="diagnostics"}(n||(n={})),t.Z=n},73585:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(33044),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.Z.none;(0,r.Z)(this,e),this.logLevel=t}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Logging.LogSink"}}]),e}()},52662:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=n(67682),u=n(87891),l=n(48387),p=n(33044),d=function(){function e(t){(0,i.Z)(this,e);var n={options:c.Types.object({logger:c.Types.instanceStrict(u.Z),urn:c.Types.nonEmptyString,file:c.Types.nonEmptyString,sdkInstanceId:c.Types.nonEmptyString,line:c.Types.number.optional})};(0,c.typecheck)(this,n,arguments);var r=t.logger,o=t.urn,a=t.file,s=t.line,l=t.sdkInstanceId;this.logger=r,this.urn=o,this.file=a,this.sdkInstanceId=l,this.line=s,this.startTime=new Date,this.totalDuration=null,this.serviceRequests=[],this.isPublic=!0}var t;return(0,o.Z)(e,[{key:"appendRequest",value:function(e){var t={request:c.Types.object(l.jx)};(0,c.typecheck)(this,"appendRequest",t,arguments),this.serviceRequests.push(e)}},{key:"finalize",value:function(e){var t=this;this.totalDuration=Date.now().valueOf()-this.startTime.valueOf();try{var n=this.generateLogEvent(e);this.logger.log(this.file,n,this.isPublic).catch((function(e){return t.logger.warn(e,n)}))}catch(e){var r;null!==(r=console)&&void 0!==r&&r.error&&console.error(e)}}},{key:"generateLogEvent",value:function(e){var t=this.isPublic,n=this.serviceRequests,r=this.file,i=this.line,o=this.urn;return{extraData:{isEdge:!0,file:r,line:i,urn:o,serviceRequests:n,startTime:this.startTime,totalDuration:this.totalDuration,sdkInstanceId:this.sdkInstanceId,error:e},isPublic:t,name:o,level:p.Z.none}}},{key:"toString",value:function(){return"SDK.Logging.LogTransaction"}}],[{key:"wrapLogTransaction",value:(t=(0,r.Z)(s().mark((function t(n){var r,i,o,a,l,p,d,y,f=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={options:c.Types.object({urn:c.Types.nonEmptyString,file:c.Types.nonEmptyString,logger:c.Types.instanceStrict(u.Z),action:c.Types.function})},(0,c.typecheck)(this,"wrapLogTransaction",r,f),i=n.urn,o=n.file,a=n.logger,l=n.action,p=a.sdkInstanceId,d=new e({logger:a,urn:i,file:o,sdkInstanceId:p}),t.prev=4,t.next=7,l(d);case 7:return t.abrupt("return",t.sent);case 10:throw t.prev=10,t.t0=t.catch(4),y=t.t0,t.t0;case 14:return t.prev=14,d.finalize(y),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[4,10,14,17]])}))),function(e){return t.apply(this,arguments)})}]),e}()},87891:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}}),n(47941),n(82526),n(38880),n(54747),n(49337),n(47042),n(91038),n(78783),n(74916),n(41817),n(32165),n(66992),n(33948);var r=n(71002),i=n(15861),o=n(15671),a=n(43144),s=n(4942),c=n(87757),u=n.n(c),l=(n(26699),n(32023),n(57327),n(41539),n(69826),n(68309),n(67682)),p=n(73585),d=n(60387),y=n(33044),f=n(2578);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(){function e(){(0,o.Z)(this,e),this.sinks=[],this.sdkInstanceId="",this.debugEnabled=!1,this.correlationIds={},this.dustEnabled=!0}var t,n,s,c,v;return(0,a.Z)(e,[{key:"addSink",value:(v=(0,i.Z)(u().mark((function e(t){var n,r=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={sink:l.Types.instanceStrict(p.Z)},(0,l.typecheck)(this,"addSink",n,r),!1===this.sinks.includes(t)&&this.sinks.push(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"removeSink",value:(c=(0,i.Z)(u().mark((function e(t){var n,r=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={sink:l.Types.instanceStrict(p.Z)},(0,l.typecheck)(this,"removeSink",n,r),this.sinks=this.sinks.filter((function(e){return e!==t}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"findSink",value:function(e){return this.sinks.find((function(t){return l.Check.instanceStrict(t,e)}))}},{key:"console",value:(s=(0,i.Z)(u().mark((function e(){var t,n=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!(n.length>0&&void 0!==n[0])||n[0],this.sinks=this.sinks.filter((function(e){return l.Check.not.instanceStrict(e,f.Z)})),t&&(this.debugEnabled=t,this.sinks.push(new f.Z(y.Z.none)));case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"log",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.logWithOverrideLevel(e,t,n)}},{key:"none",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.logWithOverrideLevel(e,t,n,y.Z.none)}},{key:"trace",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.logWithOverrideLevel(e,t,n,y.Z.trace)}},{key:"debug",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.logWithOverrideLevel(e,t,n,y.Z.debug)}},{key:"info",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.logWithOverrideLevel(e,t,n,y.Z.info)}},{key:"warn",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.logWithOverrideLevel(e,t,n,y.Z.warn)}},{key:"error",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.logWithOverrideLevel(e,t,n,y.Z.error)}},{key:"diagnostics",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.logWithOverrideLevel(e,t,n,y.Z.diagnostics)}},{key:"logWithOverrideLevel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y.Z.none;if(l.Check.string(e)&&l.Check.undefined(t))return this.logMessage({message:e,isPublic:n,level:i});if(l.Check.string(t))return this.logMessage({source:e,message:t,isPublic:n,level:i});var o=m({isPublic:n,level:i},"object"===(0,r.Z)(t)?t:{});return this.logMetric(e,o)}},{key:"logMetric",value:(n=(0,i.Z)(u().mark((function e(t,n){var r,i,o,a,s,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.isPublic,i=n.level,o=n.name,a=n.extraData,s=new d.Z({isPublic:r,level:i||y.Z.none,source:t,message:o,extraData:a}),c=h(this.sinks);try{for(c.s();!(l=c.n()).done;)l.value.log(s)}catch(e){c.e(e)}finally{c.f()}case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"logMessage",value:(t=(0,i.Z)(u().mark((function e(t){var n,r,i,o,a,s,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.source,r=void 0===n?"":n,i=t.message,o=t.isPublic,a=t.level,s=new d.Z({source:r,message:i,isPublic:o,level:a}),c=h(this.sinks);try{for(c.s();!(l=c.n()).done;)l.value.log(s)}catch(e){c.e(e)}finally{c.f()}case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Logging.Logger"}}]),e}();(0,s.Z)(b,"instance",new b)},2578:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}}),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(60136),s=n(82963),c=n(61120),u=n(87757),l=n.n(u);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}n(41539),n(39714);var d=function(e){(0,a.Z)(s,e);var t,n=p(s);function s(e){return(0,i.Z)(this,s),n.call(this,e)}return(0,o.Z)(s,[{key:"log",value:(t=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.level<this.logLevel)){e.next=2;break}return e.abrupt("return");case 2:n=t.toString(),"undefined"!=typeof console&&console.log(n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Logging.Sinks.ConsoleSink"}}]),s}(n(73585).Z)},36399:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(15671),i=n(43144),o=(n(41539),n(88674),n(67682)),a=n(70928),s=n(52662),c=function(){function e(t){(0,r.Z)(this,e);var n={provider:o.Types.object({createAuthCookie:o.Types.function})};(0,o.typecheck)(this,n,arguments),this.provider=t}return(0,i.Z)(e,[{key:"createCookie",value:function(e,t){var n={accessToken:o.Types.instanceStrict(a.Z),logTransaction:o.Types.instanceStrict(s.Z)};(0,o.typecheck)(this,"createCookie",n,arguments);var r=this.provider.config.extras.cookieEnabled;return r?this.provider.createAuthCookie(e,t):Promise.resolve()}},{key:"toString",value:function(){return"SDK.Media.AuthCookieProvider"}}]),e}()},46467:function(e,t,n){"use strict";var r=n(40176);t.Z={drmLicenseRequestFailed:r.Z.authorizationExpired,drmLicenseExpired:r.Z.invalidGrant,drmHdcpError:r.Z.mediaNotPlayable,drmEmeMissing:r.Z.mediaNotPlayable,drmCdmInternalError:r.Z.mediaNotPlayable,drmNoSupportedKeySystem:r.Z.mediaNotPlayable,drmNoSupportedKeySystemConfiguration:r.Z.unspecifiedDrmError,drmEncryptionSchemeNotSupported:r.Z.mediaNotPlayable,drmVariantKeySystemMissing:r.Z.keyNotFound,drmMediakeysChangeFail:r.Z.unspecifiedDrmError,drmMultipleSessionsNotSupported:r.Z.unspecifiedDrmError,drmEmptyLicenseRequest:r.Z.unspecifiedDrmError,drmParentalControlsRestricted:r.Z.parentalControlsRestricted,drmLicenseForbidden:r.Z.upgradeRequired,default:r.Z.unspecifiedDrmError}},25279:function(e,t,n){"use strict";var r,i,o,a,s,c,u,l;n.d(t,{$g:function(){return a},Fz:function(){return s},We:function(){return r},Xs:function(){return l},aD:function(){return o},fG:function(){return i},nG:function(){return c},xy:function(){return u}}),function(e){e.NONE="NONE",e.SGAI="SGAI",e.SSAI="SSAI",e.ADPARTNER="ADPARTNER"}(r||(r={})),function(e){e.unknown="unknown",e.none="none",e.basic="basic",e.enhanced="enhanced"}(i||(i={})),function(e){e.conviva="conviva",e.telemetry="telemetry",e.qos="qos",e.adEngine="adEngine",e.qoe="qoe"}(o||(o={})),function(e){e.url="url",e.mediaId="mediaId",e.resourceId="resourceId",e.v6Url="v6Url"}(a||(a={})),function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e.GROUPWATCH="GROUPWATCH",e.SHAREPLAY="SHAREPLAY"}(s||(s={})),function(e){e.SLUG_1000_MS="SLUG_1000_MS",e.SLUG_750_MS="SLUG_750_MS",e.SLUG_500_MS="SLUG_500_MS"}(c||(c={})),function(e){e.low="LOW",e.medium="MED",e.high="HIGH",e.none="NONE"}(u||(u={})),function(e){e.level1="level1",e.level3="level3"}(l||(l={}))},58605:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=(n(41539),n(39714),n(67682)),a=n(87891),s=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({onHandler:o.Types.function,onceHandler:o.Types.function.optional,offHandler:o.Types.function,logger:o.Types.instanceStrict(a.Z)})};(0,o.typecheck)(this,n,arguments);var i=t.onHandler,s=t.onceHandler,c=t.offHandler,u=t.logger;this.onHandler=i,this.onceHandler=s,this.offHandler=c,this.logger=u}return(0,i.Z)(e,[{key:"addHandler",value:function(e){var t,n=e.playerAdapter,r=e.eventName,i=e.handler,a=e.onHandler,s=e.offHandler,c=n.offHandlerRemovalList;if(r&&!o.Check.emptyString(r))return o.Check.function(a)?(t=i.bind(n),a.call(n.nativePlayer,r,t)):this.logger.error(this.toString(),'The nativePlayer is missing a ".on(...)" or ".once(...)" event notification utility.'),c.push((function(){s.call(n.nativePlayer,r,t)})),t}},{key:"addEventHandler",value:function(e,t,n){var r=this.onHandler,i=this.offHandler;return this.addHandler({playerAdapter:e,eventName:t,handler:n,onHandler:r,offHandler:i})}},{key:"addEventHandlerOnce",value:function(e,t,n){var r=this.onceHandler,i=this.offHandler;return this.addHandler({playerAdapter:e,eventName:t,handler:n,onHandler:r,offHandler:i})}},{key:"toString",value:function(){return"SDK.Media.EventListenerProvider"}}]),e}()},99565:function(e,t,n){"use strict";n.d(t,{Z:function(){return z}}),n(82526),n(57327),n(49337);var r,i,o,a,s,c,u,l,p,d,y=n(4942),f=n(54546),h=n(15861),v=n(15671),g=n(43144),m=n(53229),b=n(87757),T=n.n(b),k=(n(41539),n(39714),n(54747),n(47941),n(92222),n(88674),n(38880),n(67682)),S=n(53298),P=n(11908),E=n(48258),Z=n(34391),w=n(403),D=n(59056),C=n(33738),A=n(6456),R=n(57890),x=n(19546),O=n(84983),I=n(9598),M=n(1206),j=n(36047),L=n(70187),N=n(78641),B=n(12719),_=n(25279),F=n(87891),U=n(28928),q=n(96581);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=O.Z.qualityOfService,G=O.Z.media.mediaApi,Q=I.Z.apiMethodDecorator.bind(null,G),z=(r=Q({paramTypes:{playerAdapter:k.Types.instanceStrict(w.Z),priorityDrms:k.Types.array.of.nonEmptyString.optional}}),i=Q({paramTypes:{options:k.Types.object({mediaDescriptor:k.Types.instanceStrict(E.Z),preferredPlaylistType:k.Types.in(U.PlaylistType),playbackContext:k.Types.instanceStrict(C.Z).optional})}}),o=Q({paramTypes:{mediaItem:k.Types.instanceStrict(Z.Z)}}),a=Q({paramTypes:{mediaItem:k.Types.instanceStrict(Z.Z),resolution:k.Types.in(_.xy)}}),s=Q({paramTypes:{presentation:k.Types.instanceStrict(D.Z),index:k.Types.number}}),c=Q({paramTypes:{mediaItem:k.Types.instanceStrict(Z.Z)}}),u=Q({paramTypes:{mediaItem:k.Types.instanceStrict(Z.Z),resolution:k.Types.in(_.xy)}}),l=Q({paramTypes:{options:k.Types.object()}}),p=Q({paramTypes:{playbackRightsProgramBoundaryCheck:k.Types.object(q.Bu)}}),d=function(){function e(t){(0,v.Z)(this,e);var n={options:k.Types.object({mediaManager:k.Types.instanceStrict(P.Z),platformMetricsProvider:k.Types.instanceStrict(S.Z),logger:k.Types.instanceStrict(F.Z)})};(0,k.typecheck)(this,n,arguments);var r=t.mediaManager,i=t.platformMetricsProvider,o=t.logger;this.mediaManager=r,this.platformMetricsProvider=i,this.logger=o,this.logger.info(this.toString(),"Created.")}var t,n,r,i;return(0,g.Z)(e,[{key:"createPlaybackSession",value:(i=(0,h.Z)(T().mark((function e(t){var n,r,i,o,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,r=(0,f.Z)(n.args,2),i=r[0],o=r[1],a=void 0===o?null:o,e.abrupt("return",this.mediaManager.createPlaybackSession(i,a));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"fetch",value:(r=(0,h.Z)(T().mark((function e(t){var n,r,i,o,a,s,c;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,f.Z)(n.args,1),o=i[0],a=o.mediaDescriptor,s=o.preferredPlaylistType,null==(c=o.playbackContext)||c.setPlaybackRequestedAtTimestamp(),null==c||c.setMediaLocatorType(a.locator.mediaLocatorType),e.abrupt("return",this.mediaManager.getMediaItem({mediaDescriptor:a,preferredPlaylistType:s,playbackContext:c,logTransaction:r}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"deriveBaseDeviceCapability",value:function(e){var t={mediaDescriptor:k.Types.instanceStrict(E.Z)};return(0,k.typecheck)(this,"deriveBaseDeviceCapability",t,arguments),this.mediaManager.deriveBaseDeviceCapability(e)}},{key:"derivePlaybackSelectionAttributes",value:function(e,t){var n={mediaDescriptor:k.Types.instanceStrict(E.Z),playbackContext:k.Types.instanceStrict(C.Z).optional};return(0,k.typecheck)(this,"derivePlaybackSelectionAttributes",n,arguments),this.mediaManager.derivePlaybackSelectionAttributes(e,t)}},{key:"initializePlaybackContext",value:function(e){var t=this,n={options:k.Types.object({playbackIntent:k.Types.in(x.PlaybackIntent),productType:k.Types.in(x.ProductType),isPreBuffering:k.Types.boolean.optional,offline:k.Types.boolean.optional,interactionId:k.Types.nonEmptyString.optional,disablePlaybackSnapshotEventsOverride:k.Types.boolean,pqmGroupId:k.Types.nonEmptyString.optional,pqmVersion:k.Types.nonEmptyString.optional,startupContext:k.Types.object().optional,contentKeys:k.Types.object(),data:k.Types.object().optional})};(0,k.typecheck)(this,"initializePlaybackContext",n,arguments);var r=e.playbackIntent,i=e.productType,o=e.isPreBuffering,a=void 0!==o&&o,s=e.startupContext,c=e.contentKeys,u=e.data,l=void 0===u?{}:u,p=e.interactionId,d=this.logger,y=this.platformMetricsProvider,f=d.analyticsProvider,h=y.availableCpuPercentage()||void 0,v=y.availableMemoryMb()||void 0,g=!1,m=new C.Z(V(V({},e),{},{isPreBuffering:a,data:l,snapshotEventFeatureFlagEnabled:g})),b=m.playbackSessionId;if(d.dustEnabled){var T;if(f){var S=f.getCommonProperties(b);T=V(V({},l),S)}var P=new R.Z({startupActivity:x.StartupActivity.requested,playbackSessionId:b,productType:i,networkType:x.NetworkType.unknown,playbackIntent:r,mediaPreBuffer:a,cpuPercentage:h,freeMemory:v,contentKeys:c,data:T,startupContext:s,requestedStartTime:Date.now(),interactionId:p});Object.keys(P).forEach((function(e){k.Check.assigned(l)&&e in l&&d.warn(t.toString(),"Incoming data for key '".concat(e,"' with value '").concat(l[e],"' will override value '").concat(P[e],"'"))}));var E=new M.Z({category:j.Z.qoe,logger:d,source:this.toString(),urn:H.playbackStartup,data:V({},P),skipLogTransaction:!0,dataVersion:(0,B.y)(H.playbackStartup)});E.log()}return m}},{key:"getSpriteSheetThumbnailSets",value:function(e){var t,n=e,r=n.logTransaction,i=n.dustLogUtility,o=(0,f.Z)(n.args,1)[0],a=null===(t=o.payload.thumbnails)||void 0===t?void 0:t.spritesheet;if(k.Check.not.nonEmptyObject(a)){var s=new N.Z({exceptionData:L.Z.media.thumbnailsNotAvailable});return Promise.reject(s)}return null==i||i.logData({thumbnailUrl:null==a?void 0:a.href}),this.mediaManager.getSpriteSheetThumbnailSets(o,r)}},{key:"getSpriteSheetThumbnailSet",value:function(e){var t,n=e,r=n.logTransaction,i=n.dustLogUtility,o=(0,f.Z)(n.args,2),a=o[0],s=o[1],c=null===(t=a.payload.thumbnails)||void 0===t?void 0:t.spritesheet;if(k.Check.not.nonEmptyObject(c)){var u=new N.Z({exceptionData:L.Z.media.thumbnailsNotAvailable});return Promise.reject(u)}return null==i||i.logData({thumbnailUrl:null==c?void 0:c.href,thumbnailResolution:s}),this.mediaManager.getSpriteSheetThumbnailSet(a,s,r)}},{key:"getSpriteSheetThumbnail",value:function(e){var t=e,n=t.logTransaction,r=t.dustLogUtility,i=(0,f.Z)(t.args,2),o=i[0],a=i[1];return null==r||r.logData({spriteSheetUrl:o.paths[a]}),this.mediaManager.getSpriteSheetThumbnail(o,a,n)}},{key:"getBifThumbnailSets",value:function(e){var t,n=e,r=n.logTransaction,i=n.dustLogUtility,o=(0,f.Z)(n.args,1)[0],a=null===(t=o.payload.thumbnails)||void 0===t?void 0:t.bif;if(k.Check.not.nonEmptyObject(a)){var s=new N.Z({exceptionData:L.Z.media.thumbnailsNotAvailable});return Promise.reject(s)}return null==i||i.logData({thumbnailUrl:null==a?void 0:a.href}),this.mediaManager.getBifThumbnailSets(o,r)}},{key:"getBifThumbnailSet",value:function(e){var t,n=e,r=n.logTransaction,i=n.dustLogUtility,o=(0,f.Z)(n.args,2),a=o[0],s=o[1],c=null===(t=a.payload.thumbnails)||void 0===t?void 0:t.bif;if(k.Check.not.nonEmptyObject(c)){var u=new N.Z({exceptionData:L.Z.media.thumbnailsNotAvailable});return Promise.reject(u)}return null==i||i.logData({thumbnailUrl:null==c?void 0:c.href,thumbnailResolution:s}),this.mediaManager.getBifThumbnailSet(a,s,r)}},{key:"endPlaybackContext",value:function(e){var t={playbackContext:k.Types.instanceStrict(C.Z)};k.typecheck.warn(this,"endPlaybackContext",t,arguments);var n=this.logger,r=n.analyticsProvider,i=e||{},o=i.playbackSessionId,a=i.productType,s=i.contentKeys,c=void 0===s?{}:s,u=i.data,l=void 0===u?{}:u,p=i.offline,d=i.interactionId;if(n.dustEnabled&&k.Check.nonEmptyString(o)){var y;if(r){var f=r.getCommonProperties(o);y=V(V({},l),f)}var h=new A.Z({playbackActivity:x.PlaybackActivity.ended,productType:a,cause:x.PlaybackExitedCause.user,playbackError:x.QoePlaybackError.unknown,contentKeys:c,data:y,localMedia:p,interactionId:d,mediaFetchSucceeded:!0}),v=new M.Z({category:j.Z.qoe,logger:n,source:this.toString(),urn:H.playback,data:V({},h),skipLogTransaction:!0,dataVersion:(0,B.y)(H.playback)});v.log()}}},{key:"updateAdEngineCookies",value:(n=(0,h.Z)(T().mark((function e(t){var n,r,i,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,f.Z)(n.args,1),o=i[0],e.next=3,this.mediaManager.updateAdEngineCookies(o,r);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"checkPlaybackRights",value:(t=(0,h.Z)(T().mark((function e(t){var n,r,i,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,f.Z)(n.args,1),o=i[0],e.abrupt("return",this.mediaManager.checkPlaybackRights(o,r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Media.MediaApi"}}]),e}(),(0,m.Z)(d.prototype,"createPlaybackSession",[r],Object.getOwnPropertyDescriptor(d.prototype,"createPlaybackSession"),d.prototype),(0,m.Z)(d.prototype,"fetch",[i],Object.getOwnPropertyDescriptor(d.prototype,"fetch"),d.prototype),(0,m.Z)(d.prototype,"getSpriteSheetThumbnailSets",[o],Object.getOwnPropertyDescriptor(d.prototype,"getSpriteSheetThumbnailSets"),d.prototype),(0,m.Z)(d.prototype,"getSpriteSheetThumbnailSet",[a],Object.getOwnPropertyDescriptor(d.prototype,"getSpriteSheetThumbnailSet"),d.prototype),(0,m.Z)(d.prototype,"getSpriteSheetThumbnail",[s],Object.getOwnPropertyDescriptor(d.prototype,"getSpriteSheetThumbnail"),d.prototype),(0,m.Z)(d.prototype,"getBifThumbnailSets",[c],Object.getOwnPropertyDescriptor(d.prototype,"getBifThumbnailSets"),d.prototype),(0,m.Z)(d.prototype,"getBifThumbnailSet",[u],Object.getOwnPropertyDescriptor(d.prototype,"getBifThumbnailSet"),d.prototype),(0,m.Z)(d.prototype,"updateAdEngineCookies",[l],Object.getOwnPropertyDescriptor(d.prototype,"updateAdEngineCookies"),d.prototype),(0,m.Z)(d.prototype,"checkPlaybackRights",[p],Object.getOwnPropertyDescriptor(d.prototype,"checkPlaybackRights"),d.prototype),d)},88813:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(15671),i=n(43144),o=(n(41539),n(39714),n(67682)),a=n(87891),s=n(25279),c=function(){function e(t){(0,r.Z)(this,e);var n={logger:o.Types.instanceStrict(a.Z).optional};(0,o.typecheck)(this,n,arguments),this.logger=t||a.Z.instance,this.logger.log(this.toString(),"Created provider")}return(0,i.Z)(e,[{key:"getSupportedHdrTypes",value:function(){return[]}},{key:"getWidevineSecurityLevel",value:function(){return null}},{key:"getSupportedCodecs",value:function(){return[]}},{key:"getHdcpSecurityLevel",value:function(){return s.fG.unknown}},{key:"supportsAtmos",value:function(){return!1}},{key:"getSlugDuration",value:function(){}},{key:"toString",value:function(){return"SDK.Media.MediaCapabilitiesProvider"}}]),e}()},48258:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(15671),i=n(43144),o=n(67682),a=n(63362),s=n(53908),c=n(25279),u=n(48900),l=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({locator:o.Types.instanceStrict(a.Z),adTargeting:o.Types.object().optional,contentId:o.Types.nonEmptyString.optional,mediaPreferences:o.Types.instanceStrict(s.Z).optional,baseDeviceCapabilityOverride:o.Types.nonEmptyString.optional,assetInsertionStrategy:o.Types.in(c.We),playbackInitiationContext:o.Types.in(c.Fz).optional,devicePrivacyOptOut:o.Types.in(u.Z).optional})};(0,o.typecheck)(this,n,arguments);var i=t.locator,l=t.adTargeting,p=t.contentId,d=t.mediaPreferences,y=t.baseDeviceCapabilityOverride,f=t.assetInsertionStrategy,h=t.playbackInitiationContext,v=t.devicePrivacyOptOut;this.locator=i,this.adTargeting=l||{},this.contentId=p,this.mediaPreferences=d,this.baseDeviceCapabilityOverride=y,this.assetInsertionStrategy=f,this.playbackInitiationContext=h,this.devicePrivacyOptOut=v}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Media.MediaDescriptor"}}]),e}()},34391:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(15861),i=n(15671),o=n(43144),a=(n(21249),n(41539),n(88674),n(26699),n(32023),n(87757)),s=n.n(a),c=n(67682),u=n(15004),l=n(62120),p=n(33738),d=n(48258),y=n(49976),f=n(53158),h=n(25279),v=n(70825),g=n(28928),m=function(){function e(t){(0,i.Z)(this,e);var n={options:c.Types.object({mediaPayload:c.Types.instanceStrict(u.Z),mediaDescriptor:c.Types.instanceStrict(d.Z),playbackContext:c.Types.instanceStrict(p.Z).optional,preferredPlaylistType:c.Types.in(g.PlaylistType),insertion:c.Types.object(v.InsertionTypedef).optional,editorial:c.Types.array.of.object(v.EditorialTypedef).optional})};(0,c.typecheck)(this,n,arguments);var r=t.mediaPayload,o=t.mediaDescriptor,a=t.playbackContext,s=t.preferredPlaylistType,l=t.insertion,y=t.editorial;this.payload=r,this.descriptor=o,this.playbackContext=a,this.playhead=this.payload.playhead,this.preferredPlaylistType=s,this.priorityTracking=void 0,this.insertion=l,this.editorial=y}var t,n;return(0,o.Z)(e,[{key:"getDefaultPlaylist",value:function(){return this.getPlaylist()}},{key:"getPreferredPlaylist",value:function(){return this.getPlaylist(this.preferredPlaylistType)}},{key:"getTrackingData",value:function(e){var t={key:c.Types.in(h.aD).optional};(0,c.typecheck)(this,"getTrackingData",t,arguments);var n=this.payload.tracking,r=n[e=e||h.aD.conviva]||{};return r}},{key:"getSegmentTypes",value:(n=(0,r.Z)(s().mark((function e(){var t,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPreferredPlaylist();case 2:return r=e.sent,e.abrupt("return",{videoSegmentTypes:null===(t=r.attributes)||void 0===t?void 0:t.videoSegmentTypes,audioSegmentTypes:null===(n=r.attributes)||void 0===n?void 0:n.audioSegmentTypes});case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getAudioRenditions",value:function(){var e=this.payload.stream.renditions,t=(void 0===e?{}:e).audio,n=(void 0===t?[]:t).map((function(e){return e}));return Promise.resolve(n)}},{key:"getSubtitleRenditions",value:function(){var e=this.payload.stream.renditions,t=(void 0===e?{}:e).subtitles,n=(void 0===t?[]:t).map((function(e){return e}));return Promise.resolve(n)}},{key:"getVariants",value:function(){var e=this.payload.stream.variants;return(void 0===e?[]:e).map((function(e){return new l.Z(e)}))}},{key:"getSourceInfos",value:function(){return this.payload.stream.sources}},{key:"getMediaSources",value:function(e){var t=g.PlaylistType.COMPLETE,n=g.PlaylistType.SLIDE;return this.getSourceInfos().map((function(r){var i;switch(e){case t:i=r.complete;break;case n:i=r.slide}return new y.Z({priority:r.priority,primaryContent:i,insertion:r.insertion})}))}},{key:"getAvailablePlaylistTypes",value:function(e){var t=e.sources[0]||{},n=t.complete,r=t.slide,i=[];return c.Check.assigned(n)&&i.push(g.PlaylistType.COMPLETE),c.Check.assigned(r)&&i.push(g.PlaylistType.SLIDE),i}},{key:"getPreferredPlaylistType",value:function(e,t){var n=g.PlaylistType.COMPLETE,r=g.PlaylistType.SLIDE;switch(t){case n:return e.includes(n)?n:r;case r:return e.includes(r)?r:n;default:return e[0]}}},{key:"getPlaylist",value:(t=(0,r.Z)(s().mark((function e(t){var n,r,i,o,a,c,u,p,d,y,h,v,g,m,b,T,k,S,P,E;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.payload,r=n.stream,i=n.tracking,o=r.variants,a=void 0===o?[]:o,c=r.renditions,u=void 0===c?{}:c,p=r.attributes,y=(d=u).audio,h=void 0===y?[]:y,v=d.subtitles,g=void 0===v?[]:v,m=this.getAvailablePlaylistTypes(r),b=this.getPreferredPlaylistType(m,t),T=this.getMediaSources(b),k=a.map((function(e){return new l.Z(e)})),S=h.map((function(e){return e})),P=g.map((function(e){return e})),E=new f.Z({mediaSources:T,trackingInfo:i,playlistType:b,availablePlaylistTypes:m,attributes:p,variants:k,audioRenditions:S,subtitleRenditions:P}),e.abrupt("return",E);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Media.MediaItem"}}]),e}()},63362:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(25279),s=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({mediaLocatorType:o.Types.in(a.$g),value:o.Types.nonEmptyString})};(0,o.typecheck)(this,n,arguments);var i=t.mediaLocatorType,s=t.value;if(this.mediaLocatorType=i,this.value=s,i===a.$g.mediaId){var c={mediaId:s};this.id=btoa(JSON.stringify(c))}else this.id=s}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Media.MediaLocator"}}]),e}()},11908:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=(n(41539),n(39714),n(92222),n(67682)),u=n(87891),l=n(16576),p=n(95400),d=n(48269),y=n(91966),f=n(53298),h=n(90262),v=n(34391),g=n(88813),m=n(48258),b=n(59403),T=n(10129),k=n(76229),S=n(36399),P=n(25279),E=n(70928),Z=n(54268),w=n(39046),D=n(283),C=n(33738),A=n(66165),R=n(5714),x=n(59410),O=n(28928),I=n(52662),M=n(16471),j=function(){function e(t){(0,i.Z)(this,e);var n={options:c.Types.object({mediaManagerConfiguration:c.Types.instanceStrict(w.Z),tokenManager:c.Types.instanceStrict(p.Z),drmClient:c.Types.instanceStrict(l.Z),telemetryManager:c.Types.instanceStrict(d.Z),mediaCapabilitiesProvider:c.Types.instanceStrict(g.Z).optional,mediaClient:c.Types.instanceStrict(Z.Z),adEngineClient:c.Types.instanceStrict(y.Z),platformMetricsProvider:c.Types.instanceStrict(f.Z),logger:c.Types.instanceStrict(u.Z),advertisingIdProvider:c.Types.instanceStrict(h.Z),monotonicTimestampProvider:c.Types.object(M.z)})};(0,c.typecheck)(this,n,arguments);var r=t.mediaManagerConfiguration,o=t.tokenManager,a=t.drmClient,s=t.telemetryManager,v=t.mediaCapabilitiesProvider,m=t.platformMetricsProvider,b=t.mediaClient,T=t.adEngineClient,k=t.logger,S=t.advertisingIdProvider,P=t.monotonicTimestampProvider;this.config=r,this.tokenManager=o,this.drmClient=a,this.telemetryManager=s,this.adEngineClient=T,this.mediaCapabilitiesProvider=v||new g.Z(k),this.platformMetricsProvider=m,this.client=b,this.logger=k,this.advertisingIdProvider=S,this.monotonicTimestampProvider=P,this.logger.log(this.toString(),"Created.")}var t,n,a,j,L,N,B;return(0,o.Z)(e,[{key:"getMediaItem",value:(B=(0,r.Z)(s().mark((function e(t){var n,r,i,o,a,u,l,p,d,y,f,h,g,b,T=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:c.Types.object({mediaDescriptor:c.Types.instanceStrict(m.Z),preferredPlaylistType:c.Types.in(O.PlaylistType),playbackContext:c.Types.instanceStrict(C.Z).optional,logTransaction:c.Types.instanceStrict(I.Z)})},(0,c.typecheck)(this,"getMediaItem",n,T),r=t.mediaDescriptor,i=t.preferredPlaylistType,o=t.playbackContext,a=t.logTransaction,u=this.accessToken,l=this.client,p=r.mediaPreferences,d=r.locator,y=(p||{}).qcPlaybackExperienceContext,f=this.deriveBaseDeviceCapability(r),h=this.derivePlaybackSelectionAttributes(r,o),e.next=9,l.mediaPayload({mediaLocator:d,accessToken:u,baseDeviceCapability:f,playbackSelectionPayload:h,preferredPlaylistType:i,qcPlaybackExperienceContext:y,logTransaction:a,playbackContext:o});case 9:return g=e.sent,b=new v.Z({mediaPayload:g,mediaDescriptor:r,preferredPlaylistType:i,playbackContext:o,insertion:g.stream.insertion,editorial:g.stream.editorial}),e.abrupt("return",b);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return B.apply(this,arguments)})},{key:"createPlaybackSession",value:(N=(0,r.Z)(s().mark((function e(t,n){var r,i,o,a,c,u,l,p,d,y,f,h,v;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.config,i=this.drmClient,o=this.tokenManager,a=this.telemetryManager,c=this.adEngineClient,u=this.logger,l=this.platformMetricsProvider,p=r.extras,d=new S.Z(this),y=r.extras.playbackSession.streamSampleInterval,f=new T.Z(y),h=new b.Z({playbackTelemetryConfiguration:f,telemetryManager:a,logger:u,platformMetricsProvider:l,monotonicTimestampProvider:this.monotonicTimestampProvider}),t.cdnFallback=p.cdnFallback,u.info(this.toString(),"Create playback session."),v={tokenManager:o,drmClient:i,mediaManager:this,telemetryDispatcher:h,logger:u,playerAdapter:t,authCookieProvider:d,adEngineClient:c,priorityDrms:n},e.abrupt("return",new k.Z(v));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return N.apply(this,arguments)})},{key:"createAuthCookie",value:(L=(0,r.Z)(s().mark((function e(t,n){var r,i=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={accessToken:c.Types.instanceStrict(E.Z),logTransaction:c.Types.instanceStrict(I.Z)},(0,c.typecheck)(this,"createAuthCookie",r,i),e.abrupt("return",this.client.createAuthCookie(t,n));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return L.apply(this,arguments)})},{key:"deriveBaseDeviceCapability",value:function(e){var t,n=this.config.extras,r=n.playbackEncryptionDefault,i=n.mediaQualityDefault,o=e.mediaPreferences,a=e.baseDeviceCapabilityOverride,s=o||{},u=s.preferredEncryptionMode,l=s.preferredMediaQuality;return c.Check.assigned(a)?a:(t=c.Check.not.assigned(u)?r:u,t=c.Check.not.assigned(l)?"".concat(t,"-").concat(i):"".concat(t,"-").concat(l))}},{key:"derivePlaybackSelectionAttributes",value:function(e,t){var n,r,i,o,a,s,u=this.mediaCapabilitiesProvider,l=this.config.extras,p=l.playlistUrlHttpProtocolDefault,d=l.adPartner,y=l.isContentAccessRestricted,f=e.mediaPreferences,h=e.assetInsertionStrategy,v=e.playbackInitiationContext,g=e.devicePrivacyOptOut,m=e.locator,b=(t||{}).playbackSessionId,T=f||{},k=T.preferredResolution,S=T.preferredAudioType,E=T.preferredAdPartner,Z=f||{},w=Z.preferredProtocol,C=Z.preferredFrameRate,O=Z.preferredCodec,I=C?[C]:void 0,M=w||p;if(h!==P.We.SSAI&&h!==P.We.SGAI||(n=u.getSlugDuration()),!y){var j=u.getSupportedHdrTypes(),L=u.supportsAtmos();if(i=S&&L?[S]:void 0,a=c.Check.nonEmptyArray(j)?j:void 0,O)o={video:[O]};else{var N=u.getSupportedCodecs();o=c.Check.nonEmptyArray(N)?{video:N}:void 0}}h===P.We.ADPARTNER?r=E||d||"adengine":s=v||P.Fz.ONLINE;var B,_=new R.Z({audioTypes:i,hdrTypes:a,resolution:k,codecs:o,protocol:M,ads:r,frameRates:I,assetInsertionStrategy:h,playbackInitiationContext:s,slugDuration:n}),F=this.advertisingIdProvider.getLimitAdTrackingEnabled(),U=this.advertisingIdProvider.getId(),q=new A.Z(F,U,g),K=new x.Z(_,q,{playbackSessionId:b});return m.mediaLocatorType!==P.$g.url&&m.mediaLocatorType!==P.$g.v6Url&&(B=m.id),new D.Z(K,B)}},{key:"getSpriteSheetThumbnailSets",value:function(e,t){var n,r,i=this.accessToken,o=this.client,a={thumbnailLink:null!==(n=null===(r=e.payload.thumbnails)||void 0===r?void 0:r.spritesheet)&&void 0!==n?n:{},accessToken:i,logTransaction:t};return o.getSpriteSheetThumbnails(a)}},{key:"getSpriteSheetThumbnailSet",value:(j=(0,r.Z)(s().mark((function e(t,n,r){var i,o,a,c,u,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.accessToken,c=null!==(i=null===(o=t.payload.thumbnails)||void 0===o?void 0:o.spritesheet)&&void 0!==i?i:{},u={thumbnailLink:c,resolution:n,accessToken:a,logTransaction:r},e.next=5,this.client.getSpriteSheetThumbnails(u);case 5:return l=e.sent,e.abrupt("return",l[0]);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return j.apply(this,arguments)})},{key:"getSpriteSheetThumbnail",value:function(e,t,n){return this.client.getSpriteSheetThumbnail(e,t,n)}},{key:"getBifThumbnailSets",value:function(e,t){var n,r,i=this.accessToken,o=this.client,a={thumbnailLink:null!==(n=null===(r=e.payload.thumbnails)||void 0===r?void 0:r.bif)&&void 0!==n?n:{},accessToken:i,logTransaction:t};return o.getBifThumbnails(a)}},{key:"getBifThumbnailSet",value:(a=(0,r.Z)(s().mark((function e(t,n,r){var i,o,a,c,u,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.accessToken,c=null!==(i=null===(o=t.payload.thumbnails)||void 0===o?void 0:o.bif)&&void 0!==i?i:{},u={thumbnailLink:c,resolution:n,accessToken:a,logTransaction:r},e.next=5,this.client.getBifThumbnails(u);case 5:return l=e.sent,e.abrupt("return",l[0]);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"updateAdEngineCookies",value:(n=(0,r.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.adEngineClient.updateCookies(t,this.accessToken,n);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"checkPlaybackRights",value:(t=(0,r.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.checkPlaybackRights({playbackRightsProgramBoundaryCheck:t,accessToken:this.accessToken,logTransaction:n}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"accessToken",get:function(){return this.tokenManager.getAccessToken()}},{key:"toString",value:function(){return"SDK.Media.MediaManager"}}]),e}()},53908:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(15671),i=n(43144),o=n(67682),a=n(70825),s=n(28928),c=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({preferredMediaQuality:o.Types.in(s.MediaQuality).optional,preferredAudioType:o.Types.in(s.AudioType).optional,preferredEncryptionMode:o.Types.in(s.EncryptionMode).optional,preferredProtocol:o.Types.in(s.Protocol).optional,preferredFrameRate:o.Types.number.optional,preferredResolution:o.Types.object(a.VideoResolutionTypedef).optional,preferredAdPartner:o.Types.nonEmptyString.optional,qcPlaybackExperienceContext:o.Types.string.optional,preferredCodec:o.Types.in(s.SupportedCodec).optional}).optional};(0,o.typecheck)(this,n,arguments);var i=t||{},c=i.preferredMediaQuality,u=i.preferredAudioType,l=i.preferredEncryptionMode,p=i.preferredProtocol,d=i.preferredFrameRate,y=i.preferredResolution,f=i.preferredAdPartner,h=i.qcPlaybackExperienceContext,v=i.preferredCodec;this.preferredMediaQuality=c,this.preferredAudioType=u,this.preferredEncryptionMode=l,this.preferredProtocol=p,this.preferredFrameRate=d,this.preferredResolution=y,this.preferredAdPartner=f,this.qcPlaybackExperienceContext=h,this.preferredCodec=v}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Media.MediaPreferences"}}]),e}()},49976:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(70825),s=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({priority:o.Types.integer,primaryContent:o.Types.object(a.UrlInfoTypedef),insertion:o.Types.object(a.InsertionUrlInfoTypedef).optional})};(0,o.typecheck)(this,n,arguments);var i=t.priority,s=t.primaryContent,c=t.insertion;this.priority=i,this.primaryContent=s,this.insertion=c,this.url=s.url}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Media.MediaSource"}}]),e}()},92534:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(15671),i=n(43144),o=function(){function e(){(0,r.Z)(this,e)}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Media.PlaybackEventListener"}}]),e}()},97938:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(11545),a=n(19546),s=function(){function e(t){(0,r.Z)(this,e);var n={currentBitrate:o.Types.integerGreaterOrEqual(0).default(null),currentPlayhead:o.Types.integerGreaterOrEqual(0).default(0),currentThroughput:o.Types.integerGreaterOrEqual(0).default(null),currentBitrateAvg:o.Types.integerGreaterOrEqual(0).default(null),currentBitratePeak:o.Types.integerGreaterOrEqual(0).default(null),playheadProgramDateTime:o.Types.integerGreaterOrEqual(0).default(null),seekableRangeEndProgramDateTime:o.Types.integerGreaterOrEqual(0).default(null),isLiveEdge:o.Types.boolean.default(null),bufferSegmentDuration:o.Types.integer.default(0),mediaBytesDownloaded:o.Types.number.default(null),mediaDownloadTotalTime:o.Types.number.default(void 0),mediaDownloadTotalCount:o.Types.number.default(void 0),playbackState:o.Types.in(a.PlaybackState).default(null),segmentPosition:o.Types.integer.default(null),liveLatencyAmount:o.Types.integer.default(0),playbackDuration:o.Types.integerGreaterOrEqual(0).default(null),maxAllowedVideoBitrate:o.Types.integerGreaterOrEqual(0).default(0),adMetadata:o.Types.object.default(void 0)},i=(0,o.antiCorrupt)(this,t,n),s=i.currentBitrate,c=i.currentPlayhead,u=i.currentThroughput,l=i.currentBitrateAvg,p=i.currentBitratePeak,d=i.playheadProgramDateTime,y=i.seekableRangeEndProgramDateTime,f=i.isLiveEdge,h=i.bufferSegmentDuration,v=i.mediaBytesDownloaded,g=i.mediaDownloadTotalTime,m=i.mediaDownloadTotalCount,b=i.playbackState,T=i.segmentPosition,k=i.liveLatencyAmount,S=i.playbackDuration,P=i.maxAllowedVideoBitrate,E=i.adMetadata;this.currentBitrate=s,this.currentPlayhead=c,this.currentThroughput=u,this.currentBitrateAvg=l,this.currentBitratePeak=p,this.playheadProgramDateTime=d,this.seekableRangeEndProgramDateTime=y,this.isLiveEdge=f,this.bufferSegmentDuration=h,this.mediaBytesDownloaded=v,this.mediaDownloadTotalTime=g,this.mediaDownloadTotalCount=m,this.playbackState=b,this.segmentPosition=T,this.liveLatencyAmount=k,this.playbackDuration=S,this.maxAllowedVideoBitrate=P,this.adMetadata=E}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Media.PlaybackMetrics"}}]),e}()},2904:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}}),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120),c=(n(41539),n(39714),n(17187)),u=n(67682),l=n(96581);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var d=function(e){(0,o.Z)(n,e);var t=p(n);function n(){var e;return(0,r.Z)(this,n),(e=t.call(this)).playlistUri="",e.currentStreamUrl="",e.mediaDownloadTotalTime=0,e.mediaDownloadTotalCount=0,e.seekData={},e}return(0,i.Z)(n,[{key:"getPlaybackMetrics",value:function(){throw new Error("".concat(this.toString(),".getPlaybackMetrics() - not-implemented"))}},{key:"addListener",value:function(e){throw new Error("".concat(this.toString(),".addListener(listener) - not-implemented"))}},{key:"removeListener",value:function(e){throw new Error("".concat(this.toString(),".removeListener(listener) - not-implemented"))}},{key:"getHeartbeatData",value:function(){return{}}},{key:"getCdnName",value:function(){return"null"}},{key:"getAudioBitrate",value:function(){return 0}},{key:"getMaxAllowedVideoBitrate",value:function(){return 0}},{key:"getPlaybackState",value:function(){}},{key:"setSeekData",value:function(e){var t={seekData:u.Types.object(l.Z_)};u.typecheck.warn(this,"setSeekData",t,arguments),this.seekData=e}},{key:"setInitializePlayerStartTime",value:function(){throw new Error("".concat(this.toString(),".setInitializePlayerStartTime() - not-implemented"))}},{key:"setInitializePlayerDuration",value:function(){throw new Error("".concat(this.toString(),".setInitializePlayerDuration() - not-implemented"))}},{key:"getSeekData",value:function(){return this.seekData||{}}},{key:"clean",value:function(){this.seekData=void 0}},{key:"toString",value:function(){return"SDK.Media.PlaybackMetricsProvider"}}]),n}(c.EventEmitter)},76229:function(e,t,n){"use strict";n.d(t,{Z:function(){return q}}),n(47941),n(82526),n(49337);var r,i,o=n(4942),a=n(15861),s=n(15671),c=n(43144),u=n(53229),l=n(87757),p=n.n(l),d=(n(41539),n(39714),n(88674),n(57327),n(21249),n(26699),n(32023),n(54747),n(69826),n(38880),n(67682)),y=n(87891),f=n(80540),h=n(91966),v=n(16576),g=n(95400),m=n(34391),b=n(53158),T=n(59403),k=n(36399),S=n(35423),P=n(34955),E=n(1001),Z=n(42018),w=n(1154),D=n(403),C=n(39072),A=n(71330),R=n(10259),x=n(65714),O=n(91926),I=n(84983),M=n(9598),j=n(1206),L=n(52662),N=n(25279),B=n(28928);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=I.Z.media.playbackSession,q=(r=M.Z.apiMethodDecorator.bind(null,U)(),i=function(){function e(t){(0,s.Z)(this,e);var n={options:d.Types.object({tokenManager:d.Types.instanceStrict(g.Z),drmClient:d.Types.instanceStrict(v.Z),telemetryDispatcher:d.Types.instanceStrict(T.Z),logger:d.Types.instanceStrict(y.Z),playerAdapter:d.Types.instanceStrict(D.Z),authCookieProvider:d.Types.instanceStrict(k.Z),adEngineClient:d.Types.instanceStrict(h.Z),priorityDrms:d.Types.array.of.nonEmptyString.optional,mediaItem:d.Types.instanceStrict(m.Z).optional})};(0,d.typecheck)(this,n,arguments);var r=t.tokenManager,i=t.drmClient,o=t.telemetryDispatcher,a=t.logger,c=t.playerAdapter,u=t.authCookieProvider,l=t.adEngineClient,p=t.priorityDrms,f=void 0===p?null:p,b=t.mediaItem;this.tokenManager=r,this.drmClient=i,this.telemetryDispatcher=o,this.playerAdapter=c,this.authCookieProvider=u,this.adEngineClient=l,this.priorityDrms=f,this.mediaItem=b,this.logger=a,this.onTokenRefreshFailed=this.onTokenRefreshFailed.bind(this),this.onAccessChanged=this.onAccessChanged.bind(this),this.bindTokenProviderEvents(),this.logger.log(this.toString(),"Created.")}var t,n,r,i,o;return(0,c.Z)(e,[{key:"prepare",value:(o=(0,a.Z)(p().mark((function e(t){var n,r,i,o,s,c,u,l,y,h=this,v=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:d.Types.object({mediaItem:d.Types.instanceStrict(m.Z),extraData:d.Types.object().optional,artificialDelayDuration:d.Types.number.optional,isNsaIncludedInVst:d.Types.boolean.optional})},(0,d.typecheck)(this,"prepare",n,v),r=this.logger,i=t.mediaItem,o=t.extraData,s=void 0===o?{}:o,c=t.artificialDelayDuration,u=t.isNsaIncludedInVst,l=void 0===u||u,i.playbackContext&&(c&&(i.playbackContext.artificialDelayDuration=c),i.playbackContext.isNsaIncludedInVst=l),this.mediaItem=i,y=U.prepare,e.abrupt("return",L.Z.wrapLogTransaction({urn:y,file:this.toString(),logger:r,action:function(){var e=(0,a.Z)(p().mark((function e(t){var n,o,a,c,u,l,v,g,m,b,T,k,S;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new j.Z({logger:r,source:h.toString(),urn:y,data:{streamUrl:i.descriptor.locator.id},logTransaction:t}),o=h.telemetryDispatcher,a=h.playerAdapter,c=h.authCookieProvider,u=h.tokenManager,l=i.playhead,g=(v=void 0===l?{}:l).position,m=v.status,b=u.getAccessToken(),r.info(h.toString(),"Execute #prepare"),r.info(h.toString(),"Playlist type: ".concat(i.preferredPlaylistType)),d.Check.assigned(g)&&r.info(h.toString(),'Playhead position: "'.concat(g,'"')),d.Check.assigned(m)&&r.info(h.toString(),'Playhead status: "'.concat(m,'"')),e.prev=9,e.next=12,h.updatePlayerAdapter();case 12:return e.next=14,i.getPreferredPlaylist();case 14:if(S=e.sent,T=S,k=S.attributes,o.init({playbackMetricsProvider:a,mediaItem:i,playlist:T,extraData:s}),!d.Check.assigned(k)){e.next=21;break}return e.next=21,h.setDrm(k,i);case 21:return a.on(f.Z.UpdateAdEngine,(function(e){h.updateAdEngineCookies({mediaItem:i,playlist:T,priority:e,logTransaction:t})})),e.next=24,h.updateAdEngineCookies({mediaItem:i,playlist:T,logTransaction:t});case 24:return e.next=26,c.createCookie(b,t);case 26:return r.info(h.toString(),"Setting source on PlayerAdapter, ".concat(T.streamUri)),e.next=29,a.setSource(T);case 29:return r.info(h.toString(),"Successfully set source on PlayerAdapter"),e.abrupt("return",T);case 33:throw e.prev=33,e.t0=e.catch(9),n.captureError(e.t0),e.t0;case 37:return e.prev=37,n.log(),e.finish(37);case 40:case"end":return e.stop()}}),e,null,[[9,33,37,40]])})));return function(t){return e.apply(this,arguments)}}()}));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"collectStreamSample",value:function(){var e=this.telemetryDispatcher,t=this.playerAdapter;return e.recordStreamSample(t,!0)}},{key:"updateProgramMetadata",value:function(e){var t={programBoundaryInfoBlock:d.Types.nonEmptyString};return d.typecheck.warn(this,"updateProgramMetadata",t,arguments),this.telemetryDispatcher.updateProgramMetadata(this.playerAdapter,e)}},{key:"release",value:(i=(0,a.Z)(p().mark((function e(){var t,n,r,i,o,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.logger,n=this.playerAdapter,r=this.telemetryDispatcher,i=this.tokenManager,o=this.onTokenRefreshFailed,a=this.onAccessChanged,t.info(this.toString(),"Release."),i.off(f.Z.TokenRefreshFailed,o),i.off(f.Z.AccessChanged,a),e.next=7,n.fatalErrorPromise;case 7:return e.next=9,r.release(n);case 9:return n.removeAllListeners(f.Z.UpdateAdEngine),e.abrupt("return",n.clean());case 11:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"updateAdEngineCookies",value:function(e){var t={options:d.Types.object({mediaItem:d.Types.instanceStrict(m.Z),playlist:d.Types.instanceStrict(b.Z),priority:d.Types.number.optional,logTransaction:d.Types.instanceStrict(L.Z)})};(0,d.typecheck)(this,"updateAdEngineCookies",t,arguments);var n=e.mediaItem,r=e.playlist,i=e.priority,o=e.logTransaction,a=this.adEngineClient,s=this.playerAdapter,c=n.descriptor,u=void 0===c?{}:c,l=u.adTargeting,p=r.getTrackingData(N.aD.adEngine,i);if(!a.disabled&&d.Check.nonEmptyObject(p)){var y=p.cdn,f=p.corigin,h=p.fguid,v=F(F({},{cdn:y,corigin:f,ssess:h}),l);return s.setAdEngineData(F({ssess:h},p)),a.updateCookies(v,this.accessToken,o)}return s.setAdEngineData({}),Promise.resolve()}},{key:"createDrmProviders",value:function(e,t){var n=this;return e.map((function(e){return n.createDrmProvider(e,t)})).filter((function(e){return!!e}))}},{key:"createDrmProvider",value:function(e,t){var n,r=t||{},i=r.mediaItem,o=(r.security||{}).drmEndpointKey,a=this.logger,s=this.drmClient,c=this.tokenManager,u=this.playerAdapter,l={drmClient:s,tokenManager:c,logger:a,type:e,mediaItem:i,endpointKey:o,videoPlayerName:u.videoPlayerName,videoPlayerVersion:u.videoPlayerVersion};switch(e){case B.DrmType.FAIRPLAY:n=new S.Z(l);break;case B.DrmType.PLAYREADY:n=new E.Z(l);break;case B.DrmType.WIDEVINE:n=new w.Z(l);break;case B.DrmType.PRMNAGRA:n=new P.Z(l);break;case B.DrmType.SILK:n=new Z.Z(l)}return n?a.info(this.toString(),"Created ".concat(n," instance")):a.error(this.toString(),"Could not create Drm provider of type: ".concat(e)),n}},{key:"filterDrms",value:function(e){var t=this.playerAdapter,n=d.Check.instanceStrict(t,C.Z),r=d.Check.instanceStrict(t,A.Z),i=d.Check.instanceStrict(t,R.Z),o=d.Check.instanceStrict(t,x.Z),a=d.Check.instanceStrict(t,O.Z);return[n,r,i,o].includes(!0)?e.filter((function(e){return r?e!==B.DrmType.FAIRPLAY&&e!==B.DrmType.PLAYREADY:n||i||o||a?e!==B.DrmType.SILK:e})):e}},{key:"setDrmProviders",value:(r=(0,a.Z)(p().mark((function e(t,n){var r,i,o,a,s,c,u,l,y=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.playerAdapter,i=this.priorityDrms,o=d.Check.nonEmptyArray(t),a=d.Check.assigned(r.drmProvider),s=d.Check.nonEmptyArray(r.drmProviders),!a&&!s){e.next=6;break}return e.abrupt("return");case 6:if(d.Check.assigned(i)?(c=i,o&&c.forEach((function(e){t.find((function(t){return t===e}))||y.logger.warn(y.toString(),"".concat(e," is not part of the supported DRMs."))}))):c=o?this.filterDrms(t):this.filterDrms([B.DrmType.SILK]),s||!d.Check.function(r.setDrmProviders)){e.next=13;break}return u=this.createDrmProviders(c,n),e.next=11,r.setDrmProviders(u);case 11:e.next=17;break;case 13:if(a){e.next=17;break}return l=this.createDrmProvider(c[0],n),e.next=17,r.setDrmProvider(l);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"setDrm",value:(n=(0,a.Z)(p().mark((function e(t,n){var r,i,o,a,s,c,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.logger,i=this.playerAdapter,o=t.audioSegmentTypes,a=t.videoSegmentTypes,s=t.drms,c=t.security,!d.Check.function(i.updateSegmentFormat)){e.next=9;break}return r.info(this.toString(),"Update segment types."),r.info(this.toString(),"Audio segment types: ".concat(JSON.stringify(o))),r.info(this.toString(),"Video segment types: ".concat(JSON.stringify(a))),d.Check.assigned(n)&&(r.info(this.toString(),"MediaItem set."),r.info(this.toString(),"MediaItem: ".concat(JSON.stringify(n)))),e.next=9,i.updateSegmentFormat(o,a);case 9:return u={mediaItem:n,security:c},e.abrupt("return",this.setDrmProviders(s,u));case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"updatePlayerAdapter",value:(t=(0,a.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.playerAdapter.accessToken=this.accessToken.token;case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"onTokenRefreshFailed",value:function(e){this.playerAdapter.onAccessFailed(e)}},{key:"onAccessChanged",value:function(e){var t,n=this;return L.Z.wrapLogTransaction({file:this.toString(),urn:I.Z.media.playbackSession.onAccessChanged,logger:this.logger,action:(t=(0,a.Z)(p().mark((function t(r){var i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.accessToken,n.playerAdapter.onAccessChanged(i.token),t.abrupt("return",n.authCookieProvider.createCookie(i,r));case 3:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})})}},{key:"bindTokenProviderEvents",value:function(){var e=this.tokenManager,t=this.onTokenRefreshFailed,n=this.onAccessChanged;e.on(f.Z.TokenRefreshFailed,t),e.on(f.Z.AccessChanged,n)}},{key:"accessToken",get:function(){return this.tokenManager.getAccessToken()}},{key:"toString",value:function(){return"SDK.Media.PlaybackSession"}}]),e}(),(0,u.Z)(i.prototype,"release",[r],Object.getOwnPropertyDescriptor(i.prototype,"release"),i.prototype),i)},10129:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Media.PlaybackTelemetryConfiguration"}}]),n}(n(43898).Z)},59403:function(e,t,n){"use strict";n.d(t,{Z:function(){return Q}}),n(12419),n(82526),n(57327),n(38880),n(49337);var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(60136),c=n(82963),u=n(61120),l=n(4942),p=n(87757),d=n.n(p),y=(n(41539),n(39714),n(54747),n(47941),n(19601),n(88674),n(67682)),f=n(96581),h=n(19546),v=n(28928),g=n(87891),m=n(53298),b=n(34391),T=n(53158),k=n(92534),S=n(10129),P=n(2904),E=n(40206),Z=n(25745),w=n(82209),D=n(6456),C=n(85569),A=n(57890),R=n(56352),x=n(48269),O=n(28892),I=n(1206),M=n(84983),j=n(36047),L=n(25279),N=n(16471),B=n(12719),_=n(5301),F=n(9588),U=n(53169),q=n(66229);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var G=M.Z.qualityOfService,Q=function(e){(0,s.Z)(p,e);var t,n,c,u=H(p);function p(e){var t;(0,i.Z)(this,p),t=u.call(this),(0,l.Z)((0,a.Z)(t),"intervalId",-1);var n={options:y.Types.object({playbackTelemetryConfiguration:y.Types.instanceStrict(S.Z),telemetryManager:y.Types.instanceStrict(x.Z),logger:y.Types.instanceStrict(g.Z),platformMetricsProvider:y.Types.instanceStrict(m.Z),monotonicTimestampProvider:y.Types.object(N.z)})};(0,y.typecheck)((0,a.Z)(t),n,arguments);var r=e.playbackTelemetryConfiguration,o=e.telemetryManager,s=e.logger,c=e.platformMetricsProvider,d=e.monotonicTimestampProvider;return t.config=r,t.manager=o,t.logger=s,t.platformMetricsProvider=c,t.serverData={},t.sessionId=null,t.interval=t.config.streamSampleInterval,t.intervalId=-1,t.isInitialized=!1,t.mediaItem=null,t.playlist=null,t.isReleased=!1,t.extraData={},t.totalVst=0,t.heartbeatSampleTime=void 0,t.presentationTypeCache={presentationType:h.PresentationType.main},t.qoeEnabled=!t.manager.qoeBuffer.disabled,t.variantFetchedUris={},t.hasPlaybackStarted=!1,t.monotonicTimestampProvider=d,t.programBoundaryInfoBlock=void 0,t.logger.log(t.toString(),"Created."),t}return(0,o.Z)(p,[{key:"init",value:function(e){var t={options:y.Types.object({playbackMetricsProvider:y.Types.instanceStrict(P.Z),mediaItem:y.Types.instanceStrict(b.Z),playlist:y.Types.instanceStrict(T.Z),extraData:y.Types.object().optional})};(0,y.typecheck)(this,"init",t,arguments);var n=e.playbackMetricsProvider,r=e.mediaItem,i=e.playlist,o=e.extraData,a=void 0===o?{}:o,s=this.logger,c=this.isReleased,u=i.getTrackingData(L.aD.telemetry);if(!y.Check.emptyObject(u)){if(c)throw(0,_.ZP)("The dispatcher has been released and cannot be reused.");try{var l,p;n.addListener(this),this.serverData=u,this.extraData=a,this.sessionId=null!==(l=null===(p=r.playbackContext)||void 0===p?void 0:p.playbackSessionId)&&void 0!==l?l:(0,U.Z)(),this.isInitialized=!0,this.playlist=i,this.mediaItem=r,s.info(this.toString(),"Initialized."),this.logQoeEvent(G.playbackStartup,this.createPlaybackStartupEventData(h.StartupActivity.preparing,{},n))}catch(e){s.error(this.toString(),e)}}}},{key:"release",value:(c=(0,r.Z)(d().mark((function e(t){var n,r,i=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={playbackMetricsProvider:y.Types.instanceStrict(P.Z)},(0,y.typecheck)(this,"release",n,i),r=this.logger,!this.isReleased){e.next=5;break}return r.warn(this.toString(),"Already released."),e.abrupt("return");case 5:return e.prev=5,t.removeListener(this),e.next=9,this.manager.qoeBuffer.drain();case 9:this.clearStreamInterval(),this.isInitialized=!1,this.isReleased=!0,this.mediaItem=null,this.playlist=null,this.presentationTypeCache=null,this.hasPlaybackStarted=!1,this.programBoundaryInfoBlock=void 0,r.warn(this.toString(),"Released."),e.next=24;break;case 20:throw e.prev=20,e.t0=e.catch(5),r.error(this.toString(),e.t0),e.t0;case 24:case"end":return e.stop()}}),e,this,[[5,20]])}))),function(e){return c.apply(this,arguments)})},{key:"onPlaybackStarted",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.Bv)};y.typecheck.warn(this,"onPlaybackStarted",n,arguments),this.hasPlaybackStarted=!0;var r=e.getPlaybackMetrics(),i=r.currentBitratePeak;this.setMaxAttainedBitrate(i),this.logQoeEvent(G.playback,this.createPlaybackEventData(h.PlaybackActivity.started,t,e)),this.startRecordingSamples(e)}},{key:"onPlaybackPaused",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.rt)};y.typecheck.warn(this,"onPlaybackPaused",n,arguments);var r=h.HeartbeatSampleType.state,i=this.createPlaybackHeartbeatEventData(e,r);this.onPlaybackSampled(i),this.logQoeEvent(G.playback,this.createPlaybackEventData(h.PlaybackActivity.paused,t,e)),this.clearStreamInterval()}},{key:"onPlaybackResumed",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.r)};y.typecheck.warn(this,"onPlaybackResumed",n,arguments),this.logQoeEvent(G.playback,this.createPlaybackEventData(h.PlaybackActivity.resumed,t,e)),this.startRecordingSamples(e)}},{key:"onRebufferingStarted",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.mT)};y.typecheck.warn(this,"onRebufferingStarted",n,arguments),this.logQoeEvent(G.playback,this.createPlaybackEventData(h.PlaybackActivity.rebufferingStarted,t,e))}},{key:"onRebufferingEnded",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.HG)};y.typecheck.warn(this,"onRebufferingEnded",n,arguments),this.logQoeEvent(G.playback,this.createPlaybackEventData(h.PlaybackActivity.rebufferingEnded,t,e))}},{key:"onPlaybackEnded",value:(n=(0,r.Z)(d().mark((function e(t,n){var r,i,o,a=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.HE)},y.typecheck.warn(this,"onPlaybackEnded",r,a),i=h.HeartbeatSampleType.state,o=this.createPlaybackHeartbeatEventData(t,i),this.onPlaybackSampled(o),this.logQoeEvent(G.playback,this.createPlaybackEventData(h.PlaybackActivity.ended,n,t)),this.clearStreamInterval(),this.heartbeatSampleTime=void 0;case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"onPlaybackInitialized",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.H6)};y.typecheck.warn(this,"onPlaybackInitialized",n,arguments),this.playbackMode=e.initialPlaybackMode,this.logQoeEvent(G.playbackStartup,this.createPlaybackStartupEventData(h.StartupActivity.initialized,t,e))}},{key:"onPlaybackModeChanged",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.in(h.PlaybackMode)};y.typecheck.warn(this,"onPlaybackModeChanged",n,arguments),this.playbackMode=t;var r=h.HeartbeatSampleType.user,i=this.createPlaybackHeartbeatEventData(e,r);this.onPlaybackSampled(i)}},{key:"onPlaybackReady",value:function(e,t){var n,r={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.nY)};y.typecheck.warn(this,"onPlaybackReady",r,arguments);var i=(null===(n=this.mediaItem)||void 0===n?void 0:n.playbackContext)||{},o=i.playbackRequestedAtTimestamp,a=i.artificialDelayDuration,s=void 0===a?0:a,c=i.isNsaIncludedInVst,u=void 0===c||c;null!=o&&(this.totalVst=Date.now()-o,u&&(this.totalVst-=s)),this.logQoeEvent(G.playbackStartup,this.createPlaybackStartupEventData(h.StartupActivity.ready,t,e))}},{key:"onPlaybackSeekStarted",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.s4)};y.typecheck.warn(this,"onPlaybackSeekStarted",n,arguments),this.logQoeEvent(G.playback,this.createPlaybackEventData(h.PlaybackActivity.seekStarted,t,e))}},{key:"onPlaybackSeekEnded",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f._i)};y.typecheck.warn(this,"onPlaybackSeekEnded",n,arguments),this.logQoeEvent(G.playback,this.createPlaybackEventData(h.PlaybackActivity.seekEnded,t,e))}},{key:"onAudioChanged",value:function(e){var t={provider:y.Types.instanceStrict(P.Z)};y.typecheck.warn(this,"onAudioChanged",t,arguments);var n=h.HeartbeatSampleType.user,r=this.createPlaybackHeartbeatEventData(e,n);this.onPlaybackSampled(r)}},{key:"onAudioBitrateChanged",value:function(e,t){}},{key:"onSnapshotCreated",value:function(e,t){}},{key:"onSubtitleChanged",value:function(e){var t={provider:y.Types.instanceStrict(P.Z)};y.typecheck.warn(this,"onSubtitleChanged",t,arguments);var n=h.HeartbeatSampleType.user,r=this.createPlaybackHeartbeatEventData(e,n);this.onPlaybackSampled(r)}},{key:"onBitrateChanged",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.a6)};y.typecheck.warn(this,"onBitrateChanged",n,arguments);var r=t.bitratePeak,i=t.bitrateAvg,o=V(V({},t),{},{videoBitrate:r,videoAverageBitrate:i}),a=e.getPlaybackMetrics(),s=a.currentBitratePeak;this.setMaxAttainedBitrate(s);var c=e.getPlaybackState();if(c===h.PlaybackState.playing){var u=h.HeartbeatSampleType.responsive,l=this.createPlaybackHeartbeatEventData(e,u);this.onPlaybackSampled(l)}this.logQoeEvent(G.playback,this.createPlaybackEventData(h.PlaybackActivity.bitrateChanged,o,e))}},{key:"onMultivariantPlaylistFetched",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.sp)};y.typecheck.warn(this,"onMultivariantPlaylistFetched",n,arguments),this.logQoeEvent(G.playbackStartup,this.createPlaybackStartupEventData(h.StartupActivity.masterFetched,t,e))}},{key:"onVariantPlaylistFetched",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.eC)};y.typecheck.warn(this,"onVariantPlaylistFetched",n,arguments),this.shouldReportVariantFetched(t)&&(this.hasPlaybackStarted?this.logQoeEvent(G.playback,this.createPlaybackEventData(h.PlaybackActivity.variantFetched,t,e)):this.logQoeEvent(G.playbackStartup,this.createPlaybackStartupEventData(h.StartupActivity.variantFetched,t,e)))}},{key:"onPlaybackSampled",value:function(e){var t={args:y.Types.instanceStrict(C.Z)};y.typecheck.warn(this,"onPlaybackSampled",t,arguments),this.logQoeEvent(G.playbackHeartbeat,e)}},{key:"onDrmKeyFetched",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.mx)};y.typecheck.warn(this,"onDrmKeyFetched",n,arguments),this.logQoeEvent(G.playbackStartup,this.createPlaybackStartupEventData(h.StartupActivity.drmKeyFetched,t,e))}},{key:"onPlaybackReattempt",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.instanceStrict(A.Z)};y.typecheck.warn(this,"onPlaybackReattempt",n,arguments);var r={};if(Object.keys(t).forEach((function(e){var n=t[e];void 0!==n&&(r[e]=n)})),this.hasPlaybackStarted){var i=r.cdnName,o=r.cdnVendor,a=r.cdnWithOrigin,s=r.playbackError,c=r.playbackErrorDetail;this.onMultivariantPlaylistFallback(e,{cdnName:i,cdnVendor:o,cdnWithOrigin:a,error:s,errorDetail:c})}else this.logQoeEvent(G.playbackStartup,this.createPlaybackStartupEventData(h.StartupActivity.reattempt,r,e))}},{key:"onSuccessfulPlaylistLoad",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object()};y.typecheck.warn(this,"onSuccessfulPlaylistLoad",n,arguments);var r=t.tracking;if(this.mediaItem&&(this.mediaItem.priorityTracking=t.priority),r){var i=r.telemetry;if(i){var o,a=null===(o=this.playlist)||void 0===o?void 0:o.getTrackingInfo(L.aD.telemetry);this.serverData=Object.assign({},a,i)}}}},{key:"onPlaybackError",value:function(e,t){var n,r={provider:y.Types.instanceStrict(P.Z),args:y.Types.object()};y.typecheck.warn(this,"onPlaybackError",r,arguments);var i=this.logger.analyticsProvider,o=this.mediaItem||{},a=o.playbackContext,s=o.payload,c=o.descriptor,u=a||{},l=u.productType,p=u.contentKeys,d=u.offline,f=u.interactionId,v=e||{},g=v.videoPlayerName,m=v.videoPlayerVersion,b=t.isFatal,T=t.adSlotData,k=t.adPodData,S=t.adPodPlacement;if(b){var Z,w,D,C,A,R,x=h.AdInsertionType[c.assetInsertionStrategy.toLowerCase()],O=this.presentationTypeCache.presentationType,I=O===h.PresentationType.ad?h.ApplicationContext.ad:h.ApplicationContext.player,M=(null==s?void 0:s.stream.adsQos)||{},j=M.adSession,N=M.subscriptionType,B=j||{},_=B.id,U=void 0===_?F.DEFAULT_ZERO_GUID:_,q=B.hasSlugs,K=e.getPlaybackMetrics(),H=K.currentBitrate,Q=K.currentBitrateAvg,z=this.monotonicTimestampProvider.getTimestamp(),W=null===(n=this.playlist)||void 0===n?void 0:n.getTrackingInfo(L.aD.qoe);i&&(Z=i.getDictionaryVersion()),this.canUseQosInfo(x)&&(w=U,D=N),I===h.ApplicationContext.ad&&(C=T,A=k,R=S),this.logQoeEvent(G.error,new E.Z(V(V({applicationContext:I,source:h.ErrorSource.player,productType:l,videoBitrate:H,videoAverageBitrate:Q,audioBitrate:e.getAudioBitrate(),maxAllowedVideoBitrate:e.getMaxAllowedVideoBitrate(),cdnName:e.getCdnName(),dictionaryVersion:Z,contentKeys:p,presentationType:O,adInsertionType:x,adSessionId:w,subscriptionType:D},t),{},{adSlotData:C,adPodPlacement:R,adPodData:A,hasSlugs:q,monotonicTimestamp:z,videoPlayerName:g,videoPlayerVersion:m,localMedia:d,interactionId:f,mediaFetchSucceeded:!0,qoe:W,maxAttainedBitrate:this.maxAttainedBitrate,programBoundaryInfoBlock:this.programBoundaryInfoBlock})))}}},{key:"onAdBeaconError",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.kS)};y.typecheck.warn(this,"onAdBeaconError",n,arguments),this.logQoeEvent(G.error,this.createAdErrorEventData(e,t))}},{key:"onAdRequestedError",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.kS)};y.typecheck.warn(this,"onAdRequestedError",n,arguments),this.logQoeEvent(G.error,this.createAdErrorEventData(e,t))}},{key:"onAdPodRequested",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.AM)};y.typecheck.warn(this,"onAdPodRequested",n,arguments),this.logQoeEvent(G.playbackAd,this.createPlaybackAdEventData(h.AdActivity.adPodRequested,t,e))}},{key:"onAdPodFetched",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.EF)};y.typecheck.warn(this,"onAdPodFetched",n,arguments),this.logQoeEvent(G.playbackAd,this.createPlaybackAdEventData(h.AdActivity.adPodFetched,t,e))}},{key:"onAdMultivariantFetched",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.Og)};y.typecheck.warn(this,"onAdMultivariantFetched",n,arguments),this.logQoeEvent(G.playbackAd,this.createPlaybackAdEventData(h.AdActivity.adMultivariantFetched,t,e))}},{key:"onAdVariantFetched",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.J$)};y.typecheck.warn(this,"onAdVariantFetched",n,arguments),this.logQoeEvent(G.playbackAd,this.createPlaybackAdEventData(h.AdActivity.adVariantFetched,t,e))}},{key:"onAdPlaybackStarted",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.m4)};y.typecheck.warn(this,"onAdPlaybackStarted",n,arguments),this.logQoeEvent(G.playbackAd,this.createPlaybackAdEventData(h.AdActivity.adPlaybackStarted,t,e))}},{key:"onAdPlaybackEnded",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.Om)};y.typecheck.warn(this,"onAdPlaybackEnded",n,arguments),this.logQoeEvent(G.playbackAd,this.createPlaybackAdEventData(h.AdActivity.adPlaybackEnded,t,e))}},{key:"onPresentationTypeChanged",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f._J)};y.typecheck.warn(this,"onPresentationTypeChanged",n,arguments),this.presentationTypeCache=t;var r=e.getPlaybackMetrics(),i=r.currentBitratePeak;this.setMaxAttainedBitrate(i);var o=h.HeartbeatSampleType.responsive,a=this.createPlaybackHeartbeatEventData(e,o);this.onPlaybackSampled(a)}},{key:"onViewingEnvironmentChanged",value:function(e,t){}},{key:"onInterstitialPlaybackStarted",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.NA)};y.typecheck.warn(this,"onInterstitialPlaybackStarted",n,arguments),this.logQoeEvent(G.interstitial,this.createInterstitialEventData(h.InterstitialActivity.interstitialStarted,t,e))}},{key:"onInterstitialPlaybackEnded",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.Jq)};y.typecheck.warn(this,"onInterstitialPlaybackEnded",n,arguments),this.logQoeEvent(G.interstitial,this.createInterstitialEventData(h.InterstitialActivity.interstitialEnded,t,e))}},{key:"onMultivariantPlaylistFallback",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.zC)};y.typecheck.warn(this,"onMultivariantPlaylistFallback",n,arguments),this.logQoeEvent(G.playback,this.createPlaybackEventData(h.PlaybackActivity.reattempt,t,e))}},{key:"startRecordingSamples",value:function(e){return this.timedRecordStreamSample(e)}},{key:"timedRecordStreamSample",value:function(e){var t=this,n=this.isInitialized,r=this.interval;return n?(this.clearStreamInterval(),this.recordStreamSample(e).then((function(){t.intervalId=setTimeout((function(){t.timedRecordStreamSample(e)}),1e3*r)}))):Promise.resolve()}},{key:"recordStreamSample",value:(t=(0,r.Z)(d().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,f,v,g,m,b,T=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=T.length>1&&void 0!==T[1]&&T[1],this.isInitialized){e.next=3;break}return e.abrupt("return");case 3:r=this.serverData,i=this.mediaItem,o=this.extraData,a=this.manager,s=t.getPlaybackMetrics(),c=this.sessionId,u=(i||{}).playbackContext,l=s.currentPlayhead,p=s.currentBitrate,f=(u||{}).interactionId,v=y.Check.number(l)?Math.floor(l/1e3):null,n||(g=h.HeartbeatSampleType.periodic,m=this.createPlaybackHeartbeatEventData(t,g),this.onPlaybackSampled(m)),a.config.extras.preferQoeOverStreamSamples&&(null==u?void 0:u.mediaLocatorType)===L.$g.resourceId||(b=new O.Z({playbackSessionId:c,playhead:v,bitrate:p,serverData:r,interactionId:f,extraData:o}),a.streamSampleBuffer.postEvent(b));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"updateProgramMetadata",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),programBoundaryInfoBlock:y.Types.nonEmptyString};y.typecheck.warn(this,"updateProgramMetadata",n,arguments),this.programBoundaryInfoBlock=t;var r=h.HeartbeatSampleType.responsive,i=this.createPlaybackHeartbeatEventData(e,r);this.onPlaybackSampled(i)}},{key:"clearStreamInterval",value:function(){clearTimeout(this.intervalId),this.intervalId=-1}},{key:"getQosDecision",value:function(e){var t;return(null===(t=this.playlist)||void 0===t?void 0:t.playlistType)===v.PlaylistType.SLIDE?e.slide:e.complete}},{key:"createPlaybackEventData",value:function(e,t,n){var r,i;if(this.isInitialized){var o,a,s,c,u,l,p,d,f=this.mediaItem||{},v=f.playbackContext,g=f.descriptor,m=f.payload,b=n||{},T=b.videoPlayerName,k=b.videoPlayerVersion,S=h.MediaSegmentTypeMap[null==t||null===(r=t.rendition)||void 0===r?void 0:r.type],P=v||{},E=P.contentKeys,Z=void 0===E?{}:E,w=P.productType,C=P.offline,A=void 0!==C&&C,R=P.interactionId,x=P.data,O=n.currentStreamUrl||n.playlistUri,I=this.presentationTypeCache.presentationType,M=h.AdInsertionType[null==g?void 0:g.assetInsertionStrategy.toLowerCase()],j=n.getPlaybackMetrics(),N=j.adMetadata,B=j.liveLatencyAmount,_=j.segmentPosition,U=this.monotonicTimestampProvider.getTimestamp(),q=null===(i=this.playlist)||void 0===i?void 0:i.getTrackingInfo(L.aD.qoe);if(e===h.PlaybackActivity.ended){var K,H,G,Q=null===(K=this.playlist)||void 0===K?void 0:K.getTrackingInfo(L.aD.qos);p=null!==(H=null==Q?void 0:Q.cdnVendor)&&void 0!==H?H:"null",d=null!==(G=null==Q?void 0:Q.cdnWithOrigin)&&void 0!==G?G:"null"}var z=(null==m?void 0:m.stream.adsQos)||{},W=z.adSession,Y=z.subscriptionType,J=W||{},X=J.id,$=void 0===X?F.DEFAULT_ZERO_GUID:X,ee=J.hasSlugs;this.canUseQosInfo(M)&&(o=$,a=Y),I===h.PresentationType.ad&&N&&(s=N.adPodPlacement,c=N.adPodData,u=N.adSlotData,l=N.adPlayheadPosition);var te=n.getSeekData().skipType;return e!==h.PlaybackActivity.seekStarted&&e!==h.PlaybackActivity.seekEnded||t.cause!==h.PlaybackSeekCause.seek||te||(te=h.SkipType.skipGeneral),new D.Z(V({maxAllowedVideoBitrate:n.getMaxAllowedVideoBitrate(),playbackActivity:e,productType:w,streamUrl:O,cdnName:y.Check.function(n.getCdnName)?n.getCdnName():"null",cdnVendor:p,cdnWithOrigin:d,contentKeys:Z,presentationType:I,adInsertionType:M,subscriptionType:a,adSessionId:o,adPodPlacement:s,adPodData:c,adSlotData:u,adPlayheadPosition:l,monotonicTimestamp:U,hasSlugs:ee,videoPlayerName:T,videoPlayerVersion:k,localMedia:A,interactionId:R,qoe:q,data:x,maxAttainedBitrate:this.maxAttainedBitrate,mediaSegmentType:S,liveLatencyAmount:B,segmentPosition:_,adMetadata:N,skipType:te,programBoundaryInfoBlock:this.programBoundaryInfoBlock},t))}}},{key:"canUseQosInfo",value:function(e){return e!==h.AdInsertionType.none}},{key:"createPlaybackStartupEventData",value:function(e,t,n){var r,i;if(this.isInitialized){var o,a,s,c,u,l=this.mediaItem||{},p=l.playbackContext,d=l.payload,f=l.descriptor,v=n.videoPlayerName,g=n.videoPlayerVersion,m=((null==d?void 0:d.stream)||{}).attributes,b=p||{},T=b.contentKeys,k=void 0===T?{}:T,S=b.productType,P=b.isPreBuffering,E=b.offline,Z=b.startupContext,w=b.interactionId,D=this.platformMetricsProvider.availableCpuPercentage(),C=this.platformMetricsProvider.availableMemoryMb(),R=y.Check.assigned(p)?p.playbackIntent:null,x=null===(r=this.mediaItem)||void 0===r?void 0:r.getVariants(),O=h.AdInsertionType[null==f?void 0:f.assetInsertionStrategy.toLowerCase()],I=(null==d?void 0:d.stream.adsQos)||{},M=I.adSession,j=I.subscriptionType,N=I.getPods,B=M||{},_=B.id,U=void 0===_?F.DEFAULT_ZERO_GUID:_,q=B.responseCode,K=B.hasSlugs,H=null==d?void 0:d.stream.insertion,G=this.monotonicTimestampProvider.getTimestamp(),Q=null===(i=this.playlist)||void 0===i?void 0:i.getTrackingInfo(L.aD.qoe),z=t.streamUrl||n.currentStreamUrl||n.playlistUri||void 0,W=0,Y=0;return this.canUseQosInfo(O)&&(o=U,a=j,c=q,O===h.AdInsertionType.ssai&&(u=null==N?void 0:N.responseCode)),H&&H.points&&(W=H.points.length,O===h.AdInsertionType.ssai&&H.points.forEach((function(e){var t=e.plannedSlotCount,n=e.duration;s=s?s+t:t,Y=Y?Y+n:n}))),new A.Z(V({startupActivity:e,productType:S,playbackIntent:R,mediaPreBuffer:P,streamUrl:z,videoPlayerName:v,videoPlayerVersion:g,localMedia:E,cpuPercentage:D,freeMemory:C,contentKeys:k,attributes:m,streamVariants:x,qos:n.qos||{},startupContext:Z,adInsertionType:O,subscriptionType:a,adSessionId:o,totalPodCount:W,totalSlotCount:s,totalAdLength:Y,createAdSessionResponseCode:c,getPodsResponseCode:u,monotonicTimestamp:G,hasSlugs:K,interactionId:w,qoe:Q,programBoundaryInfoBlock:this.programBoundaryInfoBlock},t))}}},{key:"getPlaybackDuration",value:function(e){var t,n=e||0,r=null!==(t=this.heartbeatSampleTime)&&void 0!==t?t:n;return this.heartbeatSampleTime=n,n-r}},{key:"createPlaybackHeartbeatEventData",value:function(e,t){var n;if(this.isInitialized){var r,i,o=this.platformMetricsProvider,a=this.totalVst,s=this.maxAttainedBitrate,c=this.playbackMode,u=this.programBoundaryInfoBlock,l=o.availableCpuPercentage(),p=o.availableMemoryMb(),d=e.getPlaybackMetrics(),f=this.mediaItem||{},v=f.playbackContext,g=f.payload,m=f.descriptor,b=d.currentPlayhead,T=d.currentBitratePeak,k=d.currentBitrateAvg,S=d.adMetadata,P=v||{},E=P.productType,Z=P.artificialDelayDuration,w=P.contentKeys,D=P.offline,A=P.interactionId,x=P.data,O=this.presentationTypeCache,I=O.presentationType,M=O.playlistAudioTrackType,j=O.playlistTimedTextTrackType,N=h.AdInsertionType[null==m?void 0:m.assetInsertionStrategy.toLowerCase()],B=(null==g?void 0:g.stream.adsQos)||{},_=B.adSession,U=B.subscriptionType,q=_||{},K=q.id,H=void 0===K?F.DEFAULT_ZERO_GUID:K,G=q.hasSlugs,Q=null===(n=this.playlist)||void 0===n?void 0:n.getTrackingInfo(L.aD.qoe),z=this.monotonicTimestampProvider.getTimestamp();this.canUseQosInfo(N)&&(r=H,i=U);var W,Y,J,X,$,ee=this.getPlaybackDuration(b);if(I===h.PresentationType.ad){var te=S||{};Y=te.adPodPlacement,X=te.adPodData,J=te.adSlotData,$=te.adPlayheadPosition}var ne=e.getHeartbeatData(),re=e.videoPlayerName,ie=e.videoPlayerVersion;return y.Check.instanceStrict(e,R.Z)?W=new C.Z(V(V(V({},d),ne),{},{productType:E,playbackDuration:ee,cdnName:e.getCdnName(),cpuPercentage:l,freeMemory:p,artificialDelayDuration:Z,contentKeys:w,sampleType:t,presentationType:I,adInsertionType:N,adSessionId:r,subscriptionType:i,adPodPlacement:Y,adPodData:X,adSlotData:J,adPlayheadPosition:$,hasSlugs:G,videoPlayerName:re,videoPlayerVersion:ie,localMedia:D,qoe:Q,interactionId:A,data:x,playlistAudioTrackType:M,playlistTimedTextTrackType:j,maxAttainedBitrate:s,playbackMode:c,monotonicTimestamp:z,programBoundaryInfoBlock:u})):(W=new C.Z(V(V(V({},d),ne),{},{productType:E,playbackDuration:ee,totalVst:a,playheadPosition:b,videoBitrate:T,videoAverageBitrate:k,audioBitrate:e.getAudioBitrate(),maxAllowedVideoBitrate:e.getMaxAllowedVideoBitrate(),cdnName:e.getCdnName(),cpuPercentage:l,freeMemory:p,artificialDelayDuration:Z,contentKeys:w,sampleType:t,mediaDownloadTotalCount:e.mediaDownloadTotalCount,mediaDownloadTotalTime:e.mediaDownloadTotalTime,presentationType:I,adInsertionType:N,adSessionId:r,subscriptionType:i,adPodPlacement:Y,adPodData:X,adSlotData:J,adPlayheadPosition:$,hasSlugs:G,videoPlayerName:re,videoPlayerVersion:ie,localMedia:D,interactionId:A,qoe:Q,data:x,playlistAudioTrackType:M,playlistTimedTextTrackType:j,maxAttainedBitrate:s,playbackMode:c,monotonicTimestamp:z,programBoundaryInfoBlock:u})),e.mediaDownloadTotalCount=0,e.mediaDownloadTotalTime=0),W}}},{key:"createPlaybackAdEventData",value:function(e,t,n){var r;if(this.isInitialized){var i,o,a,s,c=n.videoPlayerName,u=n.videoPlayerVersion,l=this.mediaItem||{},p=l.playbackContext,d=l.payload,y=l.descriptor,f=this.monotonicTimestampProvider.getTimestamp(),v=(null==d?void 0:d.stream.adsQos)||{},g=v.adSession,m=v.subscriptionType,b=g||{},T=b.id,k=void 0===T?F.DEFAULT_ZERO_GUID:T,S=b.hasSlugs,P=h.AdInsertionType[null==y?void 0:y.assetInsertionStrategy.toLowerCase()],E=p||{},Z=E.contentKeys,D=void 0===Z?{}:Z,C=E.productType,A=E.interactionId,R=E.data,x=null===(r=this.playlist)||void 0===r?void 0:r.getTrackingInfo(L.aD.qoe);if(t.serverRequest){var O=f;e!==h.AdActivity.adPodFetched&&(O=f-t.serverRequest.roundTripTime),i={startTimestamp:O||0,requestDuration:t.serverRequest.roundTripTime||0},o=t.serverRequest.networkType}return this.canUseQosInfo(P)&&(a=k,s=m),new w.Z(V({adActivity:e,adSessionId:a,adInsertionType:P,subscriptionType:s,productType:C,contentKeys:D,networkType:o,monotonicTimestamp:f,adStartupData:i,hasSlugs:S,videoPlayerName:c,videoPlayerVersion:u,interactionId:A,qoe:x,data:R,programBoundaryInfoBlock:this.programBoundaryInfoBlock},t))}}},{key:"createAdErrorEventData",value:function(e,t){var n,r=t.error,i=t.errorLevel,o=t.applicationContext,a=void 0===o?h.ApplicationContext.ad:o,s=t.errorDetail,c=this.mediaItem||{},u=c.payload,l=c.descriptor,p=c.playbackContext,d=(null==u?void 0:u.stream.adsQos)||{},y=d.subscriptionType,f=d.adSession||{},v=f.id,g=void 0===v?F.DEFAULT_ZERO_GUID:v,m=f.hasSlugs,b=(l||{}).assetInsertionStrategy,T=p||{},k=T.productType,S=T.interactionId,P=T.offline,Z=T.data,w=e||{},D=w.videoPlayerName,C=w.videoPlayerVersion,A=e.getPlaybackMetrics().adMetadata,R=b&&h.AdInsertionType[b.toLowerCase()],x=null==A?void 0:A.adPodPlacement.podPosition,O=h.PresentationType.ad;i===h.ErrorLevel.error&&(x===h.PodPosition.preroll?O=h.PresentationType.unknown:x===h.PodPosition.midroll&&(O=h.PresentationType.main));var I=this.monotonicTimestampProvider.getTimestamp(),M=null===(n=this.playlist)||void 0===n?void 0:n.getTrackingInfo(L.aD.qoe);return new E.Z(V(V({},A),{},{adInsertionType:R,adSessionId:g,applicationContext:a,errorLevel:i,errorMessage:s,errorName:r,isFatal:!1,presentationType:O,subscriptionType:y,productType:k,source:h.ErrorSource.player,hasSlugs:m,monotonicTimestamp:I,videoPlayerName:D,videoPlayerVersion:C,localMedia:P,interactionId:S,qoe:M,data:Z,maxAttainedBitrate:this.maxAttainedBitrate,programBoundaryInfoBlock:this.programBoundaryInfoBlock}))}},{key:"createInterstitialEventData",value:function(e,t,n){var r;if(this.isInitialized){var i=this.monotonicTimestampProvider.getTimestamp(),o=null===(r=this.playlist)||void 0===r?void 0:r.getTrackingInfo(L.aD.qoe),a=n.videoPlayerName,s=n.videoPlayerVersion,c=this.mediaItem||{},u=c.playbackContext,l=c.payload,p=(null==l?void 0:l.stream.adsQos)||{},d=p.subscriptionType,y=(p.adSession||{}).hasSlugs,f=u||{},v=f.contentKeys,g=void 0===v?{}:v,m=f.data,b=f.productType,T=f.interactionId;return new Z.Z(V(V({},t),{},{interstitialActivity:e,interstitialInsertionType:h.InterstitialInsertionType.ssai,data:m,contentKeys:g,interactionId:T,monotonicTimestamp:i,networkType:h.NetworkType.unknown,productType:b,mediaFetchSucceeded:!0,videoPlayerName:a,videoPlayerVersion:s,hasSlugs:y,subscriptionType:d,programBoundaryInfoBlock:this.programBoundaryInfoBlock,qoe:o}))}}},{key:"createPlaybackCustomEventData",value:function(e,t){var n=t.getPlaybackMetrics(),r=(this.mediaItem||{}).playbackContext||{},i=r.interactionId,o=r.data;return new q.Z(V(V(V({},n),e),{},{playbackSessionId:this.sessionId,data:o,interactionId:i,programBoundaryInfoBlock:this.programBoundaryInfoBlock}))}},{key:"getCommonProperties",value:function(e){var t=this.logger.analyticsProvider,n=y.Check.assigned(e)?e.data:{};if(t){var r=t.getCommonProperties(null==e?void 0:e.playbackSessionId);n=V(V({},n),r)}return n}},{key:"logQoeEvent",value:function(e,t){if(this.isInitialized){var n=this.logger,r=this.qoeEnabled,i=this.mediaItem||{},o=i.playbackContext,a=i.payload,s=this.getCommonProperties(o),c=null==o?void 0:o.playbackSessionId,u=((null==a?void 0:a.stream)||{}).qosDecisions,l=void 0===u?{}:u,p=this.getQosDecision(l)||{},d=p.clientDecisions,f=void 0===d?{}:d,h=p.serverDecisions,v=void 0===h?{}:h;if(r&&y.Check.nonEmptyString(c)){var g=(0,B.y)(e);new I.Z({category:j.Z.qoe,logger:n,source:this.toString(),urn:e,data:V(V(V({},t),s),{},{playbackSessionId:c,clientGroupIds:f.clientGroupIds,serverGroupIds:v.serverGroupIds}),skipLogTransaction:!0,dataVersion:g}).log()}}}},{key:"shouldReportVariantFetched",value:function(e){var t=!0,n=this.variantFetchedUris;if(((this.mediaItem||{}).playbackContext||{}).productType===h.ProductType.live){var r=(e||{}).details,i=(r=void 0===r?{}:r).type,o=void 0===i?void 0:i,a=r.url,s=void 0===a?void 0:a;if(y.Check.assigned(o)&&y.Check.assigned(s)){var c=o.toLowerCase();t=n[c]!==s,n[c]=s}}return t}},{key:"setMaxAttainedBitrate",value:function(e){var t=null!=e?e:0;this.maxAttainedBitrate=this.maxAttainedBitrate||t,this.maxAttainedBitrate<t&&(this.maxAttainedBitrate=t)}},{key:"onPlaybackCustomEvent",value:function(e,t){var n={provider:y.Types.instanceStrict(P.Z),args:y.Types.object(f.Jq)};y.typecheck.warn(this,"onPlaybackCustomEvent",n,arguments),this.logQoeEvent(G.custom,this.createPlaybackCustomEventData(t,e))}},{key:"toString",value:function(){return"SDK.Media.PlaybackTelemetryDispatcher"}}]),p}(k.Z)},403:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}}),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(2291),c=n(60136),u=n(82963),l=n(61120),p=n(87757),d=n.n(p),y=(n(41539),n(88674),n(39714),n(54747),n(92222),n(67682)),f=n(87891),h=n(92534),v=n(2904),g=n(19546),m=n(9588);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var T={adSlotData:{adMediaId:m.DEFAULT_ZERO_GUID,slotNumber:0,plannedLength:0},adPodPlacement:{podPosition:g.PodPosition.preroll},adPodData:{plannedSlotCount:0,plannedLength:0},adPlayheadPosition:0,mediaId:m.DEFAULT_ZERO_GUID,adSubtitleData:{subtitleVisibility:!1}},k=function(e){(0,c.Z)(u,e);var t,n=b(u);function u(e){var t;(0,i.Z)(this,u),t=n.call(this);var r={options:y.Types.object({nativePlayer:y.Types.assigned,videoPlayerName:y.Types.nonEmptyString,videoPlayerVersion:y.Types.nonEmptyString})};(0,y.typecheck)((0,a.Z)(t),r,arguments);var o=e.nativePlayer,s=e.videoPlayerName,c=e.videoPlayerVersion;return t.videoPlayerName=s,t.videoPlayerVersion=c,t.nativePlayer=o,t.listener=void 0,t.drmProvider=null,t.accessToken=null,t.boundHandlers={},t.unavailableMetric=null,t.adEngineData={},t.cdnFallback={},t.fatalErrorPromise=null,t.adData={data:{},adMetadata:T},t.logger=f.Z.instance,t}return(0,o.Z)(u,[{key:"setSource",value:function(e){return Promise.reject(new Error("".concat(this.toString(),".setSource(playlist) - not-implemented")))}},{key:"setDrmProvider",value:function(e){return Promise.reject(new Error("".concat(this.toString(),".setDrmProvider(drmProvider) - not-implemented")))}},{key:"removeListener",value:function(e){var t={listener:y.Types.instanceStrict(h.Z).optional};(0,y.typecheck)(this,"removeListener",t,arguments);var n=y.Check.assigned(this.listener)&&this.listener===e;n&&this.offHandlerRemovalList.length>0&&(this.listener=void 0,this.offHandlerRemovalList.forEach((function(e){e()})),this.offHandlerRemovalList=[])}},{key:"onAccessChanged",value:function(e){return y.Check.string(e)&&y.Check.nonEmptyString(e)&&(this.accessToken=e),Promise.resolve()}},{key:"onAccessFailed",value:function(e){return Promise.resolve(e)}},{key:"clean",value:function(){(0,s.Z)((0,l.Z)(u.prototype),"clean",this).call(this)}},{key:"setPlaybackMode",value:function(e){this.onPlaybackModeChanged(e)}},{key:"setAdEngineData",value:function(e){this.adEngineData=e}},{key:"onPlaybackStarted",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onPlaybackStarted(this,e)}},{key:"onPlaybackPaused",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onPlaybackPaused(this,e)}},{key:"onPlaybackResumed",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onPlaybackResumed(this,e)}},{key:"onRebufferingStarted",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onRebufferingStarted(this,e)}},{key:"onRebufferingEnded",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onRebufferingEnded(this,e)}},{key:"onPlaybackEnded",value:(t=(0,r.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=this.listener)||void 0===n?void 0:n.onPlaybackEnded(this,t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"onPlaybackInitialized",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onPlaybackInitialized(this,e)}},{key:"onPlaybackReady",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onPlaybackReady(this,e)}},{key:"onPlaybackSeekStarted",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onPlaybackSeekStarted(this,e)}},{key:"onPlaybackSeekEnded",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onPlaybackSeekEnded(this,e)}},{key:"onAudioChanged",value:function(){var e;null===(e=this.listener)||void 0===e||e.onAudioChanged(this)}},{key:"onSubtitleChanged",value:function(){var e;null===(e=this.listener)||void 0===e||e.onSubtitleChanged(this)}},{key:"onBitrateChanged",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onBitrateChanged(this,e)}},{key:"onMultivariantPlaylistFetched",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onMultivariantPlaylistFetched(this,e)}},{key:"onVariantPlaylistFetched",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onVariantPlaylistFetched(this,e)}},{key:"onDrmKeyFetched",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onDrmKeyFetched(this,e)}},{key:"onSuccessfulPlaylistLoad",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onSuccessfulPlaylistLoad(this,e)}},{key:"onPlaybackReattempt",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onPlaybackReattempt(this,e)}},{key:"onAdBeaconError",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onAdBeaconError(this,e)}},{key:"onAdRequestedError",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onAdRequestedError(this,e)}},{key:"onAdPodRequested",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onAdPodRequested(this,e)}},{key:"onAdPodFetched",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onAdPodFetched(this,e)}},{key:"onAdMultivariantFetched",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onAdMultivariantFetched(this,e)}},{key:"onAdPlaybackStarted",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onAdPlaybackStarted(this,e)}},{key:"onAdPlaybackEnded",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onAdPlaybackEnded(this,e)}},{key:"onPresentationTypeChanged",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onPresentationTypeChanged(this,e)}},{key:"onAdVariantFetched",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onAdVariantFetched(this,e)}},{key:"onPlaybackError",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onPlaybackError(this,e)}},{key:"onPlaybackModeChanged",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onPlaybackModeChanged(this,e)}},{key:"onSnapshotCreated",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onSnapshotCreated(this,e)}},{key:"onInterstitialPlaybackEnded",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onInterstitialPlaybackEnded(this,e)}},{key:"onInterstitialPlaybackStarted",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onInterstitialPlaybackStarted(this,e)}},{key:"normalizePlayhead",value:function(e){var t;return e>=0?e:null!==(t=this.unavailableMetric)&&void 0!==t?t:null}},{key:"getCurrentInterstitial",value:function(){return(this.nativePlayer||{}).currentInterstitial||{}}},{key:"onPlaybackCustomEvent",value:function(e){var t;null===(t=this.listener)||void 0===t||t.onPlaybackCustomEvent(this,e)}},{key:"setAdSlotData",value:function(){var e=this.getCurrentInterstitial();if(e.currentAsset){var t=e.currentAsset,n=t.index,r=t.mediaId,i=this.getAdDataData(r,n);if(i){var o=i.adSlotData,a=void 0===o?T.adSlotData:o;this.adData.adMetadata.adSlotData=a}}}},{key:"getAdDataData",value:function(e,t){var n=this.getMetadataKey(e,t);return this.adData.data[n]}},{key:"getMetadataKey",value:function(e,t){return"".concat(e,"-").concat(t)}},{key:"toString",value:function(){return"SDK.Media.PlayerAdapter"}}]),u}(v.Z)},10259:function(e,t,n){"use strict";n.d(t,{Z:function(){return L}}),n(12419),n(47042),n(68309),n(91038),n(78783),n(74916),n(82526),n(41817),n(32165),n(66992),n(33948);var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(2291),c=n(60136),u=n(82963),l=n(61120),p=n(4942),d=n(87757),y=n.n(d),f=(n(41539),n(88674),n(39714),n(40561),n(69600),n(9653),n(67682)),h=n(46467),v=n(31545),g=n(87891),m=n(403),b=n(97938),T=n(92534),k=n(53158),S=n(66282),P=n(62120),E=n(28928),Z=n(19546),w=n(73688),D=n(43425),C=n(97244),A=n(37736),R=n(83668),x=n(5301),O=n(58605);function I(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var L=function(e){(0,c.Z)(u,e);var t,n=j(u);function u(e){var t,r;(0,i.Z)(this,u),r=n.call(this,e),(0,p.Z)((0,a.Z)(r),"onStreamError",(function(e){var t=r.Events.STREAM_ERROR,n=e||{},i=n.fatal,o=void 0!==i&&i,s=n.messageDetailed,c=void 0===s?t:s;if(o&&"DRM_FAILED"===e.error){var u,l=r.constructErrorCaseFromBamHlsError(e);r.emit(v.Z.MediaFailure,l);try{u=JSON.stringify(l,(0,D.Z)())}catch(e){u="Cannot stringify original error"}return r.boundPlaybackEndedEvent.call((0,a.Z)(r),u),r.removeListener(r.listener)}if(o&&f.Check.assigned(r.listener))return r.boundPlaybackEndedEvent.call((0,a.Z)(r),c),r.removeListener(r.listener)}));var o={options:f.Types.object({nativePlayer:f.Types.object({on:f.Types.function})})};return(0,f.typecheck)((0,a.Z)(r),o,arguments),r.drmProviders=[],r.hlsStatic=null===(t=r.nativePlayer)||void 0===t?void 0:t.getClass(),r.Events=r.hlsStatic.Events,r.States=r.hlsStatic.States,r.PlaybackStates=r.hlsStatic.PlaybackStates,r.DataTypes=r.hlsStatic.DataTypes,r.logger=g.Z.instance,r.isBuffering=!1,r.isApplicationBackgrounded=!1,r.offHandlerRemovalList=[],r}return(0,o.Z)(u,[{key:"setSource",value:function(e){var t,n=this,r={playlist:f.Types.instanceStrict(k.Z)};return(0,f.typecheck)(this,"setSource",r,arguments),f.Check.not.assigned(null===(t=this.nativePlayer)||void 0===t?void 0:t.setupXhrCallback)&&this.setupXhrCallback(),new Promise((function(t){return n.playlistUri=e.streamUri,t()}))}},{key:"setApplicationBackgrounded",value:function(){this.isApplicationBackgrounded=!0}},{key:"setApplicationForegrounded",value:function(){this.isApplicationBackgrounded=!1}},{key:"clean",value:function(){var e=this.listener;(0,s.Z)((0,l.Z)(u.prototype),"clean",this).call(this),this.playlistUri="",this.drmProvider=null,this.drmProviders=[],this.removeListener(e),this.boundHandlers={}}},{key:"dispose",value:function(){this.nativePlayer=null,this.accessToken=null}},{key:"addListener",value:function(e){var t={listener:f.Types.instanceStrict(T.Z)};(0,f.typecheck)(this,"addListener",t,arguments);var n=this.nativePlayer,r=this.Events,i=this.playbackStartedEvent,o=this.playbackEndedEvent,a=this.playbackPausedEvent,s=this.playbackResumedEvent,c=this.playbackInitializedEvent,u=this.playbackReadyEvent,l=this.bitrateChangedEvent,p=this.rebufferingStartedEvent,d=this.rebufferingEndedEvent,y=this.subtitleChangedEvent,h=this.multivariantPlaylistFetchedEvent,v=this.variantPlaylistFetchedEvent,g=this.audioChangedEvent,m=this.onStreamError,b=r.PLAYBACK_PLAYING,k=r.PLAYBACK_ENDED,S=r.PLAYBACK_PAUSED,P=r.STREAM_STATE_CHANGED,E=r.STREAM_PLAYBACK,Z=r.STREAM_CANPLAYTHROUGH,w=r.STREAM_VARIANTS_CHANGED,D=r.STREAM_BUFFERING_STARTED,C=r.STREAM_BUFFERING_FINISHED,A=r.STREAM_CURRENTSUBTITLERENDITION_CHANGED,R=r.MANIFEST_LOADED,I=r.VARIANT_UPDATED,M=r.STREAM_CURRENTAUDIOTRACK_CHANGED,j=r.STREAM_ERROR;if(!n||!n.on)throw(0,x.ZP)("".concat(this.toString(),".addListener(listener) unable to add PlaybackEventListener"));this.listener=e,this.eventListenerProvider=new O.Z({onHandler:n.on,offHandler:n.off,logger:this.logger}),this.eventListenerProvider.addEventHandler(this,b,i),this.boundPlaybackEndedEvent=this.eventListenerProvider.addEventHandler(this,k,o),this.eventListenerProvider.addEventHandler(this,S,a),this.eventListenerProvider.addEventHandler(this,P,s),this.eventListenerProvider.addEventHandler(this,E,c),this.eventListenerProvider.addEventHandler(this,Z,u),this.eventListenerProvider.addEventHandler(this,w,l),this.eventListenerProvider.addEventHandler(this,D,p),this.eventListenerProvider.addEventHandler(this,C,d),this.eventListenerProvider.addEventHandler(this,A,y),this.eventListenerProvider.addEventHandler(this,M,g),this.eventListenerProvider.addEventHandler(this,R,h),this.eventListenerProvider.addEventHandler(this,I,v),this.eventListenerProvider.addEventHandler(this,j,m)}},{key:"setDrmProviders",value:(t=(0,r.Z)(y().mark((function e(t){var n,r,i,o,a,s,c,u,l=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={drmProviders:f.Types.array.of.instanceStrict(S.Z)},(0,f.typecheck)(this,"setDrmProviders",n,l),r=this.nativePlayer,i=this.setDrmConfiguration,this.drmProviders=t,e.next=5,r.getDrmCapabilities();case 5:for(o=e.sent,a=o.keySystems,s=t.length;s--;)null!=a&&null!==(c=a[null===(u=t[s])||void 0===u?void 0:u.type])&&void 0!==c&&c.supported||t.splice(s,1);r.drmConfiguration=i.bind(this)();case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getPlaybackMetrics",value:function(){var e,t,n,r,i,o,a=null===(e=this.nativePlayer)||void 0===e?void 0:e.currentTime;if(f.Check.not.number(a)){var s="".concat(this.toString(),".getPlaybackMetrics() unable to get NativePlayer playhead data");this.logger.warn(this.toString(),s)}if(f.Check.not.function(null===(t=this.nativePlayer)||void 0===t?void 0:t.getNetworkMetrics)){var c="".concat(this.toString(),".getPlaybackMetrics() unable to get NativePlayer bitrate data");this.logger.warn(this.toString(),c)}else{var u=this.nativePlayer.getNetworkMetrics();n=u.chosenBitrate/1e3,r=u.chosenBitrate,i=u.chosenMaxBitrate,o=u.throughput}return new b.Z({currentBitrate:n,currentPlayhead:a,currentBitrateAvg:r,currentBitratePeak:i,currentThroughput:o})}},{key:"getCdnName",value:function(){return"null"}},{key:"constructErrorCaseFromBamHlsError",value:function(e){var t=h.Z[e.cause]||h.Z.default||{},n=t.code,r=t.exceptionData;return(0,x.Kf)({code:n,exceptionData:r})}},{key:"setupXhrCallback",value:function(){var e=this.nativePlayer,t=this.accessToken,n=this.DataTypes,r=this.adEngineData,i=(void 0===r?{}:r).ssess;e.xhrSetupCallback=function(e,r,o){if(n){var a=o===n.KEY,s=(0,C.Z)(r)&&o===n.CHUNK;e.withCredentials=!1,e.readyState||e.open("GET",r,!0),a?e.setRequestHeader(R.AUTHORIZATION,t):s&&i&&(e.withCredentials=!0,e.setRequestHeader("ssess",i))}}}},{key:"setDrmConfiguration",value:function(){var e,t=this.drmProviders,n=[],r=I(t);try{var i=function(){var t,r=e.value,i=r.type,o=r.licenseRequestUri;n.push({keySystem:i,licenseRequestUri:o,licenseRequestHeadersCallback:function(){return r.formatRequestHeadersList(r.processLicenseRequestHeaders())},serverCertificate:(t=i,function(){return t===E.DrmType.FAIRPLAY?r.getFairPlayCertificate():t===E.DrmType.WIDEVINE?r.getWidevineCertificate():Promise.resolve(void 0)})})};for(r.s();!(e=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}return{keySystems:n}}},{key:"playbackStartedEvent",value:function(){this.onPlaybackStarted({})}},{key:"playbackPausedEvent",value:function(){var e,t=this.getPlaybackMetrics();e=this.isApplicationBackgrounded?Z.PlaybackPausedCause.applicationBackgrounded:this.isBuffering?Z.PlaybackPausedCause.stall:Z.PlaybackPausedCause.user,this.onPlaybackPaused({cause:e,playheadPosition:t.currentPlayhead})}},{key:"playbackResumedEvent",value:function(){var e=this.nativePlayer,t=this.States,n=this.PlaybackStates,r=this.getPlaybackMetrics();if((null==e?void 0:e.state)===t.PLAYBACK&&e.playbackState===n.PLAYING){var i=Z.PlaybackResumedCause.user;this.onPlaybackResumed({cause:i,playheadPosition:r.currentPlayhead})}}},{key:"playbackInitializedEvent",value:function(){var e,t=this.nativePlayer,n=this.playlistUri,r=t,i=r.subtitleRenditions,o=void 0===i?[]:i,a=r.areSubtitlesEnabled,s=void 0!==a&&a,c=r.currentSubtitleRendition,u=r.audioTracks,l=void 0===u?[]:u,p=r.variants,d=void 0===p?[]:p,y=r.currentAudioTrack,h=void 0===y?0:y,v=this.getPlaybackMetrics(),g=o[c]||{},m=l[h]||{},b=d[t.getNetworkMetrics().chosenVariant]||{},T=b.audioCodec,k=void 0===T?[]:T,S=b.videoCodec,E=b.videoRange,Z=b.frameRate,w=b.attrs,D=void 0===w?{}:w,C=k.join()||null,A=D.BANDWIDTH,R=D.RESOLUTION,x=D["AVERAGE-BANDWIDTH"],O=D["FRAME-RATE"];f.Check.assigned(Z)?e=Number(Z):f.Check.assigned(O)&&(e=Number(O));var I=new P.Z({bandwidth:f.Check.assigned(A)?Number(A):null,resolution:R,videoBytes:null,maxAudioRenditionBytes:null,maxSubtitleRenditionBytes:null,audioChannels:null,videoRange:E,videoCodec:S,audioType:null,audioCodec:C,averageBandwidth:f.Check.assigned(x)?Number(x):null,frameRate:e});this.onPlaybackInitialized({variant:I,audio:m,subtitle:g,areSubtitlesVisible:s,startupBitrate:null,startupAverageBitrate:null,streamUrl:n,playheadPosition:v.currentPlayhead})}},{key:"playbackReadyEvent",value:function(){}},{key:"bitrateChangedEvent",value:function(){var e=this.getPlaybackMetrics();this.onBitrateChanged({bitrateAvg:e.currentBitrateAvg,bitratePeak:e.currentBitratePeak,playheadPosition:e.currentPlayhead})}},{key:"playbackEndedEvent",value:function(e){var t,n=this.nativePlayer.isEnded,r=this.getPlaybackMetrics().currentPlayhead;t=f.Check.assigned(e)?Z.PlaybackExitedCause.error:n?Z.PlaybackExitedCause.playedToEnd:Z.PlaybackExitedCause.user,this.onPlaybackEnded({cause:t,playheadPosition:r,errorDetail:e})}},{key:"rebufferingStartedEvent",value:function(){this.isBuffering=!0;var e=this.getPlaybackMetrics().currentPlayhead;this.onRebufferingStarted({playheadPosition:e})}},{key:"rebufferingEndedEvent",value:function(){this.isBuffering=!1;var e=this.getPlaybackMetrics().currentPlayhead;this.onRebufferingEnded({playheadPosition:e})}},{key:"subtitleChangedEvent",value:function(){this.onSubtitleChanged()}},{key:"audioChangedEvent",value:function(){this.onAudioChanged()}},{key:"multivariantPlaylistFetchedEvent",value:function(e){var t={eventData:f.Types.object()};f.typecheck.warn(this,"multivariantPlaylistFetchedEvent",t,arguments);var n=this.nativePlayer,r=n,i=r.isLive,o=r.isSlidingWindow;if(f.Check.object(e)){var a,s=e.requestSynopsis,c=void 0===s?{}:s,u=c.url,l=(0,A.Z)(u),p=l.host,d=l.path;a=i&&o?E.PlaylistType.SLIDE:E.PlaylistType.COMPLETE;var y=new w.Z({host:p,path:d,status:Z.FetchStatus.completed});this.onMultivariantPlaylistFetched({playlistLiveType:a,serverRequest:y})}}},{key:"variantPlaylistFetchedEvent",value:function(e){var t={eventData:f.Types.object()};f.typecheck.warn(this,"variantPlaylistFetchedEvent",t,arguments);var n=this.nativePlayer,r=n,i=r.variants,o=void 0===i?[]:i;if(f.Check.object(e)){var a=e.level,s=e.details,c=void 0===s?{}:s,u=o[a]||{},l=u.attrs,p=void 0===l?{}:l,d=u.loadError,y=p.BANDWIDTH,h=p.CHANNELS,v=p.NAME,g=p.LANGUAGE,m=p.RESOLUTION,b=p["AVERAGE-BANDWIDTH"],T=c.url,k=(0,A.Z)(T),S=k.host,P=k.path,E=0===d?Z.FetchStatus.completed:null,D=new w.Z({host:S,path:P,status:E});this.onVariantPlaylistFetched({playlistAverageBandwidth:f.Check.assigned(b)?Number(b):null,playlistBandwidth:f.Check.assigned(y)?Number(y):null,playlistChannels:h,playlistName:v,playlistLanguage:g,playlistResolution:m,serverRequest:D})}}},{key:"toString",value:function(){return"SDK.Media.PlayerAdapter.BamHlsPlayerAdapter"}}]),u}(m.Z)},39072:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}}),n(12419),n(47042),n(68309),n(91038),n(78783),n(74916),n(82526),n(41817),n(32165),n(66992),n(33948);var r=n(15671),i=n(43144),o=n(97326),a=n(2291),s=n(60136),c=n(82963),u=n(61120),l=(n(41539),n(88674),n(39714),n(67682)),p=n(66282),d=n(403),y=n(97938),f=n(92534),h=n(53158),v=n(58605),g=n(28928),m=n(5301);function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var S=function(e){(0,s.Z)(n,e);var t=k(n);function n(e){var i;(0,r.Z)(this,n),i=t.call(this,e);var a={options:l.Types.object({nativePlayer:l.Types.object({dispatcher:l.Types.object()})})};return(0,l.typecheck)((0,o.Z)(i),a,arguments),i.drmProviders=[],i.offHandlerRemovalList=[],i}return(0,i.Z)(n,[{key:"setSource",value:function(e){var t=this,n={playlist:l.Types.instanceStrict(h.Z)};return(0,l.typecheck)(this,"setSource",n,arguments),new Promise((function(n){return t.playlistUri=e.streamUri,n()}))}},{key:"clean",value:function(){var e=this.listener;(0,a.Z)((0,u.Z)(n.prototype),"clean",this).call(this),this.removeListener(e),this.playlistUri="",this.boundHandlers={},this.drmProvider=null,this.drmProviders=[]}},{key:"dispose",value:function(){this.nativePlayer=null,this.accessToken=null}},{key:"playbackEndedEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,n=void 0===t?null:t;this.onPlaybackEnded({cause:null,error:n,playheadPosition:this.nativePlayer.getCurrentTimeInSecs()})}},{key:"addListener",value:function(e){var t={listener:l.Types.instanceStrict(f.Z)};(0,l.typecheck)(this,"addListener",t,arguments);var n=this.nativePlayer,r=this.logger,i=this.playbackStartedEvent,o=this.playbackResumedEvent,a=this.playbackPausedEvent,s=this.playbackEndedEvent,c=n.dispatcher,u=n.events.getEventList(),p=u.PlayerEvents,d=p.MEDIA_START,y=p.MEDIA_RESUME,h=p.MEDIA_PAUSED,g=p.MEDIA_ERROR;if(!c||!c.on)throw(0,m.ZP)("".concat(this.toString(),".addListener(listener) unable to add PlaybackEventListener"));this.listener=e,this.eventListenerProvider=new v.Z({onHandler:c.on,offHandler:c.off,logger:r}),this.eventListenerProvider.addEventHandler(this,d,i),this.eventListenerProvider.addEventHandler(this,y,o),this.eventListenerProvider.addEventHandler(this,h,a),this.eventListenerProvider.addEventHandler(this,g,s)}},{key:"setDrmProvider",value:function(e){return Promise.reject((0,m.ZP)("\n            BamWebPlayerAdapter.setDrmProvider(drmProvider) - this PlayerAdapter needs multiple SDK.Drm.DrmProvider instances,\n            please use BamWebPlayerAdapter#setDrmProviders(drmProviders) which takes in an\n            Array of SDK.Drm.DrmProvider instances"))}},{key:"setDrmProviders",value:function(e){var t={drmProviders:l.Types.array.of.instanceStrict(p.Z)};(0,l.typecheck)(this,"setDrmProviders",t,arguments);var n=this.nativePlayer,r=this.setDrmConfiguration;return this.drmProviders=e,n.utils.drmConfigCallback(r.bind(this)),Promise.resolve()}},{key:"getPlaybackMetrics",value:function(){if(l.Check.not.assigned(this.nativePlayer.bitrates))throw(0,m.ZP)("".concat(this.toString(),".getPlaybackMetrics() unable to get NativePlayer playhead data"));if(l.Check.not.function(this.nativePlayer.getCurrentTimeInSecs))throw(0,m.ZP)("".concat(this.toString(),".getPlaybackMetrics() unable to get NativePlayer bitrate data"));var e=this.nativePlayer.bitrates.getCurrentKbps();return new y.Z({currentBitrate:e,currentPlayhead:this.nativePlayer.getCurrentTimeInSecs()})}},{key:"setDrmConfiguration",value:function(){var e,t=this.drmProviders,n=[],r=b(t);try{var i=function(){var t,r=e.value,i=r.type,o=null==r?void 0:r.licenseRequestUri;n.push({keySystem:i,licenseRequestUri:o,licenseRequestHeadersCallback:function(){return r.formatRequestHeadersList(r.processLicenseRequestHeaders())},serverCertificate:(t=i,function(){return t===g.DrmType.FAIRPLAY?r.getFairPlayCertificate():t===g.DrmType.WIDEVINE?r.getWidevineCertificate():Promise.resolve(void 0)})})};for(r.s();!(e=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}return{keySystems:n}}},{key:"playbackStartedEvent",value:function(){this.onPlaybackStarted({})}},{key:"playbackPausedEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cause;this.onPlaybackPaused({cause:t,playheadPosition:this.nativePlayer.getCurrentTimeInSecs()})}},{key:"playbackResumedEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cause;this.onPlaybackResumed({cause:t,playheadPosition:this.nativePlayer.getCurrentTimeInSecs()})}},{key:"toString",value:function(){return"SDK.Media.PlayerAdapter.BamWebPlayerAdapter"}}]),n}(d.Z)},71330:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}}),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(2291),c=n(60136),u=n(82963),l=n(61120),p=n(87757),d=n.n(p),y=(n(92222),n(41539),n(39714),n(88674),n(26699),n(32023),n(19601),n(67682)),f=n(403),h=n(97938),v=n(92534),g=n(53158),m=n(65714),b=n(91926),T=n(66282),k=n(19546),S=n(97244),P=n(5301),E=n(28928),Z=n(58605);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var D=function(e){(0,c.Z)(D,e);var t,n,u,p,f=w(D);function D(e){var t;(0,i.Z)(this,D),t=f.call(this,e);var n={options:y.Types.object({framework:y.Types.object(),nativePlayer:y.Types.object(),streamer:y.Types.object({on:y.Types.function}).optional,disableSourceBufferTimeAdjust:y.Types.boolean.optional,initialPlaybackMode:y.Types.in(k.PlaybackMode).optional})};(0,y.typecheck)((0,a.Z)(t),n,arguments);var r=e.framework,o=e.streamer,s=e.disableSourceBufferTimeAdjust,c=void 0!==s&&s,u=e.videoPlayerName,l=e.videoPlayerVersion,p=e.initialPlaybackMode;return t.framework=r,t.currentBitrate=null,t.currentBitrateAvg=null,t.currentBitratePeak=null,t.disableSourceBufferTimeAdjust=c,t.streamer=o,t.audioSegmentFormat=void 0,t.videoSegmentFormat=null,t.drmProviders=[],t.streamerAdapter=t.createStreamerAdapter(o,u,l,p),t.offHandlerRemovalList=[],t}return(0,o.Z)(D,[{key:"setSource",value:(p=(0,r.Z)(d().mark((function e(t){var n,r,i,o,a,s=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={playlist:y.Types.instanceStrict(g.Z)},(0,y.typecheck)(this,"setSource",n,s),e.prev=1,!y.Check.assigned(this.streamerAdapter)){e.next=6;break}return e.next=5,null===(o=this.streamerAdapter)||void 0===o?void 0:o.setSource(t);case 5:return e.abrupt("return",e.sent);case 6:this.playlistUri=t.streamUri,(a=this.getPlaybackConfig()).disableSourceBufferTimeAdjust=this.disableSourceBufferTimeAdjust,null===(r=this.nativePlayer)||void 0===r||r.setPlaybackConfig(a),null===(i=this.nativePlayer)||void 0===i||i.setMediaUrlResolver((function(){return t.streamUri})),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(1),(0,P.ZP)("".concat(this.toString(),".setSource(playlist) unable to set playlistUri on NativePlayer - ").concat(e.t0));case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(e){return p.apply(this,arguments)})},{key:"updateSegmentFormat",value:(u=(0,r.Z)(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.updateAudioSegmentFormat(t),this.updateVideoSegmentFormat(n);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"clean",value:function(){var e,t=this.listener,n=this.nativePlayer;(0,s.Z)((0,l.Z)(D.prototype),"clean",this).call(this),null==n||n.setMediaUrlResolver(),this.playlistUri="",this.currentBitrate=null,this.currentBitrateAvg=null,this.currentBitratePeak=null,this.drmProvider=null,this.drmProviders=[],this.audioSegmentFormat=void 0,this.videoSegmentFormat=void 0,y.Check.assigned(this.streamerAdapter)&&(null===(e=this.streamerAdapter)||void 0===e||e.clean()),this.removeListener(t)}},{key:"dispose",value:function(){this.nativePlayer=null,this.accessToken=null,this.framework=null,this.streamerAdapter=null,this.streamer=null}},{key:"setAdEngineData",value:function(e){var t={adEngineData:y.Types.object()};if((0,y.typecheck)(this,"setAdEngineData",t,arguments),this.adEngineData=e,y.Check.nonEmptyObject(e)){var n=this.nativePlayer,r=e.ssess,i=this.getPlaybackConfig();i.segmentRequestHandler=function(e){var t=(0,S.Z)(e.url);e.headers=null,e.crossDomain=void 0,e.withCredentials=!1,r&&t&&(e.headers={},e.headers.ssess=r,e.crossDomain=!0,e.withCredentials=!0)},null==n||n.setPlaybackConfig(i)}}},{key:"setSeekData",value:function(e){var t={data:y.Types.object({seekSize:y.Types.number,seekDirection:y.Types.in(k.SeekDirection).optional,seekCause:y.Types.in(k.PlaybackSeekCause)})};y.typecheck.warn(this,"setSeekData",t,arguments),this.streamerAdapter?this.streamerAdapter.setSeekData(e):this.logger.warn(this.toString(),"Streamer is not set. Seek data will not be set.")}},{key:"setInitializePlayerStartTime",value:function(){this.streamerAdapter?this.streamerAdapter.setInitializePlayerStartTime():this.logger.warn(this.toString(),"Streamer is not set. InitializePlayerStartTime will not be set.")}},{key:"setInitializePlayerDuration",value:function(){this.streamerAdapter?this.streamerAdapter.setInitializePlayerDuration():this.logger.warn(this.toString(),"Streamer is not set. InitializePlayerDuration will not be set.")}},{key:"addListener",value:function(e){var t={listener:y.Types.instanceStrict(v.Z)};(0,y.typecheck)(this,"addListener",t,arguments);try{var n=this.framework,r=this.streamerAdapter,i=this.nativePlayer,o=this.playbackReadyEvent,a=this.playbackStartedEvent,s=this.playbackInitializedEvent,c=this.rebufferingEvent,u=this.playbackSeekedEvent,l=this.bitrateChangedEvent,p=this.playbackPausedEvent;if(!n)return;var d=n.events.EventType,f=d.BUFFERING,h=d.PLAY,g=d.PLAYING,m=d.PAUSE,b=d.BITRATE_CHANGED,T=d.SEEKED,k=d.SEEKING,S=d.PLAYER_LOAD_COMPLETE;if(r)return void r.addListener(e);i&&i.addEventListener&&(this.listener=e,this.eventListenerProvider=new Z.Z({onHandler:i.addEventListener,offHandler:i.removeEventListener,logger:this.logger}),this.eventListenerProvider.addEventHandler(this,h,o),this.eventListenerProvider.addEventHandler(this,g,a),this.eventListenerProvider.addEventHandler(this,f,c),this.eventListenerProvider.addEventHandler(this,T,u),this.eventListenerProvider.addEventHandler(this,k,u),this.eventListenerProvider.addEventHandler(this,b,l),this.eventListenerProvider.addEventHandler(this,m,p),this.eventListenerProvider.addEventHandler(this,S,s))}catch(e){throw(0,P.ZP)("".concat(this.toString(),".addListener(listener) unable to add PlaybackEventListener"))}}},{key:"removeListener",value:function(e){var t={listener:y.Types.instanceStrict(v.Z).optional};if((0,y.typecheck)(this,"removeListener",t,arguments),e)try{var n=this.framework,r=this.streamerAdapter;if(!n)return;y.Check.assigned(r)?null==r||r.removeListener(e):(0,s.Z)((0,l.Z)(D.prototype),"removeListener",this).call(this,e)}catch(e){throw(0,P.ZP)("".concat(this.toString(),".removeListener(listener) unable to remove PlaybackEventListener"))}}},{key:"setDrmProvider",value:function(e){var t={drmProvider:y.Types.instanceStrict(T.Z)};return(0,y.typecheck)(this,"setDrmProvider",t,arguments),this.drmProvider=e,this.attach()}},{key:"setDrmProviders",value:(n=(0,r.Z)(d().mark((function e(t){var n,r,i=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={drmProviders:y.Types.array.of.instanceStrict(T.Z)},(0,y.typecheck)(this,"setDrmProviders",n,i),r=this.streamerAdapter,this.drmProviders=t,!y.Check.assigned(r)){e.next=5;break}return e.abrupt("return",null==r?void 0:r.setDrmProviders(t));case 5:return e.abrupt("return",this.setDrmProvider(t[0]));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getPlaybackMetrics",value:function(){var e,t;return y.Check.assigned(this.streamerAdapter)?null===(t=this.streamerAdapter)||void 0===t?void 0:t.getPlaybackMetrics():new h.Z({currentBitrate:this.currentBitrate,currentPlayhead:null===(e=this.nativePlayer)||void 0===e?void 0:e.getCurrentTimeSec(),currentBitrateAvg:this.currentBitrateAvg,currentBitratePeak:this.currentBitratePeak})}},{key:"setPlaybackMode",value:function(e){var t;null===(t=this.streamerAdapter)||void 0===t||t.setPlaybackMode(e)}},{key:"attach",value:function(){var e,t,n=this.drmProvider,r=this.framework;return(null==n?void 0:n.type)===E.DrmType.WIDEVINE?this.attachDrm(null==r||null===(e=r.ContentProtection)||void 0===e?void 0:e.WIDEVINE):(null==n?void 0:n.type)===E.DrmType.PLAYREADY?this.attachDrm(null==r||null===(t=r.ContentProtection)||void 0===t?void 0:t.PLAYREADY):this.attachSilkDrm()}},{key:"attachDrm",value:function(e){var t=this.nativePlayer,n=this.drmProvider;try{var r=this.getPlaybackConfig();return r.licenseUrl=null==n?void 0:n.licenseRequestUri,r.protectionSystem=e,r.licenseRequestHandler=function(e){e.crossDomain=!0,e.withCredentials=!0,e.headers=(null==n?void 0:n.processLicenseRequestHeaders())||{}},null==t||t.setPlaybackConfig(r),Promise.resolve()}catch(e){return Promise.reject((0,P.ZP)("".concat(this.toString(),".attachDrm(protectionSystem) unable to set playback configuration on NativePlayer - ").concat(e)))}}},{key:"attachSilkDrm",value:function(){var e=this.nativePlayer,t=this.accessToken;try{var n=this.getPlaybackConfig();return n.licenseRequestHandler=function(e){e.withCredentials=!0,e.headers={},e.headers.Authorization=t},null==e||e.setPlaybackConfig(n),Promise.resolve()}catch(e){return Promise.reject((0,P.ZP)("".concat(this.toString(),".attachSilkDrm() unable to set playback configuration on NativePlayer - ").concat(e)))}}},{key:"updateAudioSegmentFormat",value:function(e){var t=this.framework;if(this.audioSegmentFormat=void 0,y.Check.nonEmptyArray(e)){var n,r,i,o;if(e.includes("FMP4"))return this.audioSegmentFormat=null==t||null===(n=t.messages)||void 0===n||null===(r=n.HlsSegmentFormat)||void 0===r?void 0:r.FMP4,this;if(e.includes("PACKED_AUDIO"))return this.audioSegmentFormat=null==t||null===(i=t.messages)||void 0===i||null===(o=i.HlsSegmentFormat)||void 0===o?void 0:o.TS_AAC,this}return this}},{key:"updateVideoSegmentFormat",value:function(e){var t=this.framework;if(this.videoSegmentFormat=void 0,y.Check.nonEmptyArray(e)){var n,r,i,o;if(e.includes("FMP4"))return this.videoSegmentFormat=null==t||null===(n=t.messages)||void 0===n||null===(r=n.HlsVideoSegmentFormat)||void 0===r?void 0:r.FMP4,this;if(e.includes("TS"))return this.videoSegmentFormat=null==t||null===(i=t.messages)||void 0===i||null===(o=i.HlsVideoSegmentFormat)||void 0===o?void 0:o.MPEG2_TS,this}return this}},{key:"getPlaybackConfig",value:function(){var e=this.nativePlayer,t=this.framework;return Object.assign(y.Check.function(null==e?void 0:e.getPlaybackConfig)&&(null==e?void 0:e.getPlaybackConfig())||{},t?new t.PlaybackConfig:{})}},{key:"audioChangedEvent",value:function(){this.onAudioChanged()}},{key:"subtitleChangedEvent",value:function(){this.onSubtitleChanged()}},{key:"multivariantPlaylistFetchedEvent",value:function(e){this.onMultivariantPlaylistFetched(e)}},{key:"variantPlaylistFetchedEvent",value:function(e){this.onVariantPlaylistFetched(e)}},{key:"rebufferingEvent",value:function(e){(e||{}).isBuffering?this.onRebufferingStarted({}):this.onRebufferingEnded({})}},{key:"playbackEndedEvent",value:(t=(0,r.Z)(d().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,y,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.streamerAdapter){e.next=4;break}this.streamerAdapter.playbackEndedEvent(t),e.next=20;break;case 4:n=(t||{}).eventData,r=this.framework,i=(null==r?void 0:r.events.EndedReason)||{},o=i.END_OF_STREAM,a=i.STOPPED,s=i.ERROR,u=(c=n||{}).endedReason,l=c.currentMediaTime,p=void 0===l?0:l,e.t0=u,e.next=e.t0===o?11:e.t0===a?13:e.t0===s?15:17;break;case 11:return y=k.PlaybackExitedCause.playedToEnd,e.abrupt("break",17);case 13:return y=k.PlaybackExitedCause.user,e.abrupt("break",17);case 15:return y=k.PlaybackExitedCause.error,e.abrupt("break",17);case 17:return f=1e3*p,e.next=20,this.onPlaybackEnded({cause:y,playheadPosition:f});case 20:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"playbackInitializedEvent",value:function(e){var t,n=this.playlistUri,r=(e||{}).media.startAbsoluteTime;y.Check.assigned(r)&&(t=1e3*r),this.onPlaybackInitialized({streamUrl:n,playheadPosition:t})}},{key:"playbackSeekedEvent",value:function(e){var t=this.framework,n=(null==t?void 0:t.events.EventType)||{},r=n.SEEKED,i=n.SEEKING,o=e||{},a=o.type,s=o.currentMediaTime,c=1e3*(void 0===s?0:s);a===r&&this.onPlaybackSeekEnded({playheadPosition:c}),a===i&&this.onPlaybackSeekStarted({playheadPosition:c})}},{key:"bitrateChangedEvent",value:function(e){var t,n=e||{},r=n.bitrateAvg,i=n.bitratePeak,o=n.totalBitrate,a=void 0===o?0:o;try{this.currentBitrate=Math.round(a/1e3)}catch(e){this.currentBitrate=null}this.onBitrateChanged({bitrateAvg:r,bitratePeak:i,playheadPosition:null===(t=this.nativePlayer)||void 0===t?void 0:t.getCurrentTimeSec()})}},{key:"playbackReadyEvent",value:function(){}},{key:"playbackStartedEvent",value:function(){this.onPlaybackStarted({})}},{key:"playbackPausedEvent",value:function(){var e;this.onPlaybackPaused({playheadPosition:null===(e=this.nativePlayer)||void 0===e?void 0:e.getCurrentTimeSec()})}},{key:"createStreamerAdapter",value:function(e,t,n,r){return e?y.Check.function(e.getClass)&&"MEL-HIVE"===e.getClass().playerName?(this.logger.info(this.toString(),"Creating MelHivePlayerAdapter"),new b.Z({nativePlayer:e,videoPlayerName:t,videoPlayerVersion:n,initialPlaybackMode:r})):(this.logger.info(this.toString(),"Creating DssHlsPlayerAdapter"),new m.Z({nativePlayer:e,videoPlayerName:t,videoPlayerVersion:n})):null}},{key:"toString",value:function(){return"SDK.Media.PlayerAdapter.CafPlayerAdapter"}}]),D}(f.Z)},65714:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(2291),c=n(60136),u=n(82963),l=n(61120),p=(n(41539),n(39714),n(40561),n(21249),n(88674),n(68309),n(74916),n(9653),n(87757)),d=n.n(p),y=n(67682),f=n(97244),h=n(37736),v=n(31545),g=n(80540),m=n(92534),b=n(66282),T=n(97938),k=n(53158),S=n(403),P=n(46467),E=n(62120),Z=n(28928),w=n(19546),D=n(73688),C=n(57890),A=n(72462),R=n(26662),x=n(83668),O=n(5301),I=n(58605);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var N=function(e){(0,c.Z)(S,e);var t,n,u,p=L(S);function S(e){var t,n;return(0,o.Z)(this,S),(n=p.call(this,e)).seekableRangeEndProgramDateTime=void 0,n.playbackStartupEventData=new C.Z({startupActivity:w.StartupActivity.reattempt}),n.qos={},n.rebufferingDuration=null,n.drmProviders=[],n.hlsStatic=null===(t=n.nativePlayer)||void 0===t?void 0:t.getClass(),n.Events=n.hlsStatic.Events,n.States=n.hlsStatic.States,n.MediaElementStates=n.hlsStatic.MediaElementStates,n.PlaybackStates=n.hlsStatic.PlaybackStates,n.DataTypes=n.hlsStatic.DataTypes,n.isBuffering=!1,n.isApplicationBackgrounded=!1,n.segmentPosition=null,n.mediaStartBitrate=null,n.mediaSegmentType=null,n.mediaBytesDownloaded=0,n.bufferType=void 0,n.isReady=!1,n.heartbeatData={},n.mediaDownloadTotalTime=0,n.mediaDownloadTotalCount=0,n.bitrateAvg=0,n.offHandlerRemovalList=[],n}return(0,a.Z)(S,[{key:"setSource",value:(u=(0,i.Z)(d().mark((function e(t){var n,r,i,o,a=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={playlist:y.Types.instanceStrict(k.Z)},(0,y.typecheck)(this,"setSource",i,a),o=this.cdnFallback,y.Check.not.assigned(null===(n=this.nativePlayer)||void 0===n?void 0:n.setupXhrCallback)&&this.setupXhrCallback(),this.playlistUri=t.streamUri,this.currentStreamUrl=t.streamUri,null!==(r=this.nativePlayer)&&void 0!==r&&r.startFailureSaveSupported&&o.isEnabled&&(this.playlistUri=t.mediaSources,this.nativePlayer.config={bufferingTimeoutStart:o.defaultTimeout?1e3*o.defaultTimeout:9e4,requestStartContentNetworkFallbackLimit:o.fallbackLimit||5});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"clean",value:function(){var e=this.listener;(0,s.Z)((0,l.Z)(S.prototype),"clean",this).call(this),this.playlistUri="",this.drmProvider=null,this.drmProviders=[],this.segmentPosition=null,this.mediaStartBitrate=null,this.mediaSegmentType=null,this.qos={},this.mediaBytesDownloaded=0,this.isBuffering=!1,this.isReady=!1,this.heartbeatData={},this.mediaDownloadTotalCount=0,this.mediaDownloadTotalTime=0,this.bitrateAvg=0,this.playbackStartupEventData=new C.Z({startupActivity:w.StartupActivity.reattempt}),this.removeListener(e)}},{key:"dispose",value:function(){this.clean(),this.nativePlayer=null,this.accessToken=null}},{key:"setApplicationBackgrounded",value:function(){this.isApplicationBackgrounded=!0}},{key:"setApplicationForegrounded",value:function(){this.isApplicationBackgrounded=!1}},{key:"playbackEndedEvent",value:(n=(0,i.Z)(d().mark((function e(t){var n,r,i,o,a,s,c,u,l,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t||{}).eventData,i=n.isEnded,o=this.playbackStartupEventData,s=(a=r||{}).errorName,c=a.errorDetail,u=this.getPlaybackData(),l=y.Check.assigned(r)?w.PlaybackExitedCause.error:i?w.PlaybackExitedCause.playedToEnd:w.PlaybackExitedCause.user,(p=j(j({},u),{},{cause:l,playbackError:s,playbackErrorDetail:c})).cdnRequestedTrail=o.cdnRequestedTrail,p.cdnFailedTrail=o.cdnFailedTrail,p.cdnFallbackCount=o.cdnFallbackCount,p.isCdnFallback=o.isCdnFallback,this.isBuffering&&this.rebufferingEndedEvent(),e.next=13,this.onPlaybackEnded(p);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"addListener",value:function(e){var t={listener:y.Types.instanceStrict(m.Z)};(0,y.typecheck)(this,"addListener",t,arguments);var n=this.nativePlayer,r=this.Events,i=r.STREAM_PLAYBACKSTATE_CHANGED,o=r.PRESENTATION_STATE_LOADED,a=r.MEDIA_PLAYING,s=r.DRM_LICENSE_RECEIVED,c=r.CANPLAY,u=r.SEEKING_STARTED,l=r.NETWORK_METRICS_CHANGED,p=r.SEEKABLE_RANGE_CHANGED,d=r.BUFFERING_STARTED,f=r.BUFFERING_FINISHED,h=r.SUBTITLES_RENDITION_UPDATED,v=r.MASTER_PLAYLIST_REQUEST,g=r.MASTER_PLAYLIST_FALLBACK,b=r.MASTER_PLAYLIST_LOADED,T=r.SEEKING_FINISHED,k=r.VARIANT_UPDATED,S=r.AUDIO_RENDITION_UPDATED,P=r.ERROR,E=r.SEGMENT_PLAYING,Z=r.SOURCE_BUFFER_APPEND_STARTED,w=r.CONTENT_DOWNLOAD_FINISHED;if(!n||!n.on)throw(0,O.ZP)("".concat(this.toString(),".addListener(listener) unable to add PlaybackEventListener"));this.listener=e,this.eventListenerProvider=new I.Z({onHandler:n.on,onceHandler:n.once,offHandler:n.off,logger:this.logger}),this.eventListenerProvider.addEventHandler(this,o,this.playbackInitializedEvent),this.eventListenerProvider.addEventHandler(this,i,this.playbackStateChangedEvent),this.eventListenerProvider.addEventHandler(this,l,this.bitrateChangedEvent),this.eventListenerProvider.addEventHandler(this,d,this.rebufferingStartedEvent),this.eventListenerProvider.addEventHandler(this,f,this.rebufferingEndedEvent),this.eventListenerProvider.addEventHandler(this,h,this.subtitleChangedEvent),this.eventListenerProvider.addEventHandler(this,S,this.audioChangedEvent),this.eventListenerProvider.addEventHandler(this,b,this.multivariantPlaylistFetchedEvent),this.eventListenerProvider.addEventHandler(this,b,this.successfulPlaylistLoad),this.eventListenerProvider.addEventHandler(this,v,this.multivariantPlaylistRequest),this.eventListenerProvider.addEventHandler(this,g,this.multivariantPlaylistFallback),this.eventListenerProvider.addEventHandler(this,k,this.variantPlaylistFetchedEvent),this.eventListenerProvider.addEventHandler(this,u,this.playbackSeekStartedEvent),this.eventListenerProvider.addEventHandler(this,T,this.playbackSeekEndedEvent),this.eventListenerProvider.addEventHandler(this,P,this.playbackErrorEvent),this.eventListenerProvider.addEventHandler(this,E,this.segmentPlayingEvent),this.eventListenerProvider.addEventHandler(this,Z,this.sourceBufferAppendStartedEvent),this.eventListenerProvider.addEventHandler(this,w,this.contentDownloadFinishedEvent),this.eventListenerProvider.addEventHandler(this,p,this.seekableRangeChangedEvent),this.eventListenerProvider.addEventHandler(this,s,this.drmKeyFetchedEvent),this.eventListenerProvider.addEventHandlerOnce(this,c,this.playbackReadyEvent),this.eventListenerProvider.addEventHandlerOnce(this,a,this.playbackStartedEvent)}},{key:"setDrmProviders",value:(t=(0,i.Z)(d().mark((function e(t){var n,r,i,o,a,s,c,u,l,p=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={drmProviders:y.Types.array.of.instanceStrict(b.Z)},(0,y.typecheck)(this,"setDrmProviders",n,p),r=this.nativePlayer,this.drmProviders=t,e.next=5,null==r?void 0:r.getDrmCapabilities();case 5:for(i=e.sent,o=(i||{}).keySystems,a=void 0===o?{}:o,s=t.length;s--;)u=t[s].type,l=u===Z.DrmType.PRMNAGRA?a.NAGRA:a[u],(null===(c=!(null!=l&&l.supported))||void 0===c||c)&&t.splice(s,1);r.drmConfiguration=this.setDrmConfiguration();case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setDrmConfiguration",value:function(){var e,t=this.drmProviders,n=(e={},(0,r.Z)(e,Z.DrmType.FAIRPLAY,{keySystem:Z.DrmType.FAIRPLAY,getCertificate:function(e){var t;return null===(t=e.getFairPlayCertificate)||void 0===t?void 0:t.call(e)}}),(0,r.Z)(e,Z.DrmType.WIDEVINE,{keySystem:Z.DrmType.WIDEVINE,getCertificate:function(e){var t;return null===(t=e.getWidevineCertificate)||void 0===t?void 0:t.call(e)}}),(0,r.Z)(e,Z.DrmType.PRMNAGRA,{keySystem:"NAGRA",getCertificate:function(e){var t;return null===(t=e.getNagraCertificate)||void 0===t?void 0:t.call(e)}}),e);return{keySystems:t.map((function(e){var t={individualizationUri:e.individualizationUri,keySystem:e.type,licenseRequestUri:e.licenseRequestUri,licenseRequestHeadersCallback:function(){return e.formatRequestHeadersList(e.processLicenseRequestHeaders())},serverCertificate:Promise.resolve(void 0)},r=n[e.type];if(r){var o=r.keySystem,a=r.getCertificate;t.keySystem=o,t.serverCertificate=(0,i.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a(e));case 1:case"end":return t.stop()}}),t)})))()}return t}))}}},{key:"getPlaybackMetrics",value:function(){var e,t=this.nativePlayer,n=t,r=n.currentPDT,i=n.isLive,o=n.isBehindLive,a=0,s=!!i&&!o,c=t.getPlaybackMetrics(),u=c.currentTime,l=c.bufferedRange,p=void 0===l?{}:l,d=c.seekableRange,y=t.getNetworkMetrics(),f=y.chosenBitrate,h=y.chosenMaxBitrate,v=y.throughput,g=1e3*u,m=f/1e3,b=f,k=h;return p.end-u>0&&(e=p.end-u),o&&d.pdtEnd-r>0&&(a=d.pdtEnd-r),new T.Z({currentBitrate:m,currentPlayhead:g,currentBitrateAvg:b,currentBitratePeak:k,currentThroughput:v,playheadProgramDateTime:r,seekableRangeEndProgramDateTime:d.pdtEnd,isLiveEdge:s,bufferSegmentDuration:e,mediaBytesDownloaded:this.mediaBytesDownloaded,playbackState:this.getPlaybackState(),segmentPosition:r,liveLatencyAmount:a,maxAllowedVideoBitrate:this.getMaxAllowedVideoBitrate()})}},{key:"getCdnName",value:function(){var e=this.qos.cdnName;return y.Check.string(e)?e:"null"}},{key:"getAudioBitrate",value:function(){var e=this.nativePlayer,t=e.audioRenditions;return((void 0===t?[]:t)[e.currentAudioRenditionIndex]||{}).averageBitrate}},{key:"getMaxAllowedVideoBitrate",value:function(){var e,t=null===(e=this.nativePlayer)||void 0===e?void 0:e.variants,n=null==t?void 0:t[t.length-1];return null==n?void 0:n.peakBitrate}},{key:"playbackStartedEvent",value:function(){var e=this.getPlaybackData();this.onPlaybackStarted(e)}},{key:"multivariantPlaylistFetchedEvent",value:function(e){var t=this.nativePlayer,n=t.isLive,r=t.isSlidingWindow;if(y.Check.object(e)){var i,o,a=(null===(i=e.playlist)||void 0===i?void 0:i.url)||e.url,s=(null===(o=e.playlist)||void 0===o?void 0:o.priority)||1,c=this.getPlaybackStartupData(),u=n&&r?Z.PlaylistType.SLIDE:Z.PlaylistType.COMPLETE,l=(0,h.Z)(a),p=l.host,d=l.path,f=new D.Z({host:p,path:d,status:w.FetchStatus.completed,method:w.HttpMethod.get});this.emit(g.Z.UpdateAdEngine,s),this.onMultivariantPlaylistFetched(j(j({},c),{},{mediaStartBitrate:this.mediaStartBitrate,playlistLiveType:u,serverRequest:f}))}}},{key:"variantPlaylistFetchedEvent",value:function(e){var t=(e||{}).details,n=void 0===t?{}:t,r=n.url,i=n.audioRendition,o=void 0===i?{}:i,a=(0,h.Z)(r),s=a.host,c=a.path,u=this.getPlaybackMetrics().currentPlayhead,l=o.channels,p=o.name,d=o.language,y=this.getCurrentVariant(),f=y.averageBitrate,v=y.bitrate,g=y.resolution,m=new D.Z({host:s,path:c,status:w.FetchStatus.completed,method:w.HttpMethod.get});this.onVariantPlaylistFetched(j(j({},e),{},{playlistAverageBandwidth:f,playlistBandwidth:v,playlistChannels:l,playlistName:p,playlistLanguage:d,playlistResolution:g,serverRequest:m,playheadPosition:u}))}},{key:"playbackReadyEvent",value:function(){var e=this.mediaStartBitrate,t=this.getPlaybackStartupData();this.onPlaybackReady(j(j({},t),{},{mediaStartBitrate:e,readyPlayerStartTime:0,readyPlayerDuration:0})),this.isReady=!0}},{key:"playbackStateChangedEvent",value:function(e){var t,n=this.PlaybackStates,r=e||{},i=r.playbackState,o=r.lastPlaybackState,a=this.getPlaybackData();o===n.PAUSED&&i===n.PLAYING&&(t=w.PlaybackResumedCause.user,this.onPlaybackResumed(j(j({},a),{},{cause:t}))),o===n.PLAYING&&i===n.PAUSED&&(t=this.isApplicationBackgrounded?w.PlaybackPausedCause.applicationBackgrounded:this.isBuffering?w.PlaybackPausedCause.stall:w.PlaybackPausedCause.user,this.onPlaybackPaused(j(j({},a),{},{cause:t})))}},{key:"playbackInitializedEvent",value:function(){var e=this.getPlaybackStartupData(),t=e.variant,n=e.audio,r=void 0===n?{}:n,i=e.subtitle,o=void 0===i?{}:i;this.heartbeatData={playlistAudioChannels:t.audioChannels,playlistAudioCodec:t.audioCodec,playlistAudioLanguage:r.language,playlistAudioName:r.name,playlistSubtitleLanguage:o.language,playlistSubtitleName:o.name,subtitleVisibility:o.forced},this.onPlaybackInitialized(e)}},{key:"drmKeyFetchedEvent",value:function(e){var t=this.getPlaybackStartupData(),n=e||{},r=n.url,i=void 0===r?"":r,o=n.keyID,a=(0,h.Z)(i),s=a.host,c=a.path,u=new D.Z({host:s,path:c,status:w.FetchStatus.completed,method:w.HttpMethod.get});this.onDrmKeyFetched(j(j({},t),{},{drmKeyId:o,serverRequest:u,fetchLicenseStartTime:0,fetchLicenseDuration:0}))}},{key:"successfulPlaylistLoad",value:function(e){var t=(e||{}).playlist;t&&(this.currentStreamUrl=t.url,t.primaryContent.tracking&&this.onSuccessfulPlaylistLoad({priority:t.priority,url:t.url,tracking:t.primaryContent.tracking}))}},{key:"multivariantPlaylistRequest",value:function(e){var t=this.playbackStartupEventData,n=(e||{}).playlist;if(null!=n&&n.primaryContent){var r=n.primaryContent.tracking.qos,i=r?r.cdnVendor:null;this.qos=r,t.fallbackAttempt(i),t.isCdnFallback&&(t.setQosData(r),this.onPlaybackReattempt(t))}}},{key:"multivariantPlaylistFallback",value:function(e){(e||{}).playlist&&(this.playbackStartupEventData.playbackError=w.QoePlaybackError.unknown,this.playbackStartupEventData.fallbackFailed())}},{key:"playbackSeekStartedEvent",value:function(e){var t,n,r=this.nativePlayer.isLive,i=e||{},o=i.currentTime,a=void 0===o?0:o,s=i.targetPosition,c=void 0===s?0:s,u=this.seekData||{},l=u.seekCause,p=u.seekSize,d=this.getPlaybackMetrics(),y=1e3*Math.abs(Math.floor(c-a));p&&p<0?(t=w.PlayerSeekDirection.backward,n=r?w.SeekDirection.fromLiveEdge:void 0):0===p?t=w.PlayerSeekDirection.same:(t=w.PlayerSeekDirection.forward,n=r?w.SeekDirection.toLiveEdge:void 0),this.onPlaybackSeekStarted(j(j({},e),{},{playerSeekDirection:t,seekSize:p,seekDistance:y,playheadPosition:d.currentPlayhead,cause:l,seekDirection:n}))}},{key:"playbackSeekEndedEvent",value:function(e){var t,n,r=this.nativePlayer.isLive,i=e||{},o=i.currentTime,a=void 0===o?0:o,s=i.targetPosition,c=void 0===s?0:s,u=this.seekData||{},l=u.seekCause,p=u.seekSize,d=this.getPlaybackMetrics().currentPlayhead,y=1e3*Math.abs(Math.floor(c-a));p&&p<0?(t=w.PlayerSeekDirection.backward,n=r?w.SeekDirection.fromLiveEdge:void 0):0===p?t=w.PlayerSeekDirection.same:(t=w.PlayerSeekDirection.forward,n=r?w.SeekDirection.toLiveEdge:void 0),this.onPlaybackSeekEnded(j(j({},e),{},{playerSeekDirection:t,seekDistance:y,playheadPosition:d,cause:l,seekDirection:n}))}},{key:"playbackErrorEvent",value:function(e){var t=e||{},n=t.fatal,r=void 0!==n&&n,i=t.message,o=this.nativePlayer.getPlaybackMetrics().currentTime,a=this.nativePlayer.currentPDT,s=this.normalizePlayhead(Math.floor(1e3*o)),c=this.getPlaybackMetrics().liveLatencyAmount,u=(0,A.Z)(e);if(r){if("DRM_FAILED"===e.error){var l=this.constructErrorCaseFromDssHlsError(e);this.emit(v.Z.MediaFailure,l)}y.Check.assigned(this.listener)&&(this.onPlaybackError({isFatal:r,errorName:u,errorMessage:i,errorLevel:w.ErrorLevel.error,playheadPosition:s,segmentPosition:a,liveLatencyAmount:c}),this.playbackEndedEvent({eventData:{errorName:u,errorDetail:i}}),this.removeListener(this.listener))}else y.Check.assigned(this.listener)&&this.onPlaybackError({isFatal:!1,errorName:u,errorMessage:i,errorLevel:w.ErrorLevel.warn,playheadPosition:s,segmentPosition:a,liveLatencyAmount:c})}},{key:"seekableRangeChangedEvent",value:function(e){var t=(e||{}).pdtEnd;this.seekableRangeEndProgramDateTime=t}},{key:"bitrateChangedEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isReady){var t=this.getPlaybackMetrics(),n=t.currentBitrateAvg,r=t.currentBitratePeak,i=t.currentPlayhead;this.bitrateAvg!==n&&(this.bitrateAvg=n,this.onBitrateChanged(j(j({},e),{},{bitrateAvg:n,bitratePeak:r,playheadPosition:i})))}}},{key:"subtitleChangedEvent",value:function(e){var t=e||{},n=t.language,r=t.name,i=t.forced;this.heartbeatData.playlistSubtitleLanguage=null!=n?n:this.heartbeatData.playlistSubtitleLanguage,this.heartbeatData.playlistSubtitleName=null!=r?r:this.heartbeatData.playlistSubtitleName,this.heartbeatData.subtitleVisibility=null!=i?i:this.heartbeatData.subtitleVisibility,this.onSubtitleChanged()}},{key:"audioChangedEvent",value:function(e){if(this.isReady){var t=e||{},n=t.channels,r=t.codec,i=t.language,o=t.name;this.heartbeatData.playlistAudioChannels=null!=n?n:this.heartbeatData.playlistAudioChannels,this.heartbeatData.playlistAudioCodec=null!=r?r:this.heartbeatData.playlistAudioCodec,this.heartbeatData.playlistAudioLanguage=null!=i?i:this.heartbeatData.playlistAudioLanguage,this.heartbeatData.playlistAudioName=null!=o?o:this.heartbeatData.playlistAudioName,this.onAudioChanged()}}},{key:"rebufferingStartedEvent",value:function(){this.rebufferingDuration=Date.now(),this.isBuffering=!0;var e=this.getPlaybackData();this.bufferType=e.bufferType,this.onRebufferingStarted(e)}},{key:"rebufferingEndedEvent",value:function(){this.isBuffering=!1;var e=this.getPlaybackData(),t=Date.now()-this.rebufferingDuration;this.onRebufferingEnded(j(j({},e),{},{duration:t,bufferType:e.bufferType?e.bufferType:this.bufferType})),this.bufferType=void 0}},{key:"segmentPlayingEvent",value:function(e){var t=e||{},n=t.type,r=t.segment,i=(void 0===r?{}:r).programDateTimeStart;this.segmentPosition="number"==typeof i?Math.floor(i):null,this.mediaSegmentType=w.MediaSegmentType[n]||null}},{key:"sourceBufferAppendStartedEvent",value:function(e){var t;y.Check.number(null==e||null===(t=e.segment)||void 0===t?void 0:t.byteSize)&&(this.mediaBytesDownloaded+=e.segment.byteSize)}},{key:"contentDownloadFinishedEvent",value:function(e){var t=e.startTime,n=e.endTime;this.mediaDownloadTotalCount++,this.mediaDownloadTotalTime+=n-t}},{key:"setupXhrCallback",value:function(){var e=this.nativePlayer,t=this.accessToken,n=this.DataTypes,r=this.adEngineData,i=(void 0===r?{}:r).ssess;e.xhrSetupCallback=function(e,r,o){if(n){var a=o===n.KEY,s=(0,f.Z)(r)&&o===n.CHUNK;e.withCredentials=!1,e.readyState||e.open("GET",r,!0),a?e.setRequestHeader(x.AUTHORIZATION,t):s&&i&&(e.withCredentials=!0,e.setRequestHeader("ssess",i))}}}},{key:"constructErrorCaseFromDssHlsError",value:function(e){var t=P.Z[e.cause]||P.Z.default||{},n=t.code,r=t.exceptionData;return(0,O.Kf)({code:n,exceptionData:r})}},{key:"getCurrentVariant",value:function(){var e=this.nativePlayer.variants,t=void 0===e?[]:e,n=t[this.nativePlayer.getNetworkMetrics().currentVariantIndex]||{},r=t[t.length-1]||{},i=r.encodedFrameRate,o=r.peakBitrate,a=n.peakBitrate,s=n.encodedFrameRate,c=n.audioCodecs,u=n.averageBitrate,l=n.videoCodec,p=n.videoRangeSubType;return null===this.mediaStartBitrate&&(this.mediaStartBitrate=u),{resolution:(0,R.getResolutionString)(n),bitrate:a,averageBitrate:u,frameRate:s,audioCodec:y.Check.array(c)?c[0]:void 0,videoCodec:l,videoRange:p,maxAllowedVideoBitrate:o,playlistResolution:(0,R.getResolutionString)(r),playlistFrameRate:i}}},{key:"getAudioRendition",value:function(){var e=this.nativePlayer,t=e.audioRenditions,n=(void 0===t?[]:t)[e.currentAudioRenditionIndex]||{}||{},r=n.averageBitrate,i=n.channels,o=n.codec;return{audioRendition:{name:n.name,language:n.language},averageBitrate:r,audioChannels:i,audioCodec:o}}},{key:"getSubtitleRendition",value:function(){var e=this.nativePlayer,t=e.subtitleRenditions;return(void 0===t?[]:t)[e.currentSubtitleRenditionIndex]||{}}},{key:"getBufferType",value:function(){var e,t=this.nativePlayer.mediaElementState,n=this.MediaElementStates||{},r=n.ATTACHING,i=n.PAUSED,o=n.BUFFERING,a=n.SEEKING;if(t)switch(t){case r:e=w.BufferType.initializing;break;case o:e=w.BufferType.buffering;break;case a:e=w.BufferType.seeking;break;case i:e=w.BufferType.resuming}return e}},{key:"getPlaybackState",value:function(){var e,t,n=this.PlaybackStates;switch(null===(e=this.nativePlayer)||void 0===e?void 0:e.playbackState){case n.BUFFERING:case n.NOTREADY:t=w.PlaybackState.buffering;break;case n.ENDED:t=w.PlaybackState.finished;break;case n.PAUSED:t=w.PlaybackState.paused;break;case n.PLAYING:t=w.PlaybackState.playing;break;case n.SEEKING:t=w.PlaybackState.seeking}return t}},{key:"getPlaybackData",value:function(){var e=this.currentStreamUrl,t=this.nativePlayer.currentPDT,n=this.getPlaybackMetrics(),r=n.liveLatencyAmount,i=n.currentPlayhead,o=this.getAudioRendition().averageBitrate,a=this.getCurrentVariant();return{playheadPosition:i,streamUrl:e,videoBitrate:a.bitrate,videoAverageBitrate:a.averageBitrate,audioBitrate:o,maxAllowedVideoBitrate:a.maxAllowedVideoBitrate,segmentPosition:t,liveLatencyAmount:r,bufferType:this.getBufferType()}}},{key:"getPlaybackStartupData",value:function(){var e,t=this.currentStreamUrl,n=this.getPlaybackMetrics(),r=n.bufferSegmentDuration,i=n.currentPlayhead,o=this.getAudioRendition(),a=o.audioRendition,s=o.audioChannels,c=this.getSubtitleRendition(),u=this.getCurrentVariant(),l=u.bitrate,p=u.averageBitrate,d=u.resolution,f=u.frameRate,h=u.audioCodec,v=u.videoCodec,g=u.videoRange;if(y.Check.string(s)){var m=/\d+/.exec(s);m&&(e=Number(m[0]))}else y.Check.number(s)&&(e=s);return{variant:new E.Z({bandwidth:l,resolution:d,audioChannels:e,videoRange:g,videoCodec:v,audioCodec:h,averageBandwidth:p,frameRate:f}),audio:a,subtitle:c,streamUrl:t,playheadPosition:i,bufferSegmentDuration:r}}},{key:"getHeartbeatData",value:function(){return this.heartbeatData}},{key:"toString",value:function(){return"SDK.Media.PlayerAdapter.DssHlsPlayerAdapter"}}]),S}(S.Z)},56352:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}}),n(12419),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(97326),c=n(2291),u=n(60136),l=n(82963),p=n(61120),d=(n(26699),n(32023),n(41539),n(39714),n(69826),n(47941),n(21249),n(88674),n(68309),n(19601),n(92222),n(87757)),y=n.n(d),f=n(67682),h=n(31545),v=n(26662),g=n(92534),m=n(97938),b=n(403),T=n(53158),k=n(62120),S=n(28928),P=n(66282),E=n(84983),Z=n(19546),w=n(57890),D=n(73688),C=n(72462),A=n(94894),R=n(9588),x=n(5301),O=n(58605);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var L={adSlotData:{adMediaId:R.DEFAULT_ZERO_GUID,slotNumber:0,plannedLength:0},adPodPlacement:{podPosition:Z.PodPosition.preroll},adPodData:{plannedSlotCount:0,plannedLength:0},adPlayheadPosition:0,mediaId:R.DEFAULT_ZERO_GUID,adSubtitleData:{subtitleVisibility:!1}},N=function(e){(0,u.Z)(b,e);var t,n,l,d=j(b);function b(e){var t;(0,o.Z)(this,b),t=d.call(this,e);var n={options:f.Types.object({initialPlaybackMode:f.Types.in(Z.PlaybackMode).optional})};(0,f.typecheck)((0,s.Z)(t),n,arguments);var r=e.initialPlaybackMode;return t.drmProviders=[],t.trackingData=null,t.playbackStartupEventData=new w.Z({startupActivity:Z.StartupActivity.reattempt}),t.rebufferingDuration=null,t.qos={},t.heartbeatData={},t.currentMultivariantPlaylistRequest=null,t.presentationType=Z.PresentationType.main,t.mediaStartBitrate=null,t.readyPlayerStartTime=0,t.fetchLicenseStartTime=0,t.initialPlaybackMode=r,t.isAdSkipped=!1,t.offHandlerRemovalList=[],t}return(0,a.Z)(b,[{key:"setSource",value:(l=(0,i.Z)(y().mark((function e(t){var n,r,i,o=this,a=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={playlist:f.Types.instanceStrict(T.Z)},(0,f.typecheck)(this,"setSource",i,a),this.playlistUri=t.streamUri,this.currentStreamUrl=t.streamUri,null!==(n=this.nativePlayer)&&void 0!==n&&n.isStartFailureSaveSupported()&&this.cdnFallback.isEnabled&&(this.playlistUri=t.mediaSources),null===(r=this.nativePlayer)||void 0===r||r.drm.setXhrConfigProvider((function(){return{headers:{key:{Authorization:o.accessToken}}}}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"clean",value:function(){var e=this.listener;(0,c.Z)((0,p.Z)(b.prototype),"clean",this).call(this),this.resetSource(),this.resetDrmProviders(),this.drmProvider=null,this.mediaStartBitrate=null,this.qos={},this.heartbeatData={},this.currentMultivariantPlaylistRequest=null,this.presentationType=Z.PresentationType.main,this.adData={data:{},adMetadata:L},this.playbackStartupEventData=new w.Z({startupActivity:Z.StartupActivity.reattempt}),this.removeListener(e)}},{key:"setTrackingData",value:function(e){var t={trackingData:f.Types.nonEmptyObject};(0,f.typecheck)(this,"setTrackingData",t,arguments),this.trackingData=e}},{key:"playbackEndedEvent",value:(n=(0,i.Z)(y().mark((function e(t){var n,r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.Check.assigned(this.listener)){e.next=10;break}return r=this.playbackStartupEventData,(i=t||{}).cdnRequestedTrail=r.cdnRequestedTrail,i.cdnFailedTrail=r.cdnFailedTrail,i.cdnFallbackCount=r.cdnFallbackCount,i.isCdnFallback=r.isCdnFallback,[Z.PresentationType.ad,Z.PresentationType.bumper].includes(null===(n=this.currentMultivariantPlaylistRequest)||void 0===n?void 0:n.assetType)&&this.adPlaybackEnded(M(M({},i),{},{asset:{mediaId:this.getAdMediaId()}})),e.next=10,this.onPlaybackEnded(i);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"dispose",value:function(){this.nativePlayer=null,this.accessToken=null}},{key:"setInitializePlayerStartTime",value:function(){this.initializePlayerStartTime=Date.now()}},{key:"setInitializePlayerDuration",value:function(){this.initializePlayerStartTime?this.initializePlayerDuration=Date.now()-this.initializePlayerStartTime:this.logger.warn(this.toString(),"setInitializePlayerStartTime is required to be called before duration can be set.")}},{key:"addListener",value:function(e){var t={listener:f.Types.instanceStrict(g.Z)};(0,f.typecheck)(this,"addListener",t,arguments);var n=this.nativePlayer,r=n.events,i=r.ErrorEvents,o=r.PlayerEvents,a=r.InterstitialEvents,s=r.UIEvents,c=i.MEDIA_ERROR,u=o.PLAYBACK,l=u.MEDIA_PAUSED,p=u.MEDIA_RESUMED,d=u.MEDIA_STARTED,y=u.INITIALIZED,h=u.READY,v=u.MEDIA_SEEK_COMPLETE,m=u.MEDIA_SEEKING,b=u.BUFFERING_STARTED,T=u.BUFFERING_ENDED,k=u.MULTIVARIANT_PLAYLIST_LOADED,S=u.VARIANT_LOADED,P=u.DRM_LICENSE_RECEIVED,E=u.MULTIVARIANT_PLAYLIST_REQUEST,Z=u.MULTIVARIANT_PLAYLIST_FALLBACK,w=u.CHUNK_LOADED,D=u.DRM_LICENSE_REQUESTED,C=s.MODE.PLAYBACK_MODE_CHANGED,A=a.SESSION_REQUESTED,R=a.SESSION_FETCHED,I=a.SESSION_STARTED,M=a.SESSION_FINISHED,j=a.MULTIVARIANT_FETCHED,L=a.VARIANT_FETCHED,N=a.ASSET_STARTED,B=a.ASSET_FINISHED,_=a.INTERSTITIAL_SKIPPED,F=a.SESSION_REQUESTED_ERROR,U=a.BEACON_ERROR,q=o.QUALITY.ACTIVE_PROFILE_CHANGED,K=o.CAPTIONS.SELECTED_TRACK_CHANGED,V=o.AUDIO.SELECTED_TRACK_CHANGED;if(!n||!n.on)throw(0,x.ZP)("".concat(this.toString(),".addListener(listener) unable to add PlaybackEventListener"));this.listener=e,this.eventListenerProvider=new O.Z({onHandler:n.on,offHandler:n.off,logger:this.logger}),this.eventListenerProvider.addEventHandler(this,d,this.playbackStartedEvent),this.eventListenerProvider.addEventHandler(this,p,this.playbackResumedEvent),this.eventListenerProvider.addEventHandler(this,l,this.playbackPausedEvent),this.eventListenerProvider.addEventHandler(this,y,this.playbackInitializedEvent),this.eventListenerProvider.addEventHandler(this,C,this.setPlaybackMode),this.eventListenerProvider.addEventHandler(this,h,this.playbackReadyEvent),this.eventListenerProvider.addEventHandler(this,m,this.playbackSeekStartedEvent),this.eventListenerProvider.addEventHandler(this,v,this.playbackSeekEndedEvent),this.eventListenerProvider.addEventHandler(this,q,this.bitrateChangedEvent),this.eventListenerProvider.addEventHandler(this,b,this.rebufferingStartedEvent),this.eventListenerProvider.addEventHandler(this,T,this.rebufferingEndedEvent),this.eventListenerProvider.addEventHandler(this,K,this.subtitleChangedEvent),this.eventListenerProvider.addEventHandler(this,V,this.audioChangedEvent),this.eventListenerProvider.addEventHandler(this,k,this.multivariantPlaylistFetchedEvent),this.eventListenerProvider.addEventHandler(this,k,this.successfulPlaylistLoad),this.eventListenerProvider.addEventHandler(this,E,this.multivariantPlaylistRequest),this.eventListenerProvider.addEventHandler(this,Z,this.multivariantPlaylistFallback),this.eventListenerProvider.addEventHandler(this,S,this.variantPlaylistFetchedEvent),this.eventListenerProvider.addEventHandler(this,P,this.drmKeyFetchedEvent),this.eventListenerProvider.addEventHandler(this,c,this.playbackErrorEvent),this.eventListenerProvider.addEventHandler(this,U,this.adBeaconError),this.eventListenerProvider.addEventHandler(this,A,this.adPodRequested),this.eventListenerProvider.addEventHandler(this,R,this.adPodFetched),this.eventListenerProvider.addEventHandler(this,F,this.adRequestedError),this.eventListenerProvider.addEventHandler(this,j,this.adMultivariantFetched),this.eventListenerProvider.addEventHandler(this,L,this.adVariantFetched),this.eventListenerProvider.addEventHandler(this,N,this.adPlaybackStarted),this.eventListenerProvider.addEventHandler(this,B,this.adPlaybackEnded),this.eventListenerProvider.addEventHandler(this,I,this.adPodStarted),this.eventListenerProvider.addEventHandler(this,M,this.adPodEnded),this.eventListenerProvider.addEventHandler(this,w,this.videoSegmentLoaded),this.eventListenerProvider.addEventHandler(this,D,this.drmKeyRequestedEvent),this.eventListenerProvider.addEventHandler(this,_,this.adPlaybackSkipped)}},{key:"setDrmProviders",value:(t=(0,i.Z)(y().mark((function e(t){var n,r=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={drmProviders:f.Types.array.of.instanceStrict(P.Z)},(0,f.typecheck)(this,"setDrmProviders",n,r),this.drmProviders=t,this.nativePlayer.drm.configuration=this.getDrmConfiguration(t);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getPlaybackMetrics",value:function(){var e=this.nativePlayer||{},t=e.currentTimeAsPdt,n=e.isLive,r=e.quality,i=e.currentTime,o=e.seekableRange,a=void 0===o?{}:o,s=e.metrics,c=(void 0===s?{}:s).playerMetrics,u=(void 0===c?{}:c).playback||{},l=u.throughput,p=u.bufferedRange,d=void 0===p?{}:p,y=r||{},h=y.currentKbps,v=y.averageBitrate,g=y.peakBitrate,b=d.end-i,T=this.getCurrentInterstitial();if(f.Check.nonEmptyObject(T)&&(this.adData.adMetadata.adPlayheadPosition=T.position?Math.floor(T.position):0,T.currentAsset)){var k,S=T.currentAsset.mediaId;S&&(this.adData.adMetadata.adSlotData=null===(k=this.adData.data[S])||void 0===k?void 0:k.adSlotData)}var P,E=null,Z=null,w=null;return n&&(E=t,Z=a.pdtEnd,w=null===(P=this.nativePlayer)||void 0===P?void 0:P.isLiveEdge),new m.Z({adMetadata:this.adData.adMetadata,currentBitrate:h,currentPlayhead:i,currentBitrateAvg:v,currentBitratePeak:g,currentThroughput:l,playheadProgramDateTime:E,seekableRangeEndProgramDateTime:Z,isLiveEdge:w,bufferSegmentDuration:b,maxAllowedVideoBitrate:this.getMaxAllowedVideoBitrate()})}},{key:"getCdnName",value:function(){var e=this.qos.cdnName;return f.Check.string(e)?e:"null"}},{key:"getMaxAllowedVideoBitrate",value:function(){var e,t,n=null!==(e=null===(t=this.nativePlayer)||void 0===t?void 0:t.quality.profiles)&&void 0!==e?e:[];return(n[n.length-1]||{}).peakBitrate||0}},{key:"getHeartbeatData",value:function(){var e;return M(M({},null===(e=this.nativePlayer)||void 0===e?void 0:e.heartbeat),this.heartbeatData)}},{key:"setAdEngineData",value:function(e){var t;(0,c.Z)((0,p.Z)(b.prototype),"setAdEngineData",this).call(this,e);var n=e.ssess;null===(t=this.nativePlayer)||void 0===t||t.drm.setXhrConfigProvider((function(){return{headers:{adEngine:{ssess:n}}}}))}},{key:"getPlaybackState",value:function(){var e,t,n=(null===(e=this.nativePlayer)||void 0===e?void 0:e.playbackState)||{},r={notready:Z.PlaybackState.notready,paused:Z.PlaybackState.paused,buffering:Z.PlaybackState.buffering,playing:Z.PlaybackState.playing,seeking:Z.PlaybackState.seeking,ended:Z.PlaybackState.finished},i=Object.keys(r).find((function(e){return n[e]}));return i&&(t=r[i]),t}},{key:"resetSource",value:function(){this.playlistUri=""}},{key:"resetDrmProviders",value:function(){this.drmProviders=[],this.nativePlayer.drm.configuration=null}},{key:"getKeySystem",value:function(e){var t,n=e.type,o=e.licenseRequestUri,a=e.processLicenseRequestHeaders(),s=(t={},(0,r.Z)(t,S.DrmType.FAIRPLAY,{keySystem:S.DrmType.FAIRPLAY,urn:E.Z.services.drm.drmClient.getFairPlayCertificate,getCertificate:function(){var t;return null===(t=e.getFairPlayCertificate)||void 0===t?void 0:t.call(e)}}),(0,r.Z)(t,S.DrmType.WIDEVINE,{keySystem:S.DrmType.WIDEVINE,urn:E.Z.services.drm.drmClient.getWidevineCertificate,getCertificate:function(){var t;return null===(t=e.getWidevineCertificate)||void 0===t?void 0:t.call(e)}}),t)[n],c={keySystem:n,licenseRequestUri:o,licenseRequestHeaders:Object.keys(a).map((function(e){return{name:e,value:a[e]}})),serverCertificate:Promise.resolve(void 0)};if(s){var u=s.getCertificate;c.serverCertificate=(0,i.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u());case 1:case"end":return e.stop()}}),e)})))()}return c}},{key:"getDrmConfiguration",value:function(e){var t=this;return{keySystems:e.map((function(e){return t.getKeySystem(e)}))}}},{key:"audioChangedEvent",value:function(e){var t=e||{},n=t.audioChannels,r=t.audioCodec,i=t.audioLanguage,o=t.audioName,a=n?parseInt(n,10):void 0;this.heartbeatData.playlistAudioChannels=null!=a?a:this.heartbeatData.playlistAudioChannels,this.heartbeatData.playlistAudioCodec=null!=r?r:this.heartbeatData.playlistAudioCodec,this.heartbeatData.playlistAudioLanguage=null!=i?i:this.heartbeatData.playlistAudioLanguage,this.heartbeatData.playlistAudioName=null!=o?o:this.heartbeatData.playlistAudioName,this.onAudioChanged()}},{key:"rebufferingStartedEvent",value:function(e){this.rebufferingDuration=new Date,this.onRebufferingStarted(e)}},{key:"rebufferingEndedEvent",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Date.now()-(null!==(e=null===(t=this.rebufferingDuration)||void 0===t?void 0:t.getTime())&&void 0!==e?e:0);this.onRebufferingEnded(M(M({},n),{},{duration:r}))}},{key:"playbackInitializedEvent",value:function(e){var t=new k.Z(e.variant),n=e.audio,r=e.subtitle,i=(0,v.getTrackTypes)({audio:n,subtitle:r}),o=i.playlistAudioTrackType,a=i.playlistTimedTextTrackType,s=this.currentStreamUrl,c=this.initializePlayerDuration,u=this.initializePlayerStartTime;this.heartbeatData={playbackMode:this.initialPlaybackMode,playlistAudioChannels:t.audioChannels,playlistAudioCodec:t.audioCodec,playlistAudioLanguage:n.language,playlistAudioName:n.name,playlistSubtitleLanguage:r.language,playlistSubtitleName:r.name,subtitleVisibility:r.forced,playlistAudioTrackType:o,playlistTimedTextTrackType:a},this.onPlaybackInitialized(M(M({},e),{},{variant:t,audio:n,subtitle:r,streamUrl:s,initializePlayerDuration:c,initializePlayerStartTime:u,playlistAudioTrackType:o,playlistTimedTextTrackType:a}))}},{key:"playbackSeekStartedEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.onPlaybackSeekStarted(e)}},{key:"playbackSeekEndedEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.onPlaybackSeekEnded(e)}},{key:"subtitleChangedEvent",value:function(e){var t=e||{},n=t.subtitleLanguage,r=t.subtitleName,i=t.subtitleVisibility;this.heartbeatData.playlistSubtitleLanguage=null!=n?n:this.heartbeatData.playlistSubtitleLanguage,this.heartbeatData.playlistSubtitleName=null!=r?r:this.heartbeatData.playlistSubtitleName,this.heartbeatData.subtitleVisibility=null!=i?i:this.heartbeatData.subtitleVisibility,this.onSubtitleChanged()}},{key:"bitrateChangedEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getCurrentInterstitial().currentAsset,n=t&&this.adData.adMetadata?this.adData.adMetadata:{};this.onBitrateChanged(M(M({},n),e))}},{key:"playbackReadyEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.readyPlayerStartTime;this.onPlaybackReady(M(M({},e),{},{readyPlayerStartTime:t,readyPlayerDuration:t?Date.now()-t:0}))}},{key:"playbackStartedEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.onPlaybackStarted(e)}},{key:"playbackPausedEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.onPlaybackPaused(e)}},{key:"playbackResumedEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.onPlaybackResumed(e)}},{key:"multivariantPlaylistFetchedEvent",value:function(e){var t=e.serverRequest,n=this.multivariantFetchedStartTime,r=new D.Z(t);this.onMultivariantPlaylistFetched(M(M({},e),{},{serverRequest:r,multivariantFetchedStartTime:n,multivariantFetchedDuration:n?Date.now()-n:void 0}))}},{key:"variantPlaylistFetchedEvent",value:function(e){var t=e||{},n=t.serverRequest,r=t.mediaSegmentType,i=Z.MediaSegmentTypeMap[r],o=new D.Z(n);this.onVariantPlaylistFetched(M(M({},e),{},{mediaSegmentType:i,serverRequest:o}))}},{key:"drmKeyFetchedEvent",value:function(e){var t=e.serverRequest,n=this.fetchLicenseStartTime,r=t||{},i=r.status,o=r.serverIP,a=r.cdnName,s=r.networkType,c=r.timeToFirstByte,u=r.error,l=r.method,p=r.host,d=r.path,y=r.statusCode,f=r.roundTripTime;this.onDrmKeyFetched(M(M({},e),{},{serverRequest:new D.Z({method:l,host:p,path:d,statusCode:y,roundTripTime:f,status:i,serverIP:o,cdnName:a,networkType:s,timeToFirstByte:c,error:u}),fetchLicenseStartTime:n,fetchLicenseDuration:n?Date.now()-n:0}))}},{key:"successfulPlaylistLoad",value:function(e){var t=(e||{}).playlist;t&&(this.currentStreamUrl=t.url,this.onSuccessfulPlaylistLoad(t))}},{key:"multivariantPlaylistRequest",value:function(e){var t=this.playbackStartupEventData,n=e||{},r=n.assetType,i=n.playlist;if([Z.PresentationType.bumper,Z.PresentationType.ad,Z.PresentationType.main].includes(r)&&(this.currentMultivariantPlaylistRequest=e),null!=i&&i.tracking){var o=i.tracking.qos,a=o?o.cdnVendor:null;this.qos=o,t.fallbackAttempt(a),t.isCdnFallback&&(t.setQosData(o),this.onPlaybackReattempt(t))}this.multivariantFetchedStartTime=Date.now()}},{key:"playbackErrorEvent",value:function(e){var t,n,r,i=e||{},o=i.fatal,a=void 0!==o&&o,s=i.errorSource,c=(s||{}).message,u=this.nativePlayer,l=u.seekableRange,p=void 0===l?{}:l,d=u.currentTime,y=u.isBehindLive,v=u.currentPDT,g=this.normalizePlayhead(Math.floor(1e3*d)),m=this.adData,b=m.data,T=void 0===b?{}:b,k=m.adMetadata,S=k.adPodData,P=k.adPodPlacement,E=this.getAdMediaId();t=E?null===(n=T[E])||void 0===n?void 0:n.adSlotData:L.adSlotData,y&&p.pdtEnd-v>0&&(r=p.pdtEnd-v);var w=(0,C.Z)(s);a?(this.emit(h.Z.MediaFailure,w),f.Check.assigned(this.listener)&&(this.onPlaybackError({isFatal:a,errorName:w,errorMessage:c,errorLevel:Z.ErrorLevel.error,playheadPosition:g,segmentPosition:v,liveLatencyAmount:r,adPodData:S,adPodPlacement:P,adSlotData:t}),this.playbackEndedEvent(M(M({},e),{},{errorName:w})),this.removeListener(this.listener))):f.Check.assigned(this.listener)&&this.onPlaybackError({isFatal:!1,errorName:w,errorMessage:c,errorLevel:Z.ErrorLevel.warn,playheadPosition:g,segmentPosition:v,liveLatencyAmount:r,adPodData:S,adPodPlacement:P,adSlotData:t})}},{key:"multivariantPlaylistFallback",value:function(e){var t=(e||{}).playlist;t&&t.tracking&&(this.playbackStartupEventData.playbackError=Z.QoePlaybackError.unknown,this.playbackStartupEventData.fallbackFailed())}},{key:"getCurrentVariant",value:function(){var e,t,n,r,i=null!==(e=null===(t=this.nativePlayer)||void 0===t||null===(n=t.metrics)||void 0===n||null===(r=n.playerMetrics)||void 0===r?void 0:r.playback)&&void 0!==e?e:{},o=i.variants,a=void 0===o?[]:o,s=a[i.chosenVariant]||{},c=a[a.length-1]||{},u=c.encodedFrameRate,l=c.peakBitrate,p=s.peakBitrate,d=s.encodedFrameRate,y=s.audioCodecs,h=s.averageBitrate,g=s.videoCodec,m=s.videoRangeSubType;return null===this.mediaStartBitrate&&(this.mediaStartBitrate=h),{resolution:(0,v.getResolutionString)(s),bitrate:p,averageBitrate:h,frameRate:d,audioCodec:f.Check.array(y)?y[0]:void 0,videoCodec:g,videoRange:m,maxAllowedVideoBitrate:l,playlistResolution:(0,v.getResolutionString)(c),playlistFrameRate:u}}},{key:"getAudioRendition",value:function(){var e,t,n,r,i,o=null!==(e=null===(t=this.nativePlayer)||void 0===t||null===(n=t.metrics)||void 0===n||null===(r=n.playerMetrics)||void 0===r||null===(i=r.playback)||void 0===i?void 0:i.audio)&&void 0!==e?e:{},a=o.averageBitrate,s=o.channels,c=o.codec;return{audioRendition:{name:o.name,language:o.language},averageBitrate:a,audioChannels:s,audioCodec:c}}},{key:"getSubtitleRendition",value:function(){var e,t,n,r,i=(null!==(e=null===(t=this.nativePlayer)||void 0===t||null===(n=t.metrics)||void 0===n||null===(r=n.playerMetrics)||void 0===r?void 0:r.playback)&&void 0!==e?e:{}).subtitles;return void 0===i?{}:i}},{key:"adPodRequested",value:function(e){var t=e.interstitialMetadata,n=t.placement,r=t.midRollIndex,i=Z.PodPosition[n.toLowerCase()];if(i){var o={midrollIndex:r,podPosition:i};this.onAdPodRequested({adPodPlacement:o})}}},{key:"adPodFetched",value:function(e){var t=e.serverRequest,n=e.startTimestamp,r=e.interstitialMetadata,i=e.response,o=r.placement,a=void 0===o?"":o;if(Z.PodPosition[a.toLowerCase()]){var s=new D.Z(M(M({},t),{},{method:Z.HttpMethod[(t.method||Z.HttpMethod.post).toLowerCase()],networkType:Z.NetworkType.unknown,status:(0,A.Z)(t.fetchStatus),error:void 0}));this.processAdPodData({interstitialMetadata:r,response:i});var c=this.adData.adMetadata,u=c.adPodData,l=c.adPodPlacement;this.onAdPodFetched({adPodData:u,adPodPlacement:l,serverRequest:s,startTimestamp:n})}}},{key:"processAdPodData",value:function(e){var t=e.interstitialMetadata,n=(e.response||{}).pods,i=void 0===n?[]:n,o=t||{},a=o.placement,s=void 0===a?"":a,c=o.midRollIndex,u=o.totalDuration,l=o.slotCount,p=Z.PodPosition[s.toLowerCase()];this.adData.adMetadata=L,this.adData.adMetadata.adPodData={plannedSlotCount:l,plannedLength:f.Check.number(u)?Math.floor(u):void 0},this.adData.adMetadata.adPodPlacement={midrollIndex:c,podPosition:p},this.adData.data=i.reduce((function(e,t){var n=t.ads;return(void 0===n?[]:n).reduce((function(e,t){var n=t.creative,i=(n=void 0===n?{}:n).video,o=void 0===i?{}:i,a=t["slot-number"],s=o["media-id"],c=o["media-url"],u=o["duration-ms"];return M(M({},e),{},(0,r.Z)({},s,{adSubtitleData:{subtitleVisibility:!1},adSlotData:{adMediaId:s,plannedLength:f.Check.number(u)?Math.floor(u):void 0,slotNumber:a||0},mediaUrl:c}))}),e)}),{})}},{key:"adMultivariantFetched",value:function(e){var t,n=e.serverRequest,r=e.startTimestamp,i=e.interstitialMetadata,o=i.placement,a=void 0===o?"":o,s=i.slotNumber,c=i.adDuration,u=i.adId;if(Z.PodPosition[a.toLowerCase()]&&u){var l=new D.Z(M(M({},n),{},{method:Z.HttpMethod[null===(t=n.method)||void 0===t?void 0:t.toLowerCase()],networkType:Z.NetworkType.unknown,status:(0,A.Z)(n.fetchStatus),error:void 0})),p=(this.getAdDataByMediaId({adMediaId:u,plannedLength:c,slotNumber:s})||{}).adSlotData,d=this.adData.adMetadata,y=d.adPodData,f=d.adPodPlacement;this.onAdMultivariantFetched({adPodData:y,adPodPlacement:f,adSlotData:p,serverRequest:l,startTimestamp:r})}}},{key:"getAdDataByMediaId",value:function(e){var t=e.adMediaId,n=e.plannedLength,r=e.slotNumber,i=this.adData.data[t];return i||(i={adSubtitleData:{subtitleVisibility:!1},adSlotData:{adMediaId:t,plannedLength:f.Check.number(n)?Math.floor(n):void 0,slotNumber:r||0}}),this.adData.data[t]=i,i}},{key:"adVariantFetched",value:function(e){var t,n,r=(null===(t=this.nativePlayer)||void 0===t?void 0:t.areSubtitlesEnabled)||!1,i=e.serverRequest,o=e.startTimestamp,a=e.assetData,s=e.interstitialMetadata,c=s.placement,u=void 0===c?"":c,l=s.slotNumber,p=s.adDuration,d=s.adId;if(Z.PodPosition[u.toLowerCase()]&&d){var y=new D.Z(M(M({},i),{},{method:Z.HttpMethod[null===(n=i.method)||void 0===n?void 0:n.toLowerCase()],networkType:Z.NetworkType.unknown,status:(0,A.Z)(i.fetchStatus),error:void 0})),f=a.mediaSegmentType,h=a.codec,v=a.range,g=a.bitrate,m=a.averageBitrate,b=a.resolution,T=a.frameRate,k=a.channels,S=a.language,P=a.name,E=this.getAdDataByMediaId({adMediaId:d,plannedLength:p,slotNumber:l})||{},w=E.adSlotData,C=E||{},R=C.adVideoData,x=C.adAudioData,O=C.adSubtitleData,I=Z.MediaSegmentTypeMap[f];if(I)switch(I){case Z.MediaSegmentType.video:R={playlistVideoCodec:h,playlistVideoRange:v,videoBitrate:g,videoAverageBitrate:m,playlistResolution:b,playlistFrameRate:T},E.adVideoData=R;break;case Z.MediaSegmentType.audio:x={playlistAudioChannels:parseInt(k,10),playlistAudioCodec:h,playlistAudioLanguage:S,playlistAudioName:P},E.adAudioData=x;break;case Z.MediaSegmentType.subtitle:O={subtitleVisibility:r,playlistSubtitleLanguage:S,playlistSubtitleName:P},E.adSubtitleData=O;break;default:this.logger.error(this.toString(),"Unknown mediaSegmentType: ".concat(f))}var j=this.adData.adMetadata,L=j.adPodData,N=j.adPodPlacement;this.onAdVariantFetched({adPodData:L,adPodPlacement:N,adSlotData:w,serverRequest:y,mediaSegmentType:I,adVideoData:R,adAudioData:x,adSubtitleData:O,startTimestamp:o})}}},{key:"adPlaybackStarted",value:function(e){var t=e.asset,n=void 0===t?{}:t,r=e.currentInterstitial,i=n.mediaId,o=n.type,a=n.subtype,s=(r||this.getCurrentInterstitial()).placement,c=void 0===s?"":s,u=Z.PodPosition[c.toLowerCase()],l=Z.PresentationType[o]||Z.PresentationType[a]||Z.PresentationType.ad;if(o===Z.PresentationType.slug&&this.changePresentationType(o),c===S.InsertionPointPlacement.BUMPER_PREROLL&&(l=Z.PresentationType.bumper),this.presentationType!==l&&this.changePresentationType(l),u&&i){var p=this.adData.data[i]||{},d=p.adSlotData,y=p.adVideoData,f=p.adAudioData,h=p.adSubtitleData;this.adData.adMetadata.adSlotData=d,this.onAdPlaybackStarted({adPodPlacement:this.adData.adMetadata.adPodPlacement,adPodData:this.adData.adMetadata.adPodData,adSlotData:this.adData.adMetadata.adSlotData,adVideoData:y,adAudioData:f,adSubtitleData:h})}}},{key:"adPlaybackEnded",value:function(e){var t,n,r,i,o=e||{},a=o.playbackError,s=o.playbackErrorDetail,c=void 0===s?"":s,u=o.cause,l=o.asset,p=this.getCurrentInterstitial().placement,d=void 0===p?"":p,y=(l||{}).mediaId,f=u;if(Z.PodPosition[d.toLowerCase()]&&y){null!==(t=f)&&void 0!==t||(f=Z.PlaybackExitedCause.playedToEnd);var h={errorName:a,errorMessage:c};if(this.adData.data[y]){var v=Object.assign({},this.adData.data[y]);n=v.adVideoData,r=v.adAudioData,i=v.adSubtitleData}var g=this.adData.adMetadata,m=g.adPodData,b=g.adPodPlacement,T=g.adSlotData;this.onAdPlaybackEnded({adPodPlacement:b,adPodData:m,adSlotData:T,adVideoData:n,adAudioData:r,adSubtitleData:i,cause:f,adErrorData:h}),y&&delete this.adData.data[y]}}},{key:"adPodStarted",value:function(e){var t,n=e.placement,r=void 0===n?"":n,i=this.getCurrentInterstitial(),o=i.id,a=i.duration,s=i.position,c=Z.InterstitialPlacement.preroll;this.presentationType=Z.PresentationType.ad,r===S.InsertionPointPlacement.MIDROLL&&(c=Z.InterstitialPlacement.midroll),r===S.InsertionPointPlacement.BUMPER_PREROLL&&(this.presentationType=Z.PresentationType.bumper),this.interstitialSessionId=(null==o||null===(t=o.toString)||void 0===t?void 0:t.call(o))||"",this.interstitialSessionDuration=a,this.changePresentationType(this.presentationType),this.onInterstitialPlaybackStarted({interstitialType:Z.InterstitialType.promo,interstitialPlacement:c,interstitialId:this.interstitialSessionId,interstitialPlannedLength:a,interstitialPlayhead:s})}},{key:"adPodEnded",value:function(e){var t;this.changePresentationType();var n,r=e||{},i=r.id,o=r.duration,a=r.position,s=void 0===a?0:a,c=r.cause,u=r.message,l=(null==i||null===(t=i.toString)||void 0===t?void 0:t.call(i))||this.interstitialSessionId,p=o||this.interstitialSessionDuration,d=c?Z.InterstitialEndedCause.error:void 0;u&&(n={errorName:(0,C.Z)(e),errorMessage:u}),d||(d=this.isAdSkipped?Z.InterstitialEndedCause.skip:Z.InterstitialEndedCause.playedToEnd,this.isAdSkipped=!1),this.onInterstitialPlaybackEnded({interstitialType:Z.InterstitialType.promo,interstitialPlacement:Z.InterstitialPlacement.postroll,interstitialId:l,interstitialPlannedLength:p,interstitialPlayhead:s,cause:d,errorData:n})}},{key:"adRequestedError",value:function(e){var t=(e||{}).serverRequest||{},n=t.host,r=t.path;this.changePresentationType(Z.PresentationType.unknown),this.onAdRequestedError({error:Z.QoePlaybackError.adServerError,errorLevel:Z.ErrorLevel.error,applicationContext:Z.ApplicationContext.ad,errorDetail:"https://".concat(n).concat(r)})}},{key:"adPlaybackSkipped",value:function(){var e=this.adData.adMetadata,t=this.nativePlayer,n=t.currentPDT,r=t.currentTime;this.isAdSkipped=!0,this.setAdPlayheadPosition(),this.setAdSlotData(),this.onPlaybackSeekStarted({cause:Z.PlaybackSeekCause.skip,playerSeekDirection:Z.PlayerSeekDirection.forward,seekDistance:0,playheadPosition:r,segmentPosition:n,liveLatencyAmount:this.getLiveLatencyAmount(),adMetadata:e})}},{key:"getLiveLatencyAmount",value:function(){var e=this.nativePlayer,t=e.seekableRange,n=void 0===t?{}:t,r=e.isBehindLive,i=e.currentPDT,o=0;return n&&r&&n.pdtEnd-i>0&&(o=n.pdtEnd-i),o}},{key:"adBeaconError",value:function(e){var t=e.serverRequest||{},n=t.host,r=t.path;this.onAdBeaconError({error:Z.QoePlaybackError.adBeaconError,errorLevel:Z.ErrorLevel.info,applicationContext:Z.ApplicationContext.ad,errorDetail:"https://".concat(n).concat(r)})}},{key:"changePresentationType",value:function(e){var t,n=null===(t=this.nativePlayer)||void 0===t?void 0:t.areSubtitlesEnabled,r=this.getAudioRendition(),i=r.audioRendition,o=r.averageBitrate,a=r.audioChannels,s=this.getCurrentVariant(),c=s.bitrate,u=s.averageBitrate,l=this.getSubtitleRendition();this.presentationType=e||Z.PresentationType.main;var p=(0,v.getTrackTypes)({audio:i,subtitle:l}),d=p.playlistAudioTrackType,y=p.playlistTimedTextTrackType;this.onPresentationTypeChanged({presentationType:this.presentationType,areSubtitlesEnabled:n,videoBitrate:c,videoAverageBitrate:u,audioBitrate:o,audioChannels:parseInt(a,10),audio:i,subtitle:l,adMetadata:this.adData.adMetadata,playlistAudioTrackType:d,playlistTimedTextTrackType:y})}},{key:"videoSegmentLoaded",value:function(){this.readyPlayerStartTime||(this.readyPlayerStartTime=Date.now())}},{key:"drmKeyRequestedEvent",value:function(){this.fetchLicenseStartTime=Date.now()}},{key:"getAdMediaId",value:function(){var e=this,t=this.adData.data;return Object.keys(t).find((function(n){var r,i,o;return null===(r=e.currentMultivariantPlaylistRequest)||void 0===r||null===(i=r.url)||void 0===i?void 0:i.includes(null===(o=t[n])||void 0===o?void 0:o.mediaUrl)}))}},{key:"constructErrorCaseFromDssWebError",value:function(e){var t=e||{},n=t.error,r=t.errorDetail;return(0,x.Kf)({code:n,description:r,exceptionData:{name:n,message:r}})}},{key:"setAdPlayheadPosition",value:function(){var e=this.getCurrentInterstitial();e&&(this.adData.adMetadata.adPlayheadPosition=e.position?Math.floor(e.position):0)}},{key:"toString",value:function(){return"SDK.Media.PlayerAdapter.DssWebPlayerAdapter"}}]),b}(b.Z)},91926:function(e,t,n){"use strict";n.d(t,{Z:function(){return Y}}),n(12419),n(82526),n(57327),n(38880),n(49337);var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(97326),c=n(2291),u=n(60136),l=n(82963),p=n(61120),d=(n(26699),n(32023),n(41539),n(39714),n(54747),n(47941),n(40561),n(21249),n(88674),n(68309),n(92222),n(19601),n(74916),n(9653),n(69826),n(87757)),y=n.n(d),f=n(67682),h=n(97244),v=n(37736),g=n(31545),m=n(80540),b=n(92534),T=n(66282),k=n(97938),S=n(53158),P=n(403),E=n(46467),Z=n(58605),w=n(62120),D=n(28928),C=n(72462),A=n(57890),R=n(73688),x=n(19546),O=n(26662),I=(n(23157),n(74819),n(36535),n(83593),n(9344));function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N,B={debugLogs:[],debug:function(e){this.debugLogs.push(L(L({},e),{},{callDateTime:Date.now()}))},getProxyHandler:function(){if("test"===I.$.Test){var e=this.debug.bind(this),t=["toJSON","on","off","eventHandlerKeys","eventHandlerValues","once","xhrSetupCallback","setupXhrCallback","controller","getClass"];return{get:function(n,r,i){var o=t.includes(r)||r.startsWith("_"),a=Reflect.get(n,r,i);return o?a:"function"==typeof n[r]?new Proxy(n[r],{apply:function(t,n,i){var o=Reflect.apply(t,n,i);return e({nativeFunction:r,result:o}),o}}):(e({nativeProp:r,result:a}),a)},set:function(n,r,i){var o=t.includes(r)||r.startsWith("_"),a=Reflect.set(n,r,i);return o||e({nativeProp:r,result:a?i:void 0}),a}}}return{get:function(e,t,n){return Reflect.get(e,t,n)},set:function(e,t,n){return Reflect.set(e,t,n)}}},downloadDebugLogs:function(){},NativePlayerProxy:function(){if(this.isEnabled()){var e=this.getProxyHandler.bind(this);return function(t){return function(t){(0,u.Z)(r,t);var n=M(r);function r(){var t;(0,o.Z)(this,r);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var c=a[0];t=n.call(this,c);var u=c.nativePlayer,l=c.enableDebugLogs;return l&&(t.nativePlayer=new Proxy(u,e())),t}return(0,a.Z)(r)}(t)}}return function(){}},EventCapture:function(e){var t=this;if(this.isEnabled()){var n=function(e){return function(n){return t.debug({key:e,eventData:n})}};return function(t){return function(t){(0,u.Z)(i,t);var r=M(i);function i(){var t;(0,o.Z)(this,i);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];var u=s[0];t=r.call(this,u);var l=u.nativePlayer,p=u.enableDebugLogs;return p&&Object.keys(e).forEach((function(e){e&&l.on(e,n(e))})),t}return(0,a.Z)(i)}(t)}}return function(){}},isEnabled:function(){return"test"===I.$.Test||"test"===I.$.Development}},_=n(83668),F=n(94894),U=n(5301),q=n(9588),K=n(79337);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var Q={adSlotData:{adMediaId:q.DEFAULT_ZERO_GUID,slotNumber:0,plannedLength:0},adPodPlacement:{podPosition:x.PodPosition.preroll},adPodData:{plannedSlotCount:0,plannedLength:0},adPlayheadPosition:0,mediaId:q.DEFAULT_ZERO_GUID,adSubtitleData:{subtitleVisibility:!1}},z={MEDIAELEMENT_STATE_CHANGED:"MEDIAELEMENT_STATE_CHANGED",PRESENTATION_STATE_LOADED:"PRESENTATION_STATE_LOADED",MEDIAELEMENT_STATE_PLAYING:"MEDIAELEMENT_STATE_PLAYING",DRM_LICENSE_REQUESTED:"DRM_LICENSE_REQUESTED",DRM_LICENSE_RECEIVED:"DRM_LICENSE_RECEIVED",CANPLAY:"CANPLAY",SEEKING_STARTED:"SEEKING_STARTED",SEEKABLE_RANGE_CHANGED:"SEEKABLE_RANGE_CHANGED",BUFFERING_STARTED:"BUFFERING_STARTED",BUFFERING_FINISHED:"BUFFERING_FINISHED",SUBTITLE_RENDITION_CHANGED:"SUBTITLE_RENDITION_CHANGED",MULTIVARIANT_PLAYLIST_REQUEST:"MULTIVARIANT_PLAYLIST_REQUEST",MULTIVARIANT_PLAYLIST_FALLBACK:"MULTIVARIANT_PLAYLIST_FALLBACK",MULTIVARIANT_PLAYLIST_LOADED:"MULTIVARIANT_PLAYLIST_LOADED",MULTIVARIANT_PLAYLIST_PARSED:"MULTIVARIANT_PLAYLIST_PARSED",SEEKING_FINISHED:"SEEKING_FINISHED",VIDEO_RENDITION_UPDATED:"VIDEO_RENDITION_UPDATED",AUDIO_RENDITION_UPDATED:"AUDIO_RENDITION_UPDATED",SUBTITLE_RENDITION_UPDATED:"SUBTITLE_RENDITION_UPDATED",AUDIO_RENDITION_CHANGED:"AUDIO_RENDITION_CHANGED",ERROR:"ERROR",SEGMENT_PLAYING:"SEGMENT_PLAYING",SOURCE_BUFFER_APPEND_STARTED:"SOURCE_BUFFER_APPEND_STARTED",CONTENT_DOWNLOAD_FINISHED:"CONTENT_DOWNLOAD_FINISHED",PLAYBACK_METRICS_CHANGED:"PLAYBACK_METRICS_CHANGED",NETWORK_METRICS_CHANGED:"NETWORK_METRICS_CHANGED",INTERSTITIAL_SESSION_REQUESTED:"INTERSTITIAL_SESSION_REQUESTED",INTERSTITIAL_SESSION_FETCHED:"INTERSTITIAL_SESSION_FETCHED",INTERSTITIAL_SESSION_STARTED:"INTERSTITIAL_SESSION_STARTED",INTERSTITIAL_SESSION_FINISHED:"INTERSTITIAL_SESSION_FINISHED",INTERSTITIAL_MULTIVARIANT_FETCHED:"INTERSTITIAL_MULTIVARIANT_FETCHED",INTERSTITIAL_VARIANT_FETCHED:"INTERSTITIAL_VARIANT_FETCHED",INTERSTITIAL_ASSET_STARTED:"INTERSTITIAL_ASSET_STARTED",INTERSTITIAL_ASSET_FINISHED:"INTERSTITIAL_ASSET_FINISHED",INTERSTITIAL_SKIPPED:"INTERSTITIAL_SKIPPED",BEACON_ERROR:"BEACON_ERROR",INTERSTITIAL_SESSION_REQUESTED_ERROR:"INTERSTITIAL_SESSION_REQUESTED_ERROR",VIDEO_SEGMENT_LOADED:"VIDEO_SEGMENT_LOADED",MEDIA_PLAYLIST_REQUEST:"MEDIA_PLAYLIST_REQUEST",MEDIA_PLAYLIST_LOADED:"MEDIA_PLAYLIST_LOADED",TIMEUPDATE:"TIMEUPDATE"},W="main-content",Y=B.NativePlayerProxy()(N=B.EventCapture(z)(N=function(e){(0,u.Z)(N,e);var t,n,l,d,P,I,M,j,L=G(N);function N(e){var t,n;(0,o.Z)(this,N),n=L.call(this,e);var r={options:f.Types.object({videoStartTimestamp:f.Types.number.optional,enableDebugLogs:f.Types.boolean.optional,initialPlaybackMode:f.Types.in(x.PlaybackMode).optional})};(0,f.typecheck)((0,s.Z)(n),r,arguments);var i=e.videoStartTimestamp,a=void 0===i?Date.now():i,c=e.initialPlaybackMode;return n.seekableRangeEndProgramDateTime=void 0,n.playbackStartupEventData=new A.Z({startupActivity:x.StartupActivity.reattempt}),n.qos={},n.rebufferingDuration=null,n.drmProviders=[],n.drmConfigurations={},n.melStatic=null===(t=n.nativePlayer)||void 0===t?void 0:t.getClass(),n.Events=n.melStatic.Events,n.MediaElementStates=n.melStatic.MediaElementStates,n.DataTypes=n.melStatic.DataTypes,n.AssetTypes=n.melStatic.AssetTypes,n.isBuffering=!1,n.isApplicationBackgrounded=!1,n.segmentPosition=null,n.mediaStartBitrate=null,n.mediaSegmentType=null,n.mediaBytesDownloaded=0,n.bufferType=void 0,n.isReady=!1,n.heartbeatData={videoStartTimestamp:a},n.playbackMetricsEventData=null,n.networkMetricsEventData=null,n.presentationType=x.PresentationType.main,n.bitrateAvg=0,n.currentMultivariantPlaylistRequest=null,n.readyPlayerStartTime=0,n.fetchLicenseStartTime=0,n.playlistCache={},n.initialPlaybackMode=c,n.isAdSkipped=!1,n.resetPauseLogCapture(),n.setLastKnownTimes(),n.offHandlerRemovalList=[],n}return(0,a.Z)(N,[{key:"setSource",value:(j=(0,i.Z)(y().mark((function e(t){var n,r,i,o=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={playlist:f.Types.instanceStrict(S.Z)},(0,f.typecheck)(this,"setSource",r,o),i=this.cdnFallback,f.Check.not.assigned(null===(n=this.nativePlayer)||void 0===n?void 0:n.setupXhrCallback)&&this.setupXhrCallback(),this.playlistUri=t.streamUri,this.currentStreamUrl=t.streamUri,i.isEnabled&&(this.playlistUri=t.mediaSources);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return j.apply(this,arguments)})},{key:"clean",value:function(){var e=this.listener;(0,c.Z)((0,p.Z)(N.prototype),"clean",this).call(this),this.playlistUri="",this.drmProvider=null,this.drmProviders=[],this.segmentPosition=null,this.mediaStartBitrate=null,this.mediaSegmentType=null,this.qos={},this.mediaBytesDownloaded=0,this.isBuffering=!1,this.isReady=!1,this.heartbeatData={},this.mediaDownloadTotalCount=0,this.mediaDownloadTotalTime=0,this.bitrateAvg=0,this.currentMultivariantPlaylistRequest=null,this.presentationType=x.PresentationType.main,this.adData={data:{},adMetadata:Q},this.playbackStartupEventData=new A.Z({startupActivity:x.StartupActivity.reattempt}),this.playbackMetricsEventData=null,this.networkMetricsEventData=null,this.removeListener(e)}},{key:"dispose",value:function(){this.clean(),this.nativePlayer=null,this.accessToken=null,this.playbackStartupEventData=null}},{key:"setApplicationBackgrounded",value:function(){this.isApplicationBackgrounded=!0}},{key:"setApplicationForegrounded",value:function(){this.isApplicationBackgrounded=!1}},{key:"playbackEndedEvent",value:(M=(0,i.Z)(y().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,d,h;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(r=t||{}).eventData,o=r.isEnded,a=this.playbackStartupEventData,c=(s=i||{}).errorName,u=s.errorDetail,l=(t||{}).cause,!this.fatalErrorPromise){e.next=6;break}return e.abrupt("return");case 6:return p=this.getPlaybackData(),x.PlaybackExitedCause[l]||(l=f.Check.assigned(i)?x.PlaybackExitedCause.error:o?x.PlaybackExitedCause.playedToEnd:x.PlaybackExitedCause.user),(d=H(H({},p),{},{cause:l,playbackError:c,playbackErrorDetail:u})).cdnRequestedTrail=null==a?void 0:a.cdnRequestedTrail,d.cdnFailedTrail=null==a?void 0:a.cdnFailedTrail,d.cdnFallbackCount=null==a?void 0:a.cdnFallbackCount,d.isCdnFallback=null==a?void 0:a.isCdnFallback,this.isBuffering&&this.rebufferingEndedEvent(),[x.PresentationType.ad,x.PresentationType.bumper].includes(null===(n=this.currentMultivariantPlaylistRequest)||void 0===n?void 0:n.assetType)&&(h=this.getAdMediaId(),this.adPlaybackEnded(H(H({},d),{},{asset:{mediaId:h}}))),e.next=17,this.onPlaybackEnded(d);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return M.apply(this,arguments)})},{key:"setInitializePlayerStartTime",value:function(){this.initializePlayerStartTime=Date.now()}},{key:"setInitializePlayerDuration",value:function(){this.initializePlayerStartTime?this.initializePlayerDuration=Date.now()-this.initializePlayerStartTime:this.logger.warn(this.toString(),"setInitializePlayerStartTime is required to be called before duration can be set.")}},{key:"addListener",value:function(e){var t=this,n={listener:f.Types.instanceStrict(b.Z)};(0,f.typecheck)(this,"addListener",n,arguments);var r=this.nativePlayer,i=this.Events,o=this.logger;if(!r||!r.on)throw(0,U.ZP)("".concat(this.toString(),".addListener(listener) unable to add PlaybackEventListener"));this.listener=e,this.eventListenerProvider=new Z.Z({onHandler:r.on,onceHandler:r.once,offHandler:r.off,logger:o}),this.eventListenerProvider.addEventHandler(this,i.MEDIAELEMENT_STATE_CHANGED,this.mediaElementStateChangedEvent),this.eventListenerProvider.addEventHandler(this,i.PRESENTATION_STATE_LOADED,this.playbackInitializedEvent),this.eventListenerProvider.addEventHandler(this,i.SEEKING_STARTED,this.playbackSeekStartedEvent),this.eventListenerProvider.addEventHandler(this,i.SEEKING_FINISHED,this.playbackSeekEndedEvent),this.eventListenerProvider.addEventHandler(this,i.NETWORK_METRICS_CHANGED,this.bitrateChangedEvent),this.eventListenerProvider.addEventHandler(this,i.BUFFERING_STARTED,this.rebufferingStartedEvent),this.eventListenerProvider.addEventHandler(this,i.BUFFERING_FINISHED,this.rebufferingEndedEvent),this.eventListenerProvider.addEventHandler(this,i.SUBTITLE_RENDITION_CHANGED,this.subtitleChangedEvent),this.eventListenerProvider.addEventHandler(this,i.AUDIO_RENDITION_CHANGED,this.audioChangedEvent),this.eventListenerProvider.addEventHandler(this,i.MULTIVARIANT_PLAYLIST_PARSED,this.multivariantPlaylistFetchedEvent),this.eventListenerProvider.addEventHandler(this,i.VIDEO_RENDITION_UPDATED,this.variantPlaylistFetchedEvent),this.eventListenerProvider.addEventHandler(this,i.AUDIO_RENDITION_UPDATED,this.variantPlaylistFetchedEvent),this.eventListenerProvider.addEventHandler(this,i.SUBTITLE_RENDITION_UPDATED,this.variantPlaylistFetchedEvent),this.eventListenerProvider.addEventHandler(this,i.MULTIVARIANT_PLAYLIST_LOADED,this.successfulPlaylistLoad),this.eventListenerProvider.addEventHandler(this,i.MULTIVARIANT_PLAYLIST_REQUEST,this.multivariantPlaylistRequest),this.eventListenerProvider.addEventHandler(this,i.DRM_LICENSE_REQUESTED,this.drmKeyRequestedEvent),this.eventListenerProvider.addEventHandler(this,i.DRM_LICENSE_RECEIVED,this.drmKeyFetchedEvent),this.eventListenerProvider.addEventHandler(this,i.SEEKABLE_RANGE_CHANGED,this.seekableRangeChangedEvent),this.eventListenerProvider.addEventHandler(this,i.ERROR,this.playbackErrorLocker),this.eventListenerProvider.addEventHandler(this,i.SEGMENT_PLAYING,this.segmentPlayingEvent),this.eventListenerProvider.addEventHandler(this,i.SOURCE_BUFFER_APPEND_STARTED,this.sourceBufferAppendStartedEvent),this.eventListenerProvider.addEventHandler(this,i.CONTENT_DOWNLOAD_FINISHED,this.contentDownloadFinishedEvent),this.eventListenerProvider.addEventHandler(this,i.PLAYBACK_METRICS_CHANGED,this.playbackMetricsChanged),this.eventListenerProvider.addEventHandler(this,i.INTERSTITIAL_SESSION_REQUESTED,this.adPodRequested),this.eventListenerProvider.addEventHandler(this,i.INTERSTITIAL_SESSION_FETCHED,this.adPodFetched),this.eventListenerProvider.addEventHandler(this,i.INTERSTITIAL_MULTIVARIANT_FETCHED,this.adMultivariantFetched),this.eventListenerProvider.addEventHandler(this,i.INTERSTITIAL_VARIANT_FETCHED,this.adVariantFetched),this.eventListenerProvider.addEventHandler(this,i.INTERSTITIAL_ASSET_STARTED,this.adPlaybackStarted),this.eventListenerProvider.addEventHandler(this,i.INTERSTITIAL_ASSET_FINISHED,this.adPlaybackEnded),this.eventListenerProvider.addEventHandler(this,i.INTERSTITIAL_SESSION_STARTED,this.adPodStarted),this.eventListenerProvider.addEventHandler(this,i.INTERSTITIAL_SESSION_FINISHED,this.adPodEnded),this.eventListenerProvider.addEventHandler(this,i.BEACON_ERROR,this.adBeaconError),this.eventListenerProvider.addEventHandler(this,i.INTERSTITIAL_SESSION_REQUESTED_ERROR,this.adRequestedError),this.eventListenerProvider.addEventHandler(this,i.VIDEO_SEGMENT_LOADED,this.videoSegmentLoaded),this.eventListenerProvider.addEventHandler(this,i.MEDIA_PLAYLIST_REQUEST,this.mediaPlaylistRequested),this.eventListenerProvider.addEventHandler(this,i.MEDIA_PLAYLIST_LOADED,this.mediaPlaylistLoaded),this.eventListenerProvider.addEventHandler(this,i.INTERSTITIAL_SKIPPED,this.adPlaybackSkipped),this.eventListenerProvider.addEventHandler(this,i.TIMEUPDATE,this.timeUpdated),this.eventListenerProvider.addEventHandlerOnce(this,i.CANPLAY,this.playbackReadyEvent),this.eventListenerProvider.addEventHandlerOnce(this,i.MEDIAELEMENT_STATE_PLAYING,this.playbackStartedEvent),Object.keys(i).forEach((function(e){t.eventListenerProvider.addEventHandler(t,e,(function(){return t.allEvents(e)}))}))}},{key:"setDrmProviders",value:(I=(0,i.Z)(y().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,d=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={drmProviders:f.Types.array.of.instanceStrict(T.Z)},(0,f.typecheck)(this,"setDrmProviders",n,d),r=this.nativePlayer,this.drmProviders=t,e.next=5,r.getDrmCapabilities();case 5:for(i=e.sent,o=i.keySystems,a=void 0===o?{}:o,s=t.length;s--;)l=null===(c=t[s])||void 0===c?void 0:c.type,p=l===D.DrmType.PRMNAGRA?a.NAGRA:a[null!=l?l:-1],(null===(u=!(null!=p&&p.supported))||void 0===u||u)&&t.splice(s,1);this.drmConfigurations=this.setDrmConfiguration();case 10:case"end":return e.stop()}}),e,this)}))),function(e){return I.apply(this,arguments)})},{key:"setDrmConfiguration",value:function(){var e,t=this.drmProviders,n=(e={},(0,r.Z)(e,D.DrmType.FAIRPLAY,{keySystem:D.DrmType.FAIRPLAY,getCertificate:function(e){var t;return null===(t=e.getFairPlayCertificate)||void 0===t?void 0:t.call(e)}}),(0,r.Z)(e,D.DrmType.WIDEVINE,{keySystem:D.DrmType.WIDEVINE,getCertificate:function(e){var t;return null===(t=e.getWidevineCertificate)||void 0===t?void 0:t.call(e)}}),(0,r.Z)(e,D.DrmType.PRMNAGRA,{keySystem:"NAGRA",getCertificate:function(e){var t;return null===(t=e.getNagraCertificate)||void 0===t?void 0:t.call(e)}}),e);return{keySystems:t.map((function(e){var t={individualizationUri:e.individualizationUri,keySystem:e.type,licenseRequestUri:e.licenseRequestUri,licenseRequestHeadersCallback:function(){return e.formatRequestHeadersList(e.processLicenseRequestHeaders())},serverCertificate:Promise.resolve(void 0)},r=n[e.type];if(r){var o=r.keySystem,a=r.getCertificate;t.keySystem=o,t.serverCertificate=(0,i.Z)(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a(e));case 1:case"end":return t.stop()}}),t)})))()}return t}))}}},{key:"getBufferSegmentDuration",value:function(){var e=0;if(this.playbackMetricsEventData){var t=this.playbackMetricsEventData.bufferedRange;t.end-this.lastKnownCurrentTime>0&&(e=t.end-this.lastKnownCurrentTime)}return e}},{key:"getLiveLatencyAmount",value:function(){var e=this.nativePlayer,t=e.positionPdt,n=e.isBehindLive,r=0;if(this.playbackMetricsEventData){var i=this.playbackMetricsEventData.seekableRange;n&&i.pdtEnd-t>0&&(r=i.pdtEnd-t)}return r}},{key:"getSegmentPosition",value:function(){return this.nativePlayer.positionPdt}},{key:"getPlaybackMetrics",value:function(){var e,t=this.nativePlayer,n=t.positionPdt,r=t.isLive,i=t.isBehindLive,o=t.variants,a=t.currentVariantIndex,s=!!r&&!i,c=this.getCurrentInterstitial();if(f.Check.nonEmptyObject(c)&&(this.adData.adMetadata.adPlayheadPosition=c.position?Math.floor(c.position):0,c.currentAsset)){var u=c.currentAsset,l=u.index,p=u.mediaId,d=this.getAdDataData(p,l);if(d){var y=d.adSlotData,h=void 0===y?Q.adSlotData:y;this.adData.adMetadata.adSlotData=h}}var v=(null==o?void 0:o[a])||{},g=v.averageBitrate,m=void 0===g?0:g,b=v.peakBitrate,T=void 0===b?0:b,S=m/1e3,P=(null===(e=this.networkMetricsEventData)||void 0===e?void 0:e.throughput)||0,E=this.getPlaybackState(),Z=this.getMaxAllowedVideoBitrate(),w=0,D=0;if(this.playbackMetricsEventData){var C=this.playbackMetricsEventData.seekableRange;w=this.lastKnownMainContentTime,D=C.pdtEnd}var A=this.getLiveLatencyAmount(),R=this.getBufferSegmentDuration();return new k.Z({currentBitrate:S,currentPlayhead:w,currentBitrateAvg:m,currentBitratePeak:T,currentThroughput:P,playheadProgramDateTime:n,seekableRangeEndProgramDateTime:D,isLiveEdge:s,bufferSegmentDuration:R,mediaBytesDownloaded:this.mediaBytesDownloaded,playbackState:E,segmentPosition:n,liveLatencyAmount:A,maxAllowedVideoBitrate:Z,adMetadata:this.adData.adMetadata})}},{key:"getCdnName",value:function(){var e,t;return null!==(e=null===(t=this.qos)||void 0===t?void 0:t.cdnName)&&void 0!==e?e:"null"}},{key:"getAudioBitrate",value:function(){var e=this.nativePlayer||{},t=e.audioRenditions,n=void 0===t?[]:t,r=e.currentAudioRenditionIndex,i=n[null!=r?r:-1];return null==i?void 0:i.averageBitrate}},{key:"getMaxAllowedVideoBitrate",value:function(){var e,t=null===(e=this.nativePlayer)||void 0===e?void 0:e.variants,n=null==t?void 0:t[t.length-1];return null==n?void 0:n.peakBitrate}},{key:"playbackStartedEvent",value:function(){var e=this.getPlaybackData();this.onPlaybackStarted(e)}},{key:"multivariantPlaylistFetchedEvent",value:function(e){if(f.Check.object(e)){var t=this.nativePlayer,n=t.isLive,r=t.isSlidingWindow,i=this.mediaStartBitrate,o=this.multivariantFetchedStartTime,a=e.id,s=e.playlist,c=s?s.url:e.url,u=s?s.priority:1;if(f.Check.assigned(a)&&a!==this.melStatic.AssetIds.MAIN_CONTENT)return;var l,p=this.getPlaybackStartupData(),d=(0,v.Z)(c),y=d.host,h=d.path;l=n&&r?D.PlaylistType.SLIDE:D.PlaylistType.COMPLETE;var g=new R.Z({host:y,path:h,status:x.FetchStatus.completed,method:x.HttpMethod.get});this.emit(m.Z.UpdateAdEngine,u),this.onMultivariantPlaylistFetched(H(H({},p),{},{mediaStartBitrate:i,playlistLiveType:l,serverRequest:g,multivariantFetchedStartTime:o,multivariantFetchedDuration:o?Date.now()-o:void 0}))}}},{key:"variantPlaylistFetchedEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rendition,n=void 0===t?{}:t,r=e.serverRequest,i=void 0===r?{}:r,o=n.url,a=(0,v.Z)(o),s=a.host,c=a.path,u=this.getCurrentVariant(),l=this.lastKnownMainContentTime;this.setAdPlayheadPosition(),this.setAdSlotData();var p=u.averageBitrate,d=u.bitrate,y=u.resolution,f=new R.Z(H(H({},i),{},{host:s,path:c,method:x.HttpMethod[(i.method||"get").toLowerCase()],status:(0,F.Z)(i.fetchStatus),networkType:x.NetworkType.unknown,serverIP:i.serverIp,error:void 0})),h=H({},n),g=this.playlistCache[o];g&&(g.event=H(H({},e),{},{playlistAverageBandwidth:p,playlistBandwidth:d,playlistResolution:y,serverRequest:f,playheadPosition:l,details:h}))}},{key:"playbackReadyEvent",value:function(){var e=this.mediaStartBitrate,t=this.readyPlayerStartTime,n=this.getPlaybackStartupData();this.onPlaybackReady(H(H({},n),{},{mediaStartBitrate:e,readyPlayerStartTime:t,readyPlayerDuration:t?Date.now()-t:0})),this.isReady=!0}},{key:"allEvents",value:(P=(0,i.Z)(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.capturePauseLogs&&this.pauseLogs.push(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return P.apply(this,arguments)})},{key:"mediaElementStateChangedEvent",value:(d=(0,i.Z)(y().mark((function e(t){var n,r,i,o,a,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.MediaElementStates,i=(r=t||{}).mediaElementState,o=r.lastMediaElementState,a=this.getPlaybackData(),o!==n.PAUSED||i!==n.PLAYING){e.next=8;break}return e.next=6,(0,K.Z)(1e3);case 6:!this.pauseLogs.includes(z.SEEKING_STARTED)&&(s=x.PlaybackResumedCause.user,this.onPlaybackResumed(H(H({},a),{},{cause:s})),this.resetPauseLogCapture());case 8:if(o!==n.PLAYING||i!==n.PAUSED){e.next=14;break}return this.capturePauseLogs=!0,e.next=12,(0,K.Z)(1e3);case 12:!this.pauseLogs.length&&(s=this.isApplicationBackgrounded?x.PlaybackPausedCause.applicationBackgrounded:this.isBuffering?x.PlaybackPausedCause.stall:x.PlaybackPausedCause.user,this.onPlaybackPaused(H(H({},a),{},{cause:s})));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"playbackInitializedEvent",value:function(){var e=this.getPlaybackStartupData(),t=e.variant,n=e.audio,r=void 0===n?{}:n,i=e.subtitle,o=void 0===i?{}:i,a=e.playlistAudioTrackType,s=e.playlistTimedTextTrackType,c=this.heartbeatData,u=this.initializePlayerDuration,l=this.initializePlayerStartTime;this.heartbeatData=H(H({},c),{},{playlistAudioChannels:t.audioChannels,playlistAudioCodec:t.audioCodec,playlistAudioLanguage:r.language,playlistAudioName:r.name,playlistSubtitleLanguage:o.language,playlistSubtitleName:o.name,subtitleVisibility:o.forced,playlistAudioTrackType:a,playlistTimedTextTrackType:s}),this.onPlaybackInitialized(H(H({},e),{},{initializePlayerDuration:u,initializePlayerStartTime:l}))}},{key:"drmKeyRequestedEvent",value:function(){this.fetchLicenseStartTime=Date.now()}},{key:"drmKeyFetchedEvent",value:function(e){var t=this.getPlaybackStartupData(),n=this.fetchLicenseStartTime,r=e||{},i=r.url,o=void 0===i?"":i,a=r.keyID,s=(0,v.Z)(o),c=s.host,u=s.path,l=new R.Z({host:c,path:u,status:x.FetchStatus.completed,method:x.HttpMethod.get});this.onDrmKeyFetched(H(H({},t),{},{drmKeyId:a,serverRequest:l,fetchLicenseStartTime:n,fetchLicenseDuration:n?Date.now()-n:0}))}},{key:"successfulPlaylistLoad",value:function(e){var t=(e||{}).playlist;t&&(this.currentStreamUrl=t.url,t.tracking&&this.onSuccessfulPlaylistLoad(t))}},{key:"multivariantPlaylistRequest",value:function(e){var t=this.playbackStartupEventData,n=e||{},r=n.assetType,i=n.playlist;if([x.PresentationType.bumper,x.PresentationType.ad,x.PresentationType.main].includes(r)&&(this.currentMultivariantPlaylistRequest=e),null!=i&&i.tracking){var o=i.tracking.qos,a=o?o.cdnVendor:void 0;this.qos=o,null==t||t.fallbackAttempt(a),null!=t&&t.isCdnFallback&&(t.setQosData(o),this.onPlaybackReattempt(t))}this.multivariantFetchedStartTime=Date.now()}},{key:"multivariantPlaylistFallback",value:function(e){var t=this.playbackStartupEventData,n=(e||{}).playlist;null!=n&&n.tracking&&t&&(t.playbackError=x.QoePlaybackError.unknown,t.fallbackFailed())}},{key:"setAdPlayheadPosition",value:function(){var e=this.nativePlayer.currentInterstitial;e&&(this.adData.adMetadata.adPlayheadPosition=e.position?Math.floor(e.position):0)}},{key:"playbackSeekStartedEvent",value:function(e){var t=this.nativePlayer.isLive,n=e||{},r=n.currentTime,i=void 0===r?0:r,o=n.targetPosition,a=void 0===o?0:o,s=this.seekData||{},c=s.seekCause,u=void 0===c?x.PlaybackSeekCause.app:c,l=s.seekSize,p=this.getLiveLatencyAmount(),d=this.getSegmentPosition(),y=this.lastKnownMainContentTime;this.setAdPlayheadPosition(),this.setAdSlotData();var f,h,v=Math.floor(a-i),g=1e3*Math.abs(v);v<0?(f=x.PlayerSeekDirection.backward,h=t?x.SeekDirection.fromLiveEdge:void 0):0===v?f=x.PlayerSeekDirection.same:(f=x.PlayerSeekDirection.forward,h=t?x.SeekDirection.toLiveEdge:void 0),this.seekData&&(this.seekData.seekDistance=g,this.seekData.distance=v),this.onPlaybackSeekStarted(H(H({},e),{},{playerSeekDirection:f,seekSize:l,seekDistance:g,playheadPosition:y,cause:u,seekDirection:h,segmentPosition:d,liveLatencyAmount:p}))}},{key:"playbackSeekEndedEvent",value:(l=(0,i.Z)(y().mark((function e(){var t,n,r,i,o,a,s,c,u,l,p,d,f,h;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.nativePlayer,n=t.isLive,r=this.seekData||{},i=r.seekCause,o=void 0===i?x.PlaybackSeekCause.app:i,a=r.seekDistance,s=void 0===a?0:a,c=r.distance,u=void 0===c?0:c,l=this.getLiveLatencyAmount(),p=this.getSegmentPosition(),d=this.lastKnownMainContentTime,this.setAdPlayheadPosition(),this.setAdSlotData(),u<0?(f=x.PlayerSeekDirection.backward,h=n?x.SeekDirection.fromLiveEdge:void 0):0===u?f=x.PlayerSeekDirection.same:(f=x.PlayerSeekDirection.forward,h=n?x.SeekDirection.toLiveEdge:void 0),this.onPlaybackSeekEnded({playerSeekDirection:f,seekDistance:s,playheadPosition:d,cause:o,seekDirection:h,segmentPosition:p,liveLatencyAmount:l});case 9:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"playbackErrorLocker",value:(n=(0,i.Z)(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(n=(t||{}).fatal)||!n){e.next=5;break}this.fatalErrorPromise=this.playbackErrorEvent(t),e.next=7;break;case 5:return e.next=7,this.playbackErrorEvent(t);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"playbackErrorEvent",value:(t=(0,i.Z)(y().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,d,h,v,m,b,T,k,S,P;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t||{}).fatal,i=void 0!==r&&r,o=n.message,a=this.nativePlayer,s=a.currentPDT,c=this.getLiveLatencyAmount(),u=this.lastKnownMainContentTime,this.setAdPlayheadPosition(),this.setAdSlotData(),l=this.adData,p=l.data,d=void 0===p?{}:p,h=l.adMetadata,v=h.adPodData,m=h.adPodPlacement,b=this.getAdMediaId(),T=d[b]||Q,k=T.adSlotData,S=(0,C.Z)(t),!i){e.next=20;break}if("DRM_FAILED"===t.error&&(P=this.constructErrorCaseFromDssHlsError(t),this.emit(g.Z.MediaFailure,P)),!f.Check.assigned(this.listener)){e.next=18;break}return this.onPlaybackError({isFatal:i,errorName:S,errorMessage:o,errorLevel:x.ErrorLevel.error,playheadPosition:u,segmentPosition:s,liveLatencyAmount:c,adSlotData:k,adPodData:v,adPodPlacement:m}),e.next=17,this.playbackEndedEvent({eventData:{errorName:S,errorDetail:o},cause:x.PlaybackExitedCause.error});case 17:this.removeListener(this.listener);case 18:e.next=21;break;case 20:f.Check.assigned(this.listener)&&this.onPlaybackError({isFatal:!1,errorName:S,errorMessage:o,errorLevel:x.ErrorLevel.warn,playheadPosition:u,segmentPosition:s,liveLatencyAmount:c,adSlotData:k,adPodData:v,adPodPlacement:m});case 21:return e.abrupt("return",void 0);case 22:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"seekableRangeChangedEvent",value:function(e){var t=(e||{}).pdtEnd;this.seekableRangeEndProgramDateTime=t}},{key:"bitrateChangedEvent",value:function(e){if(this.networkMetricsEventData=e,this.isReady){var t=this.getLiveLatencyAmount(),n=this.getSegmentPosition(),r=this.lastKnownMainContentTime;this.setAdPlayheadPosition(),this.setAdSlotData();var i=e.currentVariant||{},o=i.averageBitrate,a=void 0===o?0:o,s=i.peakBitrate,c=void 0===s?0:s;this.bitrateAvg>0&&this.bitrateAvg!==a&&this.onBitrateChanged(H(H({},e),{},{bitrateAvg:a,bitratePeak:c,playheadPosition:r,segmentPosition:n,liveLatencyAmount:t})),this.bitrateAvg=a}}},{key:"subtitleChangedEvent",value:function(e){var t=(e||{}).currentSubtitleRendition,n=this.nativePlayer.subtitleRenditions,r=(void 0===n?[]:n)[t]||{},i=r.language,o=r.name,a=r.forced,s=(0,O.getTrackTypes)({subtitle:r}).playlistTimedTextTrackType;this.heartbeatData.playlistSubtitleLanguage=null!=i?i:this.heartbeatData.playlistSubtitleLanguage,this.heartbeatData.playlistSubtitleName=null!=o?o:this.heartbeatData.playlistSubtitleName,this.heartbeatData.subtitleVisibility=null!=a?a:this.heartbeatData.subtitleVisibility,this.heartbeatData.playlistTimedTextTrackType=null!=s?s:this.heartbeatData.playlistTimedTextTrackType,this.onSubtitleChanged()}},{key:"audioChangedEvent",value:function(e){if(this.isReady){var t=(e||{}).currentAudioRendition,n=this.nativePlayer.audioRenditions,r=(void 0===n?[]:n)[t]||{},i=r||{},o=i.channels,a=i.codec,s=i.language,c=i.name,u=o>=0?parseInt(o,10):void 0,l=(0,O.getTrackTypes)({audio:r}).playlistAudioTrackType;this.heartbeatData.playlistAudioChannels=null!=u?u:this.heartbeatData.playlistAudioChannels,this.heartbeatData.playlistAudioCodec=null!=a?a:this.heartbeatData.playlistAudioCodec,this.heartbeatData.playlistAudioLanguage=null!=s?s:this.heartbeatData.playlistAudioLanguage,this.heartbeatData.playlistAudioName=null!=c?c:this.heartbeatData.playlistAudioName,this.heartbeatData.playlistAudioTrackType=null!=l?l:this.heartbeatData.playlistAudioTrackType,this.onAudioChanged()}}},{key:"rebufferingStartedEvent",value:function(){this.rebufferingDuration=new Date,this.isBuffering=!0;var e=this.getPlaybackData();this.bufferType=e.bufferType,this.onRebufferingStarted(e)}},{key:"rebufferingEndedEvent",value:function(){var e,t;this.isBuffering=!1;var n=this.getPlaybackData(),r=Date.now()-(null!==(e=null===(t=this.rebufferingDuration)||void 0===t?void 0:t.getTime())&&void 0!==e?e:0);this.onRebufferingEnded(H(H({},n),{},{duration:r,bufferType:n.bufferType?n.bufferType:this.bufferType})),this.bufferType=void 0}},{key:"snapshotCreated",value:function(){this.onSnapshotCreated({})}},{key:"adBeaconError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.serverRequest,n=t||{},r=n.host,i=n.path;this.onAdBeaconError({error:x.QoePlaybackError.adBeaconError,errorLevel:x.ErrorLevel.info,applicationContext:x.ApplicationContext.ad,errorDetail:"https://".concat(r).concat(i)})}},{key:"adRequestedError",value:function(e){var t=(e||{}).serverRequest||{},n=t.host,r=t.path;this.onAdRequestedError({error:x.QoePlaybackError.adServerError,errorLevel:x.ErrorLevel.error,applicationContext:x.ApplicationContext.ad,errorDetail:"https://".concat(n).concat(r)})}},{key:"adPodRequested",value:function(e){var t=e.interstitialMetadata,n=t.placement,r=t.midRollIndex,i=x.PodPosition[n.toLowerCase()];if(i){var o={midrollIndex:r,podPosition:i};this.onAdPodRequested({adPodPlacement:o})}}},{key:"adPodFetched",value:function(e){var t=e.serverRequest,n=e.startTimestamp,r=e.interstitialMetadata.placement,i=void 0===r?"":r;if(x.PodPosition[i.toLowerCase()]){var o=new R.Z(H(H({},t),{},{method:x.HttpMethod[(t.method||x.HttpMethod.post).toLowerCase()],networkType:x.NetworkType.unknown,status:(0,F.Z)(t.fetchStatus),serverIP:t.serverIp,error:void 0}));this.processAdPodData(e);var a=this.adData.adMetadata,s=a.adPodData,c=a.adPodPlacement;this.onAdPodFetched({adPodData:s,adPodPlacement:c,serverRequest:o,startTimestamp:n})}}},{key:"adMultivariantFetched",value:function(e){var t=e.serverRequest,n=e.startTimestamp,r=e.interstitialMetadata,i=r.placement,o=void 0===i?"":i,a=r.slotNumber,s=r.adDuration,c=r.adId;if(x.PodPosition[o.toLowerCase()]&&c){var u=new R.Z(H(H({},t),{},{method:x.HttpMethod[t.method.toLowerCase()],networkType:x.NetworkType.unknown,status:(0,F.Z)(t.fetchStatus),serverIP:t.serverIp,error:void 0})),l=(this.getAdDataByMediaId({adMediaId:c,plannedLength:s,slotNumber:a})||{}).adSlotData,p=this.adData.adMetadata,d=p.adPodData,y=p.adPodPlacement;this.onAdMultivariantFetched({adPodData:d,adPodPlacement:y,adSlotData:l,serverRequest:u,startTimestamp:n})}}},{key:"getAdDataByMediaId",value:function(e){var t,n=e.adMediaId,r=e.plannedLength,i=e.slotNumber,o=this.getAdDataData(n,i);null!==(t=o)&&void 0!==t||(o={adSubtitleData:{subtitleVisibility:!1},adSlotData:{adMediaId:n,plannedLength:f.Check.assigned(r)?Math.floor(r):void 0,slotNumber:i||0}});var a=this.getMetadataKey(n,i);return this.adData.data[a]=o,o}},{key:"adVariantFetched",value:function(e){var t,n=(null===(t=this.nativePlayer)||void 0===t?void 0:t.areSubtitlesEnabled)||!1,r=e.serverRequest,i=e.startTimestamp,o=e.assetData,a=e.interstitialMetadata,s=a.placement,c=void 0===s?"":s,u=a.slotNumber,l=a.adDuration,p=a.adId;if(x.PodPosition[c.toLowerCase()]&&p){var d=new R.Z(H(H({},r),{},{method:x.HttpMethod[r.method.toLowerCase()],networkType:x.NetworkType.unknown,status:(0,F.Z)(r.fetchStatus),serverIP:r.serverIp,error:void 0})),y=o.mediaSegmentType,f=o.codec,h=o.range,v=o.bitrate,g=o.averageBitrate,m=o.resolution,b=o.frameRate,T=o.channels,k=o.language,S=o.name,P=this.getAdDataByMediaId({adMediaId:p,plannedLength:l,slotNumber:u})||{},E=P.adSlotData,Z=P.adVideoData,w=P.adAudioData,D=P.adSubtitleData,C=x.MediaSegmentTypeMap[y];switch(C){case x.MediaSegmentType.video:Z={playlistVideoCodec:f,playlistVideoRange:h,videoBitrate:v,videoAverageBitrate:g,playlistResolution:m,playlistFrameRate:b},P.adVideoData=Z;break;case x.MediaSegmentType.audio:w={playlistAudioChannels:parseInt(T,10),playlistAudioCodec:f,playlistAudioLanguage:k,playlistAudioName:S},P.adAudioData=w;break;case x.MediaSegmentType.subtitle:D={subtitleVisibility:n,playlistSubtitleLanguage:k,playlistSubtitleName:S},P.adSubtitleData=D;break;default:this.logger.error(this.toString(),"Unknown mediaSegmentType: ".concat(y))}var A=this.adData.adMetadata,O=A.adPodData,I=A.adPodPlacement;this.onAdVariantFetched({adPodPlacement:I,adPodData:O,adSlotData:E,serverRequest:d,mediaSegmentType:C,adVideoData:Z,adAudioData:w,adSubtitleData:D,startTimestamp:i})}}},{key:"adPlaybackStarted",value:function(e){var t,n=e.asset,i=n.mediaId,o=n.duration,a=n.index,s=n.type,c=n.subtype,u=this.getCurrentInterstitial().placement,l=void 0===u?"":u,p=x.PodPosition[l.toLowerCase()],d=this.AssetTypes,y=(t={},(0,r.Z)(t,d.SLUG,x.PresentationType.slug),(0,r.Z)(t,d.AD,x.PresentationType.ad),(0,r.Z)(t,d.BUMPER,x.PresentationType.bumper),(0,r.Z)(t,d.CONTENT_PROMO,x.PresentationType.promo),t),h=y[s]||y[c]||x.PresentationType.ad;if(this.presentationType!==h&&this.changePresentationType(h),p&&i&&a){var v=this.getAdDataData(i,a)||{},g=v.adVideoData,m=v.adAudioData,b=v.adSubtitleData;this.adData.adMetadata.mediaId=i,this.adData.adMetadata.adSlotData={adMediaId:i,plannedLength:f.Check.assigned(o)?Math.floor(o):void 0,slotNumber:a||0},this.onAdPlaybackStarted({adPodPlacement:this.adData.adMetadata.adPodPlacement,adPodData:this.adData.adMetadata.adPodData,adSlotData:this.adData.adMetadata.adSlotData,adVideoData:g,adAudioData:m,adSubtitleData:b})}}},{key:"adPlaybackEnded",value:function(e){var t,n,r,i,o=e||{},a=o.asset,s=o.playbackError,c=o.playbackErrorDetail,u=void 0===c?"":c,l=o.cause,p=this.getCurrentInterstitial(),d=p.currentAsset,y=p.placement,f=void 0===y?"":y,h=d||a||{},v=h.mediaId,g=h.index,m=this.adData.adMetadata,b=m.adPodPlacement,T=m.adPodData,k=m.adSlotData,S={errorName:s,errorMessage:u},P=l;if(this.isAdSkipped&&this.onPlaybackSeekEnded({cause:x.PlaybackSeekCause.skip,playerSeekDirection:x.PlayerSeekDirection.forward,seekDistance:0,playheadPosition:this.lastKnownMainContentTime,segmentPosition:this.getSegmentPosition(),liveLatencyAmount:this.getLiveLatencyAmount()}),x.PodPosition[f.toLowerCase()]&&v){null!==(t=P)&&void 0!==t||(P=x.PlaybackExitedCause.playedToEnd);var E=this.getAdDataData(v,g);if(E){var Z=Object.assign({},E);n=Z.adVideoData,r=Z.adAudioData,i=Z.adSubtitleData}this.onAdPlaybackEnded({adPodPlacement:b,adPodData:T,adSlotData:k,adVideoData:n,adAudioData:r,adSubtitleData:i,cause:P,adErrorData:S});var w=this.getMetadataKey(v,g);delete this.adData.data[w]}}},{key:"adPlaybackSkipped",value:function(){var e=this.adData.adMetadata;this.isAdSkipped=!0,this.setAdPlayheadPosition(),this.setAdSlotData(),this.onPlaybackSeekStarted({cause:x.PlaybackSeekCause.skip,playerSeekDirection:x.PlayerSeekDirection.forward,seekDistance:0,playheadPosition:this.lastKnownMainContentTime,segmentPosition:this.getSegmentPosition(),liveLatencyAmount:this.getLiveLatencyAmount(),adMetadata:e})}},{key:"adPodStarted",value:function(){var e=this.getCurrentInterstitial(),t=e.placement,n=void 0===t?"":t,r=e.duration,i=e.position,o=x.InterstitialPlacement.preroll;this.presentationType=x.PresentationType.ad,n===D.InsertionPointPlacement.MIDROLL&&(o=x.InterstitialPlacement.midroll),n===D.InsertionPointPlacement.BUMPER_PREROLL&&(this.presentationType=x.PresentationType.bumper),this.changePresentationType(this.presentationType),this.interstitialSessionDuration=Math.floor(1e3*r),this.onInterstitialPlaybackStarted({interstitialType:x.InterstitialType.promo,interstitialPlacement:o,interstitialId:this.getAdInterstitialId(),interstitialPlannedLength:this.interstitialSessionDuration,interstitialPlayhead:i})}},{key:"adPodEnded",value:function(e){this.changePresentationType();var t,n=e||{},r=n.duration,i=n.position,o=void 0===i?0:i,a=n.cause,s=n.message,c=r||this.interstitialSessionDuration,u=a?x.InterstitialEndedCause.error:void 0;s&&(t={errorName:(0,C.Z)(e),errorMessage:s}),u||(u=this.isAdSkipped?x.InterstitialEndedCause.skip:x.InterstitialEndedCause.playedToEnd,this.isAdSkipped=!1),this.onInterstitialPlaybackEnded({interstitialType:x.InterstitialType.promo,interstitialPlacement:x.InterstitialPlacement.postroll,interstitialId:this.getAdInterstitialId(),interstitialPlannedLength:c,interstitialPlayhead:o,cause:u,errorData:t})}},{key:"segmentPlayingEvent",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null===(e=t.segment)||void 0===e?void 0:e.programDateTimeStart;this.segmentPosition=f.Check.number(n)?Math.floor(n):null,this.mediaSegmentType=x.MediaSegmentType[t.type]}},{key:"sourceBufferAppendStartedEvent",value:function(e){var t;f.Check.number(null==e||null===(t=e.segment)||void 0===t?void 0:t.byteSize)&&(this.mediaBytesDownloaded+=e.segment.byteSize)}},{key:"contentDownloadFinishedEvent",value:function(e){var t=e.startTime,n=e.endTime;this.mediaDownloadTotalCount++,this.mediaDownloadTotalTime+=n-t}},{key:"playbackMetricsChanged",value:function(e){this.playbackMetricsEventData=e,this.setLastKnownTimes(e)}},{key:"videoSegmentLoaded",value:function(){this.readyPlayerStartTime||(this.readyPlayerStartTime=Date.now())}},{key:"mediaPlaylistRequested",value:function(e){var t=e.url;e.assetId===W&&(this.playlistCache[t]={variantFetchedStartTime:Date.now()})}},{key:"mediaPlaylistLoaded",value:function(e){var t=e.url,n=this.playlistCache[t]||{},r=n.variantFetchedStartTime,i=void 0===r?0:r,o=n.event;o&&(this.onVariantPlaylistFetched(H(H({},o),{},{variantFetchedStartTime:i,variantFetchedDuration:Date.now()-i})),delete this.playlistCache[t])}},{key:"getAdInterstitialId",value:function(){return this.getAdMediaId()||q.DEFAULT_ZERO_GUID}},{key:"timeUpdated",value:function(e){this.setLastKnownTimes(e,1e3)}},{key:"setupXhrCallback",value:function(){var e=this.nativePlayer,t=this.accessToken,n=this.DataTypes,r=this.adEngineData,i=(void 0===r?{}:r).ssess;e.xhrSetupCallback=function(e,r,o){if(n){var a=o===n.KEY,s=(0,h.Z)(r)&&o===n.CHUNK;e.withCredentials=!1,e.readyState||e.open("GET",r,!0),a?e.setRequestHeader(_.AUTHORIZATION,t):s&&i&&(e.withCredentials=!0,e.setRequestHeader("ssess",i))}}}},{key:"constructErrorCaseFromDssHlsError",value:function(e){var t=E.Z[e.cause]||E.Z.default||{},n=t.code,r=t.exceptionData;return(0,U.Kf)({code:n,exceptionData:r})}},{key:"getCurrentVariant",value:function(){var e=this.nativePlayer,t=e.variants,n=void 0===t?[]:t,r=n[e.currentVariantIndex]||{},i=n[n.length-1]||{},o=i.encodedFrameRate,a=i.peakBitrate,s=r.peakBitrate,c=r.encodedFrameRate,u=r.audioCodecs,l=r.averageBitrate,p=r.videoCodec,d=r.videoRangeSubType;return null===this.mediaStartBitrate&&(this.mediaStartBitrate=l),{resolution:(0,O.getResolutionString)(r),bitrate:s,averageBitrate:l,frameRate:c,audioCodec:f.Check.array(u)?u[0]:void 0,videoCodec:p,videoRange:d,maxAllowedVideoBitrate:a,playlistResolution:(0,O.getResolutionString)(i),playlistFrameRate:o}}},{key:"getAudioRendition",value:function(){var e=this.nativePlayer||{},t=e.audioRenditions,n=void 0===t?[]:t,r=e.currentAudioRenditionIndex,i=n[null!=r?r:-1]||{}||{},o=i.averageBitrate,a=i.channels,s=i.codec;return{audioRendition:{name:i.name,language:i.language},averageBitrate:o,audioChannels:a,audioCodec:s}}},{key:"getSubtitleRendition",value:function(){var e=this.nativePlayer,t=e.subtitleRenditions;return(void 0===t?[]:t)[e.currentSubtitleRenditionIndex]||{}}},{key:"getBufferType",value:function(){var e,t=this.nativePlayer.mediaElementState,n=this.MediaElementStates||{},r=n.ATTACHING,i=n.PAUSED,o=n.BUFFERING,a=n.SEEKING;if(t)switch(t){case r:e=x.BufferType.initializing;break;case o:e=x.BufferType.buffering;break;case a:e=x.BufferType.seeking;break;case i:e=x.BufferType.resuming}return e}},{key:"getPlaybackState",value:function(){var e,t,n=this.MediaElementStates;switch(null===(e=this.nativePlayer)||void 0===e?void 0:e.mediaElementState){case n.BUFFERING:case n.DETACHED:case n.DETACHING:case n.ATTACHING:case n.ATTACHED:t=x.PlaybackState.buffering;break;case n.ENDED:t=x.PlaybackState.finished;break;case n.PAUSED:t=x.PlaybackState.paused;break;case n.PLAYING:t=x.PlaybackState.playing;break;case n.SEEKING:t=x.PlaybackState.seeking}return t}},{key:"getPlaybackData",value:function(){var e=this.currentStreamUrl,t=this.nativePlayer.positionPdt,n=this.getLiveLatencyAmount(),r=this.lastKnownMainContentTime;this.setAdPlayheadPosition(),this.setAdSlotData();var i=this.getAudioRendition().averageBitrate,o=this.getCurrentVariant();return{playheadPosition:r,streamUrl:e,videoBitrate:o.bitrate,videoAverageBitrate:o.averageBitrate,audioBitrate:i,maxAllowedVideoBitrate:o.maxAllowedVideoBitrate,segmentPosition:t,liveLatencyAmount:n,bufferType:this.getBufferType()}}},{key:"getPlaybackStartupData",value:function(){var e=this.currentStreamUrl,t=this.getBufferSegmentDuration(),n=this.lastKnownMainContentTime;this.setAdPlayheadPosition(),this.setAdSlotData();var r,i=this.getAudioRendition(),o=i.audioRendition,a=i.audioChannels,s=this.getSubtitleRendition(),c=this.getCurrentVariant(),u=c.bitrate,l=c.averageBitrate,p=c.resolution,d=c.frameRate,y=c.audioCodec,h=c.videoCodec,v=c.videoRange;if(f.Check.string(a)){var g=/\d+/.exec(a);g&&(r=Number(g[0]))}else f.Check.number(a)&&(r=a);var m=new w.Z({bandwidth:u,resolution:p,audioChannels:r,videoRange:v,videoCodec:h,audioCodec:y,averageBandwidth:l,frameRate:d}),b=(0,O.getTrackTypes)({audio:o,subtitle:s});return{variant:m,audio:o,subtitle:s,streamUrl:e,playheadPosition:n,bufferSegmentDuration:t,playlistAudioTrackType:b.playlistAudioTrackType,playlistTimedTextTrackType:b.playlistTimedTextTrackType}}},{key:"getHeartbeatData",value:function(){return this.heartbeatData}},{key:"changePresentationType",value:function(e){var t,n=null===(t=this.nativePlayer)||void 0===t?void 0:t.areSubtitlesEnabled,r=this.getAudioRendition(),i=r.audioRendition,o=r.averageBitrate,a=r.audioChannels,s=this.getCurrentVariant(),c=s.bitrate,u=s.averageBitrate,l=this.getSubtitleRendition(),p=(0,O.getTrackTypes)({audio:i,subtitle:l}),d=p.playlistAudioTrackType,y=p.playlistTimedTextTrackType;this.presentationType=e||x.PresentationType.main,this.onPresentationTypeChanged({presentationType:this.presentationType,areSubtitlesEnabled:n,videoBitrate:c,videoAverageBitrate:u,audioBitrate:o,audioChannels:parseInt(a,10),audio:i,subtitle:l,adMetadata:this.adData.adMetadata,playlistAudioTrackType:d,playlistTimedTextTrackType:y})}},{key:"processAdPodData",value:function(e){var t=e.interstitialMetadata,n=void 0===t?{}:t,i=e.response,o=(void 0===i?{}:i).pods,a=void 0===o?[]:o,s=n.placement,c=void 0===s?"":s,u=n.midRollIndex,l=n.totalDuration,p=n.slotCount,d=x.PodPosition[c.toLowerCase()];this.adData.adMetadata=Q,this.adData.adMetadata.adPodData={plannedSlotCount:p,plannedLength:f.Check.number(l)?Math.floor(l):void 0},this.adData.adMetadata.adPodPlacement={midrollIndex:u,podPosition:d},this.adData.data=a.reduce((function(e,t){var n=t.ads;return(void 0===n?[]:n).reduce((function(e,t){var n=t.creative,i=(n=void 0===n?{}:n).video,o=void 0===i?{}:i,a=t["slot-number"],s=o["media-id"],c=o["media-url"],u=o["duration-ms"];return H(H({},e),{},(0,r.Z)({},s,{adSubtitleData:{subtitleVisibility:!1},adSlotData:{adMediaId:s,plannedLength:f.Check.number(u)?Math.floor(u):void 0,slotNumber:a||0},mediaUrl:c}))}),e)}),{})}},{key:"getAdMediaId",value:function(){var e=this,t=this.adData.data,n=void 0===t?{}:t;return Object.keys(n).find((function(t){var r,i,o;return null===(r=e.currentMultivariantPlaylistRequest)||void 0===r||null===(i=r.url)||void 0===i?void 0:i.includes(null===(o=n[t])||void 0===o?void 0:o.mediaUrl)}))}},{key:"resetPauseLogCapture",value:function(){this.capturePauseLogs=!1,this.pauseLogs=[]}},{key:"setLastKnownTimes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e||{},r=n.mainContentTime,i=void 0===r?0:r,o=n.currentTime,a=void 0===o?0:o;this.lastKnownMainContentTime=i*t,this.lastKnownCurrentTime=a*t}},{key:"toString",value:function(){return"SDK.Media.PlayerAdapter.MelHivePlayerAdapter"}}]),N}(P.Z))||N)||N},26662:function(e,t,n){"use strict";n.d(t,{getResolutionString:function(){return o},getTrackTypes:function(){return a}}),n(41539),n(39714),n(92222);var r=n(28928),i=n(19546);function o(e){var t,n,r=null==e||null===(t=e.height)||void 0===t?void 0:t.toString(),i=null==e||null===(n=e.width)||void 0===n?void 0:n.toString();return r&&i?"".concat(i,"x").concat(r):null}function a(e){var t,n,o=e.audio,a=void 0===o?{}:o,s=e.subtitle,c=void 0===s?{}:s,u=i.TimedTextTrackType[null===(t=c.role)||void 0===t?void 0:t.toLowerCase()]||i.TimedTextTrackType.unknown;return{playlistAudioTrackType:a.role===r.AudioRole.NARRATION?i.AudioTrackType.descriptive:i.AudioTrackType[null===(n=a.role)||void 0===n?void 0:n.toLowerCase()]||i.AudioTrackType.unknown,playlistTimedTextTrackType:u}}},53158:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(15671),i=n(43144),o=(n(2707),n(69826),n(41539),n(19601),n(67682)),a=n(49976),s=n(62120),c=n(84961),u=n(28928),l=n(70825),p=n(25279),d=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({mediaSources:o.Types.array.of.instanceStrict(a.Z),trackingInfo:o.Types.object(),playlistType:o.Types.in(u.PlaylistType),availablePlaylistTypes:o.Types.array.of.in(u.PlaylistType),attributes:o.Types.instanceStrict(c.Z).optional,variants:o.Types.array.of.instanceStrict(s.Z).optional,audioRenditions:o.Types.array.of.object(l.AudioRenditionTypedef).optional,subtitleRenditions:o.Types.array.of.object(l.SubtitleRenditionTypedef).optional})};(0,o.typecheck)(this,n,arguments);var i=t.mediaSources,p=t.playlistType,d=t.availablePlaylistTypes,y=t.attributes,f=t.trackingInfo,h=t.variants,v=t.audioRenditions,g=t.subtitleRenditions;this.mediaSources=i.sort((function(e,t){return e.priority-t.priority})),this.mediaSourceIndex=0,this.trackingInfo=f,this.playlistType=p,this.availablePlaylistTypes=d,this.attributes=y,this.variants=h,this.audioRenditions=v,this.subtitleRenditions=g}return(0,i.Z)(e,[{key:"streamUri",get:function(){return this.mediaSources[this.mediaSourceIndex].url}},{key:"advanceNextSource",value:function(){return this.mediaSourceIndex+1<this.mediaSources.length&&(this.mediaSourceIndex++,!0)}},{key:"getTrackingData",value:function(e,t){var n={key:o.Types.in(p.aD).optional,priority:o.Types.number.optional};(0,o.typecheck)(this,"getTrackingData",n,arguments),e=e||p.aD.conviva;var r=this.getTrackingInfo(e),i=this.mediaSources.find((function(e){return e.priority===t})),a=(i=i||this.mediaSources[this.mediaSourceIndex]).primaryContent||{},s=a.tracking,c=s||{},u=c[e]||{};return Object.assign({},r,u)}},{key:"getTrackingInfo",value:function(e){var t={key:o.Types.in(p.aD)};return(0,o.typecheck)(this,"getTrackingInfo",t,arguments),this.trackingInfo[e]||{}}},{key:"toString",value:function(){return"SDK.Media.Playlist"}}]),e}()},12719:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var r,i=n(4942),o=n(84983).Z.qualityOfService,a=(r={},(0,i.Z)(r,o.playback,"1.26.0"),(0,i.Z)(r,o.playbackStartup,"1.30.0"),(0,i.Z)(r,o.error,"1.20.0"),(0,i.Z)(r,o.playbackAd,"1.13.0"),(0,i.Z)(r,o.playbackHeartbeat,"1.23.0"),(0,i.Z)(r,o.playbackSnapshot,"1.3.0"),(0,i.Z)(r,o.interstitial,"1.1.0"),(0,i.Z)(r,o.custom,"1.1.0"),r);function s(e){return a[e]||"1.4.0"}},96581:function(e,t,n){"use strict";n.d(t,{AM:function(){return D},Bu:function(){return q},Bv:function(){return k},EF:function(){return C},H6:function(){return h},HE:function(){return f},HG:function(){return S},J$:function(){return R},Jq:function(){return L},NA:function(){return j},Og:function(){return A},Om:function(){return O},Z_:function(){return M},_J:function(){return Z},_i:function(){return b},a6:function(){return d},eC:function(){return E},kS:function(){return w},m4:function(){return x},mT:function(){return P},mx:function(){return I},nY:function(){return g},r:function(){return m},rt:function(){return v},s4:function(){return T},sp:function(){return y},zC:function(){return N}});var r=n(67682),i=n(62120),o=n(70825),a=n(28928),s=n(73688),c=n(19546),u=n(67045),l=n(66165),p={adPodPlacement:r.Types.object(u.AdPodPlacementTypedef),adPodData:r.Types.object(u.AdPodDataTypedef),adSlotData:r.Types.object(u.AdSlotDataTypedef),adPlayheadPosition:r.Types.number,mediaId:r.Types.string.optional,adSubtitleData:r.Types.object(u.AdSubtitleDataTypedef).optional,adVideoData:r.Types.object(u.AdVideoDataTypedef).optional,adAudioData:r.Types.object(u.AdAudioDataTypedef).optional,mediaUrl:r.Types.string.optional},d=(r.Types.number.optional,{bitrateAvg:r.Types.number.optional,bitratePeak:r.Types.number.optional,playheadPosition:r.Types.number.optional,segmentPosition:r.Types.number.optional,liveLatencyAmount:r.Types.number.optional,adMetadata:r.Types.object(p).optional}),y={playlistLiveType:r.Types.in(a.PlaylistType).optional,serverRequest:r.Types.instanceStrict(s.Z).optional,playheadPosition:r.Types.number.optional,multivariantFetchedStartTime:r.Types.number.optional,multivariantFetchedDuration:r.Types.number.optional},f={cause:r.Types.in(c.PlaybackExitedCause).optional,error:r.Types.in(c.QoePlaybackError).optional,errorDetail:r.Types.nonEmptyString.optional,applicationContext:r.Types.in(c.ApplicationContext).optional,playheadPosition:r.Types.number.optional,segmentPosition:r.Types.number.optional,liveLatencyAmount:r.Types.number.optional,adMetadata:r.Types.object(p).optional},h={variant:r.Types.instanceStrict(i.Z).optional,audio:r.Types.object(o.AudioRenditionTypedef).optional,subtitle:r.Types.object(o.SubtitleRenditionTypedef).optional,startupBitrate:r.Types.number.optional,areSubtitlesVisible:r.Types.boolean.optional,streamUrl:r.Types.nonEmptyString.optional,playheadPosition:r.Types.number.optional,initializePlayerStartTime:r.Types.number.optional,initializePlayerDuration:r.Types.number.optional,playlistAudioTrackType:r.Types.in(c.AudioTrackType).optional,playlistTimedTextTrackType:r.Types.in(c.TimedTextTrackType).optional,playbackMode:r.Types.in(c.PlaybackMode).optional},v={cause:r.Types.in(c.PlaybackPausedCause).optional,playheadPosition:r.Types.number.optional,segmentPosition:r.Types.number.optional,liveLatencyAmount:r.Types.number.optional,adMetadata:r.Types.object(p).optional},g={bufferSegmentDuration:r.Types.number.optional,playheadPosition:r.Types.number.optional,readyPlayerStartTime:r.Types.number,readyPlayerDuration:r.Types.number},m={cause:r.Types.in(c.PlaybackResumedCause).optional,playheadPosition:r.Types.number.optional,segmentPosition:r.Types.number.optional,liveLatencyAmount:r.Types.number.optional,adMetadata:r.Types.object(p).optional},b={cause:r.Types.in(c.PlaybackSeekCause).optional,playerSeekDirection:r.Types.in(c.PlayerSeekDirection).optional,seekDistance:r.Types.number.optional,playheadPosition:r.Types.number.optional,segmentPosition:r.Types.number.optional,liveLatencyAmount:r.Types.number.optional,adMetadata:r.Types.object(p).optional,skipType:r.Types.in(c.SkipType).optional},T={cause:r.Types.in(c.PlaybackSeekCause).optional,playerSeekDirection:r.Types.in(c.PlayerSeekDirection).optional,seekDistance:r.Types.number.optional,seekDirection:r.Types.in(c.SeekDirection).optional,seekSize:r.Types.number.optional,playheadPosition:r.Types.number.optional,segmentPosition:r.Types.number.optional,liveLatencyAmount:r.Types.number.optional,adMetadata:r.Types.object(p).optional,skipType:r.Types.in(c.SkipType).optional},k={playheadPosition:r.Types.number.optional,videoBitrate:r.Types.number.optional,videoAverageBitrate:r.Types.number.optional,audioBitrate:r.Types.number.optional,maxAllowedVideoBitrate:r.Types.number.optional,segmentPosition:r.Types.number.optional,presentationType:r.Types.in(c.PresentationType).optional,liveLatencyAmount:r.Types.number.optional,adMetadata:r.Types.object(p).optional},S={bufferType:r.Types.in(c.BufferType).optional,duration:r.Types.number.optional,playheadPosition:r.Types.number.optional,segmentPosition:r.Types.number.optional,liveLatencyAmount:r.Types.number.optional,adMetadata:r.Types.object(p).optional},P={bufferType:r.Types.in(c.BufferType).optional,playheadPosition:r.Types.number.optional,segmentPosition:r.Types.number.optional,liveLatencyAmount:r.Types.number.optional,adMetadata:r.Types.object(p).optional},E={playlistAverageBandwidth:r.Types.number.optional,playlistBandwidth:r.Types.number.optional,playlistChannels:r.Types.nonEmptyString.optional,playlistName:r.Types.nonEmptyString.optional,playlistLanguage:r.Types.nonEmptyString.optional,mediaSegmentType:r.Types.in(c.MediaSegmentType).optional,playlistResolution:r.Types.nonEmptyString.optional,serverRequest:r.Types.instanceStrict(s.Z).optional,playheadPosition:r.Types.number.optional,variantFetchedStartTime:r.Types.number.optional,variantFetchedDuration:r.Types.number.optional},Z={presentationType:r.Types.in(c.PresentationType).optional,videoBitrate:r.Types.number.optional,videoAverageBitrate:r.Types.number.optional,audioBitrate:r.Types.number.optional,audioChannels:r.Types.number.optional,audioCodec:r.Types.nonEmptyString.optional,audio:r.Types.object(o.AudioRenditionTypedef).optional,subtitle:r.Types.object(o.SubtitleRenditionTypedef).optional,areSubtitlesVisible:r.Types.boolean.optional,adMetadata:r.Types.object(p).optional,playlistAudioTrackType:r.Types.in(c.AudioTrackType).optional,playlistTimedTextTrackType:r.Types.in(c.TimedTextTrackType).optional},w={error:r.Types.in(c.QoePlaybackError).optional,errorLevel:r.Types.in(c.ErrorLevel).optional,applicationContext:r.Types.in(c.ApplicationContext).optional,errorDetail:r.Types.nonEmptyString.optional,playheadPosition:r.Types.number.optional,segmentPosition:r.Types.number.optional,liveLatencyAmount:r.Types.number.optional,adMetadata:r.Types.object(p).optional},D=(r.Types.object().optional,{adPodPlacement:r.Types.object(u.AdPodPlacementTypedef).optional}),C={adPodPlacement:r.Types.object(u.AdPodPlacementTypedef).optional,adPodData:r.Types.object(u.AdPodDataTypedef).optional,serverRequest:r.Types.instanceStrict(s.Z).optional,startTimestamp:r.Types.number.optional},A={adPodPlacement:r.Types.object(u.AdPodPlacementTypedef).optional,adPodData:r.Types.object(u.AdPodDataTypedef).optional,adSlotData:r.Types.object(u.AdSlotDataTypedef).optional,serverRequest:r.Types.instanceStrict(s.Z).optional,startTimestamp:r.Types.number.optional},R={adPodPlacement:r.Types.object(u.AdPodPlacementTypedef).optional,adPodData:r.Types.object(u.AdPodDataTypedef).optional,adSlotData:r.Types.object(u.AdSlotDataTypedef).optional,serverRequest:r.Types.instanceStrict(s.Z).optional,mediaSegmentType:r.Types.in(c.MediaSegmentType).optional,adVideoData:r.Types.object(u.AdVideoDataTypedef).optional,adAudioData:r.Types.object(u.AdAudioDataTypedef).optional,adSubtitleData:r.Types.object(u.AdSubtitleDataTypedef).optional,startTimestamp:r.Types.number.optional},x={adPodPlacement:r.Types.object(u.AdPodPlacementTypedef).optional,adPodData:r.Types.object(u.AdPodDataTypedef).optional,adSlotData:r.Types.object(u.AdSlotDataTypedef).optional,adVideoData:r.Types.object(u.AdVideoDataTypedef).optional,adAudioData:r.Types.object(u.AdAudioDataTypedef).optional,adSubtitleData:r.Types.object(u.AdSubtitleDataTypedef).optional},O={adPodPlacement:r.Types.object(u.AdPodPlacementTypedef).optional,adPodData:r.Types.object(u.AdPodDataTypedef).optional,adSlotData:r.Types.object(u.AdSlotDataTypedef).optional,adVideoData:r.Types.object(u.AdVideoDataTypedef).optional,adAudioData:r.Types.object(u.AdAudioDataTypedef).optional,adSubtitleData:r.Types.object(u.AdSubtitleDataTypedef).optional,cause:r.Types.in(c.PlaybackExitedCause).optional,adErrorData:r.Types.object(u.AdErrorDataTypedef).optional},I={drmKeyId:r.Types.nonEmptyString.optional,serverRequest:r.Types.instanceStrict(s.Z).optional,fetchLicenseStartTime:r.Types.number,fetchLicenseDuration:r.Types.number},M={seekSize:r.Types.number,seekDirection:r.Types.in(c.SeekDirection).optional,seekCause:r.Types.in(c.PlaybackSeekCause).optional,seekDistance:r.Types.number.optional,distance:r.Types.number.optional,skipType:r.Types.in(c.SkipType).optional},j=(r.Types.nonEmptyString,{interstitialType:r.Types.in(c.InterstitialType),interstitialPlacement:r.Types.in(c.InterstitialPlacement),interstitialId:r.Types.nonEmptyString,interstitialPlannedLength:r.Types.number,interstitialPlayhead:r.Types.number}),L={interstitialType:r.Types.in(c.InterstitialType),interstitialPlacement:r.Types.in(c.InterstitialPlacement),interstitialId:r.Types.nonEmptyString,interstitialPlannedLength:r.Types.number,interstitialPlayhead:r.Types.number,cause:r.Types.in(c.PlaybackExitedCause),errorData:r.Types.object(u.AdErrorDataTypedef).optional},N={cdnName:r.Types.nonEmptyString,cdnVendor:r.Types.nonEmptyString,cdnWithOrigin:r.Types.nonEmptyString,error:r.Types.in(c.QoePlaybackError).optional,errorDetail:r.Types.nonEmptyString.optional},B={playbackSessionId:r.Types.nonEmptyString.optional},_={tracking:r.Types.object(B),adTracking:r.Types.instanceStrict(l.Z).optional},F={id:r.Types.nonEmptyString,version:r.Types.number},U={airingId:r.Types.nonEmptyString,alid:r.Types.object(F),avails:r.Types.array.of.object(F)},q={airing:r.Types.object(U),playbackRights:r.Types.object(_),playbackId:r.Types.nonEmptyString};r.Types.nonEmptyString},76073:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var r,i,o=n(54546),a=n(15861),s=n(15671),c=n(43144),u=n(53229),l=n(87757),p=n.n(l),d=(n(41539),n(39714),n(38880),n(67682)),y=n(74325),f=n(84983),h=n(9598),v=n(1206),g=n(87891),m=f.Z.orchestration.orchestrationApi,b=m,T=(r=h.Z.apiMethodDecorator.bind(null,b)({skipDustLogUtility:!0,paramTypes:{options:d.Types.object({query:d.Types.nonEmptyString,operationName:d.Types.nonEmptyString.warn,variables:d.Types.object().optional})}}),i=function(){function e(t){(0,s.Z)(this,e);var n={options:d.Types.object({orchestrationManager:d.Types.instanceStrict(y.Z),logger:d.Types.instanceStrict(g.Z)})};(0,d.typecheck)(this,n,arguments);var r=t.orchestrationManager,i=t.logger;this.orchestrationManager=r,this.logger=i,this.logger.info(this.toString(),"Created.")}var t;return(0,c.Z)(e,[{key:"query",value:(t=(0,a.Z)(p().mark((function e(t){var n,r,i,a,s,c,u,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,o.Z)(n.args,1),a=i[0],s=a.operationName,c=this.logger,u=s||"query",l=new v.Z({logger:c,source:this.toString(),urn:m.getOperationUrn(u),endpointKey:u,logTransaction:r}),e.prev=5,e.next=8,this.orchestrationManager.query(a,r);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(5),l.captureError(e.t0),e.t0;case 15:return e.prev=15,l.log(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[5,11,15,18]])}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Orchestration.OrchestrationApi"}}]),e}(),(0,u.Z)(i.prototype,"query",[r],Object.getOwnPropertyDescriptor(i.prototype,"query"),i.prototype),i)},74325:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=(n(41539),n(39714),n(67682)),u=n(87891),l=n(27216),p=n(87020),d=n(52662),y=n(62221),f=n(67230),h=n(580),v=n(25888),g=n(26957),m=n(47549),b=n(7607),T=function(){function e(t){(0,i.Z)(this,e);var n={options:c.Types.object({config:c.Types.instanceStrict(m.Z),client:c.Types.instanceStrict(b.Z),accessTokenProvider:c.Types.instanceStrict(l.Z),logger:c.Types.instanceStrict(u.Z)})};(0,c.typecheck)(this,n,arguments);var r=t.config,o=t.client,a=t.accessTokenProvider,s=t.logger;this.config=r,this.client=o,this.accessTokenProvider=a,this.logger=s,this.logger.log(this.toString(),"Created.")}var t,n,a,T,k;return(0,o.Z)(e,[{key:"query",value:(k=(0,r.Z)(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new f.Z(t),e.abrupt("return",this.client.query({request:r,accessToken:this.accessToken,logTransaction:n}));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return k.apply(this,arguments)})},{key:"registerDevice",value:(T=(0,r.Z)(s().mark((function e(t,n){var r,i,o,a,u,l,y,f,h,g,m,b,T,k,S,P,E,Z,w,D=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={options:c.Types.object({deviceMetadata:c.Types.instanceStrict(p.Z),userToken:c.Types.nonEmptyString.optional}),logTransaction:c.Types.instanceStrict(d.Z)},(0,c.typecheck)(this,"registerDevice",r,D),i=t.deviceMetadata,o=t.userToken,a=i.deviceFamily,u=i.applicationRuntime,l=i.deviceProfile,y=i.attributes,f=i.devicePlatformId,h=y.osDeviceIds,g=y.manufacturer,m=y.model,b=y.operatingSystem,T=y.operatingSystemVersion,k=y.browserName,S=y.browserVersion,P=y.deviceLanguage,E=y.brand,(Z={deviceFamily:a,applicationRuntime:u,deviceProfile:l,deviceLanguage:P,attributes:{osDeviceIds:h,manufacturer:g,model:m,operatingSystem:b,operatingSystemVersion:T,browserName:k,browserVersion:S,brand:E},devicePlatformId:f}).huluUserToken=o,w=new v.Z(Z),e.abrupt("return",this.client.registerDevice(w,n));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return T.apply(this,arguments)})},{key:"updateDeviceOperatingSystem",value:(a=(0,r.Z)(s().mark((function e(t,n){var r,i,o,a,c,u,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this.config.extras.enableUpdateDeviceOS){e.next=4;break}return this.logger.info(this.toString(),"Skipped updateDeviceOperatingSystem per config setting."),e.abrupt("return",void 0);case 4:return i=(r=t||{}).operatingSystem,o=r.operatingSystemVersion,a=r.osDeviceIds,c=r.brand,u={operatingSystem:i,operatingSystemVersion:o,osDeviceIds:a,brand:c},l=new g.Z(u),e.abrupt("return",this.client.query({request:l,accessToken:this.accessToken,logTransaction:n}));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"exchangeDeviceGrantForAccessToken",value:(n=(0,r.Z)(s().mark((function e(t,n){var r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={deviceGrant:t.deviceGrant.assertion,huluUserToken:t.userToken},i=new y.Z(r),e.abrupt("return",this.client.exchangeDeviceGrantForAccessToken(i,n));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"refreshToken",value:(t=(0,r.Z)(s().mark((function e(t,n){var r,i,o,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.refreshToken,i=t.reason,o={refreshToken:r},a=new h.Z(o),e.abrupt("return",this.client.refreshToken({request:a,reason:i,logTransaction:n}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"accessToken",get:function(){return this.accessTokenProvider.getAccessToken()}},{key:"toString",value:function(){return"SDK.Orchestration.OrchestrationManager"}}]),e}()},34140:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}}),n(12419);var r,i,o=n(54546),a=n(15861),s=n(15671),c=n(43144),u=n(97326),l=n(2291),p=n(60136),d=n(82963),y=n(61120),f=n(53229),h=n(87757),v=n.n(h),g=(n(41539),n(39714),n(38880),n(67682)),m=n(82625),b=n(64504),T=n(84983),k=n(9598);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,y.Z)(e);if(t){var i=(0,y.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var P=T.Z.paywall.paywallApi,E=(r=k.Z.apiMethodDecorator.bind(null,P)({paramTypes:{purchaseContextId:g.Types.nonEmptyString.optional,purchaseContext:g.Types.skip}}),i=function(e){(0,p.Z)(r,e);var t,n=S(r);function r(e){var t;(0,s.Z)(this,r),t=n.call(this,e);var i={options:g.Types.object({paywallClient:g.Types.instanceStrict(b.Z)})};(0,g.typecheck)((0,u.Z)(t),i,arguments);var o=e.paywallClient;return t.paywallClient=o,t.logger.info(t.toString(),"Created."),t}return(0,c.Z)(r,[{key:"getPaywall",value:(t=(0,a.Z)(v().mark((function e(t){var n,i,a,s,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=t).logTransaction,a=(0,o.Z)(n.args,2),s=a[0],c=a[1],e.abrupt("return",this.paywallClient.getPaywall((0,l.Z)((0,y.Z)(r.prototype),"accessToken",this),i,s,c));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Paywall.PaywallApi"}}]),r}(m.Z),(0,f.Z)(i.prototype,"getPaywall",[r],Object.getOwnPropertyDescriptor(i.prototype,"getPaywall"),i.prototype),i)},53298:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=(n(41539),n(39714),n(67682)),a=n(87891),s=function(){function e(t){(0,r.Z)(this,e);var n={logger:o.Types.instanceStrict(a.Z).optional};(0,o.typecheck)(this,n,arguments),this.logger=t||a.Z.instance,this.logger.log(this.toString(),"Created provider")}return(0,i.Z)(e,[{key:"availableCpuPercentage",value:function(){return null}},{key:"availableMemoryMb",value:function(){return null}},{key:"toString",value:function(){return"SDK.Platform.PlatformMetricsProvider"}}]),e}()},45769:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=(n(41539),n(39714),n(67682)),u=n(87891),l=n(357),p=function(){function e(t){(0,i.Z)(this,e);var n={logger:c.Types.instanceStrict(u.Z).optional};(0,c.typecheck)(this,n,arguments),this.logger=t||u.Z.instance,this.logger.log(this.toString(),"Created GeoProvider.")}var t;return(0,o.Z)(e,[{key:"getGeoLocation",value:(t=(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new l.Z(0,0));case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Providers.DefaultGeoProvider"}}]),e}()},37347:function(e,t,n){"use strict";var r=n(45769).Z;t.Z={setProviders:function(e){r=e.GeoProvider},get GeoProvider(){if(!r)throw new Error("GeoProvider provider not specified");return r}}},16471:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(67682),i={getTimestamp:r.Types.function}},70054:function(e,t,n){"use strict";n.d(t,{Z:function(){return M}}),n(12419),n(47941),n(82526),n(57327),n(54747),n(49337);var r,i,o,a,s,c,u=n(54546),l=n(15861),p=n(4942),d=n(15671),y=n(43144),f=n(97326),h=n(2291),v=n(60136),g=n(82963),m=n(61120),b=n(53229),T=n(87757),k=n.n(T),S=(n(41539),n(39714),n(38880),n(67682)),P=n(82625),E=n(86691),Z=n(98931),w=n(95400),D=n(84983),C=n(9598);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,m.Z)(e);if(t){var i=(0,m.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,g.Z)(this,n)}}var O=D.Z.purchase.purchaseApi,I=C.Z.apiMethodDecorator.bind(null,O),M=(r=I({paramTypes:{providerId:S.Types.nonEmptyString,activationTokenString:S.Types.nonEmptyString}}),i=I({paramTypes:{providerId:S.Types.nonEmptyString,activationTokenString:S.Types.nonEmptyString}}),o=I({paramTypes:{providerId:S.Types.nonEmptyString}}),a=I({paramTypes:{contentProvider:S.Types.nonEmptyString}}),s=I({paramTypes:{sku:S.Types.nonEmptyString.optional}}),c=function(e){(0,v.Z)(c,e);var t,n,r,i,o,a,s=x(c);function c(e){var t;(0,d.Z)(this,c),t=s.call(this,R({accessTokenProvider:e.tokenManager},e));var n={options:S.Types.object({externalActivationClient:S.Types.instanceStrict(Z.Z),eligibilityClient:S.Types.instanceStrict(E.Z),tokenManager:S.Types.instanceStrict(w.Z)})};(0,S.typecheck)((0,f.Z)(t),n,arguments);var r=e.externalActivationClient,i=e.eligibilityClient,o=e.tokenManager;return t.externalActivationClient=r,t.eligibilityClient=i,t.tokenManager=o,t.logger.info(t.toString(),"Created."),t}return(0,y.Z)(c,[{key:"redeemBundle",value:(a=(0,l.Z)(k().mark((function e(t){var n,r,i,o,a,s,l,p,d;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=n.dustLogUtility,o=(0,u.Z)(n.args,2),a=o[0],s=o[1],this.logger.info(this.toString(),"Redeem bundle for provider: ".concat(a)),e.next=4,this.externalActivationClient.redeemBundle(a,s,(0,h.Z)((0,m.Z)(c.prototype),"accessToken",this),r);case 4:return l=e.sent,e.next=7,this.processExternalActivationResult(l,r);case 7:return p=l.temporaryAccessGranted,d=l.resultStatus,p&&this.logger.info(this.toString(),"Temporary access has been granted."),d&&this.logger.info(this.toString(),"Temporary access, result status: ".concat(d)),null==i||i.logData({result:l}),e.abrupt("return",l);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"redeemToken",value:(o=(0,l.Z)(k().mark((function e(t){var n,r,i,o,a,s,l,p,d;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=n.dustLogUtility,o=(0,u.Z)(n.args,2),a=o[0],s=o[1],this.logger.info(this.toString(),"Redeem token for provider: ".concat(a)),e.next=4,this.externalActivationClient.redeemToken(a,s,(0,h.Z)((0,m.Z)(c.prototype),"accessToken",this),r);case 4:return l=e.sent,e.next=7,this.processExternalActivationResult(l,r);case 7:return p=l.temporaryAccessGranted,d=l.resultStatus,p&&this.logger.info(this.toString(),"Temporary access has been granted."),d&&this.logger.info(this.toString(),"Temporary access, result status: ".concat(d)),null==i||i.logData({result:l}),e.abrupt("return",l);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"createExternalRedemptionToken",value:(i=(0,l.Z)(k().mark((function e(t){var n,r,i,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,u.Z)(n.args,1),o=i[0],this.logger.info(this.toString(),"Create external redemption token for provider: ".concat(o)),e.abrupt("return",this.externalActivationClient.createExternalRedemptionToken(o,(0,h.Z)((0,m.Z)(c.prototype),"accessToken",this),r));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"generateActivationToken",value:(r=(0,l.Z)(k().mark((function e(t){var n,r,i,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,u.Z)(n.args,1),o=i[0],this.logger.info(this.toString(),"Generate ActivationToken for content provider: ".concat(o)),e.abrupt("return",this.externalActivationClient.generateActivationToken(o,(0,h.Z)((0,m.Z)(c.prototype),"accessToken",this),r));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getEligibilityStatus",value:(n=(0,l.Z)(k().mark((function e(t){var n,r,i,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,u.Z)(n.args,1),o=i[0],e.abrupt("return",this.eligibilityClient.getEligibilityStatus({sku:o,accessToken:(0,h.Z)((0,m.Z)(c.prototype),"accessToken",this),logTransaction:r}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"processExternalActivationResult",value:(t=(0,l.Z)(k().mark((function e(t,n){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.refreshAccessToken)){e.next=4;break}return e.next=4,this.tokenManager.refreshAccessToken({forceRefresh:r,logTransaction:n});case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Purchase.PurchaseApi"}}]),c}(P.Z),(0,b.Z)(c.prototype,"redeemBundle",[r],Object.getOwnPropertyDescriptor(c.prototype,"redeemBundle"),c.prototype),(0,b.Z)(c.prototype,"redeemToken",[i],Object.getOwnPropertyDescriptor(c.prototype,"redeemToken"),c.prototype),(0,b.Z)(c.prototype,"createExternalRedemptionToken",[o],Object.getOwnPropertyDescriptor(c.prototype,"createExternalRedemptionToken"),c.prototype),(0,b.Z)(c.prototype,"generateActivationToken",[a],Object.getOwnPropertyDescriptor(c.prototype,"generateActivationToken"),c.prototype),(0,b.Z)(c.prototype,"getEligibilityStatus",[s],Object.getOwnPropertyDescriptor(c.prototype,"getEligibilityStatus"),c.prototype),c)},59034:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}}),n(12419);var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),u=(n(41539),n(39714),n(67682)),l=n(82625),p=n(14988),d=n(82011),y=n(88534),f=n(77831);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var v=function(e){(0,a.Z)(n,e);var t=h(n);function n(e){var i;(0,r.Z)(this,n),i=t.call(this,e);var a={options:u.Types.object({qrCodeClient:u.Types.instanceStrict(p.Z)})};(0,u.typecheck)((0,o.Z)(i),a,arguments);var s=e.qrCodeClient;return i.qrCodeClient=s,i.logger.info(i.toString(),"Created."),i}return(0,i.Z)(n,[{key:"getQrCodeUrl",value:function(e){var t={params:u.Types.object(d.QRCodeQueryParamsTypedef)};(0,u.typecheck)(this,"getQrCodeUrl",t,arguments);var n=e.url;if((0,y.Z)(n))return this.qrCodeClient.getQrCodeUrl(e);throw new f.Z("".concat(n," is not a valid URL."))}},{key:"toString",value:function(){return"SDK.QrCode.QrCodeApi"}}]),n}(l.Z)},84217:function(e,t){"use strict";var n;!function(e){e.jpeg="jpeg",e.png="png"}(n||(n={})),t.Z=n},82011:function(e,t,n){"use strict";n.d(t,{QRCodeQueryParamsTypedef:function(){return o}});var r=n(67682),i=n(84217),o={url:r.Types.string,size:r.Types.number,format:r.Types.in(i.Z)}},5872:function(e,t){"use strict";var n;!function(e){e.jpeg="jpeg",e.png="png",e.jpeg2000="jpeg2000",e.pvr="pvr",e.webp="webp"}(n||(n={})),t.Z=n},43160:function(e,t){"use strict";var n;!function(e){e[e.none=0]="none",e[e.default=1]="default"}(n||(n={})),t.Z=n},14859:function(e,t){"use strict";var n;!function(e){e.etc1="etc1",e.etc2="etc2"}(n||(n={})),t.Z=n},18850:function(e,t){"use strict";var n;!function(e){e.etcFast="ETCFast",e.etcFastPerceptual="ETCFastPerceptual",e.etcSlow="ETCSlow",e.etcSlowPerceptual="ETCSlowPerceptual",e.numETCModes="NumETCModes"}(n||(n={})),t.Z=n},35498:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(97326),c=n(60136),u=n(82963),l=n(61120),p=n(87757),d=n.n(p),y=(n(41539),n(39714),n(67682)),f=n(82625),h=n(35840),v=n(87172),g=n(70911),m=n(5301);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var S=function(e){(0,c.Z)(r,e);var t,n=k(r);function r(e){var t;(0,o.Z)(this,r),t=n.call(this,e);var i={options:y.Types.object({ripcutClient:y.Types.instanceStrict(v.Z),sessionManager:y.Types.instanceStrict(h.Z)})};(0,y.typecheck)((0,s.Z)(t),i,arguments);var a=e.ripcutClient,c=e.sessionManager;return t.ripcutClient=a,t.sessionManager=c,t.logger.info(t.toString(),"Created."),t}return(0,a.Z)(r,[{key:"getImage",value:(t=(0,i.Z)(d().mark((function e(t){var n,r,i,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:y.Types.object(g.RipcutImageRequestTypedef)},(0,y.typecheck)(this,"getImage",n,o),e.next=3,this.sessionManager.getInfo();case 3:return r=e.sent,i=r.partnerName,e.abrupt("return",this.ripcutClient.getImage(T(T({},t),{},{partnerId:i})));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getImageUrl",value:function(e){var t={options:y.Types.object(g.RipcutImageRequestTypedef)};(0,y.typecheck)(this,"getImageUrl",t,arguments);var n=this.sessionManager.storage.sessionInfo;if(n){var r=n.partnerName;return this.ripcutClient.getImageUrl(T(T({},e),{},{partnerId:r}))}throw(0,m.ZP)("".concat(this.toString()," There is no cached session info available."))}},{key:"toString",value:function(){return"SDK.Ripcut.RipcutApi"}}]),r}(f.Z)},10063:function(e,t,n){"use strict";var r;n(73210),function(e){e.main="main",e.mainScale="mainScale",e.mainCompose="mainCompose",e.mainBadging="mainBadging",e.rawFiles="rawFiles",e.trim="trim"}(r||(r={})),t.Z=r},70911:function(e,t,n){"use strict";n.d(t,{RipcutImageRequestTypedef:function(){return f},RipcutQueryParamsTypedef:function(){return y}});var r,i=n(67682),o=n(5872),a=n(43160),s=n(14859),c=n(18850),u=n(10063);!function(e){e.topLeft="TL",e.topCenter="TC",e.topRight="TR",e.left="L",e.center="C",e.right="R",e.lowLeft="LL",e.lowCenter="LC",e.lowRight="LR"}(r||(r={}));var l,p=r;!function(e){e.bilinear="bilinear",e.bicubic="bicubic",e.bspline="bspline",e.lanczos3="lanczos3",e.nearestNeighbor="nearest-neighbor"}(l||(l={}));var d=l,y={width:i.Types.number.optional,height:i.Types.number.optional,scalingAlgorithm:i.Types.in(d).optional,format:i.Types.in(o.Z).optional,texture:i.Types.in(s.Z).optional,textureQuality:i.Types.in(c.Z).optional,quality:i.Types.number.optional,roundCornerRadius:i.Types.number.optional,compression:i.Types.in(a.Z).optional,blurFilter:i.Types.nonEmptyString.optional,blurRadius:i.Types.number.optional,fillColor:i.Types.nonEmptyString.optional,label:i.Types.nonEmptyString.optional,aspectRatio:i.Types.number.optional,topImage:i.Types.nonEmptyString.optional,language:i.Types.nonEmptyString.optional,placement:i.Types.in(p).optional,origLabel:i.Types.nonEmptyString.optional,origPlacement:i.Types.in(p).optional,origLanguage:i.Types.nonEmptyString.optional,opacity:i.Types.number.optional},f={version:i.Types.nonEmptyString.optional,imageId:i.Types.nonEmptyString,imageRequestMode:i.Types.in(u.Z),queryParams:i.Types.object(y).optional}},72431:function(e,t,n){"use strict";n.d(t,{addPlugin:function(){return a},attachLateBoundPlugin:function(){return s},extendSDKWithPlugins:function(){return i},getPlugins:function(){return o}}),n(41539),n(54747);var r=[];function i(e,t,n){var r=e;return n.forEach((function(e){t.attachPlugin(e);var n=e,i=n.pluginName,o=n.entry;r[i]=o;var a=e.service;a&&(r.Services[i]=a)})),r}function o(){return r}function a(e){r.some((function(t){return t===e}))||r.push(e)}function s(e,t,n){var r=t.constructor,o=i(e,r,n),a=t.logger,c=t.config;return n.forEach((function(n){var i,o,u,l;null===(i=n.dependencies)||void 0===i||i.forEach((function(n){s(e,t,[n])})),c.services.applyConfigToPlugin(n),null===(o=n.createManager)||void 0===o||o.call(n,r.createManagerOptions),null===(u=n.createApi)||void 0===u||u.call(n,{sdkSession:t,logger:a}),null===(l=n.onSdkSessionCreated)||void 0===l||l.call(n,{SdkSession:r,sdkSession:t,logger:a})})),o}},42033:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(15671),i=n(43144),o=(n(21249),n(67682)),a=n(55809),s=n(65533),c=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({accountId:o.Types.nonEmptyString,activeUserProfile:o.Types.instanceStrict(a.Z),attributes:o.Types.object().optional,identities:o.Types.array.of.object({identityId:o.Types.nonEmptyString,providerId:o.Types.nonEmptyString}).optional})};(0,o.typecheck)(this,n,arguments);var i=t||{},c=i.accountId,u=i.activeUserProfile,l=i.attributes,p=void 0===l?{}:l,d=i.identities,y=void 0===d?[]:d;this.accountId=c,this.activeProfile=u,this.attributes=p,this.identities=y.map((function(e){return new s.Z(e.identityId,e.providerId)}))}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Account.Account"}}]),e}()},18788:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(15861),i=n(4942),o=n(15671),a=n(43144),s=n(97326),c=n(2291),u=n(60136),l=n(82963),p=n(61120),d=n(87757),y=n.n(d),f=(n(41539),n(39714),n(67682)),h=n(70928),v=n(52662),g=n(1206),m=n(84983),b=n(24965),T=n(7607),k=n(42033),S=n(70121),P=n(92727),E=n(37111),Z=n(55809),w=n(40064),D=n(69867);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var x=m.Z.services.account.accountClient,O=function(e){(0,u.Z)(i,e);var t,n=R(i);function i(e){var t;(0,o.Z)(this,i),t=n.call(this,e);var r={options:f.Types.object({orchestrationClient:f.Types.instanceStrict(T.Z)})};return(0,f.typecheck)((0,s.Z)(t),r,arguments),t.orchestrationClient=e.orchestrationClient,t.logger.log(t.toString(),"Created."),t}return(0,a.Z)(i,[{key:"createAccount",value:function(e){var t={options:f.Types.object({identityToken:f.Types.nonEmptyString,attributes:f.Types.object(),accessToken:f.Types.instanceStrict(h.Z),metadata:f.Types.object().optional,logTransaction:f.Types.instanceStrict(v.Z)})};(0,f.typecheck)(this,"createAccount",t,arguments);var n=e.identityToken,r=e.attributes,o=e.accessToken,a=e.metadata,s=e.logTransaction,u=this.logger,l=A(A(A({},{id_token:n}),r),a),d=S.Z.createAccount,y=this.getPayload({accessToken:o,endpointKey:d,body:l});u.info(this.toString(),"Attempting to create account.");var m=new g.Z({logger:u,source:this.toString(),urn:x.createAccount,payload:y,endpointKey:d,logTransaction:s});return(0,c.Z)((0,p.Z)(i.prototype),"request",this).call(this,{payload:y,dustLogUtility:m,resultMapper:function(e){var t=e.data.accountId;return new E.Z(t)}})}},{key:"getCurrentAccount",value:function(e,t){var n={accessToken:f.Types.instanceStrict(h.Z),logTransaction:f.Types.instanceStrict(v.Z)};(0,f.typecheck)(this,"getCurrentAccount",n,arguments);var r=this.logger,o=S.Z.getCurrentAccount,a=this.getPayload({accessToken:e,endpointKey:o});r.info(this.toString(),"Get current account based on provided token.");var s=new g.Z({logger:r,source:this.toString(),urn:x.getCurrentAccount,payload:a,endpointKey:o,logTransaction:t});return(0,c.Z)((0,p.Z)(i.prototype),"request",this).call(this,{payload:a,dustLogUtility:s,resultMapper:function(e){var t=e.data,n=t.accountId,r=t.activeProfile,i=t.attributes,o=t.identities,a={accountId:n,activeUserProfile:new Z.Z(r),attributes:i,identities:o};return new k.Z(a)}})}},{key:"createAccountGrant",value:function(e,t,n){var r={identityToken:f.Types.nonEmptyString,accessToken:f.Types.instanceStrict(h.Z),logTransaction:f.Types.instanceStrict(v.Z)};(0,f.typecheck)(this,"createAccountGrant",r,arguments);var o=this.logger,a=S.Z.createAccountGrant,s=this.getPayload({accessToken:t,endpointKey:a,body:{id_token:e}});o.log(this.toString(),"Attempting to create account grant.");var u=new g.Z({logger:o,source:this.toString(),urn:x.createAccountGrant,payload:s,endpointKey:a,logTransaction:n});return(0,c.Z)((0,p.Z)(i.prototype),"request",this).call(this,{payload:s,dustLogUtility:u,resultMapper:function(e){var t=e.data,n=t.assertion,r=t.grant_type;return new P.Z({assertion:n,grant_type:r})}})}},{key:"updateAttributes",value:(t=(0,r.Z)(y().mark((function e(t,n,r){var o,a,s,u,l,d=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={attributes:f.Types.object(),accessToken:f.Types.instanceStrict(h.Z)},(0,f.typecheck)(this,"updateAttributes",o,d),a=this.logger,s=S.Z.updateAccountAttributes,u=this.getPayload({accessToken:n,endpointKey:s,body:t}),a.info(this.toString(),'Update account attributes - "'.concat(JSON.stringify(t),'".')),l=new g.Z({logger:a,source:this.toString(),urn:x.updateAttributes,payload:u,endpointKey:s,logTransaction:r}),e.abrupt("return",(0,c.Z)((0,p.Z)(i.prototype),"request",this).call(this,{payload:u,dustLogUtility:l,resultMapper:function(e){return e}}));case 7:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"getPayload",value:function(e){var t=e.accessToken,n=e.endpointKey,r=e.body,i=this.config.endpoints[n]||{},o=i.headers,a=void 0===o?{}:o,s=i.method,c=i.href,u=r?JSON.stringify(r):"",l=(0,b.Z)({Authorization:function(){return{replacer:"{accessToken}",value:t.token}}},a);return{url:c,method:s,body:u,headers:new D.Z(l)}}},{key:"toString",value:function(){return"SDK.Services.Account.AccountClient"}}]),i}(w.Z)},75745:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Account.AccountClientConfiguration"}}]),n}(n(88152).Z)},70121:function(e,t){"use strict";var n;!function(e){e.createAccount="createAccount",e.createAccountGrant="createAccountGrant",e.getCurrentAccount="getCurrentAccount",e.updateAccountAttributes="updateAccountAttributes"}(n||(n={})),t.Z=n},92727:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(e){var i;(0,r.Z)(this,n);var o=e.assertion,a=e.grant_type;return(i=t.call(this,o,a)).subjectTokenTypeKey="account",i}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Account.AccountGrant"}}]),n}(n(19436).Z)},37111:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={accountId:o.Types.nonEmptyString};(0,o.typecheck)(this,n,arguments),this.accountId=t}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Account.CreateAccountResult"}}]),e}()},65533:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t,n){(0,r.Z)(this,e);var i={identityId:o.Types.nonEmptyString,providerId:o.Types.nonEmptyString};(0,o.typecheck)(this,i,arguments),this.identityId=t,this.providerId=n}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Account.Identity"}}]),e}()},55809:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({profileId:o.Types.nonEmptyString,profileName:o.Types.nonEmptyString,attributes:o.Types.object().optional,metadata:o.Types.object().optional})};(0,o.typecheck)(this,n,arguments);var i=t.profileId,a=t.profileName,s=t.attributes,c=void 0===s?{}:s,u=t.metadata,l=void 0===u?{}:u;this.profileId=i,this.profileName=a,this.attributes=c,this.metadata=l}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Account.UserProfile"}}]),e}()},40064:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(15671),i=n(43144),o=(n(41539),n(88674),n(17727),n(67682)),a=n(19496),s=n(7694),c=n(88152),u=n(87891),l=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({logger:o.Types.instanceStrict(u.Z),config:o.Types.instanceStrict(c.Z),httpClient:o.Types.instanceStrict(a.Z).optional})};(0,o.typecheck)(this,n,arguments);var i=t.logger,s=t.config,l=t.httpClient;this.logger=i,this.config=s,this.httpClient=l}return(0,i.Z)(e,[{key:"request",value:function(e){var t=e.payload,n=e.dustLogUtility,r=e.resultMapper,i=void 0===r?function(){}:r,o=e.handleServiceResponseMethodName,a=e.skipHandleServiceResponse,c=void 0!==a&&a;return this.httpClient.request(t).then((function(e){return c?e:(0,s.Z)({response:e,dustLogUtility:n,methodName:o})})).then((function(e){return i(e)})).finally((function(){null==n||n.log()}))}},{key:"toString",value:function(){return"SDK.Services.ClientBase"}}]),e}()},40815:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({acceptHeader:o.Types.nonEmptyString,colorDepth:o.Types.number,javaEnabled:o.Types.boolean,language:o.Types.nonEmptyString,screenHeight:o.Types.number,screenWidth:o.Types.number,timeZoneOffset:o.Types.number,userAgent:o.Types.nonEmptyString})};(0,o.typecheck)(this,n,arguments);var i=t.acceptHeader,a=t.colorDepth,s=t.javaEnabled,c=t.language,u=t.screenHeight,l=t.screenWidth,p=t.timeZoneOffset,d=t.userAgent;this.acceptHeader=i,this.colorDepth=a,this.javaEnabled=s,this.language=c,this.screenHeight=u,this.screenWidth=l,this.timeZoneOffset=p,this.userAgent=d}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Commerce.BrowserInfo"}}]),e}()},74023:function(e,t,n){"use strict";n.d(t,{Z:function(){return Q}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(55786),i=n(15861),o=n(4942),a=n(15671),s=n(43144),c=n(97326),u=n(2291),l=n(60136),p=n(82963),d=n(61120),y=n(87757),f=n.n(y),h=(n(41539),n(39714),n(74916),n(15306),n(69600),n(67682)),v=n(17563),g=n(99426),m=n(11893),b=n(21590),T=n(76266),k=n(60493),S=n(92421),P=n(11850),E=n(94037),Z=n(25652),w=n(31658),D=n(70928),C=n(19612),A=n(40064),R=n(1206),x=n(84983),O=n(88681),I=n(70187),M=n(69867),j=n(52662),L=n(37899),N=n(29466),B=n(24965),_=n(5301),F=n(83668),U=["paymentMethodId","type"],q=["paymentMethodId"];function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.Z)(e);if(t){var i=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,p.Z)(this,n)}}var G=x.Z.services.commerce.commerceClient,Q=function(e){(0,l.Z)(Q,e);var t,n,p,y,A,x,K=H(Q);function Q(e){var t;(0,a.Z)(this,Q),t=K.call(this,e);var n={options:h.Types.object({browserInfoProvider:h.Types.instanceStrict(C.Z),environmentConfiguration:h.Types.instanceStrict(O.Z)})};(0,h.typecheck)((0,c.Z)(t),n,arguments);var r=e.environmentConfiguration,i=e.browserInfoProvider;return t.environmentConfiguration=r,t.browserInfoProvider=i,t.regionHeader=F.SDK_REGION,t.ubaToken=null,t.logger.log(t.toString(),"Created."),t}return(0,s.Z)(Q,[{key:"priceOrder",value:function(e,t,n){var r=this,i={request:h.Types.object(E.PriceOrderRequestTypedef),accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"priceOrder",i,arguments);var o=this.logger,a=L.Z.priceOrder,s=this.getPayload({accessToken:t,endpointKey:a,body:e});o.info(this.toString(),"Attempting a price order request.");var c=new R.Z({logger:o,source:this.toString(),urn:G.priceOrder,payload:s,endpointKey:a,logTransaction:n});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:s,dustLogUtility:c,handleServiceResponseMethodName:"priceOrder",resultMapper:function(e){var t=e.data,n=r.regionHeader,i=e.headers.get(n)||void 0;r.recentRegionHeader=i,r.beginRegionResetTimer();var o=V(V({},t),{},{region:i}),a={priceOrderResponse:h.Types.object(Z.PriceOrderResponseTypedef)};return h.typecheck.warn(a,[o]),o}})}},{key:"beginRegionResetTimer",value:function(){var e=this;setTimeout((function(){e.recentRegionHeader=void 0}),6e4)}},{key:"lookupByZipCode",value:function(e,t){var n={zipCode:h.Types.nonEmptyString,logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"lookupByZipCode",n,arguments);var r=this.logger,i=L.Z.lookupByZipCode,o=this.getPayload({endpointKey:i});o.url=o.url.replace(/\{zipcode\}/,e),r.info(this.toString(),'Retrieving locations by zipCode: "'.concat(e,'".'));var a=new R.Z({logger:r,source:this.toString(),urn:G.lookupByZipCode,payload:o,endpointKey:i,logTransaction:t});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:o,dustLogUtility:a,handleServiceResponseMethodName:"lookupByZipCode",resultMapper:function(e){var t=e.data,n={data:h.Types.array.of.object(Z.ZipLocationTypedef)};return h.typecheck.warn(n,[t]),t}})}},{key:"redeem",value:function(e,t,n){var r={request:h.Types.object(E.RedeemRequestTypedef),accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"redeem",r,arguments);var i=this.logger,o=L.Z.redeem,a=this.getPayload({accessToken:t,endpointKey:o,body:e}),s=new R.Z({logger:i,source:this.toString(),urn:G.redeem,payload:a,endpointKey:o,logTransaction:n});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:a,dustLogUtility:s,resultMapper:function(e){var t=e.data,n={data:h.Types.object(Z.RedeemResponseTypedef)};return h.typecheck.warn(n,[t]),t}})}},{key:"submitOrderWithPaymentMethod",value:function(e){var t={options:h.Types.object({request:h.Types.object(E.OrderSubmissionRequestTypedef),deviceProfile:h.Types.nonEmptyString.optional,accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)})};(0,h.typecheck)(this,"submitOrderWithPaymentMethod",t,arguments);var n=e.request,r=e.deviceProfile,i=e.accessToken,o=e.logTransaction,a=this.environmentConfiguration.applicationRuntime,s=this.browserInfoProvider.getBrowserInfo(),c=this.logger,l=L.Z.submitOrderWithPaymentMethod,p=this.getPayload({accessToken:i,endpointKey:l,body:n,data:{browserInfo:s},optionalData:{applicationRuntime:a,deviceProfile:r}});c.info(this.toString(),"Attempting to submit an order request with payment method.");var y=new R.Z({logger:c,source:this.toString(),urn:G.submitOrderWithPaymentMethod,payload:p,endpointKey:l,logTransaction:o});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:p,dustLogUtility:y,handleServiceResponseMethodName:"submitOrderWithPaymentMethod",resultMapper:function(e){var t=e.data,n={data:h.Types.object(Z.OrderResponseTypedef)};return h.typecheck.warn(n,[t]),t}})}},{key:"updateOrder",value:(x=(0,i.Z)(f().mark((function e(t,n,r){var i,o,a,s,c,l,p=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={request:h.Types.object(E.UpdateOrderRequestTypedef),accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)},(0,h.typecheck)(this,"updateOrder",i,p),o=this.logger,a=this.browserInfoProvider.getBrowserInfo(),s=L.Z.updateOrder,c=this.getPayload({accessToken:n,endpointKey:s,body:t,data:{browserInfo:a}}),l=new R.Z({logger:o,source:this.toString(),urn:G.updateOrder,payload:c,endpointKey:s,logTransaction:r}),e.abrupt("return",(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:c,dustLogUtility:l,resultMapper:function(){}}));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return x.apply(this,arguments)})},{key:"getOrderStatus",value:function(e,t,n,r){var i={guid:h.Types.nonEmptyString,counter:h.Types.number,accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"getOrderStatus",i,arguments);var o=this.logger,a=L.Z.getOrderStatus,s=this.getPayload({accessToken:n,endpointKey:a});s.url=s.url.replace(/\{guid\}/,e),s.url=s.url.replace(/\{counter\}/,t.toString()),s.credentials="include",this.recentRegionHeader&&s.headers&&s.headers.set(this.regionHeader,this.recentRegionHeader),o.info(this.toString(),'Attempting to retrieve the order status for guid: "'.concat(e,'".'));var c=new R.Z({logger:o,source:this.toString(),urn:G.getOrderStatus,payload:s,endpointKey:a,logTransaction:r});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:s,dustLogUtility:c,handleServiceResponseMethodName:"getOrderStatus",resultMapper:function(e){var t=e.data,n=t.guid,r=t.orderStatus,i={guid:n,orderStatus:r,strongCustomerAuth:t.sca};if(!n||!r)throw(0,_.Kf)({description:"Invalid order",exceptionData:I.Z.commerce.invalidOrderId});return i}})}},{key:"createCardPaymentMethod",value:function(e){var t,n={options:h.Types.object({request:h.Types.object(S.CreateCardPaymentMethodRequestTypedef),region:h.Types.nonEmptyString.optional,accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)})};(0,h.typecheck)(this,"createCardPaymentMethod",n,arguments);var r=e.request,i=e.region,o=void 0===i?"":i,a=e.accessToken,s=e.logTransaction,c=this.config,l=this.logger,p=c.extras,y=c.endpoints,f=p.createPaymentMethodRegionalEndpoints,v=void 0===f?{}:f,g=v[o],m=y[g]?null===(t=y[g])||void 0===t?void 0:t.rel:void 0,b=h.Check.assigned(m)?m:L.Z.createPaymentMethod,T=this.getPayload({accessToken:a,endpointKey:b,body:r});l.info(this.toString(),"Attempting to create payment method.");var k=new R.Z({logger:l,source:this.toString(),urn:G.createCardPaymentMethod,payload:T,data:{region:o},endpointKey:b,logTransaction:s});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:T,dustLogUtility:k,handleServiceResponseMethodName:"createCardPaymentMethod",resultMapper:function(e){var t=e.data,n={data:h.Types.object(Z.PaymentMethodResponseTypedef)};return h.typecheck.warn(n,[t]),t}})}},{key:"getDefaultPaymentMethod",value:function(e,t){var n={accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"getDefaultPaymentMethod",n,arguments);var r=this.logger,i=this.getPaymentMethodType,o=L.Z.getDefaultPaymentMethod,a=this.getPayload({accessToken:e,endpointKey:o});r.info(this.toString(),"Attempting to get default payment method.");var s=new R.Z({logger:r,source:this.toString(),urn:G.getDefaultPaymentMethod,payload:a,endpointKey:o,logTransaction:t});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:a,dustLogUtility:s,resultMapper:function(e){var t=e.data,n=i(t),r={data:h.Types.object(n)};return h.typecheck.warn(r,[t]),t}})}},{key:"updatePaymentMethod",value:function(e,t,n,i){var o={request:h.Types.object(E.UpdatePaymentMethodBaseTypedef),paymentType:h.Types.in(w.PaymentType),accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"updatePaymentMethod",o,arguments);var a=this.logger,s=this.getPaymentMethodType,c=e.paymentMethodId,l=e.type,p=(0,r.Z)(e,U),y=L.Z.updatePaymentMethod,f=this.getPayload({accessToken:n,endpointKey:y,body:p});f.url=f.url.replace(/\{paymentType\}/,t),f.url=f.url.replace(/\{paymentMethodId\}/,c),a.info(this.toString(),"Attempting to update ".concat(l," payment method."));var v=new R.Z({logger:a,source:this.toString(),urn:G.updatePaymentMethod,payload:f,endpointKey:y,logTransaction:i});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:f,dustLogUtility:v,resultMapper:function(e){var t=e.data,n=s(t),r={data:h.Types.object(n)};return h.typecheck.warn(r,[t]),t}})}},{key:"listAllPaymentMethods",value:function(e,t){var n={accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"listAllPaymentMethods",n,arguments);var r=this.logger,i=L.Z.listAllPaymentMethods,o=this.getPayload({accessToken:e,endpointKey:i});r.info(this.toString(),"Attempting to get all stored payment methods.");var a=new R.Z({logger:r,source:this.toString(),urn:G.listAllPaymentMethods,payload:o,endpointKey:i,logTransaction:t});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:o,dustLogUtility:a,resultMapper:function(e){var t=e.data,n={data:h.Types.array.of.object(E.PaymentMethodTypedef)};return h.typecheck.warn(n,[t]),t}})}},{key:"submitKlarnaPayment",value:function(e,t,n){var r={request:h.Types.object(T.KlarnaPaymentRequestTypedef),accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"submitKlarnaPayment",r,arguments);var i=this.logger,o=L.Z.createKlarnaPaymentMethod,a=this.getPayload({accessToken:t,endpointKey:o,body:e}),s=new R.Z({logger:i,source:this.toString(),urn:G.submitKlarnaPayment,payload:a,endpointKey:o,logTransaction:n});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:a,dustLogUtility:s,handleServiceResponseMethodName:"submitKlarnaPayment",resultMapper:function(e){var t=e.data,n={data:h.Types.object(Z.PaymentRedirectResponseTypedef)};return h.typecheck.warn(n,[t]),t}})}},{key:"resumeAccount",value:function(e){var t={options:h.Types.object({request:h.Types.object(E.AccountResumeRequestTypedef),deviceProfile:h.Types.nonEmptyString.optional,accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)})};(0,h.typecheck)(this,"resumeAccount",t,arguments);var n=e.request,r=e.deviceProfile,i=e.accessToken,o=e.logTransaction,a=this.browserInfoProvider.getBrowserInfo(),s=this.logger,c=L.Z.resumeAccount,l=this.getPayload({accessToken:i,endpointKey:c,body:n,data:{browserInfo:a},optionalData:{deviceProfile:r}}),p=new R.Z({logger:s,source:this.toString(),urn:G.resumeAccount,payload:l,endpointKey:c,logTransaction:o});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:l,dustLogUtility:p,handleServiceResponseMethodName:"resumeAccount",resultMapper:function(e){var t=e.data,n={data:h.Types.object(Z.OrderResponseTypedef)};return h.typecheck.warn(n,[t]),t}})}},{key:"getDdcJwtToken",value:function(e,t){var n={accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"getDdcJwtToken",n,arguments);var r=this.logger,i=L.Z.getDdcJwtToken,o=this.getPayload({accessToken:e,endpointKey:i}),a=new R.Z({logger:r,source:this.toString(),urn:G.getDdcJwtToken,payload:o,endpointKey:i,logTransaction:t});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:o,dustLogUtility:a,resultMapper:function(e){return e.data}})}},{key:"submitMercadoPayment",value:function(e,t,n){var r={request:h.Types.object(k.MercadoPaymentRequestTypedef),accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"submitMercadoPayment",r,arguments);var i=this.logger,o=L.Z.submitMercadoPayment,a=this.getPayload({accessToken:t,endpointKey:o,body:e}),s=new R.Z({logger:i,source:this.toString(),urn:G.submitMercadoPayment,payload:a,endpointKey:o,logTransaction:n});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:a,dustLogUtility:s,handleServiceResponseMethodName:"submitMercadoPayment",resultMapper:function(e){var t=e.data,n={data:h.Types.object(Z.PaymentRedirectResponseTypedef)};return h.typecheck.warn(n,[t]),t}})}},{key:"planSwitch",value:function(e){var t={options:h.Types.object({request:h.Types.object(E.PlanSwitchRequestTypedef),accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)})};(0,h.typecheck)(this,"planSwitch",t,arguments);var n=e.request,r=e.accessToken,i=e.logTransaction,o=this.logger,a=L.Z.planSwitch,s=this.getPayload({accessToken:r,endpointKey:a,body:n}),c=new R.Z({logger:o,source:this.toString(),urn:G.planSwitch,payload:s,endpointKey:a,logTransaction:i});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:s,dustLogUtility:c,resultMapper:function(e){var t=e.data,n={data:h.Types.object(Z.OrderResponseTypedef)};return h.typecheck.warn(n,[t]),t}})}},{key:"submitComcastPayment",value:function(e,t,n){var r={request:h.Types.object(g.ComcastPaymentRequestTypedef),accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"submitComcastPayment",r,arguments);var i=this.logger,o=L.Z.submitComcastPayment,a=this.getPayload({accessToken:t,endpointKey:o,body:e}),s=new R.Z({logger:i,source:this.toString(),urn:G.submitComcastPayment,payload:a,endpointKey:o,logTransaction:n});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:a,dustLogUtility:s,resultMapper:function(e){var t=e.data,n={data:h.Types.object(Z.PaymentMethodResponseTypedef)};return h.typecheck.warn(n,[t]),t}})}},{key:"submitIDealPayment",value:function(e,t,n){var r={request:h.Types.object(b.IDealPaymentRequestTypedef),accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"submitIDealPayment",r,arguments);var i=this.logger,o=L.Z.submitIDealPayment,a=this.getPayload({accessToken:t,endpointKey:o,body:e}),s=new R.Z({logger:i,source:this.toString(),urn:G.submitIDealPayment,payload:a,endpointKey:o,logTransaction:n});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:a,dustLogUtility:s,handleServiceResponseMethodName:"submitIDealPayment",resultMapper:function(e){var t=e.data,n={data:h.Types.object(Z.PaymentRedirectResponseTypedef)};return h.typecheck.warn(n,[t]),t}})}},{key:"shareDefaultPaymentMethod",value:function(e,t){var n={accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"shareDefaultPaymentMethod",n,arguments);var r=this.logger,i=this.getPaymentMethodType,o=L.Z.shareDefaultPaymentMethod,a=this.getPayload({accessToken:e,endpointKey:o}),s=new R.Z({logger:r,source:this.toString(),urn:G.shareDefaultPaymentMethod,payload:a,endpointKey:o,logTransaction:t});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:a,dustLogUtility:s,resultMapper:function(e){var t=e.data,n=i(t),r={data:h.Types.object(n)};return h.typecheck.warn(r,[t]),t}})}},{key:"restartSubscription",value:function(e,t,n){var r={request:h.Types.object(E.RestartSubscriptionRequestTypedef),accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"restartSubscription",r,arguments);var i=this.logger,o=L.Z.restartSubscription,a=this.getPayload({accessToken:t,endpointKey:o,body:e}),s=new R.Z({logger:i,source:this.toString(),urn:G.restartSubscription,payload:a,endpointKey:o,logTransaction:n});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:a,dustLogUtility:s,handleServiceResponseMethodName:"restartSubscription",resultMapper:function(e){var t=e.data,n={data:h.Types.object(Z.OrderResponseTypedef)};return h.typecheck.warn(n,[t]),t}})}},{key:"getPaymentMethod",value:function(e,t,n){var r={paymentMethodId:h.Types.nonEmptyString,accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"getPaymentMethod",r,arguments);var i=this.logger,o=this.getPaymentMethodType,a=L.Z.getPaymentMethod,s=this.getPayload({accessToken:t,endpointKey:a});s.url=s.url.replace(/\{paymentMethodId\}/,e),i.info(this.toString(),"Attempting to get payment card.");var c=new R.Z({logger:i,source:this.toString(),urn:G.getPaymentMethod,payload:s,endpointKey:a,logTransaction:n});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:s,dustLogUtility:c,resultMapper:function(e){var t=e.data,n=o(t),r={data:h.Types.object(n)};return h.typecheck.warn(r,[t]),t}})}},{key:"createComcastPaymentMethod",value:function(e,t,n){var r={request:h.Types.object(g.CreateComcastPaymentMethodRequestTypedef),accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"createComcastPaymentMethod",r,arguments);var i=this.logger,o=L.Z.createComcastPaymentMethod,a=this.getPayload({accessToken:t,endpointKey:o,body:e});i.info(this.toString(),"Attempting to create a comcast payment method.");var s=new R.Z({logger:i,source:this.toString(),urn:G.createComcastPaymentMethod,payload:a,endpointKey:o,logTransaction:n});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:a,dustLogUtility:s,handleServiceResponseMethodName:"createComcastPaymentMethod",resultMapper:function(e){var t=e.data,n={data:h.Types.object(Z.PaymentMethodResponseTypedef)};return h.typecheck.warn(n,[t]),t}})}},{key:"getComcastConsent",value:function(e,t,n){var r={request:h.Types.object(g.ComcastConsentRequestTypedef),accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)};(0,h.typecheck)(this,"getComcastConsent",r,arguments);var i=this.logger,o=e,a=o.skus,s=L.Z.getComcastConsent,c=this.getPayload({accessToken:t,endpointKey:s});h.Check.nonEmptyArray(a)&&(e.skus=a.join()),c.url=(0,N.Z)(c.url,v.stringify(e));var l=new R.Z({logger:i,source:this.toString(),urn:G.getComcastConsent,payload:c,endpointKey:s,logTransaction:n});return(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:c,dustLogUtility:l,resultMapper:function(e){var t=e.data,n={data:h.Types.object(g.ComcastConsentResponseTypedef)};return h.typecheck.warn(n,[t]),t}})}},{key:"associateAuthValuesWithPaymentMethod",value:(A=(0,i.Z)(f().mark((function e(t,n,r){var i,o,a,s,c,l,p,y,v=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={request:h.Types.object(E.AssociateAuthValuesWithPaymentMethodRequestTypedef),accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)},(0,h.typecheck)(this,"associateAuthValuesWithPaymentMethod",i,v),o=this.logger,a=t.paymentMethodId,s=t.dateOfBirth,c=t.pin,l=L.Z.associateAuthValuesWithPaymentMethod,(p=this.getPayload({accessToken:n,endpointKey:l,body:{dateOfBirth:s,pin:c}})).url=p.url.replace(/\{paymentMethodId\}/,a),y=new R.Z({logger:o,source:this.toString(),urn:G.associateAuthValuesWithPaymentMethod,payload:p,endpointKey:l,logTransaction:r}),e.abrupt("return",(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:p,dustLogUtility:y,resultMapper:function(){}}));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return A.apply(this,arguments)})},{key:"createBraintreeToken",value:(y=(0,i.Z)(f().mark((function e(t,n){var r,i,o,a,s,c=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)},(0,h.typecheck)(this,"createBraintreeToken",r,c),i=this.logger,o=L.Z.createPayPalBraintreeClientToken,a=this.getPayload({accessToken:t,endpointKey:o}),s=new R.Z({logger:i,source:this.toString(),urn:G.createBraintreeToken,payload:a,endpointKey:o,logTransaction:n}),e.abrupt("return",(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:a,dustLogUtility:s,resultMapper:function(e){return e.data}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"getBraintreePaymentMethodId",value:(p=(0,i.Z)(f().mark((function e(t,n,r){var i,o,a,s,c,l=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={billingAgreementId:h.Types.nonEmptyString,accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)},(0,h.typecheck)(this,"getBraintreePaymentMethodId",i,l),o=this.logger,a=L.Z.getPayPalBraintreePaymentMethodId,s=this.getPayload({accessToken:n,endpointKey:a,body:{billingAgreementId:t}}),c=new R.Z({logger:o,source:this.toString(),urn:G.getBraintreePaymentMethodId,payload:s,endpointKey:a,logTransaction:r}),e.abrupt("return",(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:s,dustLogUtility:c,resultMapper:function(e){return e.data}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return p.apply(this,arguments)})},{key:"createBraintreePaymentMethod",value:(n=(0,i.Z)(f().mark((function e(t,n,r){var i,o,a,s,c,l=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={request:h.Types.object(P.CreateBraintreePaymentMethodRequestTypedef),accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)},(0,h.typecheck)(this,"createBraintreePaymentMethod",i,l),o=this.logger,a=L.Z.createPayPalBraintreePaymentMethod,s=this.getPayload({accessToken:n,endpointKey:a,body:V({},t)}),c=new R.Z({logger:o,source:this.toString(),urn:G.createBraintreePaymentMethod,payload:s,endpointKey:a,logTransaction:r}),e.abrupt("return",(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:s,dustLogUtility:c,resultMapper:function(e){return e.data}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"updateBraintreePaymentMethod",value:(t=(0,i.Z)(f().mark((function e(t,n,i){var o,a,s,c,l,p,y,v=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={request:h.Types.object(P.UpdateBraintreePaymentMethodRequestTypedef),accessToken:h.Types.instanceStrict(D.Z),logTransaction:h.Types.instanceStrict(j.Z)},(0,h.typecheck)(this,"updateBraintreePaymentMethod",o,v),a=this.logger,s=t.paymentMethodId,c=(0,r.Z)(t,q),l=L.Z.updatePayPalBraintreePaymentMethod,(p=this.getPayload({accessToken:n,endpointKey:l,body:V({},c)})).url=p.url.replace(/\{paymentMethodId\}/,s),y=new R.Z({logger:a,source:this.toString(),urn:G.updateBraintreePaymentMethod,payload:p,endpointKey:l,logTransaction:i}),e.abrupt("return",(0,u.Z)((0,d.Z)(Q.prototype),"request",this).call(this,{payload:p,dustLogUtility:y,resultMapper:function(e){return e.data}}));case 8:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"setUbaToken",value:function(e){this.ubaToken=e}},{key:"getPaymentMethodType",value:function(e){var t;switch(e.type){case w.PaymentMethodType.PaymentCard:t=S.CardPaymentMethodTypedef;break;case w.PaymentMethodType.PayPalExpress:t=P.PayPalPaymentMethodTypedef;break;case w.PaymentMethodType.MercadoPagoPayment:t=k.MercadoPaymentMethodTypedef;break;case w.PaymentMethodType.KlarnaPayment:t=T.KlarnaPaymentMethodTypedef;break;case w.PaymentMethodType.IDealPayment:t=b.IDealPaymentMethodTypedef;break;case w.PaymentMethodType.ComcastPayment:t=g.ComcastPaymentMethodTypedef;break;case w.PaymentMethodType.DisneyRewards:t=m.DisneyRewardsPaymentMethodTypedef}return t}},{key:"getPayload",value:function(e){var t,n=this,r=e.accessToken,i=e.endpointKey,a=e.data,s=e.optionalData,c=e.body,u=this.config.endpoints[i],l=u.headers,p=u.optionalHeaders,d=u.method,y=c?JSON.stringify(c):"",f=s||{},h=f.applicationRuntime,v=f.deviceProfile,g=(a||{}).browserInfo,m=(t={Authorization:function(){return{replacer:"{accessToken}",value:null==r?void 0:r.token}}},(0,o.Z)(t,F.PURCHASE_PLATFORM,(function(){return{replacer:"{applicationRuntime}",value:h}})),(0,o.Z)(t,F.SALES_PLATFORM,(function(){return{replacer:"{deviceProfile}",value:v}})),(0,o.Z)(t,F.BROWSER_INFO,(function(){return{replacer:"{browserInfo}",value:g}})),(0,o.Z)(t,F.CTF_UBA_ID,(function(){return{replacer:"{ubaToken}",value:n.ubaToken,removeIfEmpty:!0}})),t),b=(0,B.Z)(m,l,p);return{url:u.href,method:d,body:y,headers:new M.Z(b)}}},{key:"getNamespaceID",value:function(){return this.config.extras.namespaceId}},{key:"toString",value:function(){return"SDK.Services.Commerce.CommerceClient"}}]),Q}(A.Z)},66263:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Commerce.CommerceClientConfiguration"}}]),n}(n(88152).Z)},37899:function(e,t){"use strict";var n;!function(e){e.priceOrder="priceOrder",e.lookupByZipCode="lookupByZipCode",e.redeem="redeem",e.submitOrderWithPaymentMethod="submitOrderWithPaymentMethod",e.updateOrder="updateOrder",e.getOrderStatus="getOrderStatus",e.createPaymentMethod="createPaymentMethod",e.getDdcJwtToken="getDdcJwtToken",e.getDefaultPaymentMethod="getDefaultPaymentMethod",e.getPaymentMethod="getPaymentMethod",e.updatePaymentMethod="updatePaymentMethod",e.listAllPaymentMethods="listAllPaymentMethods",e.createPaymentMethodEast="createPaymentMethodEast",e.createPaymentMethodWest="createPaymentMethodWest",e.createKlarnaPaymentMethod="createKlarnaPaymentMethod",e.resumeAccount="resumeAccount",e.getPayPalCheckoutDetails="getPayPalCheckoutDetails",e.setPayPalCheckoutDetails="setPayPalCheckoutDetails",e.createIDealPaymentMethod="createIDealPaymentMethod",e.getIDealPaymentMethod="getIDealPaymentMethod",e.submitMercadoPayment="submitMercadoPayment",e.submitComcastPayment="submitComcastPayment",e.planSwitch="planSwitch",e.submitIDealPayment="submitIDealPayment",e.shareDefaultPaymentMethod="shareDefaultPaymentMethod",e.restartSubscription="restartSubscription",e.createComcastPaymentMethod="createComcastPaymentMethod",e.getComcastConsent="getComcastConsent",e.associateAuthValuesWithPaymentMethod="associateAuthValuesWithPaymentMethod",e.createPayPalBraintreeClientToken="createPayPalBraintreeClientToken",e.getPayPalBraintreePaymentMethodId="getPayPalBraintreePaymentMethodId",e.createPayPalBraintreePaymentMethod="createPayPalBraintreePaymentMethod",e.updatePayPalBraintreePaymentMethod="updatePayPalBraintreePaymentMethod"}(n||(n={})),t.Z=n},49915:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({clientId:o.Types.nonEmptyString.optional,namespaceId:o.Types.number.optional,createPaymentMethodRegionalEndpoints:o.Types.object().optional}).optional};o.typecheck.warn(this,n,arguments);var i=t||{},a=i.clientId,s=i.namespaceId,c=i.createPaymentMethodRegionalEndpoints;this.clientId=a,this.namespaceId=s,this.createPaymentMethodRegionalEndpoints=c}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Commerce.CommerceClientExtrasMap"}}]),e}()},31658:function(e,t,n){"use strict";var r,i,o,a,s;n.d(t,{OrderStatus:function(){return r},PaymentCardType:function(){return i},PaymentMethodType:function(){return o},PaymentType:function(){return a},UpdateOrderType:function(){return s}}),function(e){e.paymentOk="PAYMENT_OK",e.temporaryDirectAccess="TDA",e.authOk="AUTH_OK",e.success="SUCCESS",e.redirect="REDIRECT"}(r||(r={})),function(e){e.DEBIT="DEBIT",e.CREDIT="CREDIT"}(i||(i={})),function(e){e.ComcastPayment="ComcastPayment",e.DisneyRewards="DisneyRewards",e.IDealPayment="IDealPayment",e.KlarnaPayment="KlarnaPayment",e.MercadoPagoPayment="MercadoPagoPayment",e.PaymentCard="PaymentCard",e.PayPalExpress="PayPalExpress"}(o||(o={})),function(e){e.comcastPayments="comcast-payments",e.idealPayments="ideal-payments",e.klarnaPayments="klarna-payments",e.mercadopagoPayments="mercadopago-payments",e.paypalExpress="paypal-express",e.paymentCards="payment-cards"}(a||(a={})),function(e){e.scaSuccess="SCA_SUCCESS",e.iDealSuccess="IDEAL_SUCCESS",e.redirectSuccess="REDIRECT_SUCCESS"}(s||(s={}))},25652:function(e,t,n){"use strict";n.d(t,{CreatePaymentMethodRequiredInputTypedef:function(){return y},OrderResponseTypedef:function(){return a},PaymentMethodResponseTypedef:function(){return o},PaymentRedirectResponseTypedef:function(){return s},PriceOrderResponseTypedef:function(){return f},RedeemResponseTypedef:function(){return c},ZipLocationTypedef:function(){return h}});var r=n(67682),i=n(31658),o={paymentMethodId:r.Types.nonEmptyString},a={guid:r.Types.nonEmptyString},s={redirectUrl:r.Types.nonEmptyString,paymentMethodId:r.Types.nonEmptyString},c={campaignCode:r.Types.nonEmptyString,voucherCode:r.Types.nonEmptyString,subscriptionEndDate:r.Types.nonEmptyString},u={sessionId:r.Types.nonEmptyString,challengeToken:r.Types.nonEmptyString},l={discountAmount:r.Types.number,subtotalAmount:r.Types.number,taxAmount:r.Types.number,totalAmount:r.Types.number},p={name:r.Types.nonEmptyString,billingType:r.Types.nonEmptyString.optional,productDescription:r.Types.nonEmptyString.optional,currency:r.Types.nonEmptyString,currencyCode:r.Types.nonEmptyString,categories:r.Types.array.of.nonEmptyString.optional},d={sku:r.Types.object(p),price:r.Types.object(l),subscriptionPeriod:r.Types.number.optional,subscriptionTimeUnit:r.Types.nonEmptyString.optional},y={region:r.Types.nonEmptyString.optional},f={region:r.Types.nonEmptyString.optional,orderSubTotal:r.Types.number,orderTaxAmount:r.Types.number,orderTotalAmount:r.Types.number,orderDiscountAmount:r.Types.number,orderItems:r.Types.array.of.object(d),adjustmentTimeLength:r.Types.number.optional,adjustmentTimeUnit:r.Types.nonEmptyString.optional,campaignCode:r.Types.nonEmptyString,voucherCode:r.Types.nonEmptyString,redemptionCode:r.Types.nonEmptyString.optional,paymentRequired:r.Types.boolean.optional,offerId:r.Types.nonEmptyString.optional},h=(r.Types.nonEmptyString,r.Types.in(i.OrderStatus),r.Types.object(u).optional,{city:r.Types.nonEmptyString,state:r.Types.nonEmptyString,country:r.Types.nonEmptyString});r.Types.nonEmptyString},64932:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(15671),i=n(43144),o=n(67682),a=n(4484),s=n(62339),c=n(7980),u=n(6438),l=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({clientId:o.Types.nonEmptyString,clientApiKey:o.Types.nonEmptyString,environment:o.Types.in(s.Z),application:o.Types.object(u.k7),debugEnabled:o.Types.boolean.optional,platform:o.Types.in(c.Z).optional,configHostName:o.Types.in(a.Z).optional,useStorageCompression:o.Types.boolean.optional,configHostOverride:o.Types.nonEmptyString.optional,configHostUrlOverride:o.Types.nonEmptyString.optional,accountDelegationRefreshToken:o.Types.nonEmptyString.optional,extras:o.Types.object(u.yg).optional})};(0,o.typecheck)(this,n,arguments);var i=t.clientId,l=t.clientApiKey,p=t.environment,d=t.debugEnabled,y=void 0!==d&&d,f=t.platform,h=void 0===f?null:f,v=t.configHostName,g=void 0===v?a.Z.release:v,m=t.application,b=t.configHostOverride,T=t.configHostUrlOverride,k=t.accountDelegationRefreshToken;this.clientId=i,this.clientApiKey=l,this.environment=p,this.debugEnabled=y,this.platform=h,this.configHostName=g,this.application=m,this.configHostOverride=b,this.configHostUrlOverride=T,this.accountDelegationRefreshToken=k;var S=t.extras||{};this.extras=S}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Configuration.BootstrapConfiguration"}}]),e}()},30253:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(31386),s=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({retryPolicy:o.Types.instanceStrict(a.Z),checkOrderStatusDelay:o.Types.greaterOrEqual(4).optional,validateOrderNonRetryCodes:o.Types.array.of.number.optional})};o.typecheck.warn(this,n,arguments);var i=t||{},s=i.retryPolicy,c=i.checkOrderStatusDelay,u=void 0===c?4:c,l=i.validateOrderNonRetryCodes;this.retryPolicy=s,this.checkOrderStatusDelay=u<4?4:u,this.validateOrderNonRetryCodes=l||[400,422,429]}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Configuration.CommerceManagerExtrasMap"}}],[{key:"parse",value:function(t){var n=t||{},r=n.checkOrderStatusDelay,i=n.validateOrderNonRetryCodes,o=n.retryPolicy;return new e({retryPolicy:new a.Z(o||{}),checkOrderStatusDelay:r,validateOrderNonRetryCodes:i})}}]),e}()},27089:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}}),n(12419);var r=n(54546),i=n(15671),o=n(43144),a=n(97326),s=n(2291),c=n(60136),u=n(82963),l=n(61120),p=(n(41539),n(39714),n(74916),n(15306),n(54747),n(69720),n(24603),n(67682)),d=n(14008),y=n(1206),f=n(84983),h=n(24965),v=n(75742),g=n(56944),m=n(64932),b=n(52662),T=n(69867),k=n(40064);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var P=f.Z.services.configuration.configurationClient,E=function(e){(0,c.Z)(n,e);var t=S(n);function n(e){var r;(0,i.Z)(this,n),r=t.call(this,e);var o=p.Types.object({config:p.Types.instanceStrict(v.Z)});return(0,p.typecheck)((0,a.Z)(r),o,arguments),r.logger.log(r.toString(),"Created."),r}return(0,o.Z)(n,[{key:"getConfiguration",value:function(e,t,r){var i={bootstrapConfiguration:p.Types.instanceStrict(m.Z),environmentConfiguration:p.Types.instanceStrict(d.Z.EnvironmentConfiguration),logTransaction:p.Types.instanceStrict(b.Z)};(0,p.typecheck)(this,"getConfiguration",i,arguments);var o=this.logger,a=this.getPayload({bootstrapConfiguration:e,environmentConfiguration:t}),c=g.Z.getConfiguration,u=new y.Z({logger:o,source:this.toString(),urn:P.getConfiguration,payload:a,endpointKey:c,logTransaction:r});return o.info(this.toString(),"GET ".concat(a.url)),(0,s.Z)((0,l.Z)(n.prototype),"request",this).call(this,{payload:a,dustLogUtility:u,handleServiceResponseMethodName:c,resultMapper:function(e){return e.data}})}},{key:"getPayload",value:function(e){var t=e.bootstrapConfiguration,n=e.environmentConfiguration,i=n.sdkVersion,o=n.deviceFamily,a=n.deviceProfile,s=n.configVersion,c=n.applicationRuntimeConfigSegment,u=t.debugEnabled,l=t.environment,p=t.clientId,d=t.configHostName,y=t.configHostOverride,f=t.configHostUrlOverride,v=t.extras,g=(v=void 0===v?{}:v).configExtensions,m=(g=void 0===g?{}:g).configTokenReplacements,b=void 0===m?{}:m,k=this.config,S=k.endpoints,P=k.extras,E=S.bootstrap,Z=E.headers,w=E.href,D=E.templated,C=E.method,A=(0,h.Z)({},Z,void 0,{ignoreRequestId:!0}),R=u&&f||w;if(D){var x,O=y||(null===(x=P.configHostParams[d])||void 0===x?void 0:x.baseUrl);R=R.replace(/\{baseUrl\}/gi,O).replace(/\{configVersion\}/gi,s).replace(/\{clientId\}/gi,p).replace(/\{deviceFamily\}/gi,o).replace(/\{sdkVersion\}/gi,i).replace(/\{applicationRuntime\}/gi,c).replace(/\{deviceProfile\}/gi,a).replace(/\{environment\}/gi,l)}return{url:R,method:C,headers:new T.Z(A),tuningOptions:{ignoreRequestIdValidation:!0},preJsonParseProcessor:function(e){return b&&Object.entries(b).forEach((function(t){var n=(0,r.Z)(t,2),i=n[0],o=n[1];e=e.replace(new RegExp("{".concat(i,"}"),"g"),o)})),e}}}},{key:"toString",value:function(){return"SDK.Services.Configuration.ConfigurationClient"}}]),n}(k.Z)},75742:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Configuration.ConfigurationClientConfiguration"}}]),n}(n(88152).Z)},56944:function(e,t){"use strict";var n;!function(e){e.getConfiguration="getConfiguration"}(n||(n={})),t.Z=n},49160:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={configHostParams:o.Types.nonEmptyObject};o.typecheck.warn(this,n,arguments),this.configHostParams=t}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Configuration.ConfigurationClientExtrasMap"}}]),e}()},4484:function(e,t){"use strict";var n;!function(e){e.dev="dev",e.release="release",e.staging="staging"}(n||(n={})),t.Z=n},71111:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Configuration.CustomerServiceManagerConfiguration"}}]),n}(n(47539).Z)},81763:function(e,t){"use strict";var n;!function(e){e.GET="GET",e.POST="POST",e.DELETE="DELETE",e.PATCH="PATCH",e.PUT="PUT",e.HEAD="HEAD"}(n||(n={})),t.Z=n},39046:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Configuration.MediaManagerConfiguration"}}]),n}(n(47539).Z)},47549:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Configuration.OrchestrationManagerConfiguration"}}]),n}(n(47539).Z)},7980:function(e,t){"use strict";var n;!function(e){e.chromecast="chromecast",e.netcast="netcast",e.panasonictv="panasonictv",e.sonybravia="sonybravia",e.tivo="tivo",e.tizen="tizen",e.trilithium="trilithium",e.vizio="vizio",e.webos="webos",e.canalPlus="canalPlus",e.skyq="skyq",e.cableVision="cableVision",e.comcastx1="comcastx1",e.telecentro="telecentro",e.toshibaRegza="toshibaRegza",e.hisense="hisense",e.rogersx1="rogersx1",e.coxx1="coxx1",e.xglobal="xglobal",e.shawx1="shawx1",e.ditv="ditv",e.pwaWindowsApp="pwaWindowsApp",e.foxtel="foxtel",e.charter="charter"}(n||(n={})),t.Z=n},58405:function(e,t){"use strict";t.Z={chromecast:{deviceProfile:"google",applicationRuntime:"chromecast",deviceRuntimeProfile:"chromecast",platform:"chromecast"},netcast:{deviceProfile:"lg",applicationRuntime:"netcast",deviceRuntimeProfile:"netcast",platform:"netcast"},panasonictv:{deviceProfile:"panasonic",applicationRuntime:"panasonictv",deviceRuntimeProfile:"panasonictv",platform:"panasonictv"},sonybravia:{deviceProfile:"sony",applicationRuntime:"sonybravia",deviceRuntimeProfile:"sonybravia",platform:"sonybravia"},tivo:{deviceProfile:"tivo",applicationRuntime:"tivo",deviceRuntimeProfile:"tivo",platform:"tivo"},tizen:{deviceProfile:"samsung",applicationRuntime:"tizen",deviceRuntimeProfile:"tizen",platform:"tizen"},vizio:{deviceProfile:"vizio",applicationRuntime:"vizio",deviceRuntimeProfile:"vizio",platform:"vizio"},webos:{deviceProfile:"lg",applicationRuntime:"webos",deviceRuntimeProfile:"webos",platform:"webos"},canalPlus:{deviceProfile:"canalPlus",applicationRuntime:"canalPlus",deviceRuntimeProfile:"canalPlus",platform:"canalPlus"},skyq:{deviceProfile:"sky",applicationRuntime:"skyq",deviceRuntimeProfile:"skyq",platform:"skyq"},cableVision:{deviceProfile:"cableVision",applicationRuntime:"cableVision",deviceRuntimeProfile:"cableVision",platform:"cableVision"},comcastx1:{deviceProfile:"comcast",applicationRuntime:"comcastx1",deviceRuntimeProfile:"comcastx1",platform:"comcastx1"},telecentro:{deviceProfile:"telecentro",applicationRuntime:"telecentro",deviceRuntimeProfile:"telecentro",platform:"telecentro"},toshibaRegza:{deviceProfile:"toshiba",applicationRuntime:"toshibaRegza",deviceRuntimeProfile:"toshibaRegza",platform:"toshibaRegza"},hisense:{deviceProfile:"hisense",applicationRuntime:"hisense",deviceRuntimeProfile:"hisense",platform:"hisense"},rogersx1:{deviceProfile:"rogers",applicationRuntime:"rogersx1",deviceRuntimeProfile:"rogersx1",platform:"rogersx1"},coxx1:{deviceProfile:"cox",applicationRuntime:"coxx1",deviceRuntimeProfile:"coxx1",platform:"coxx1"},xglobal:{deviceProfile:"xglobal",applicationRuntime:"xglobal",deviceRuntimeProfile:"xglobal",platform:"xglobal"},shawx1:{deviceProfile:"shaw",applicationRuntime:"shawx1",deviceRuntimeProfile:"shawx1",platform:"shawx1"},ditv:{deviceProfile:"lg",applicationRuntime:"ditv",deviceRuntimeProfile:"ditv",platform:"ditv"},pwaWindowsApp:{deviceProfile:"windows",applicationRuntime:"pwa-windows-app",deviceRuntimeProfile:"pwa-windows-app",platform:"pwa-windows-app"},foxtel:{deviceProfile:"foxtel",applicationRuntime:"foxtel",deviceRuntimeProfile:"foxtel",platform:"foxtel"},charter:{deviceProfile:"charter",applicationRuntime:"charter",deviceRuntimeProfile:"charter",platform:"charter"}}},31386:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={retryBasePeriod:o.Types.number.warn,retryMultiplier:o.Types.number.warn,retryMaxAttempts:o.Types.number.warn,retryMaxPeriod:o.Types.number.warn};(0,o.typecheck)(this,n,arguments);var i=t.retryBasePeriod,a=t.retryMultiplier,s=t.retryMaxAttempts,c=t.retryMaxPeriod;this.retryBasePeriod=i,this.retryMultiplier=a,this.retryMaxAttempts=s,this.retryMaxPeriod=c}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Configuration.RetryPolicy"}}]),e}()},10664:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(15671),i=n(43144),o=(n(74916),n(15306),n(67682)),a=n(61530),s=n(14008),c=n(83668),u=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({commonHeaders:o.Types.nonEmptyObject,commonValues:o.Types.nonEmptyObject.optional,services:o.Types.nonEmptyObject,environmentConfiguration:o.Types.instanceStrict(s.Z.EnvironmentConfiguration),application:o.Types.nonEmptyObject})};(0,o.typecheck)(this,n,arguments);var i=t.application,a=t.commonHeaders,c=t.commonValues,u=t.environmentConfiguration,l=t.services;this.commonHeaders={},this.commonValues={},this.services={},this.application=i,this.wasFetchedViaExternalGetter=!1,this.processConfig({commonHeaders:a,commonValues:c,services:l,application:i},u)}return(0,i.Z)(e,[{key:"processConfig",value:function(e,t){var n=e.commonHeaders,r=e.commonValues,i=void 0===r?{}:r,o=e.services,s=t.sdkVersion,u=t.applicationVersion,l=t.constructedPlatformIdentifier;this.commonHeaders=n,this.commonValues=i;var p=this.commonHeaders[c.SDK_VERSION].replace(/\{SDKVersion\}/gi,s),d=this.commonHeaders[c.SDK_PLATFORM].replace(/\{SDKPlatform\}/gi,l),y=this.commonHeaders[c.APPLICATION_VERSION].replace(/\{applicationVersion\}/gi,u);this.commonHeaders[c.SDK_VERSION]=p,this.commonHeaders[c.SDK_PLATFORM]=d,this.commonHeaders[c.APPLICATION_VERSION]=y,this.commonHeaders[c.REQUEST_ID]="",this.services=new a.Z({services:o,commonHeaders:n,commonValues:i})}},{key:"toString",value:function(){return"SDK.Services.Configuration.SdkSessionConfiguration"}}]),e}()},88152:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(15671),i=n(43144),o=function(){function e(t){(0,r.Z)(this,e);var n=t.baseUrl,i=t.endpoints,o=t.extras;this.baseUrl=n,this.endpoints=i||{},this.extras=o||{}}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Configuration.ServiceClientConfiguration"}}]),e}()},47539:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(15671),i=n(43144),o=function(){function e(t){(0,r.Z)(this,e);var n=t.client,i=t.extras,o=t.disabled;this.client=n||{},this.extras=i||{},this.disabled=o||!1}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Configuration.ServiceConfiguration"}}]),e}()},61530:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(15671),i=n(43144),o=(n(41539),n(54747),n(47941),n(19601),n(67682)),a=n(72431),s=n(47549),c=n(87501),u=n(35924),l=n(23389),p=n(66311),d=n(19307),y=n(41408),f=n(80921),h=n(431),v=n(53034),g=n(55765),m=n(61205),b=n(31386),T=n(53514),k=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({services:o.Types.nonEmptyObject,commonHeaders:o.Types.object().optional,commonValues:o.Types.object().optional})};(0,o.typecheck)(this,n,arguments);var i=t.services,a=t.commonHeaders,s=void 0===a?{}:a,c=t.commonValues,u=void 0===c?{}:c;this.commonHeaders=s||{},this.commonValues=u||{},this.account={},this.adEngine={},this.commerce={},this.content={},this.customerService={},this.drm={},this.eligibility={},this.entitlement={},this.explore={},this.invoice={},this.subscription={},this.token={},this.media={},this.telemetry={},this.orchestration={},this.paywall={},this.externalActivation={},this.socket={},this.ripcut={},this.qrCode={},this.services=i,this.processServices(i)}return(0,i.Z)(e,[{key:"processServices",value:function(e){var t,n,r,i,o,T=this,k=e.subscription,S=e.token,P=e.telemetry,E=e.orchestration,Z=S.client,w=S.extras,D=Z.endpoints,C=Z.extras,A=w.refreshThreshold,R=w.subjectTokenTypes,x=w.disableTokenRefresh,O=w.autoRefreshRetryPolicy,I=P.extras,M=new b.Z(O),j=new p.Z({baseUrl:null==P||null===(t=P.client)||void 0===t?void 0:t.baseUrl,endpoints:this.processEndpoints(null==P||null===(n=P.client)||void 0===n?void 0:n.endpoints)}),L=new f.Z({baseUrl:Z.baseUrl,endpoints:this.processEndpoints(D),extras:new h.Z(C)}),N=new c.Z({baseUrl:null==E||null===(r=E.client)||void 0===r?void 0:r.baseUrl,endpoints:this.processEndpoints(E.client.endpoints)});a.getPlugins().forEach((function(e){T.applyConfigToPlugin(e)}));var B=new m.Z(I.eventBufferConfiguration),_=new m.Z(I.streamSampleBufferConfiguration),F=new m.Z(I.glimpseBufferConfiguration),U=new m.Z(I.qoeBufferConfiguration),q=new m.Z(I.dustEnvelopeBufferConfiguration);this.subscription=new l.Z({baseUrl:null==k||null===(i=k.client)||void 0===i?void 0:i.baseUrl,endpoints:this.processEndpoints(null==k||null===(o=k.client)||void 0===o?void 0:o.endpoints)}),this.telemetry=new d.Z({client:j,extras:new y.Z({eventBufferConfiguration:B,streamSampleBufferConfiguration:_,glimpseBufferConfiguration:F,qoeBufferConfiguration:U,fastTrack:I.fastTrack,prohibited:I.prohibited,permitAppDustEvents:I.permitAppDustEvents,dustEnvelopeBufferConfiguration:q,isEventsAtEdgeEnabled:I.isEventsAtEdgeEnabled}),disabled:P.disabled}),this.token=new v.Z({client:L,extras:new g.Z({refreshThreshold:A,autoRefreshRetryPolicy:M,subjectTokenTypes:R,disableTokenRefresh:x}),disabled:S.disabled}),this.orchestration=new s.Z({client:N,extras:new u.Z(E.extras),disabled:E.disabled})}},{key:"processEndpoints",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.commonHeaders,n={};return Object.keys(e).forEach((function(r){var i=e[r];i.headers=i.headers?Object.assign(i.headers,t):t,i.rel=r,n[i.rel]=new T.Z(i)})),n}},{key:"applyConfigToPlugin",value:function(e){var t;null===(t=e.applyConfig)||void 0===t||t.call(e,this,this.services)}},{key:"toString",value:function(){return"SDK.Services.Configuration.ServiceDefinitionsConfiguration"}}]),e}()},53514:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(81763),a=function(){function e(t){(0,r.Z)(this,e);var n=t.rel,i=t.href,a=t.ttl,s=t.timeout,c=t.templated,u=t.method,l=void 0===u?o.Z.GET:u,p=t.headers,d=void 0===p?null:p,y=t.optionalHeaders,f=void 0===y?null:y;this.rel=n,this.href=i,this.ttl=a,this.timeout=s,this.templated=c,this.method=l,this.headers=d,this.optionalHeaders=f}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Configuration.ServiceEndpoint"}}]),e}()},62339:function(e,t){"use strict";var n;!function(e){e.prod="prod",e.qa="qa",e.mock="mock",e.rapid="rapid"}(n||(n={})),t.Z=n},92522:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Configuration.SocketManagerConfiguration"}}]),n}(n(47539).Z)},61205:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({batchLimit:o.Types.number,disabled:o.Types.boolean,maxBackOffRetrySeconds:o.Types.number,minimumBatchSize:o.Types.number,replyAfterFallback:o.Types.number,queueLimit:o.Types.number.optional}).optional};o.typecheck.warn(this,n,arguments);var i=t||{},a=i.batchLimit,s=i.disabled,c=i.maxBackOffRetrySeconds,u=i.minimumBatchSize,l=i.replyAfterFallback,p=i.queueLimit;this.batchLimit=a||20,this.disabled=s||!1,this.maxBackOffRetrySeconds=c||120,this.minimumBatchSize=u||10,this.replyAfterFallback=l||30,this.queueLimit=p||200}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Configuration.TelemetryBufferConfiguration"}}]),e}()},19307:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Configuration.TelemetryManagerConfiguration"}}]),n}(n(47539).Z)},41408:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(61205),s=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({prohibited:o.Types.object(),permitAppDustEvents:o.Types.boolean,streamSampleBufferConfiguration:o.Types.instanceStrict(a.Z),glimpseBufferConfiguration:o.Types.instanceStrict(a.Z),qoeBufferConfiguration:o.Types.instanceStrict(a.Z),eventBufferConfiguration:o.Types.instanceStrict(a.Z),fastTrack:o.Types.object().optional,dustEnvelopeBufferConfiguration:o.Types.instanceStrict(a.Z),isEventsAtEdgeEnabled:o.Types.boolean,preferQoeOverStreamSamples:o.Types.boolean.optional})};o.typecheck.warn(this,n,arguments);var i=t.streamSampleBufferConfiguration,s=t.glimpseBufferConfiguration,c=t.qoeBufferConfiguration,u=t.eventBufferConfiguration,l=t.fastTrack,p=t.prohibited,d=t.permitAppDustEvents,y=t.dustEnvelopeBufferConfiguration,f=t.isEventsAtEdgeEnabled,h=t.preferQoeOverStreamSamples,v=void 0===h||h;this.streamSampleBufferConfiguration=i,this.glimpseBufferConfiguration=s,this.qoeBufferConfiguration=c,this.eventBufferConfiguration=u,this.fastTrack=l,this.prohibited=p,this.permitAppDustEvents=d,this.dustEnvelopeBufferConfiguration=y,this.isEventsAtEdgeEnabled=f,this.preferQoeOverStreamSamples=v}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Configuration.TelemetryManagerExtrasMap"}}]),e}()},53034:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Configuration.TokenManagerConfiguration"}}]),n}(n(47539).Z)},55765:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(31386),s=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({refreshThreshold:o.Types.number,autoRefreshRetryPolicy:o.Types.instanceStrict(a.Z),subjectTokenTypes:o.Types.nonEmptyObject,disableTokenRefresh:o.Types.boolean})};o.typecheck.warn(this,n,arguments);var i=t||{},s=i.refreshThreshold,c=i.autoRefreshRetryPolicy,u=i.subjectTokenTypes,l=i.disableTokenRefresh;this.refreshThreshold=s,this.autoRefreshRetryPolicy=c,this.subjectTokenTypes=u,this.disableTokenRefresh=l}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Configuration.TokenManagerExtrasMap"}}]),e}()},6438:function(e,t,n){"use strict";n.d(t,{IC:function(){return o},fP:function(){return u},i5:function(){return i},k7:function(){return a},yg:function(){return c}});var r=n(67682),i={isEnabled:r.Types.boolean,defaultTimeout:r.Types.number,fallbackLimit:r.Types.number},o={minimumBatchSize:r.Types.number},a={version:r.Types.nonEmptyString,id:r.Types.nonEmptyString,name:r.Types.nonEmptyString},s={deviceProfile:r.Types.nonEmptyString,applicationRuntime:r.Types.nonEmptyString,deviceRuntimeProfile:r.Types.nonEmptyString,platform:r.Types.nonEmptyString},c={useMemoryFirst:r.Types.boolean.optional,useStorageCompression:r.Types.boolean.optional,configExtensions:r.Types.object({postConfig:r.Types.function.optional,platformOverride:r.Types.object(s).optional,configTokenReplacements:r.Types.object({platformId:r.Types.nonEmptyString}).optional}).optional},u={maxSize:r.Types.number.optional}},59912:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(97326),c=n(2291),u=n(60136),l=n(82963),p=n(61120),d=n(87757),y=n.n(d),f=(n(41539),n(39714),n(67682)),h=n(1206),v=n(84983),g=n(9417),m=n(37162),b=n(81763),T=n(69867),k=n(24965),S=n(40064),P=n(83668);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var D=v.Z.services.content.contentClient,C=function(e){(0,u.Z)(r,e);var t,n=w(r);function r(e){var t;(0,o.Z)(this,r),t=n.call(this,e);var i=f.Types.object({config:f.Types.instanceStrict(g.Z)});return(0,f.typecheck)((0,s.Z)(t),i,arguments),t.logger.log(t.toString(),"Created."),t}return(0,a.Z)(r,[{key:"query",value:(t=(0,i.Z)(y().mark((function e(t){var n,i,o,a,s,u,l,d,v,g;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.context,i=t.queryBuilder,o=t.accessToken,a=t.overrides,s=t.contentTransactionId,u=t.logTransaction,l=this.logger,d=n,f.Check.not.assigned(m.Z[d])&&l.warn(this.toString(),"ContentClientEndpoint[".concat(n,"] is not defined.")),v=this.getPayload({accessToken:o,endpointKey:d,queryBuilder:i,overrides:a,contentTransactionId:s}),g=new h.Z({logger:l,source:this.toString(),urn:D.query,payload:v,endpointKey:d,logTransaction:u}),e.abrupt("return",(0,c.Z)((0,p.Z)(r.prototype),"request",this).call(this,{payload:v,dustLogUtility:g,handleServiceResponseMethodName:"query",resultMapper:function(e){return e.data}}));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getPayload",value:function(e){var t=e.accessToken,n=e.endpointKey,r=e.queryBuilder,i=e.overrides,o=e.contentTransactionId,a=this.config.endpoints,s=this.config.extras.urlSizeLimit,c=a[n],u=c.href,l=c.method,p=c.headers,d={};if(f.Check.assigned(i)){var y=i,h=y.activeDate,v=y.countryCode,g=y.bypassCDNCache;h&&(d[P.DELOREAN]=h),v&&(d[P.GEO_OVERRIDE]=v),g&&(d[P.BYPASS_CDN_CACHE]=g)}f.Check.assigned(o)&&(d[P.CONTENT_TRANSACTION_ID]=o);var m=l?b.Z[l.toUpperCase()]:b.Z.POST,S=r.createQueryUrl(u,m),E="";m===b.Z.GET&&S.length>s&&(m=b.Z.POST,S=r.createQueryUrl(u,m));var w=Z(Z({},p),d),D=(0,k.Z)({Authorization:function(){return{replacer:"{accessToken}",value:t.token}}},w),C=new T.Z(D);return m===b.Z.GET?C.delete(P.CONTENT_TYPE):m===b.Z.POST&&(E=r.createPostContent()),{url:S,body:E,method:m,headers:C}}},{key:"toString",value:function(){return"SDK.Services.Content.ContentClient"}}]),r}(S.Z)},9417:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).extras=e.extras,i}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Content.ContentClientConfiguration"}}]),n}(n(88152).Z)},37162:function(e,t,n){"use strict";var r;n(74916),n(64765),function(e){e.autoSuggestPersisted="autoSuggestPersisted",e.dmcVideos="dmcVideos",e.getAiring="getAiring",e.getAiringByAiringId="getAiringByAiringId",e.getAvatar="getAvatar",e.getAvatars="getAvatars",e.getCWSeason="getCWSeason",e.getCWSeasonWithBookmark="getCWSeasonWithBookmark",e.getCWSeries="getCWSeries",e.getCWSeriesWithBookmark="getCWSeriesWithBookmark",e.getCWSet="getCWSet",e.getCWSetWithBookmark="getCWSetWithBookmark",e.getCWVideo="getCWVideo",e.getCWVideoWithBookmark="getCWVideoWithBookmark",e.getCollection="getCollection",e.getCollectionByGroupId="getCollectionByGroupId",e.getCompleteStandardCollection="getCompleteStandardCollection",e.getCuratedSet="getCuratedSet",e.getDictionaryLatest="getDictionaryLatest",e.getDictionaryVersion="getDictionaryVersion",e.getDmcEpisodes="getDmcEpisodes",e.getDmcExtras="getDmcExtras",e.getDmcProgramBundle="getDmcProgramBundle",e.getDmcSeason="getDmcSeason",e.getDmcSeasonByNumber="getDmcSeasonByNumber",e.getDmcSeasons="getDmcSeasons",e.getDmcSeries="getDmcSeries",e.getDmcSeriesBundle="getDmcSeriesBundle",e.getDmcSeriesMeta="getDmcSeriesMeta",e.getDmcVideo="getDmcVideo",e.getDmcVideoBundle="getDmcVideoBundle",e.getDmcVideoMeta="getDmcVideoMeta",e.getLiveAndUpcomingEpisodes="getLiveAndUpcomingEpisodes",e.getPersonalizedProgramBundle="getPersonalizedProgramBundle",e.getPersonalizedProgramBundleWithBookmark="getPersonalizedProgramBundleWithBookmark",e.getPersonalizedSeriesBundle="getPersonalizedSeriesBundle",e.getPersonalizedSeriesBundleWithBookmark="getPersonalizedSeriesBundleWithBookmark",e.getPersonalizedSet="getPersonalizedSet",e.getRelatedItemsForSeries="getRelatedItemsForSeries",e.getRelatedItemsForVideo="getRelatedItemsForVideo",e.getSearchResults="getSearchResults",e.getSet="getSet",e.getSiteSearch="getSiteSearch",e.getStandardCollection="getStandardCollection",e.getUpNext="getUpNext",e.putItemInWatchlist="putItemInWatchlist",e.search="search",e.searchPersisted="searchPersisted"}(r||(r={})),t.Z=r},82886:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(15671),i=n(43144),o=function(){function e(){(0,r.Z)(this,e)}return(0,i.Z)(e,[{key:"createQueryUrl",value:function(){throw new Error("".concat("createQueryUrl(url, method)"," - not-implemented"))}},{key:"createPostContent",value:function(){throw new Error("".concat("createPostContent()"," - not-implemented"))}},{key:"toString",value:function(){return"SDK.Services.Content.QueryBuilder"}}]),e}()},10789:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}}),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(2291),c=n(60136),u=n(82963),l=n(61120),p=n(87757),d=n.n(p),y=(n(41539),n(39714),n(67682)),f=n(24965),h=n(1206),v=n(84983),g=n(72e3),m=n(13003),b=n(70928),T=n(69867),k=n(40064);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var P=v.Z.services.customerService.customerServiceClient,E=function(e){(0,c.Z)(u,e);var t,n=S(u);function u(e){var t;(0,i.Z)(this,u),t=n.call(this,e);var r=y.Types.object({config:y.Types.instanceStrict(g.Z)});return(0,y.typecheck)((0,a.Z)(t),r,arguments),t.logger.log(t.toString(),"Created."),t}return(0,o.Z)(u,[{key:"createSupportCode",value:(t=(0,r.Z)(d().mark((function e(t,n){var r,i,o,a,c,p=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={accessToken:y.Types.instanceStrict(b.Z)},(0,y.typecheck)(this,"createSupportCode",r,p),i=this.logger,o=m.Z.createSupportCode,a=this.getPayload({accessToken:t,endpointKey:o}),i.info(this.toString(),"Requesting customer service support code."),c=new h.Z({logger:i,source:this.toString(),urn:P.createSupportCode,payload:a,endpointKey:o,logTransaction:n}),e.abrupt("return",(0,s.Z)((0,l.Z)(u.prototype),"request",this).call(this,{payload:a,dustLogUtility:c,resultMapper:function(e){return String(e.data)}}));case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getPayload",value:function(e){var t=e.accessToken,n=e.endpointKey,r=e.body,i=this.config.endpoints[n],o=i.href,a=i.headers,s=i.method,c=r?JSON.stringify(r):"",u=(0,f.Z)({Authorization:function(){return{replacer:"{accessToken}",value:t.token}}},a);return{url:o,method:s,body:c,headers:new T.Z(u)}}},{key:"toString",value:function(){return"SDK.Services.CustomerService.CustomerServiceClient"}}]),u}(k.Z)},72e3:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.CustomerService.CustomerServiceClientConfiguration"}}]),n}(n(88152).Z)},13003:function(e,t){"use strict";var n;!function(e){e.createSupportCode="createSupportCode"}(n||(n={})),t.Z=n},16576:function(e,t,n){"use strict";n.d(t,{Z:function(){return K}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(97326),c=n(60136),u=n(82963),l=n(61120),p=n(87757),d=n.n(p),y=(n(41539),n(39714),n(26699),n(32023),n(67682)),f=n(7694),h=n(24965),v=n(1206),g=n(84983),m=n(36047),b=n(51701),T=n(60753),k=n(81374),S=n(28481),P=n(40176),E=n(70928),Z=n(25279),w=n(34391),D=n(28928),C=n(19546),A=n(73688),R=n(57890),x=n(52662),O=n(12719),I=n(69867),M=n(40064),j=n(14024),L=n(89565);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var F=g.Z.services.drm.drmClient,U=g.Z.qualityOfService,q=[b.Z.fairPlayCertificate,b.Z.widevineCertificate],K=function(e){(0,c.Z)(W,e);var t,n,r,u,l,p,g,M,N,K,V,H,G,Q,z=_(W);function W(e){var t;(0,o.Z)(this,W),t=z.call(this,e);var n={options:y.Types.object({config:y.Types.instanceStrict(T.Z),clientId:y.Types.nonEmptyString,environment:y.Types.nonEmptyString,storage:y.Types.instanceStrict(L.Z)})};(0,y.typecheck)((0,s.Z)(t),n,arguments);var r=e.clientId,i=e.environment,a=e.storage;return t.clientId=r,t.environment=i,t.storage=a,t.logger.log(t.toString(),"Created."),t}return(0,a.Z)(W,[{key:"getSilkKey",value:(Q=(0,i.Z)(d().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,f=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:y.Types.object({keyLocation:y.Types.nonEmptyString,mediaItem:y.Types.instanceStrict(w.Z),playheadPosition:y.Types.number.optional,accessToken:y.Types.instanceStrict(E.Z),logTransaction:y.Types.instanceStrict(x.Z)})},(0,y.typecheck)(this,"getSilkKey",n,f),r=this.logger,i=t.keyLocation,o=t.mediaItem,a=t.playheadPosition,s=t.accessToken,c=t.logTransaction,u=b.Z.silkKey,(l=this.getPayload({accessToken:s,rel:u,bodyType:"json"})).url=i,r.info(this.toString(),"Attempting to retrieve SilkKey from keyLocation: ".concat(i,".")),p=new v.Z({logger:r,source:this.toString(),urn:F.getSilkKey,payload:l,endpointKey:u,logTransaction:c}),e.abrupt("return",this.getResponseAndLog({eventHandler:"sendQoeDrmLicenseEvent",dustLogUtility:p,mediaItem:o,payload:l,playheadPosition:a}));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return Q.apply(this,arguments)})},{key:"getFairPlayCertificate",value:(G=(0,i.Z)(d().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,f=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:y.Types.object({accessToken:y.Types.instanceStrict(E.Z),mediaItem:y.Types.instanceStrict(w.Z),logTransaction:y.Types.instanceStrict(x.Z),videoPlayerName:y.Types.nonEmptyString.optional,videoPlayerVersion:y.Types.nonEmptyString.optional})},(0,y.typecheck)(this,"getFairPlayCertificate",n,f),r=t.accessToken,i=t.mediaItem,o=t.logTransaction,a=t.videoPlayerName,s=t.videoPlayerVersion,c=this.logger,u=b.Z.fairPlayCertificate,l=this.getPayload({accessToken:r,rel:u}),c.info(this.toString(),"Attempting to retrieve FairPlay Certificate."),p=new v.Z({logger:c,source:this.toString(),urn:F.getFairPlayCertificate,payload:l,endpointKey:u,logTransaction:o}),e.abrupt("return",this.getResponseAndLog({eventHandler:"sendQoeDrmCertificateEvent",dustLogUtility:p,mediaItem:i,payload:l,videoPlayerName:a,videoPlayerVersion:s}));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return G.apply(this,arguments)})},{key:"getFairPlayLicense",value:(H=(0,i.Z)(d().mark((function e(t){var n,r,i,o,a,s,c,u,l,p=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:y.Types.object({endpointKey:y.Types.nonEmptyString.optional,mediaItem:y.Types.instanceStrict(w.Z).optional,accessToken:y.Types.instanceStrict(E.Z),logTransaction:y.Types.instanceStrict(x.Z)})},(0,y.typecheck)(this,"getFairPlayLicense",n,p),r=this.logger,i=t.serverPlaybackContext,o=t.endpointKey,a=t.mediaItem,s=t.accessToken,c=t.logTransaction,u=this.getPayload({accessToken:s,rel:b.Z.fairPlayLicense,body:i,endpointKey:o}),r.info(this.toString(),"Attempting to retrieve FairPlay License: ".concat(JSON.stringify(i),".")),l=new v.Z({logger:r,source:this.toString(),urn:F.getFairPlayLicense,payload:u,endpointKey:o||b.Z.fairPlayLicense,logTransaction:c}),e.abrupt("return",this.getResponseAndLog({eventHandler:"sendQoeDrmLicenseEvent",dustLogUtility:l,mediaItem:a,payload:u}));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return H.apply(this,arguments)})},{key:"getWidevineCertificate",value:(V=(0,i.Z)(d().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,f=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:y.Types.object({accessToken:y.Types.instanceStrict(E.Z),mediaItem:y.Types.instanceStrict(w.Z),logTransaction:y.Types.instanceStrict(x.Z),videoPlayerName:y.Types.nonEmptyString.optional,videoPlayerVersion:y.Types.nonEmptyString.optional})},(0,y.typecheck)(this,"getWidevineCertificate",n,f),r=t.accessToken,i=t.mediaItem,o=t.logTransaction,a=t.videoPlayerName,s=t.videoPlayerVersion,c=this.logger,u=b.Z.widevineCertificate,l=this.getPayload({accessToken:r,rel:u}),c.info(this.toString(),"Attempting to retrieve Widevine Certificate."),p=new v.Z({logger:c,source:this.toString(),urn:F.getWidevineCertificate,payload:l,endpointKey:u,logTransaction:o}),e.abrupt("return",this.getResponseAndLog({eventHandler:"sendQoeDrmCertificateEvent",dustLogUtility:p,mediaItem:i,payload:l,videoPlayerName:a,videoPlayerVersion:s}));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return V.apply(this,arguments)})},{key:"getWidevineLicense",value:(K=(0,i.Z)(d().mark((function e(t){var n,r,i,o,a,s,c,u,l,p=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:y.Types.object({buffer:y.Types.arrayBufferView,endpointKey:y.Types.nonEmptyString.optional,mediaItem:y.Types.instanceStrict(w.Z),accessToken:y.Types.instanceStrict(E.Z),logTransaction:y.Types.instanceStrict(x.Z)})},(0,y.typecheck)(this,"getWidevineLicense",n,p),r=this.logger,i=t.buffer,o=t.endpointKey,a=t.mediaItem,s=t.accessToken,c=t.logTransaction,u=this.getPayload({accessToken:s,rel:b.Z.widevineLicense,body:i,endpointKey:o}),r.info(this.toString(),"Attempting to retrieve Widevine License with: ".concat(JSON.stringify(i),".")),l=new v.Z({logger:r,source:this.toString(),urn:F.getWidevineLicense,payload:u,endpointKey:o||b.Z.widevineLicense,logTransaction:c}),e.abrupt("return",this.getResponseAndLog({eventHandler:"sendQoeDrmLicenseEvent",dustLogUtility:l,mediaItem:a,payload:u}));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return K.apply(this,arguments)})},{key:"getPlayReadyLicense",value:(N=(0,i.Z)(d().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,f,h=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:y.Types.object({message:y.Types.instanceStrict(S.Z),endpointKey:y.Types.nonEmptyString.optional,mediaItem:y.Types.instanceStrict(w.Z),accessToken:y.Types.instanceStrict(E.Z),logTransaction:y.Types.instanceStrict(x.Z)})},(0,y.typecheck)(this,"getPlayReadyLicense",n,h),r=this.logger,i=t.message,o=t.endpointKey,a=t.mediaItem,s=t.accessToken,c=t.logTransaction,u=i.body,l=void 0===u?{}:u,p=this.getPayload({accessToken:s,rel:b.Z.playReadyLicense,body:l.xmlData,endpointKey:o}),r.info(this.toString(),"Attempting to retrieve PlayReady License: message: ".concat(JSON.stringify(i.body),".")),f=new v.Z({logger:r,source:this.toString(),urn:F.getPlayReadyLicense,payload:p,endpointKey:o||b.Z.playReadyLicense,logTransaction:c}),e.abrupt("return",this.getResponseAndLog({eventHandler:"sendQoeDrmLicenseEvent",dustLogUtility:f,mediaItem:a,payload:p}));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"getNagraCertificate",value:(M=(0,i.Z)(d().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,f=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:y.Types.object({accessToken:y.Types.instanceStrict(E.Z),mediaItem:y.Types.instanceStrict(w.Z),logTransaction:y.Types.instanceStrict(x.Z),videoPlayerName:y.Types.nonEmptyString.optional,videoPlayerVersion:y.Types.nonEmptyString.optional})},(0,y.typecheck)(this,"getNagraCertificate",n,f),r=t.accessToken,i=t.mediaItem,o=t.logTransaction,a=t.videoPlayerName,s=t.videoPlayerVersion,c=this.logger,u=b.Z.nagraCertificate,l=this.getPayload({accessToken:r,rel:u,bodyType:"json"}),c.info(this.toString(),"Attempting to retrieve Nagra Certificate."),p=new v.Z({logger:c,source:this.toString(),urn:F.getNagraCertificate,payload:l,endpointKey:u,logTransaction:o}),e.abrupt("return",this.getResponseAndLog({eventHandler:"sendQoeDrmCertificateEvent",dustLogUtility:p,mediaItem:i,payload:l,videoPlayerName:a,videoPlayerVersion:s}));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return M.apply(this,arguments)})},{key:"getQosServerRequestData",value:function(e){if(y.Check.not.instanceStrict(e,v.Z))return new A.Z;var t,n=e.server,r=e.error,i=n.roundTripTime,o=n.host,a=n.path,s=n.method,c=void 0===s?"":s,u=n.statusCode,l=C.FetchStatus.completed;return r&&(u===j.Z.UNAUTHORIZED||u===j.Z.FORBIDDEN?t=C.NetworkError.prohibited:u&&u>=500?(t=C.NetworkError.notConnected,l=C.FetchStatus.noNetwork):t=C.NetworkError.unknown,r.code===P.Z.unspecifiedDrmError.code&&(t=C.NetworkError.unknown)),new A.Z({host:o,path:a,statusCode:u,roundTripTime:i,method:c.toLowerCase(),status:l,error:t})}},{key:"getCommonProperties",value:function(e){var t,n=this.logger.analyticsProvider,r=null!==(t=null==e?void 0:e.data)&&void 0!==t?t:{};if(n){var i=n.getCommonProperties(null==e?void 0:e.playbackSessionId);r=B(B({},r),i)}return r}},{key:"getQosDecision",value:(g=(0,i.Z)(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload.stream.qosDecisions,r=void 0===n?{}:n,e.next=3,t.getPreferredPlaylist();case 3:if(e.sent.playlistType!==D.PlaylistType.SLIDE){e.next=6;break}return e.abrupt("return",r.slide);case 6:return e.abrupt("return",r.complete);case 7:case"end":return e.stop()}}),e)}))),function(e){return g.apply(this,arguments)})},{key:"getTrackingValues",value:(p=(0,i.Z)(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPreferredPlaylist();case 2:return r=e.sent,e.abrupt("return",r.getTrackingData(n,t.priorityTracking));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return p.apply(this,arguments)})},{key:"getQoeValue",value:(l=(0,i.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPreferredPlaylist();case 2:if(n=e.sent,!t.priorityTracking){e.next=5;break}return e.abrupt("return",n.getTrackingData(Z.aD.qoe,t.priorityTracking));case 5:return e.abrupt("return",n.getTrackingData(Z.aD.qoe));case 6:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"sendQoeDrmCertificateEvent",value:(u=(0,i.Z)(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.requestStartTime,r=t.requestDuration,e.next=3,this.createPlaybackStartupEventData(B(B({},t),{},{fetchCertificateStartTime:n,fetchCertificateDuration:r,startupActivity:C.StartupActivity.drmCertificateFetched}));case 3:i=e.sent,new v.Z({category:m.Z.qoe,logger:this.logger,source:this.toString(),urn:U.playbackStartup,data:B({},i),skipLogTransaction:!0,dataVersion:(0,O.y)(U.playbackStartup)}).log();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"sendQoeDrmLicenseEvent",value:(r=(0,i.Z)(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.requestStartTime,r=t.requestDuration,e.next=3,this.createPlaybackStartupEventData(B(B({},t),{},{fetchLicenseStartTime:n,fetchLicenseDuration:r,startupActivity:C.StartupActivity.drmKeyFetched}));case 3:i=e.sent,new v.Z({category:m.Z.qoe,logger:this.logger,source:this.toString(),urn:U.playbackStartup,data:B({},i),skipLogTransaction:!0,dataVersion:(0,O.y)(U.playbackStartup)}).log();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"createPlaybackStartupEventData",value:(n=(0,i.Z)(d().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,y,f,h,v,g,m,b,T,k,S,P,E,w,D,C,A;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.mediaItem,r=t.startupActivity,i=t.dustLogUtility,o=t.playheadPosition,a=t.fetchCertificateStartTime,s=t.fetchCertificateDuration,c=t.fetchLicenseStartTime,u=t.fetchLicenseDuration,l=t.videoPlayerName,p=t.videoPlayerVersion,y=n.playbackContext,e.next=4,this.getQosDecision(n);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:return f=e.t0,h=f.clientDecisions,v=void 0===h?{}:h,g=f.serverDecisions,m=void 0===g?{}:g,T=(b=y||{}).playbackSessionId,k=b.productType,S=b.offline,P=b.startupContext,E=b.interactionId,w=this.getQosServerRequestData(i),D=this.getCommonProperties(y),e.next=14,this.getTrackingValues(n,Z.aD.qos);case 14:return C=e.sent,e.next=17,this.getTrackingValues(n,Z.aD.qoe);case 17:return A=e.sent,e.abrupt("return",new R.Z({startupActivity:r,playheadPosition:o,playbackSessionId:T,productType:k,localMedia:S,serverRequest:w,clientGroupIds:v.clientGroupIds,serverGroupIds:m.serverGroupIds,qos:C,data:D,startupContext:P,fetchCertificateStartTime:a,fetchCertificateDuration:s,fetchLicenseStartTime:c,fetchLicenseDuration:u,interactionId:E,videoPlayerName:l,videoPlayerVersion:p,qoe:A}));case 19:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getPayload",value:function(e){var t,n,r,i=e.accessToken,o=e.rel,a=e.body,s=e.endpointKey,c=e.bodyType,u=void 0===c?"arrayBuffer":c,l=this.config,p=l.endpoints,d=void 0===p?{}:p,y=l.extras,f=void 0===y?{}:y,v=k.Z.getDrmType(o),g=d[o],m=g.href,b=g.headers,T=g.method,S=d[null===(t=f.licenseEndpoints)||void 0===t||null===(n=t[v])||void 0===n?void 0:n[s]]||{},P=S.href,E=void 0===P?m:P,Z=S.headers,w=void 0===Z?b:Z,D=S.method,C=void 0===D?T:D;q.includes(o)&&(r=!0);var A=(0,h.Z)({Authorization:function(){return{replacer:"{accessToken}",value:i.token}}},w);return{url:E,method:C,body:a,bodyType:u,headers:new I.Z(A),needArrayBuffer:r}}},{key:"getResponseAndLog",value:(t=(0,i.Z)(d().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,h,v,g,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.eventHandler,r=t.dustLogUtility,i=t.mediaItem,o=t.payload,a=t.playheadPosition,s=t.videoPlayerName,c=t.videoPlayerVersion,u=this.httpClient,l=this.logger,p=i.playbackContext,e.prev=3,e.next=6,u.request(o);case 6:return m=e.sent,e.next=9,(0,f.Z)({response:m,dustLogUtility:r});case 9:return h=m.data,v=m.requestStartTime,g=m.requestDuration,e.abrupt("return",h);case 13:if(e.prev=13,!l.dustEnabled||!y.Check.assigned(p)){e.next=17;break}return e.next=17,this[n]({mediaItem:i,dustLogUtility:r,playheadPosition:a,requestStartTime:v,requestDuration:g,videoPlayerName:s,videoPlayerVersion:c});case 17:return r.log(),e.finish(13);case 19:case"end":return e.stop()}}),e,this,[[3,,13,19]])}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Services.Drm.DrmClient"}}]),W}(M.Z)},60753:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).extras=e.extras,i}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Drm.DrmClientConfiguration"}}]),n}(n(88152).Z)},51701:function(e,t){"use strict";var n;!function(e){e.silkKey="silkKey",e.fairPlayCertificate="fairPlayCertificate",e.fairPlayLicense="fairPlayLicense",e.fairPlayLinearLicense="fairPlayLinearLicense",e.widevineCertificate="widevineCertificate",e.widevineLicense="widevineLicense",e.widevineLinearLicense="widevineLinearLicense",e.playReadyLicense="playReadyLicense",e.playReadyLinearLicense="playReadyLinearLicense",e.nagraCertificate="nagraCertificate",e.nagraLicense="nagraLicense",e.nagraLinearLicense="nagraLinearLicense",e.individualization="individualization"}(n||(n={})),t.Z=n},81374:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(51701),a=n(28928),s=function(){function e(){(0,r.Z)(this,e)}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Drm.DrmUtils"}}],[{key:"getDrmType",value:function(e){switch(e){case o.Z.fairPlayLicense:case o.Z.fairPlayLinearLicense:case o.Z.fairPlayCertificate:return a.DrmType.FAIRPLAY;case o.Z.playReadyLicense:case o.Z.playReadyLinearLicense:return a.DrmType.PLAYREADY;case o.Z.widevineLicense:case o.Z.widevineLinearLicense:case o.Z.widevineCertificate:return a.DrmType.WIDEVINE;case o.Z.nagraLicense:case o.Z.nagraLinearLicense:case o.Z.nagraCertificate:return a.DrmType.PRMNAGRA;case o.Z.silkKey:return a.DrmType.SILK;default:return""}}},{key:"getEndpointLicense",value:function(e){switch(e){case a.DrmType.FAIRPLAY:return o.Z.fairPlayLicense;case a.DrmType.PLAYREADY:return o.Z.playReadyLicense;case a.DrmType.WIDEVINE:return o.Z.widevineLicense;case a.DrmType.PRMNAGRA:return o.Z.nagraLicense;case a.DrmType.SILK:return o.Z.silkKey;default:return""}}},{key:"getEndpointCertificate",value:function(e){switch(e){case a.DrmType.FAIRPLAY:return o.Z.fairPlayCertificate;case a.DrmType.WIDEVINE:return o.Z.widevineCertificate;case a.DrmType.PRMNAGRA:return o.Z.nagraCertificate;default:return""}}}]),e}()},28481:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t,n){(0,r.Z)(this,e);var i={body:o.Types.object().optional,headers:o.Types.object().optional};(0,o.typecheck)(this,i,arguments),this.body=t||{},this.headers=n||{}}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Drm.PlayReadyMessage"}}]),e}()},86691:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}}),n(12419),n(82526),n(57327),n(38880),n(49337);var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(97326),c=n(2291),u=n(60136),l=n(82963),p=n(61120),d=n(87757),y=n.n(d),f=(n(41539),n(39714),n(92222),n(54747),n(47941),n(67682)),h=n(87891),v=n(24965),g=n(1206),m=n(84983),b=n(19496),T=n(88203),k=n(76175),S=n(76454),P=n(61338),E=n(52662),Z=n(70928),w=n(69867),D=n(40064);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var x=m.Z.services.eligibility.eligibilityClient,O=function(e){(0,u.Z)(r,e);var t,n=R(r);function r(e){var t;(0,o.Z)(this,r),t=n.call(this,e);var i={options:f.Types.object({config:f.Types.instanceStrict(T.Z),logger:f.Types.instanceStrict(h.Z),httpClient:f.Types.instanceStrict(b.Z)})};return(0,f.typecheck)((0,s.Z)(t),i,arguments),t.logger.log(t.toString(),"Created."),t}return(0,a.Z)(r,[{key:"getEligibilityStatus",value:(t=(0,i.Z)(y().mark((function e(t){var n,i,o,a,s,u,l,d,h=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:f.Types.object({sku:f.Types.nonEmptyString.optional,accessToken:f.Types.instanceStrict(Z.Z),logTransaction:f.Types.instanceStrict(E.Z)})},(0,f.typecheck)(this,"getEligibilityStatus",n,h),i=this.logger,o=t.sku,a=t.accessToken,s=t.logTransaction,u=k.Z.getEligibilityStatus,l=this.getPayload({accessToken:a,endpointKey:u}),f.Check.nonEmptyString(o)&&(l.url="".concat(l.url,"?sku=").concat(o)),d=new g.Z({logger:i,source:this.toString(),urn:x.getEligibilityStatus,payload:l,endpointKey:u,logTransaction:s}),e.abrupt("return",(0,c.Z)((0,p.Z)(r.prototype),"request",this).call(this,{payload:l,dustLogUtility:d,handleServiceResponseMethodName:"getEligibilityStatus",resultMapper:function(e){var t=e.data,n={};return Object.keys(t).forEach((function(e){n[e]=new P.Z(A(A({},t[e]),{},{partner:e}))})),new S.Z(n)}}));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getPayload",value:function(e){var t=e.accessToken,n=e.endpointKey,r=e.body,i=this.config.endpoints[n],o=i.href,a=i.headers,s=i.method,c=r?JSON.stringify(r):"",u=(0,v.Z)({Authorization:function(){return{replacer:"{accessToken}",value:t.token}}},a);return{url:o,method:s,body:c,headers:new w.Z(u)}}},{key:"toString",value:function(){return"SDK.Services.Eligibility.EligibilityClient"}}]),r}(D.Z)},88203:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Eligibility.EligibilityClientConfiguration"}}]),n}(n(88152).Z)},76175:function(e,t){"use strict";var n;!function(e){e.getEligibilityStatus="getEligibilityStatus"}(n||(n={})),t.Z=n},67966:function(e,t){"use strict";var n;!function(e){e.redirect="REDIRECT",e.ineligible="INELIGIBLE",e.discount="DISCOUNT",e.canceled="CANCELED",e.fullPrice="FULL_PRICE"}(n||(n={})),t.Z=n},76454:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=(n(26833),n(67682)),a=n(61338),s=function(){function e(t){(0,r.Z)(this,e);var n="non-empty Object containing instances of SDK.Services.Eligibility.Partner",i=function(e){if(o.Check.emptyObject(e))return!1;for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(o.Check.not.instanceStrict(r,a.Z))return!1}return!0},s={partners:o.Types.custom(i,n)};(0,o.typecheck)(this,s,arguments),this.partners=t}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Eligibility.EligibilityStatusResponse"}}]),e}()},61338:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(4942),i=n(15671),o=n(43144),a=(n(41539),n(54747),n(47941),n(82526),n(57327),n(38880),n(49337),n(67682)),s=n(67966);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(){function e(t){var n=this;(0,i.Z)(this,e);var r={options:a.Types.object({partner:a.Types.nonEmptyString,eligibility:a.Types.in(s.Z).optional.warn,email:a.Types.nonEmptyString.warn,redirect:a.Types.nonEmptyString.optional.warn,noahEligibility:a.Types.in(s.Z).optional.warn,bundles:a.Types.nonEmptyObject.warn})};(0,a.typecheck)(this,r,arguments);var o=t.partner,c=t.eligibility,l=t.email,p=t.redirect,d=t.noahEligibility,y=t.bundles,f=void 0===y?{}:y;this.partner=o,this.eligibility=c,this.email=l,this.redirect=p,this.noahEligibility=d,this.bundles={},Object.keys(f).forEach((function(e){n.bundles[e]=u(u({},f[e]),{},{name:e})}))}return(0,o.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Eligibility.Partner"}}]),e}()},41361:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}}),n(12419);var r,i=n(15861),o=n(15671),a=n(43144),s=n(97326),c=n(2291),u=n(60136),l=n(82963),p=n(61120),d=n(87757),y=n.n(d),f=(n(41539),n(39714),n(74916),n(15306),n(67682)),h=n(87891),v=n(19496),g=n(1206),m=n(84983),b=n(24965),T=n(2794);!function(e){e.verifyMediaRights="verifyMediaRights"}(r||(r={}));var k=r,S=n(70928),P=n(52662),E=n(69867),Z=n(40064);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var D=m.Z.services.entitlement.entitlementClient,C=function(e){(0,u.Z)(r,e);var t,n=w(r);function r(e){var t;(0,o.Z)(this,r),t=n.call(this,e);var i={options:f.Types.object({config:f.Types.instanceStrict(T.Z),logger:f.Types.instanceStrict(h.Z),httpClient:f.Types.instanceStrict(v.Z)})};return(0,f.typecheck)((0,s.Z)(t),i,arguments),t.logger.log(t.toString(),"Created."),t}return(0,a.Z)(r,[{key:"verifyMediaRights",value:(t=(0,i.Z)(y().mark((function e(t,n,i){var o,a,s,u,l,d=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={mediaId:f.Types.nonEmptyString,accessToken:f.Types.instanceStrict(S.Z),logTransaction:f.Types.instanceStrict(P.Z)},(0,f.typecheck)(this,"verifyMediaRights",o,d),a=this.logger,s=k.verifyMediaRights,u=this.getPayload({accessToken:n,endpointKey:s,data:{mediaId:t}}),l=new g.Z({logger:a,source:this.toString(),urn:D.verifyMediaRights,payload:u,endpointKey:s,logTransaction:i}),e.abrupt("return",(0,c.Z)((0,p.Z)(r.prototype),"request",this).call(this,{payload:u,dustLogUtility:l,resultMapper:function(e){return e}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"getPayload",value:function(e){var t,n=e.accessToken,r=e.endpointKey,i=e.data,o=void 0===i?{}:i,a=this.config.endpoints[r],s=a||{},c=s.headers,u=void 0===c?{}:c,l=s.method,p=null==a?void 0:a.href;null!=a&&a.templated&&o.mediaId&&(p=null===(t=p)||void 0===t?void 0:t.replace(/\{mediaId\}/gi,o.mediaId));var d=(0,b.Z)({Authorization:function(){return{replacer:"{accessToken}",value:n.token}}},u);return{url:p,method:l,headers:new E.Z(d)}}},{key:"toString",value:function(){return"SDK.Services.Entitlement.EntitlementClient"}}]),r}(Z.Z)},2794:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Entitlement.EntitlementClientConfiguration"}}]),n}(n(88152).Z)},40176:function(e,t,n){"use strict";var r=n(70187),i=n(14024);t.Z={accountArchived:{code:"account.archived",status:[i.Z.OK],exceptionData:r.Z.orchestration.accountArchived},accountBlocked:{code:"account.blocked",status:[i.Z.OK,i.Z.FORBIDDEN],exceptionData:r.Z.account.accountBlocked},accountConsentTokenCreationFailed:{code:"account.consent-token.creation.failed",status:[i.Z.OK],exceptionData:r.Z.account.accountConsentTokenCreationFailed},accountCreateFailed:{code:"account.create.failed",status:[i.Z.OK],exceptionData:r.Z.orchestration.accountCreateFailed},accountGetFailed:{code:"account.get.failed",status:[i.Z.OK,i.Z.UNAUTHORIZED,i.Z.NOT_FOUND],exceptionData:r.Z.account.accountNotFound},accountIdMissing:{code:"account-id.missing",status:[i.Z.BAD_REQUEST],exceptionData:r.Z.media.accountIdMissing},accountLoginFailed:{code:"account.login.failed",status:[i.Z.OK],exceptionData:r.Z.account.accountLoginFailed},accountNotEligibleAdTier:{code:"account.ad-tier.not-eligible",status:[i.Z.OK],exceptionData:r.Z.orchestration.accountNotEligibleAdTier},accountNotFound:{code:"account.not.found",status:[i.Z.OK,i.Z.UNAUTHORIZED,i.Z.NOT_FOUND],exceptionData:r.Z.account.accountNotFound},accountProfileCreateFailed:{code:"account.profile.create.failed",status:[i.Z.OK],exceptionData:r.Z.orchestration.accountProfileCreateFailed},accountProfilePinDeleteFailed:{code:"account.profile.pin.delete.failed",status:[i.Z.OK],exceptionData:r.Z.orchestration.profilePinDeleteFailed},accountProfilePinGetFailed:{code:"account.profile.pin.get.failed",status:[i.Z.OK],exceptionData:r.Z.orchestration.profilePinRetrievalFailed},accountProfileUpdateProtected:{code:"account.profile.update.protected",status:[i.Z.OK],exceptionData:r.Z.orchestration.accountProfileUpdateProtected},accountProfileSwitchFailed:{code:"account.profile.switch.failed",status:[i.Z.OK],exceptionData:r.Z.orchestration.accountProfileSwitchFailed},accountsByEmailReadFailed:{code:"accounts.by.email.read.failed",status:[i.Z.OK],exceptionData:r.Z.orchestration.accountsByEmailReadFailed},actionGrantRequired:{code:"account.error.action-grant.required",status:[i.Z.OK],exceptionData:r.Z.orchestration.actionGrantRequired},deviceFailureProfileCreation:{code:"device.failure.profile.creation",status:[i.Z.OK],exceptionData:r.Z.orchestration.deviceFailureProfileCreation},deviceIdInvalid:{code:"device.error.device.id.invalid",status:[i.Z.OK],exceptionData:r.Z.orchestration.deviceIdInvalid},dobBelowAgeOfMajority:{code:"graph.local.dob.below.age-of-majority",status:[i.Z.OK],exceptionData:r.Z.orchestration.dobBelowAgeOfMajority},userProfileDeleteFailed:{code:"account.profile.delete.failed",status:[i.Z.OK],exceptionData:r.Z.orchestration.userProfileDeleteFailed},profileLookupIdFailed:{code:"profile.lookup.id.failed",status:[i.Z.OK],exceptionData:r.Z.orchestration.userProfileNotFound},userProfileNotFound:{code:"account.profile.not.found",status:[i.Z.OK],exceptionData:r.Z.orchestration.userProfileNotFound},profileRetrieval:{code:"account.profile.read.failed",status:[i.Z.OK],exceptionData:r.Z.orchestration.profileRetrieval},userProfileUpdateFailed:{code:"profile.update.failed",status:[i.Z.OK],exceptionData:r.Z.orchestration.userProfileUpdateFailed},maximumProfilesReached:{code:"account.profiles.max.exceeded",status:[i.Z.OK],exceptionData:r.Z.orchestration.maximumProfilesReached},accountResolution:{code:"account.resolution.failure",exceptionData:r.Z.eligibility.accountResolution},accountSecurityFlagged:{code:"account.security-flagged",status:[i.Z.OK],exceptionData:r.Z.orchestration.accountSecurityFlagged},accountVerificationRequired:{code:"account.verification.required",status:[i.Z.OK],exceptionData:r.Z.orchestration.accountVerificationRequired},accountIdentityVerificationRequired:{code:"idp.error.identity.verification.required",status:[i.Z.OK],exceptionData:r.Z.orchestration.accountVerificationRequired},identityPasswordResetRequired:{code:"idp.error.identity.password-reset-required",status:[i.Z.OK],exceptionData:r.Z.orchestration.identityPasswordResetRequired},actionGrantRejected:{code:"account.error.action-grant.invalid",status:[i.Z.OK],exceptionData:r.Z.account.actionGrantRejected},ageNotVerified:{code:"age-not-verified",status:[i.Z.FORBIDDEN],exceptionData:r.Z.userProfile.ageNotVerified},ageNotVerifiedKr:{code:"age-not-verified-kr",status:[i.Z.FORBIDDEN],exceptionData:r.Z.userProfile.ageNotVerifiedKr},authorizationExpired:{code:"access-token.expired",status:[i.Z.UNAUTHORIZED],exceptionData:r.Z.media.authorizationExpired},authorizationJwtInvalid:{code:"authorization.jwt.invalid",status:[i.Z.OK],exceptionData:r.Z.account.invalidToken},authorizationTokenInvalid:{code:"authorization.token.invalid",status:[i.Z.OK],exceptionData:r.Z.account.invalidToken},blackout:{code:"blackout",status:[i.Z.FORBIDDEN],exceptionData:r.Z.media.blackout},channelNoAiring:{code:"channel.no-airing",status:[i.Z.NOT_FOUND],exceptionData:r.Z.media.mediaUnavailable},channelNotFound:{code:"channel.not-found",status:[i.Z.NOT_FOUND],exceptionData:r.Z.media.mediaUnavailable},clientIdNotFound:{code:"payload.client-id.not.found",status:[i.Z.OK],exceptionData:r.Z.orchestration.clientIdNotFound},clientRevoked:{code:"client-revoked",status:[i.Z.FORBIDDEN],exceptionData:r.Z.media.mediaNotAllowed},clientUnsupportedFeature:{code:"client.unsupported-feature",exceptionData:r.Z.common.clientUnsupportedFeature},clockSync:{code:"clock-sync",status:[i.Z.FORBIDDEN],exceptionData:r.Z.media.mediaNotAllowed},comcastConsentRefused:{code:"comcast.commerce.403",exceptionData:r.Z.commerce.comcastConsentRefused},comcastServerError:{code:"comcast.commerce.500",exceptionData:r.Z.commerce.comcastServerError},comcastServiceUnavailable:{code:"comcast.commerce.503",exceptionData:r.Z.commerce.comcastServiceUnavailable},contentKeyNotFound:{code:"content-key.not-found",status:[i.Z.NOT_FOUND],exceptionData:r.Z.media.keyNotFound},copyFailure:{code:"copy.failure",status:[i.Z.ACCEPTED],exceptionData:r.Z.account.linkSubscriptionPartial},copyLimitReached:{code:"copy.limit.reached",status:[i.Z.ACCEPTED],exceptionData:r.Z.account.linkSubscriptionPartial},documentsRetrievalFailed:{code:"documents.retrieval.failure",status:[i.Z.OK],exceptionData:r.Z.orchestration.documentsRetrievalFailed},downgrade:{code:"downgrade",status:[i.Z.FORBIDDEN],exceptionData:r.Z.drm.downgrade},downloadLimitReached:{code:"not-permitted-renewal",description:["download-limit-reached"],exceptionData:r.Z.media.downloadLimitReached},expectedSubscriptionsNotFound:{code:"expected.subscriptions.not.found",status:[i.Z.FORBIDDEN],exceptionData:r.Z.purchase.bundleForbidden},exploreContentNotFound:{code:"explore-content-not-found",status:[i.Z.NOT_FOUND],exceptionData:r.Z.explore.exploreContentNotFound},exploreNotSupported:{code:"explore-not-supported",status:[i.Z.NOT_FOUND],exceptionData:r.Z.explore.exploreNotSupported},exploreInternalServiceError:{code:"explore-internal-service-error",status:[i.Z.INTERNAL_SERVER_ERROR],exceptionData:r.Z.explore.exploreInternalServiceError},flowControlPolicyConflict:{code:"policy.conflict",exceptionData:r.Z.socket.flowControlPolicyConflict},flowControlPolicyInvalid:{code:"policy.invalid",exceptionData:r.Z.socket.flowControlPolicyInvalid},flowControlEventInvalid:{code:"event.invalid",exceptionData:r.Z.socket.flowControlEventInvalid},forbidden:{code:"forbidden",status:[i.Z.FORBIDDEN,i.Z.OK],exceptionData:r.Z.common.requestTemporarilyBlocked},fraudAccessRevoked:{code:"not-permitted-offline",description:["fraud-access-revoked"],exceptionData:r.Z.media.fraudDetectionViolation},gdprConsentConflict:{code:"ads.gdpr-consent-conflict",status:[i.Z.FORBIDDEN],exceptionData:r.Z.media.gdprConsentConflict},huluService:{code:"hulu.service.failure",exceptionData:r.Z.eligibility.huluService},identityAlreadyExists:{code:"idp.error.identity.already-exists",status:[i.Z.OK],exceptionData:r.Z.orchestration.identityAlreadyExists},identityAlreadyUsed:{code:"identity.already.used",status:[i.Z.OK],exceptionData:r.Z.account.identityAlreadyUsed},idpErrorIdentityBadCredentials:{code:"idp.error.identity.bad-credentials",status:[i.Z.OK,i.Z.UNAUTHORIZED],exceptionData:r.Z.orchestration.invalidCredentials},idpErrorPasswordInvalidValue:{code:"idp.error.password.enhanced.invalid-value",status:[i.Z.OK],exceptionData:r.Z.orchestration.invalidPassword},idpErrorResetTokenAlreadyUsed:{code:"idp.error.reset-token.already-used",status:[i.Z.OK],exceptionData:r.Z.orchestration.tokenAlreadyUsed},idpErrorResetTokenInvalid:{code:"idp.error.reset-token.invalid",status:[i.Z.OK],exceptionData:r.Z.orchestration.tokenInvalid},idpErrorAuthenticationBlocked:{code:"idp.error.identity.blocked",status:[i.Z.OK],exceptionData:r.Z.orchestration.authenticationBlocked},idpErrorIdentityNotFound:{code:"idp.error.identity.not-found",status:[i.Z.OK],exceptionData:r.Z.orchestration.identityNotFound},idpErrorRegistrationCountryNotAllowed:{code:"idp.error.registration.country-not-allowed",status:[i.Z.OK],exceptionData:r.Z.common.locationNotAllowed},idpFailureDataStoreThrottling:{code:"idp.failure.datastore.throttling-exception",status:[i.Z.OK],exceptionData:r.Z.common.temporarilyThrottled},invalidRequest:{code:"invalid-request",status:[i.Z.BAD_REQUEST],exceptionData:r.Z.explore.invalidRequest},invalidScaReturnUrl:{code:"invalid.sca.return.url",exceptionData:r.Z.orchestration.invalidAuthenticationUrl},invalidCampaign:{code:"invalid.campaign",status:[i.Z.OK],exceptionData:r.Z.orchestration.invalidCampaign},invalidCardSecurityCode:{code:"invalid.card.security.code",status:[i.Z.OK],exceptionData:r.Z.orchestration.invalidSecurityCode},invalidEmail:{code:"idp.error.params.invalid-email",status:[i.Z.OK],exceptionData:r.Z.orchestration.invalidEmail},invalidEmailUpdate:{code:"idp.error.identity.invalid-email-update",status:[i.Z.OK],exceptionData:r.Z.orchestration.invalidEmail},invalidGrant:{code:"invalid_grant",exceptionData:r.Z.common.authenticationExpired},invalidLineItemsCount:{code:"invalid.line.items.count",status:[i.Z.OK],exceptionData:r.Z.orchestration.invalidOrder},invalidOrderCampaignsCount:{code:"invalid.order.campaigns.count",status:[i.Z.OK],exceptionData:r.Z.orchestration.invalidCampaign},invalidOrderId:{code:"invalid.order.id",status:[i.Z.OK],exceptionData:r.Z.commerce.invalidOrderId},invalidPasscode:{code:"idp.error.otp.invalid-passcode",status:[i.Z.OK],exceptionData:r.Z.orchestration.invalidPasscode},invalidPaymentMethodId:{code:"invalid.payment.method.id",status:[i.Z.OK],exceptionData:r.Z.orchestration.invalidPaymentMethod},invalidPreAuthToken:{code:"idp.error.pre-auth.invalid-token",status:[i.Z.OK],exceptionData:r.Z.orchestration.invalidPreAuthToken},invalidRedemptionCode:{code:"redemption.redeem.invalid.redemptionCode",status:[i.Z.UNPROCESSABLE_CONTENT],exceptionData:r.Z.commerce.invalidRedemptionCode},invalidVoucher:{code:"invalid.voucher",status:[i.Z.OK],exceptionData:r.Z.orchestration.invalidVoucher},keyNotFound:{code:"key.not-found",status:[i.Z.NOT_FOUND],exceptionData:r.Z.media.keyNotFound},kidsModeEnabled:{code:"kids-mode-enabled",status:[i.Z.FORBIDDEN],exceptionData:r.Z.media.kidsModeEnabled},licensePlateNotFound:{code:"device.error.license.not.found",status:[i.Z.OK],exceptionData:r.Z.orchestration.licensePlateNotFound},linkedElsewhere:{code:"linked.elsewhere",status:[i.Z.FORBIDDEN],exceptionData:r.Z.purchase.activationForbidden},loginRequired:{code:"login.required",status:[i.Z.FORBIDDEN],exceptionData:r.Z.media.loginRequired},marketingPreferenceUpdateFailed:{code:"idp.error.marketing.update.failed",status:[i.Z.OK],exceptionData:r.Z.orchestration.marketingPreferenceUpdateFailed},mediaExperienceContextBodyInvalid:{code:"experience.context.body-invalid",status:[i.Z.BAD_REQUEST],exceptionData:r.Z.media.mediaExperienceContextBodyInvalid},mediaMissing:{code:"media.missing",status:[i.Z.NOT_FOUND],exceptionData:r.Z.media.mediaUnavailable},mediaNotPlayable:{code:"media.not-playable",status:[i.Z.NOT_FOUND],exceptionData:r.Z.media.mediaUnavailable},notEntitled:{code:"not-entitled",status:[i.Z.FORBIDDEN],exceptionData:r.Z.media.notEntitled},notPermittedOffline:{code:"not-permitted-offline",status:[i.Z.FORBIDDEN],exceptionData:r.Z.media.offlineNotPermitted},offDeviceGrantInvalid:{code:"device.error.offdevicegrant.invalid",status:[i.Z.OK],exceptionData:r.Z.orchestration.offDeviceGrantInvalid},offDeviceActionGrantInvalid:{code:"device.error.invalid.action.grant",status:[i.Z.OK],exceptionData:r.Z.orchestration.offDeviceActionGrantInvalid},offDeviceMissingActionGrant:{code:"device.error.missing.action.grant",status:[i.Z.OK],exceptionData:r.Z.orchestration.offDeviceMissingActionGrant},offDeviceMissingRedemptionFlow:{code:"device.error.missing.redemption.flow",status:[i.Z.OK],exceptionData:r.Z.orchestration.offDeviceMissingRedemptionFlow},orderProductBlocked:{code:"order.product.blocked",status:[i.Z.OK,i.Z.UNPROCESSABLE_CONTENT],exceptionData:r.Z.commerce.orderProductBlocked},orderCountryInvalid:{code:"order.bin.country.invalid",status:[i.Z.OK,i.Z.UNPROCESSABLE_CONTENT],exceptionData:r.Z.method.orderCountryInvalid},orderFraud:{code:"order.ft.fraud",status:[i.Z.OK,i.Z.UNPROCESSABLE_CONTENT],exceptionData:r.Z.commerce.orderFraud},orderPaymentDeclined:{code:"order.failed",status:[i.Z.OK,i.Z.UNPROCESSABLE_CONTENT],exceptionData:r.Z.commerce.orderPaymentDeclined},orderStandaloneExceedsBundle:{code:"order.standalone.exceeds.bundle",status:[i.Z.OK,i.Z.UNPROCESSABLE_CONTENT],exceptionData:r.Z.commerce.orderStandaloneExceedsBundle},orderQueryTimeout:{code:"order.query.timeout",status:[i.Z.OK],exceptionData:r.Z.orchestration.orderQueryTimeout},parentalControlsRestricted:{code:"parental-controls-restricted",status:[i.Z.FORBIDDEN],exceptionData:r.Z.media.parentalControlsRestricted},partnerNotSupported:{code:"graph.local.partner.not-supported",status:[i.Z.OK],exceptionData:r.Z.orchestration.partnerNotSupported},passwordRequired:{code:"idp.error.password.invalid-value",status:[i.Z.OK],exceptionData:r.Z.orchestration.passwordRequired},payloadFieldsIncorrect:{code:"payload.fields.incorrect",status:[i.Z.OK,i.Z.NOT_FOUND],exceptionData:r.Z.orchestration.attributeValidation},idpPayloadFieldsIncorrectGraphQl:{code:"idp.error.payload.fields.incorrect",status:[i.Z.OK],exceptionData:r.Z.orchestration.attributeValidation},payloadIdTokenInvalid:{code:"payload.id-token.invalid",status:[i.Z.BAD_REQUEST],exceptionData:r.Z.account.invalidToken},paymentMethodNotFound:{code:"payment-method.not-found",status:[i.Z.NOT_FOUND],exceptionData:r.Z.commerce.paymentMethodNotFound},paymentMethodConsentRequired:{code:"payment-method.consent-required",status:[i.Z.NOT_FOUND],exceptionData:r.Z.commerce.paymentMethodConsentRequired},pinExpired:{code:"pin-expired",status:[i.Z.FORBIDDEN],exceptionData:r.Z.userProfile.profilePinExpired},pinMissing:{code:"pin-missing",status:[i.Z.FORBIDDEN],exceptionData:r.Z.userProfile.profilePinMissing},preAuthThrottled:{code:"idp.error.auth.pre-auth.throttled",status:[i.Z.OK],exceptionData:r.Z.orchestration.rateLimited},profileCreateFailed:{code:"profile.create.failed",status:[i.Z.OK],exceptionData:r.Z.orchestration.profileCreateFailed},profileCreationProtected:{code:"account.profile.creation.protected",status:[i.Z.OK],exceptionData:r.Z.orchestration.profileCreationProtected},profileMissing:{code:"profile-missing",status:[i.Z.FORBIDDEN],exceptionData:r.Z.userProfile.profileMissing},profilePersonalInfoMissing:{code:"profile.personal-info-missing",status:[i.Z.FORBIDDEN],exceptionData:r.Z.media.profilePersonalInfoMissing},profilePinInvalid:{code:"account.profile.pin.invalid",status:[i.Z.OK],exceptionData:r.Z.orchestration.profilePinInvalid},profilePinNotEligible:{code:"account.profile.pin.not-eligible",status:[i.Z.OK],exceptionData:r.Z.userProfile.profilePinNotEligible},profilePinMissing:{code:"account.profile.pin.missing",status:[i.Z.BAD_REQUEST,i.Z.UNAUTHORIZED,i.Z.NOT_FOUND],exceptionData:r.Z.userProfile.profilePinMissing},profilePinUpdateFailed:{code:"account.profile.pin.update.failed",status:[i.Z.OK],exceptionData:r.Z.userProfile.profilePinUpdateFailed},productBlocked:{code:"redemption.redeem.product.blocked",status:[i.Z.UNPROCESSABLE_CONTENT],exceptionData:r.Z.commerce.productBlocked},providerNotEnabled:{code:"provider.not.enabled",status:[i.Z.BAD_REQUEST],exceptionData:r.Z.purchase.providerNotEnabled},rateLimited:{code:"idp.error.auth.otp.throttled",status:[i.Z.OK,i.Z.BAD_REQUEST],exceptionData:r.Z.orchestration.rateLimited},redirectUriInvalid:{code:"payload.redirect-uri.invalid",status:[i.Z.OK],exceptionData:r.Z.orchestration.redirectUriInvalid},redirectUriNotAllowed:{code:"payload.redirect-uri.not.allowed",status:[i.Z.OK],exceptionData:r.Z.orchestration.redirectUriNotAllowed},rejected:{code:"rejected",exceptionData:r.Z.drm.rejected},requestRejected:{code:"request.rejected",status:[i.Z.BAD_REQUEST],exceptionData:r.Z.commerce.cardUpdateRejected},resourceDBUnknown:{code:"resource.db.unknown.error",status:[i.Z.OK],exceptionData:r.Z.orchestration.resourceDBUnknown},resourceTimedOut:{code:"resource.db.timeout.error",status:[i.Z.OK],exceptionData:r.Z.orchestration.resourceTimedOut},securityLevel:{code:"security-level",status:[i.Z.FORBIDDEN],exceptionData:r.Z.media.mediaNotAllowed},securityLevelInsufficient:{code:"security-level.insufficient",status:[i.Z.FORBIDDEN],exceptionData:r.Z.drm.downgrade},selfAccountHasActiveD2cSubscription:{code:"self.account.has_active_d2c_subscription",status:[i.Z.OK],exceptionData:r.Z.orchestration.selfAccountHasActiveD2cSubscription},selfAccountNotActive:{code:"self.account.not_active",status:[i.Z.OK],exceptionData:r.Z.orchestration.selfAccountNotActive},selfAccountNotFound:{code:"self.account.not_found",status:[i.Z.OK],exceptionData:r.Z.orchestration.selfAccountNotFound},selfRequestDuplicate:{code:"self.request.duplicate",status:[i.Z.OK],exceptionData:r.Z.orchestration.selfRequestDuplicate},serviceCapacity:{code:"capacity.rejected",status:[i.Z.SERVICE_UNAVAILABLE],header:"x-dss-edge",exceptionData:r.Z.common.serviceCapacity},streamConcurrency:{code:"stream-concurrency",status:[i.Z.FORBIDDEN],exceptionData:r.Z.media.streamConcurrency},streamConcurrencyViolation:{code:"stream-concurrency-violation",status:[i.Z.FORBIDDEN],exceptionData:r.Z.media.streamConcurrency},subscriptionNotFound:{code:"subscription.not.found",status:[i.Z.NOT_FOUND],exceptionData:r.Z.method.subscriptionNotFound},temporarilyUnavailable:{code:"graph.upstream.timeout",status:[i.Z.OK],exceptionData:r.Z.common.temporarilyUnavailable},tokenExpired:{code:"token.expired",status:[i.Z.BAD_REQUEST],exceptionData:r.Z.purchase.activationTokenExpired},tokenInvalid:{code:"token.invalid",exceptionData:r.Z.purchase.activationBadRequest},tokenMissing:{code:"token.missing",exceptionData:r.Z.purchase.activationBadRequest},tokenForbidden:{code:"token.forbidden",status:[i.Z.FORBIDDEN],exceptionData:r.Z.purchase.activationForbidden},tokenServiceInvalidGrant:{code:"token.service.invalid.grant",status:[i.Z.OK],exceptionData:r.Z.common.authenticationExpired},throttled:{code:"throttled",status:[i.Z.TOO_MANY_REQUESTS],exceptionData:r.Z.common.temporarilyThrottled},thumbnailsUnavailable:{code:"thumbnails-unavailable",status:[i.Z.NOT_FOUND],exceptionData:r.Z.media.thumbnailsNotAvailable},tokenServiceUnauthorizedClient:{code:"token.service.unauthorized.client",status:[i.Z.OK],exceptionData:r.Z.common.locationNotAllowed},unauthorizedClient:{code:"unauthorized_client",description:["unknown-location","unreliable-location","forbidden-location"],exceptionData:r.Z.common.locationNotAllowed},unexpectedError:{code:"graph.local.unexpected",status:[i.Z.OK],exceptionData:r.Z.common.unexpectedError},unpriceableOrderError101:{code:"price.order.101",status:[i.Z.OK],exceptionData:r.Z.method.unpriceableOrder},unpriceableOrderError102:{code:"price.order.102",status:[i.Z.OK],exceptionData:r.Z.method.unpriceableOrder},unpriceableOrderError103:{code:"price.order.103",status:[i.Z.OK],exceptionData:r.Z.method.unpriceableOrder},unpriceableOrderError104:{code:"price.order.104",status:[i.Z.OK],exceptionData:r.Z.method.unpriceableOrder},unpriceableOrderError110:{code:"price.order.110",status:[i.Z.OK],exceptionData:r.Z.method.unpriceableOrder},unpriceableOrderError111:{code:"price.order.111",status:[i.Z.OK],exceptionData:r.Z.method.unpriceableOrder},unpriceableOrderError112:{code:"price.order.112",status:[i.Z.OK],exceptionData:r.Z.method.unpriceableOrder},unpriceableOrderError113:{code:"price.order.113",status:[i.Z.OK],exceptionData:r.Z.method.unpriceableOrder},unpriceableOrderError116:{code:"price.order.116",status:[i.Z.OK],exceptionData:r.Z.method.unpriceableOrder},unpriceableOrderError117:{code:"price.order.117",status:[i.Z.OK],exceptionData:r.Z.method.unpriceableOrder},unpriceableOrderError118:{code:"price.order.118",status:[i.Z.OK],exceptionData:r.Z.method.unpriceableOrder},unspecifiedDrmError:{code:"unspecified-drm-error",status:[i.Z.FORBIDDEN],exceptionData:r.Z.media.drm},upgradeRequired:{code:"platform.client.upgrade.required",status:[i.Z.OK],exceptionData:r.Z.common.upgradeRequired}}},3920:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=(n(82526),n(41817),n(67682)),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({code:o.Types.string.optional,description:o.Types.string.optional,backoffSeconds:o.Types.number.optional,data:o.Types.object().optional}).optional};o.typecheck.warn(this,n,arguments);var i=t||{},a=i.code,s=void 0===a?"":a,c=i.description,u=void 0===c?"":c,l=i.backoffSeconds,p=i.data;this.code=s,this.description=u,this.backoffSeconds=l,this.data=p}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Exception.ErrorReason"}}]),e}()},61655:function(e,t,n){"use strict";n.d(t,{$6:function(){return d},Db:function(){return i},Fw:function(){return u},Qo:function(){return s},Ts:function(){return v},cI:function(){return o},dS:function(){return c},f7:function(){return l},nz:function(){return p},qL:function(){return h},sq:function(){return y},vq:function(){return f},xX:function(){return a}});var r=n(14024),i={accountBlocked:{name:"AccountBlockedException",message:"The account is blocked."},accountConsentTokenCreationFailed:{name:"AccountConsentTokenCreationFailedException",message:"The orchestration service was unable to get the consent token due to an internal error."},accountLoginFailed:{name:"AccountLoginFailedException",message:"Unable to get the account grant for the credentials."},accountNotFound:{name:"AccountNotFoundException",message:"The account was not found."},actionGrantRejected:{name:"ActionGrantRejectedException",message:"ActionGrant was not accepted by the service."},identityAlreadyUsed:{name:"IdentityAlreadyUsedException",message:"Identity is already linked to another account."},invalidToken:{name:"InvalidTokenException",message:"External identity token was invalid."},linkSubscriptionPartial:{name:"LinkSubscriptionPartialException",message:"Copy partial Error."}},o={cardUpdateRejected:{name:"CardUpdateRejectedException",message:"The request was rejected by the service, please try again."},comcastConsentRefused:{name:"ComcastConsentRefusedException",message:"The request to the Comcast service failed due to a bad request."},comcastServerError:{name:"ComcastServerErrorException",message:"There was a failure from the Comcast service."},comcastServiceUnavailable:{name:"ComcastServiceUnavailableException",message:"The Comcast service is unavailable."},invalidOrderId:{name:"InvalidOrderIdException",message:"The order Id is invalid or does not exist."},invalidRedemptionCode:{name:"InvalidRedemptionCodeException",message:"Redemption code is invalid or already redeemed."},orderProductBlocked:{name:"OrderProductBlockedException",message:"Indicated order was blocked, product is already owned by the user."},orderFraud:{name:"OrderFraudException",message:"Indicated order failed to pass fraud prevention checks."},orderPaymentDeclined:{name:"OrderPaymentDeclinedException",message:"Indicated order failed due to the payment method being declined."},orderStandaloneExceedsBundle:{name:"OrderStandaloneExceedsBundleException",message:"Indicate to any subscribers with select 2+ standalone services that they are not able to purchase the Disney Bundle on D+."},paymentMethodNotFound:{name:"PaymentMethodNotFoundException",message:"Unable to retrieve the payment method as it was not found."},paymentMethodConsentRequired:{name:"PaymentMethodConsentRequiredException",message:"The user must consent to share their default payment method on file across partners."},productBlocked:{name:"ProductBlockedException",message:"Product Blocked user has active subscription for a similar product."}},a={authenticationExpired:{name:"AuthenticationExpiredException",message:"Authentication has expired and needs to be updated before proceeding."},clientUnsupportedFeature:{name:"ClientUnsupportedFeatureException",message:"An error needs to be emitted that wasn't anticipated during planning."},invalidState:{name:"InvalidStateException",message:"The operation being attempted is not valid for the current state."},locationAcquisition:{name:"LocationAcquisitionException",message:"Unable to get user location due to location service being disabled."},locationNotAllowed:{name:"LocationNotAllowedException",message:"User is not allowed to use the app in their current location."},network:{name:"NetworkConnectionException",message:"Problem with the underlying network connection."},requestBlocked:{name:"RequestBlockedException",message:"Device IP address is blocked."},requestTemporarilyBlocked:{name:"RequestTemporarilyBlockedException",message:"Device IP address is temporarily blocked."},serviceCapacity:{name:"ServiceCapacityException",message:"The service is at capacity and is not able to process the request."},temporarilyThrottled:{name:"TemporarilyThrottledException",message:"Device IP address is temporarily throttled."},temporarilyUnavailable:{name:"TemporarilyUnavailableException",message:"There was a general error while processing the request"},unexpectedError:{name:"UnexpectedErrorException",message:"An unexpected error has occurred."},upgradeRequired:{name:"UpgradeRequiredException",message:"The profile requires a PIN but no PIN was supplied and X-BAMTech-PIN-Unsupported header is set."}},s={downgrade:{name:"DowngradeException",message:"The device does not meet the security requirements for the requested content quality and should retry at a lower quality setting."},rejected:{name:"RejectedException",message:"The device should be considered blocked."}},c={accountResolution:{name:"AccountResolutionException",message:"The account could not be resolved."},huluService:{name:"HuluServiceException",message:"There was a general Hulu error while processing the request."}},u={exploreContentNotFound:{name:"ExploreContentNotFoundException",message:"Content for the request could not be found."},exploreInternalServiceError:{name:"ExploreInternalServiceErrorException",message:"Could not complete the request because of an internal error."},exploreNotSupported:{name:"ExploreNotSupportedException",message:"The operation is not currently supported."},invalidRequest:{name:"InvalidRequestException",message:"The query request was invalid or the context provided to ExploreQuery does not match a value in configs."}},l={invalidDustConfiguration:{name:"InvalidDustConfigurationException",message:"Dust Configuration is incomplete or incorrect - most likely the application or environment Object is incomplete."}},p={accountIdMissing:{name:"AccountIdMissingException",message:"Request for license has been made with device authorization instead of account authorization."},authorizationExpired:{name:"AuthorizationExpiredException",message:"Could not reauthorize before attempting to access media."},blackout:{name:"BlackoutException",message:"The current user is not allowed to access the media for the requested license because they are in a blackout location."},downloadLimitReached:{name:"DownloadLimitReachedException",message:"The device has downloaded the maximum number of videos permitted."},drm:{name:"DrmException",message:"General DRM error."},fraudDetectionViolation:{name:"FraudDetectionViolationException",message:"Account has been flagged for potential fraud due to a high number of downloads on different devices."},gdprConsentConflict:{name:"GdprConsentConflictException",message:"The current user is not allowed to access the media due to consent conflict."},keyNotFound:{name:"KeyNotFoundException",message:"The requested license is not available."},kidsModeEnabled:{name:"KidsModeEnabledException",message:"The current user is not allowed to access the media for the requested license due to parental controls restrictions on the account."},loginRequired:{name:"LoginRequiredException",message:"The requested media can only be viewed after authentication."},mediaExperienceContextBodyInvalid:{name:"MediaExperienceContextBodyInvalidException",message:"Invalid experience context (bumper) configuration for QC playback."},mediaNotAllowed:{name:"MediaNotAllowedException",message:"The current user is not allowed to access the media for the requested license."},mediaUnavailable:{name:"MediaUnavailableException",message:"The requested media is not available."},notEntitled:{name:"NotEntitledException",message:"The user is not entitled to the requested media for the requested license."},offlineNotPermitted:{name:"OfflineNotPermittedException",message:"The current user is not allowed to obtain the requested license because the media is not available for offline viewing."},parentalControlsRestricted:{name:"ParentalControlsRestrictedException",message:"The current user is not allowed to access the media for the requested license due to parental controls restrictions on the profile."},profilePersonalInfoMissing:{name:"ProfilePersonalInfoMissingException",message:"The user has not yet validated or provided personal info in their profile, required for ad serving."},streamConcurrency:{name:"StreamConcurrencyException",message:"The current user is not allowed to access the media for the requested license because they have too many concurrent streams.  An optional data map containing an upsellableEntitlementId value may be attached to this error."},thumbnailsNotAvailable:{name:"ThumbnailsNotAvailableException",message:"No thumbnails are available for the given media."}},d={accountArchived:{name:"AccountArchivedException",message:"The orchestration service was unable to get the account grant due to the account being archived."},accountCreateFailed:{name:"AccountCreateFailedException",message:"An error occurred while trying to create the account."},accountNotEligibleAdTier:{name:"AccountNotEligibleAdTierException",message:"The operation (such as update date of birth) is applied to a not eligible account."},accountProfileCreateFailed:{name:"AccountProfileCreateFailedException",message:"An error occurred while calling the profile-service to create a profile."},accountProfileUpdateProtected:{name:"AccountProfileUpdateProtectedException",message:"The current profile can not update gender or DOB, or create a profile."},accountProfileSwitchFailed:{name:"AccountProfileSwitchFailedException",message:"The orchestration service was unable to switch the profiles."},accountSecurityFlagged:{name:"AccountSecurityFlaggedException",message:"The account has been security flagged."},accountVerificationRequired:{name:"AccountVerificationRequiredException",message:"The account is not verified."},accountsByEmailReadFailed:{name:"AccountsByEmailReadFailedException",message:"Error from DynamoDB while looking up accounts via the email."},actionGrantRequired:{name:"ActionGrantRequiredException",message:"ActionGrant is required for the given user (i.e.; outside the US or in the US and age < 18)."},attributeValidation:{name:"AttributeValidationException",message:"One or more attributes supplied are invalid."},authenticationBlocked:{name:"AuthenticationBlockedException",message:"The users account should be blocked for being a minor or due to inappropriate behavior."},clientIdNotFound:{name:"ClientIdNotFoundException",message:"The provided client ID was not found."},deviceFailureProfileCreation:{name:"DeviceFailureProfileCreationException",message:"The call to update device attributes encountered an error."},deviceIdInvalid:{name:"DeviceIdInvalidException",message:"The access token contains an invalid device ID."},dobBelowAgeOfMajority:{name:"DobBelowAgeOfMajorityException",message:"The date of birth is under the minimum account holder age for the users country."},documentsRetrievalFailed:{name:"DocumentsRetrievalFailedException",message:"The documents could not be retrieved."},identityAlreadyExists:{name:"IdentityAlreadyExistsException",message:"The new email address is already taken."},identityNotFound:{name:"IdentityNotFoundException",message:"The requested identity does not exist."},identityPasswordResetRequired:{name:"IdentityPasswordResetRequiredException",message:"A password reset is required for this account."},invalidAuthenticationUrl:{name:"InvalidAuthenticationUrlException",message:"The SCA response contained an invalid URL."},invalidCampaign:{name:"InvalidCampaignException",message:"The provided campaign data is not valid."},invalidCredentials:{name:"InvalidCredentialsException",message:"Invalid credential values received. This could be incorrect email or password, or mismatched credentials."},invalidEmail:{name:"InvalidEmailException",message:"The new email address is invalid."},invalidOrder:{name:"InvalidOrderException",message:"Order was invalid because it did not contain any line items."},invalidPasscode:{name:"InvalidPasscodeException",message:"The passcode is invalid."},invalidPassword:{name:"InvalidPasswordException",message:"The user entered a password that does not meet the minimum password requirements."},invalidPaymentMethod:{name:"InvalidPaymentMethodException",message:"Invalid payment method ID."},invalidPreAuthToken:{name:"InvalidPreAuthTokenException",message:"The pre-auth token has expired, is invalid or was faked by the user."},invalidSecurityCode:{name:"InvalidSecurityCodeException",message:"The payment method security code is invalid."},invalidVoucher:{name:"InvalidVoucherException",message:"The provided voucher data is not valid."},licensePlateNotFound:{name:"LicensePlateNotFoundException",message:"The license plate was not found."},marketingPreferenceUpdateFailed:{name:"MarketingPreferenceUpdateFailedException",message:"Update of marketing preferences failed."},maximumProfilesReached:{name:"MaximumProfilesReachedException",message:"The maximum number of profiles for the user's account has already been reached."},offDeviceActionGrantInvalid:{name:"OffDeviceActionGrantInvalidException",message:"The action grant was invalid."},offDeviceGrantInvalid:{name:"OffDeviceGrantInvalidException",message:"The device grant was invalid."},offDeviceMissingActionGrant:{name:"OffDeviceMissingActionGrantException",message:"The action grant is missing."},offDeviceMissingRedemptionFlow:{name:"OffDeviceMissingRedemptionFlowException",message:"The redemption flow is missing."},orderQueryTimeout:{name:"OrderQueryTimeoutException",message:"The query has taken longer than the configured timeout."},partnerNotSupported:{name:"PartnerNotSupportedException",message:"The partner supplied to the operation is not supported."},passwordRequired:{name:"PasswordRequiredException",message:"The oldPassword argument is null, but the identity token was not obtained by redeeming a one-time passcode."},profileCreateFailed:{name:"ProfileCreateFailedException",message:"Internal error occurred while creating a profile."},profileCreationProtected:{name:"ProfileCreationProtectedException",message:"Creation of a profile on this account requires authentication."},profilePinDeleteFailed:{name:"ProfilePinDeleteFailedException",message:"The pin delete failed."},profilePinInvalid:{name:"ProfilePinInvalidException",message:"The provided PIN is not the correct pin for this profile."},profilePinRetrievalFailed:{name:"ProfilePinRetrievalFailedException",message:"Failed retrieving pin for a profile."},profileRetrieval:{name:"ProfileRetrievalException",message:"The profiles for the user's account could not be retrieved."},rateLimited:{name:"RateLimitedException",message:"Too many passcodes have been requested."},redirectUriInvalid:{name:"RedirectUriInvalidException",message:"The provided redirect URI is invalid."},redirectUriNotAllowed:{name:"RedirectUriNotAllowedException",message:"The provided redirect URI is not allowed."},resourceDBUnknown:{name:"ResourceDBUnknownException",message:"Internal server error from DynamoDB in the resource-service during any mutation that returns the account."},resourceTimedOut:{name:"ResourceTimedOutException",message:"Call to dynamodb in the resource-service timed out."},userProfileDeleteFailed:{name:"UserProfileDeleteFailedException",message:"The userProfile failed to be deleted."},selfAccountHasActiveD2cSubscription:{name:"SelfAccountHasActiveD2cSubscriptionException",message:"The account has an active D2C subscription which is not pending cancel, and a delete request cannot be made for accounts with an active subscription."},selfAccountNotActive:{name:"SelfAccountNotActiveException",message:"The account is not active, and a delete request cannot be made for accounts unless they are active."},selfAccountNotFound:{name:"SelfAccountNotFoundException",message:"The orchestration service could not find the account when requesting an account be deleted."},selfRequestDuplicate:{name:"SelfRequestDuplicateException",message:"There is already an open request for this account to be deleted."},tokenAlreadyUsed:{name:"TokenAlreadyUsedException",message:"Unable to use the reset token, it has already been used."},tokenInvalid:{name:"TokenInvalidException",message:"Unable to reset the password as the reset token is not recognized by the service."},userProfileNotFound:{name:"UserProfileNotFoundException",message:"The userProfile was not found."},userProfileUpdateFailed:{name:"UserProfileUpdateFailedException",message:"The userProfile update failed."}},y={activationBadRequest:{name:"ActivationBadRequestException",message:"The service failed to activate due to a bad request."},activationForbidden:{name:"ActivationForbiddenException",message:"The service failed to activate due to linking being forbidden."},activationTokenExpired:{name:"ActivationTokenExpiredException",message:"The service failed to activate due to the activation token being expired."},bundleForbidden:{name:"BundleForbiddenException",message:"The service failed to return the ActivationToken for the bundle purchase."},providerNotEnabled:{name:"ProviderNotEnabledException",message:"The specified content provider is not enabled."}},f={flowControlEventInvalid:{name:"FlowControlEventInvalidException",message:"An event-type URN provided is an invalid format (not URN)."},flowControlPolicyConflict:{name:"FlowControlPolicyConflictException",message:"Conflicting policies are applied for an eventUrn."},flowControlPolicyInvalid:{name:"FlowControlPolicyInvalidException",message:"An invalid policy name is supplied."}},h={ageNotVerified:{name:"AgeNotVerifiedException",message:"The age for the users profile has not been verified and needs to be before proceeding."},ageNotVerifiedKr:{name:"AgeNotVerifiedKrException",message:"The age for the users profile has not been verified and needs to be before proceeding. The user is located in South Korea."},profilePinExpired:{name:"ProfilePinExpiredException",message:"The profile pin has expired and needs to be updated before proceeding."},profileMissing:{name:"ProfileMissingException",message:"There was no active profile in the token or the service was unable to use it."},profilePinMissing:{name:"ProfilePinMissingException",message:"The profile requires a PIN but no PIN was supplied."},profilePinNotEligible:{name:"ProfilePinNotEligibleException",message:"The profile is not eligible for setting a pin"},profilePinUpdateFailed:{name:"ProfilePinUpdateFailedException",message:"The pin update failed"}},v={configurationNotFound:{name:"ConfigurationNotFoundException",message:"Unable to locate configuration data based on the supplied bootstrap parameter.",errorCases:[{method:"getConfiguration",status:r.Z.NOT_FOUND}]},invalidData:{name:"InvalidDataException",message:"Unable to create payment information due to invalid data.",errorCases:[{method:"submitOrderWithPaymentMethod",status:r.Z.BAD_REQUEST},{method:"submitOrderWithCardPaymentMethod",status:r.Z.BAD_REQUEST},{method:"createComcastPaymentMethod",status:r.Z.BAD_REQUEST},{method:"submitIDealPayment",status:r.Z.BAD_REQUEST},{method:"submitKlarnaPayment",status:r.Z.BAD_REQUEST},{method:"submitMercadoPayment",status:r.Z.BAD_REQUEST},{method:"resumeAccount",status:r.Z.BAD_REQUEST},{method:"restartSubscription",status:r.Z.BAD_REQUEST}]},invalidPaymentInformation:{name:"InvalidPaymentInformationException",message:"Unable to submit the order due to invalid payment information.",errorCases:[{method:"createCardPaymentMethod",status:r.Z.UNPROCESSABLE_CONTENT}]},invalidRequest:{name:"InvalidRequestException",message:"The request was invalid.",errorCases:[{method:"query",status:r.Z.BAD_REQUEST},{method:"getEligibilityStatus",status:r.Z.BAD_REQUEST}]},invalidZipCode:{name:"InvalidZipCodeException",message:"Invalid or nonexistent zip code.",errorCases:[{method:"lookupByZipCode",status:r.Z.FORBIDDEN}]},orderCountryInvalid:{name:"OrderCountryInvalidException",message:"Indicated order failed because the geo-location country code of the user does not match the wallet BIN country code.",errorCases:[{method:"getOrderStatus",status:r.Z.UNPROCESSABLE_CONTENT}]},orderTimeout:{name:"OrderTimeoutException",message:"The order could not be verified in a timely fashion. Requests Limit reached for an order.",errorCases:[{method:"getOrderStatus",status:r.Z.TOO_MANY_REQUESTS}]},subscriptionNotFound:{name:"SubscriptionNotFoundException",message:"No subscription with that id has been found for the user.",errorCases:[{method:"getAccountSubscription",status:r.Z.NOT_FOUND},{method:"getSubscriberInfo",status:r.Z.NOT_FOUND}]},unpriceableOrder:{name:"UnpriceableOrderException",message:"Order could not be priced due to issues with the provided data.",errorCases:[{method:"priceOrder",status:r.Z.BAD_REQUEST},{method:"priceOrder",status:r.Z.UNPROCESSABLE_CONTENT}]}}},70187:function(e,t,n){"use strict";var r=n(61655);t.Z={account:r.Db,commerce:r.cI,common:r.xX,drm:r.Qo,eligibility:r.dS,explore:r.Fw,internal:r.f7,media:r.nz,orchestration:r.$6,purchase:r.sq,userProfile:r.qL,socket:r.vq,method:r.Ts}},77831:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120),c=n(3920);function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var l=function(e){(0,o.Z)(n,e);var t=u(n);function n(e){(0,r.Z)(this,n);var i={reasons:[new c.Z({description:e})],exceptionData:{name:"InvalidArgumentException",message:e}};return t.call(this,i)}return(0,i.Z)(n,null,[{key:"typeName",get:function(){return"InvalidArgumentException"}},{key:"message",get:function(){return"One or more of the supplied variables does not pass validation."}}]),n}(n(78641).Z)},10869:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120),c=n(3920);function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var l=function(e){(0,o.Z)(n,e);var t=u(n);function n(e){(0,r.Z)(this,n);var i={reasons:[new c.Z({description:e})],exceptionData:{name:"ProviderException",message:e}};return t.call(this,i)}return(0,i.Z)(n,null,[{key:"typeName",get:function(){return"ProviderException"}},{key:"message",get:function(){return"An unexpected error occurred with a platform provider implementation."}}]),n}(n(78641).Z)},78641:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}}),n(12419);var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),u=n(89611);function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e,t,n){return(p=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&(0,u.Z)(i,n.prototype),i}).apply(null,arguments)}function d(e){var t="function"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return p(e,arguments,(0,c.Z)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,u.Z)(r,e)})(e)}n(68309),n(74916),n(23123),n(69600),n(47042),n(92222),n(41539),n(39714);var y=n(67682),f=n(87891),h=n(3920),v=n(70187);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var m=function(e){(0,a.Z)(n,e);var t=g(n);function n(e){var i,a,s,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.Z.common.invalidState;if((0,r.Z)(this,n),y.Check.string(e)){var u=e;e={reasons:[new h.Z({description:u})],exceptionData:c}}var l=e||{},p=l.transactionId,d=l.reasons,g=l.status,m=l.exceptionData,b=l.throttleTimeout,T="ServiceException",k="An unexpected error occurred communicating with a service.",S=null!==(i=null==m?void 0:m.message)&&void 0!==i?i:k;if((s=t.call(this,S)).transactionId=y.Check.string(p)?p:"",s.reasons=y.Check.array(d)?d:[],s.status=y.Check.number(g)?g:null,s.name=null!==(a=null==m?void 0:m.name)&&void 0!==a?a:T,s.throttleTimeout=b,s.data={name:s.name,message:s.message},y.Check.function(Error.captureStackTrace)&&Error.captureStackTrace((0,o.Z)(s),s.constructor),y.Check.string(s.stack)){var P=s.stack.split("\n");f.Z.instance.error(P.slice(0,3).join("\n"),(0,o.Z)(s))}else f.Z.instance.error("Unknown",(0,o.Z)(s));return s}return(0,i.Z)(n,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message)}},{key:"inspect",value:function(){return this.toString()}}]),n}(d(Error))},2342:function(e,t,n){"use strict";var r,i,o,a,s;n.d(t,{ActionType:function(){return i},RefIdType:function(){return r},WatchListEventType:function(){return a}}),function(e){e.encodedSeriesId="encodedSeriesId",e.encodedFamilyId="encodedFamilyId",e.deeplinkId="deeplinkId"}(r||(r={})),function(e){e.browse="browse",e.playback="playback"}(i||(i={})),function(e){e.light="light",e.medium="medium",e.dark="dark"}(o||(o={})),function(e){e.add="add",e.remove="remove"}(a||(a={})),function(e){e.recommendation="recommendation",e.sequential="sequential"}(s||(s={}))},59132:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}}),n(12419),n(82526),n(57327),n(38880),n(49337);var r=n(54546),i=n(4942),o=n(15861),a=n(15671),s=n(43144),c=n(97326),u=n(2291),l=n(60136),p=n(82963),d=n(61120),y=n(87757),f=n.n(y),h=(n(41539),n(39714),n(74916),n(64765),n(92222),n(54747),n(47941),n(69720),n(15306),n(24603),n(67682)),v=n(17563),g=n(87891),m=n(52662),b=n(84983),T=n(19496),k=n(70928),S=n(81763),P=n(69867),E=n(24965),Z=n(29466),w=n(27971),D=n(67452),C=n(70187),A=n(1206),R=n(92847),x=n(5301),O=n(40064);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.Z)(e);if(t){var i=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,p.Z)(this,n)}}var L=b.Z.services.explore.exploreClient,N=function(e){(0,l.Z)(q,e);var t,n,i,p,y,b,O,I,N,B,_,F,U=j(q);function q(e){var t;(0,a.Z)(this,q),t=U.call(this,e);var n={options:h.Types.object({config:h.Types.instanceStrict(D.Z),logger:h.Types.instanceStrict(g.Z),httpClient:h.Types.instanceStrict(T.Z)})};return(0,h.typecheck)((0,c.Z)(t),n,arguments),t.logger.log(t.toString(),"Created."),t}return(0,s.Z)(q,[{key:"getPage",value:(F=(0,o.Z)(f().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,d=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:h.Types.object({query:h.Types.object(R.PageQueryTypedef),accessToken:h.Types.instanceStrict(k.Z),logTransaction:h.Types.instanceStrict(m.Z)})},(0,h.typecheck)(this,"getPage",n,d),r=t.query,i=t.accessToken,o=t.logTransaction,a=r.version,s=r.pageId,c=r.enhancedContainersLimit,u=r.limit,l=r.exploreParams,p={context:w.Z.getPage,version:a,variables:{pageId:s},exploreParams:M(M({},l),{},{enhancedContainersLimit:c,limit:u})},e.abrupt("return",this.query({query:p,accessToken:i,logTransaction:o}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return F.apply(this,arguments)})},{key:"getSet",value:(_=(0,o.Z)(f().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,d=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:h.Types.object({query:h.Types.object(R.SetQueryTypedef),accessToken:h.Types.instanceStrict(k.Z),logTransaction:h.Types.instanceStrict(m.Z)})},(0,h.typecheck)(this,"getSet",n,d),r=t.query,i=t.accessToken,o=t.logTransaction,a=r.version,s=r.setId,c=r.offset,u=r.limit,l=r.exploreParams,p={context:w.Z.getSet,version:a,variables:{setId:s},exploreParams:M(M({},l),{},{offset:c,limit:u})},e.abrupt("return",this.query({query:p,accessToken:i,logTransaction:o}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"getDeeplink",value:(B=(0,o.Z)(f().mark((function e(t){var n,r,i,o,a,s,c,u,l,p=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:h.Types.object({query:h.Types.object(R.DeeplinkQueryTypedef),accessToken:h.Types.instanceStrict(k.Z),logTransaction:h.Types.instanceStrict(m.Z)})},(0,h.typecheck)(this,"getDeeplink",n,p),r=t.query,i=t.accessToken,o=t.logTransaction,a=r.action,s=r.version,c=r.refId,u=r.refIdType,l={context:w.Z.getDeeplink,version:s,exploreParams:{action:a,refId:c,refIdType:u}},e.abrupt("return",this.query({query:l,accessToken:i,logTransaction:o}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return B.apply(this,arguments)})},{key:"getUserState",value:(N=(0,o.Z)(f().mark((function e(t){var n,r,i,o,a,s,c,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:h.Types.object({input:h.Types.object(R.UserStateInputTypedef),accessToken:h.Types.instanceStrict(k.Z),logTransaction:h.Types.instanceStrict(m.Z)})},(0,h.typecheck)(this,"getUserState",n,u),r=t.input,i=t.accessToken,o=t.logTransaction,a=r.pids,s=r.version,c={context:w.Z.getUserState,version:s,exploreParams:{pids:a}},e.abrupt("return",this.query({query:c,accessToken:i,logTransaction:o}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"getPlayerExperience",value:(I=(0,o.Z)(f().mark((function e(t){var n,r,i,o,a,s,c,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:h.Types.object({query:h.Types.object(R.PlayerExperienceQueryTypedef),accessToken:h.Types.instanceStrict(k.Z),logTransaction:h.Types.instanceStrict(m.Z)})},(0,h.typecheck)(this,"getPlayerExperience",n,u),r=t.query,i=t.accessToken,o=t.logTransaction,a=r.availId,s=r.version,c={context:w.Z.getPlayerExperience,version:s,variables:{availId:a}},e.abrupt("return",this.query({query:c,accessToken:i,logTransaction:o}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return I.apply(this,arguments)})},{key:"sendUserAction",value:(O=(0,o.Z)(f().mark((function e(t){var n,r,i,o,a,s,c,l=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:h.Types.object({request:h.Types.array.of.object(),accessToken:h.Types.instanceStrict(k.Z),logTransaction:h.Types.instanceStrict(m.Z)})},(0,h.typecheck)(this,"sendUserAction",n,l),r=this.logger,i=t.request,o=t.accessToken,a=t.logTransaction,s=this.getPayload({accessToken:o,endpointKey:w.Z.messageEnvelope,data:{params:i}}),c=new A.Z({logger:r,source:this.toString(),urn:L.sendUserAction,payload:s,data:{request:i},endpointKey:w.Z.messageEnvelope,logTransaction:a}),e.next=7,(0,u.Z)((0,d.Z)(q.prototype),"request",this).call(this,{payload:s,dustLogUtility:c});case 7:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)})},{key:"getSeason",value:(b=(0,o.Z)(f().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,d=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:h.Types.object({query:h.Types.object(R.SeasonQueryTypedef),accessToken:h.Types.instanceStrict(k.Z),logTransaction:h.Types.instanceStrict(m.Z)})},(0,h.typecheck)(this,"getSeason",n,d),r=t.query,i=t.accessToken,o=t.logTransaction,a=r.version,s=r.seasonId,c=r.limit,u=r.offset,l=r.exploreParams,p={context:w.Z.getSeason,version:a,variables:{seasonId:s},exploreParams:M(M({},l),{},{limit:c,offset:u})},e.abrupt("return",this.query({query:p,accessToken:i,logTransaction:o}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"search",value:(y=(0,o.Z)(f().mark((function e(t){var n,r,i,o,a,s,c,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:h.Types.object({query:h.Types.object(R.SearchQueryTypedef),logTransaction:h.Types.instanceStrict(m.Z)})},(0,h.typecheck)(this,"search",n,u),r=t.query,i=t.accessToken,o=t.logTransaction,a=r.version,s=r.query,c={context:w.Z.search,version:a,exploreParams:{query:s}},e.abrupt("return",this.query({query:c,accessToken:i,logTransaction:o}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"getUpNext",value:(p=(0,o.Z)(f().mark((function e(t){var n,r,i,o,a,s,c,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:h.Types.object({query:h.Types.object(R.UpNextQueryTypedef),accessToken:h.Types.instanceStrict(k.Z),logTransaction:h.Types.instanceStrict(m.Z)})},(0,h.typecheck)(this,"getUpNext",n,u),r=t.query,i=t.accessToken,o=t.logTransaction,a=r.version,s=r.contentId,c={context:w.Z.getUpNext,version:a,exploreParams:{contentId:s}},e.abrupt("return",this.query({query:c,accessToken:i,logTransaction:o}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"getDownloadMetadata",value:(i=(0,o.Z)(f().mark((function e(t){var n,r,i,o,a,s,c,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:h.Types.object({input:h.Types.object(R.DownloadMetadataInputTypedef),accessToken:h.Types.instanceStrict(k.Z),logTransaction:h.Types.instanceStrict(m.Z)})},(0,h.typecheck)(this,"getDownloadMetadata",n,u),r=t.input,i=t.accessToken,o=t.logTransaction,a=r.availIds,s=r.version,c={context:w.Z.getDownloadMetadata,version:s,exploreParams:{availIds:a}},e.abrupt("return",this.query({query:c,accessToken:i,logTransaction:o}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getPartnerContinueWatching",value:(n=(0,o.Z)(f().mark((function e(t){var n,r,i,o,a,s,c,u,l=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:h.Types.object({query:h.Types.object(R.GetPartnerContinueWatchingQueryTypedef),accessToken:h.Types.instanceStrict(k.Z),logTransaction:h.Types.instanceStrict(m.Z)})},(0,h.typecheck)(this,"getPartnerContinueWatching",n,l),r=t.query,i=t.accessToken,o=t.logTransaction,a=r.version,s=r.limit,c=r.exploreParams,u={context:w.Z.getPartnerContinueWatching,version:a,exploreParams:M(M({},c),{},{limit:s})},e.abrupt("return",this.query({query:u,accessToken:i,logTransaction:o}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"query",value:(t=(0,o.Z)(f().mark((function e(t){var n,r,i,o,a,s,c,l,p,y,v,g,b,T,S,P=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={options:h.Types.object({query:h.Types.object(R.ExploreQueryTypedef),accessToken:h.Types.instanceStrict(k.Z),logTransaction:h.Types.instanceStrict(m.Z)})},(0,h.typecheck)(this,"query",n,P),r=this.logger,i=t.query,o=t.accessToken,a=t.logTransaction,s=i.context,c=i.version,l=i.variables,p=void 0===l?{}:l,y=i.exploreParams,v=void 0===y?{}:y,g=s,b=L[s]||L.query,this.isKeyInConfig(g)){e.next=8;break}throw(0,x.Kf)({description:"".concat(this.toString()," ").concat(g," does not exist in SDK configs, unknown context."),exceptionData:C.Z.explore.invalidRequest});case 8:return T=this.getPayload({accessToken:o,endpointKey:g,data:{variables:M(M({},p),{},{version:c}),params:this.processParams(v,g)}}),r.info(this.toString(),"Query: ".concat(s,".")),S=new A.Z({logger:r,source:this.toString(),urn:b,payload:T,data:{context:s},endpointKey:g,logTransaction:a}),e.abrupt("return",(0,u.Z)((0,d.Z)(q.prototype),"request",this).call(this,{payload:T,dustLogUtility:S,resultMapper:function(e){return e.data.data}}));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"processParams",value:function(e,t){var n=this.config.extras;if(e){if(n){var r,i=null!==(r=n[t])&&void 0!==r?r:{};Object.keys(i).forEach((function(t){var n;null!==(n=e[t])&&void 0!==n||(e[t]=i[t])}))}return e}}},{key:"getPayload",value:function(e){var t,n,i=e.accessToken,o=e.endpointKey,a=e.data,s=this.config.endpoints[o],c=s.headers,u=s.href,l=s.method,p=s.templated,d=a.variables,y=a.params,f=u;p&&d&&Object.entries(d).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];f=f.replace(new RegExp("{".concat(n,"}"),"g"),encodeURIComponent(i))})),n=f,h.Check.assigned(y)&&(l===S.Z.GET?n=(0,Z.Z)(f,(0,v.stringify)(y)):t=JSON.stringify(y));var g=(0,E.Z)({Authorization:function(){return{replacer:"{accessToken}",value:i.token}}},c);return{url:n,method:l,body:t,headers:new P.Z(g)}}},{key:"isKeyInConfig",value:function(e){return!!this.config.endpoints[e]}},{key:"toString",value:function(){return"SDK.Services.Explore.ExploreClient"}}]),q}(O.Z)},67452:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).extras=e.extras,i}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Explore.ExploreClientConfiguration"}}]),n}(n(88152).Z)},27971:function(e,t,n){"use strict";var r;n(74916),n(64765),function(e){e.getDeeplink="getDeeplink",e.getDownloadMetadata="getDownloadMetadata",e.getPage="getPage",e.getSet="getSet",e.getUserState="getUserState",e.getPlayerExperience="getPlayerExperience",e.messageEnvelope="messageEnvelope",e.getSeason="getSeason",e.getUpNext="getUpNext",e.search="search",e.getPartnerContinueWatching="getPartnerContinueWatching"}(r||(r={})),t.Z=r},40986:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={token:o.Types.nonEmptyString};(0,o.typecheck)(this,n,arguments),this.token=t}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.ExternalActivation.ActivationToken"}}]),e}()},98931:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}}),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(2291),c=n(60136),u=n(82963),l=n(61120),p=n(87757),d=n.n(p),y=(n(41539),n(39714),n(74916),n(15306),n(67682)),f=n(7694),h=n(24965),v=n(1206),g=n(84983),m=n(40986),b=n(67993),T=n(54544),k=n(5437),S=n(91546),P=n(52662),E=n(70928),Z=n(69867),w=n(40064),D=n(83668);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var A=g.Z.services.externalActivation.externalActivationClient,R=function(e){(0,c.Z)(R,e);var t,n,u,p,g,w=C(R);function R(e){var t;(0,i.Z)(this,R),t=w.call(this,e);var n=y.Types.object({config:y.Types.instanceStrict(S.Z)});return(0,y.typecheck)((0,a.Z)(t),n,arguments),t.logger.log(t.toString(),"Created."),t}return(0,o.Z)(R,[{key:"redeemBundle",value:(g=(0,r.Z)(d().mark((function e(t,n,r,i){var o,a,c,u,p,f=this,h=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={providerId:y.Types.nonEmptyString,activationTokenString:y.Types.nonEmptyString,accessToken:y.Types.instanceStrict(E.Z),logTransaction:y.Types.instanceStrict(P.Z)},(0,y.typecheck)(this,"redeemBundle",o,h),a=this.logger,c=k.Z.activateBundle,u=this.getPayload({accessToken:r,endpointKey:c,body:{linkToken:n},data:{providerId:t}}),p=new v.Z({logger:a,source:this.toString(),urn:A.redeemBundle,payload:u,endpointKey:c,logTransaction:i}),e.abrupt("return",(0,s.Z)((0,l.Z)(R.prototype),"request",this).call(this,{payload:u,dustLogUtility:p,skipHandleServiceResponse:!0,resultMapper:function(e){return f.redeemResponseHandler(e,p)}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return g.apply(this,arguments)})},{key:"redeemToken",value:(p=(0,r.Z)(d().mark((function e(t,n,r,i){var o,a,c,u,p,f=this,h=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={providerId:y.Types.nonEmptyString,activationTokenString:y.Types.nonEmptyString,accessToken:y.Types.instanceStrict(E.Z),logTransaction:y.Types.instanceStrict(P.Z)},(0,y.typecheck)(this,"redeemToken",o,h),a=this.logger,c=k.Z.activateToken,u=this.getPayload({accessToken:r,endpointKey:c,body:{linkToken:n},data:{providerId:t}}),p=new v.Z({logger:a,source:this.toString(),urn:A.redeemToken,payload:u,endpointKey:c,logTransaction:i}),e.abrupt("return",(0,s.Z)((0,l.Z)(R.prototype),"request",this).call(this,{payload:u,dustLogUtility:p,skipHandleServiceResponse:!0,resultMapper:function(e){return f.redeemResponseHandler(e,p)}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return p.apply(this,arguments)})},{key:"createExternalRedemptionToken",value:(u=(0,r.Z)(d().mark((function e(t,n,r){var i,o,a,c,u,p=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={providerId:y.Types.nonEmptyString,accessToken:y.Types.instanceStrict(E.Z),logTransaction:y.Types.instanceStrict(P.Z)},(0,y.typecheck)(this,"createExternalRedemptionToken",i,p),o=this.logger,a=k.Z.getActivationToken,c=this.getPayload({accessToken:n,endpointKey:a,data:{providerId:t}}),u=new v.Z({logger:o,source:this.toString(),urn:A.createExternalRedemptionToken,payload:c,endpointKey:a,logTransaction:r}),e.abrupt("return",(0,s.Z)((0,l.Z)(R.prototype),"request",this).call(this,{payload:c,dustLogUtility:u,resultMapper:function(e){var t=e.data,n=(void 0===t?{}:t).linkToken;return new m.Z(n)}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return u.apply(this,arguments)})},{key:"generateActivationToken",value:(n=(0,r.Z)(d().mark((function e(t,n,r){var i,o,a,c,u,p=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={contentProvider:y.Types.nonEmptyString,accessToken:y.Types.instanceStrict(E.Z),logTransaction:y.Types.instanceStrict(P.Z)},(0,y.typecheck)(this,"generateActivationToken",i,p),o=this.logger,a=k.Z.generateActivationToken,c=this.getPayload({accessToken:n,endpointKey:a,data:{contentProvider:t}}),u=new v.Z({logger:o,source:this.toString(),urn:A.generateActivationToken,data:{contentProviderId:t},payload:c,endpointKey:a,logTransaction:r}),e.abrupt("return",(0,s.Z)((0,l.Z)(R.prototype),"request",this).call(this,{payload:c,dustLogUtility:u,resultMapper:function(e){var t=e.data,n=(void 0===t?{}:t).activationToken;return new m.Z(n)}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"redeemResponseHandler",value:(t=(0,r.Z)(d().mark((function e(t,n){var r,i,o,a,s,c,u,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.headers,i=t.status,o=t.data,a=o.errors,s=!!r.get(D.REFRESH_ACCESS_TOKEN),c=!!r.get(D.TEMPORARY_ACCESS_GRANTED),l=new T.Z({refreshAccessToken:s,temporaryAccessGranted:c,errors:a}),e.abrupt("return",(0,f.Z)({response:t,dustLogUtility:n}).then((function(){switch(i){case 200:u=b.Z.activationSucceeded;break;case 202:u=c?b.Z.activationRetryingWithTda:b.Z.activationRetryingWithoutTda}return l.resultStatus=u,l})).catch((function(e){switch(e.status){case 500:case 501:case 502:case 503:case 504:u=c?b.Z.activationFailedWithTda:b.Z.activationFailedWithoutTda;break;default:u=e}return l.resultStatus=u,l})));case 6:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})},{key:"getPayload",value:function(e){var t=e.accessToken,n=e.endpointKey,r=e.body,i=e.data,o=this.config.endpoints[n],a=o.href,s=o.headers,c=o.method,u=r?JSON.stringify(r):"",l=a;o.templated&&null!=i&&i.providerId&&(l=l.replace(/\{providerId\}/gi,i.providerId)),o.templated&&null!=i&&i.contentProvider&&(l=l.replace(/\{contentProvider\}/gi,i.contentProvider));var p=(0,h.Z)({Authorization:function(){return{replacer:"{accessToken}",value:t.token}}},s);return{url:l,method:c,body:u,headers:new Z.Z(p)}}},{key:"toString",value:function(){return"SDK.Services.ExternalActivation.ExternalActivationClient"}}]),R}(w.Z)},91546:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.ExternalActivation.ExternalActivationClientConfiguration"}}]),n}(n(88152).Z)},5437:function(e,t){"use strict";var n;!function(e){e.activateToken="activateToken",e.activateBundle="activateBundle",e.getActivationToken="getActivationToken",e.generateActivationToken="generateActivationToken"}(n||(n={})),t.Z=n},54544:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(15671),i=n(43144),o=(n(47941),n(69826),n(41539),n(67682)),a=n(78641),s=n(67993),c=function(){function e(t){var n=this;(0,r.Z)(this,e);var i=function(e){if(o.Check.string(e)){var t=n.getResultStatusKey(e);return o.Check.contains(Object.keys(s.Z),t)}return o.Check.instanceStrict(e,a.Z)},c={options:o.Types.object({refreshAccessToken:o.Types.boolean,temporaryAccessGranted:o.Types.boolean,resultStatus:o.Types.custom(i,"String or an instance of ServiceException").optional,errors:o.Types.array.optional})};(0,o.typecheck)(this,c,arguments);var u=t.refreshAccessToken,l=t.temporaryAccessGranted,p=t.resultStatus,d=void 0===p?null:p,y=t.errors,f=void 0===y?[]:y;this.refreshAccessToken=u,this.temporaryAccessGranted=l,this.resultStatus="string"==typeof d?this.getResultStatusKey(d):d,this.errors=f}return(0,i.Z)(e,[{key:"getResultStatusKey",value:function(e){return Object.keys(s.Z).find((function(t){return s.Z[t]===e}))}},{key:"toString",value:function(){return"SDK.Services.ExternalActivation.ExternalActivationResult"}}]),e}()},67993:function(e,t){"use strict";var n;!function(e){e.activationSucceeded="ACTIVATION_SUCCEEDED",e.activationRetryingWithTda="ACTIVATION_RETRYING_WITH_TDA",e.activationRetryingWithoutTda="ACTIVATION_RETRYING_WITHOUT_TDA",e.activationFailedWithTda="ACTIVATION_FAILED_WITH_TDA",e.activationFailedWithoutTda="ACTIVATION_FAILED_WITHOUT_TDA"}(n||(n={})),t.Z=n},62370:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(49337);var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(97326),c=n(2291),u=n(60136),l=n(82963),p=n(61120),d=n(87757),y=n.n(d),f=(n(41539),n(39714),n(54747),n(74916),n(15306),n(67682)),h=n(17563),v=n(87891),g=n(52662),m=n(1206),b=n(84983),T=n(19496),k=n(70928),S=n(81763),P=n(29466),E=n(5326),Z=n(96543),w=n(63580),D=n(40026),C=n(69867),A=n(24965),R=n(40064);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var M=b.Z.services.flex.flexClient,j=function(e){(0,u.Z)(l,e);var t,n,r=I(l);function l(e){var t;(0,o.Z)(this,l),t=r.call(this,e);var n={options:f.Types.object({config:f.Types.instanceStrict(w.Z),logger:f.Types.instanceStrict(v.Z),httpClient:f.Types.instanceStrict(T.Z)})};return(0,f.typecheck)((0,s.Z)(t),n,arguments),t.logger.log(t.toString(),"Created."),t}return(0,a.Z)(l,[{key:"getScreen",value:(n=(0,i.Z)(y().mark((function e(t,n,r){var i,o,a,s,u,d,h,v,b,T,S=this,P=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={flexOptions:f.Types.object(E.FlexOptionsTypedef),accessToken:f.Types.instanceStrict(k.Z),logTransaction:f.Types.instanceStrict(g.Z)},(0,f.typecheck)(this,"getScreen",i,P),o=this.logger,a=t.key,s=t.version,u=t.queryParams,d=t.configOverride,h=t.requestBody,v=a,this.isKeyInConfig(a)||(v=Z.Z.default,o.warn(this.toString(),"FlexClientEndpoint[".concat(a,'] is not defined, using the "default" endpoint.'))),b=this.getPayload({accessToken:n,endpointKey:v,data:{queryParams:u,requestBody:h,version:s,configOverride:d,clientOverrideHeaders:t.headers}}),o.info(this.toString(),"Attempting to get Screen: ".concat(a,".")),T=new m.Z({logger:o,source:this.toString(),urn:M.getScreen,payload:b,endpointKey:v,logTransaction:r}),e.abrupt("return",(0,c.Z)((0,p.Z)(l.prototype),"request",this).call(this,{payload:b,dustLogUtility:T,resultMapper:function(e){var t=e.data,n=e.headers,r=t.data;r.headers=S.getHeadersObject(n);var i={viewData:f.Types.object(D.ScreenTypedef)};return f.typecheck.warn(i,[r]),r}}));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"getHeadersObject",value:function(e){if(e){var t={};return e.forEach((function(e,n){t[n]=e}),{}),t}return{}}},{key:"execute",value:(t=(0,i.Z)(y().mark((function e(t,n,r){var i,o,a,s,u,d,h,v,b,T,S=this,P=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={flexOptions:f.Types.object(E.FlexOptionsTypedef),accessToken:f.Types.instanceStrict(k.Z),logTransaction:f.Types.instanceStrict(g.Z)},(0,f.typecheck)(this,"execute",i,P),o=this.logger,a=t.key,s=t.version,u=t.queryParams,d=t.configOverride,h=t.requestBody,v=a,this.isKeyInConfig(a)||(v=Z.Z.execution,o.warn(this.toString(),"FlexClientEndpoint[".concat(a,'] is not defined, using the "execution" endpoint.'))),b=this.getPayload({accessToken:n,endpointKey:v,data:{queryParams:u,requestBody:h,version:s,configOverride:d,clientOverrideHeaders:t.headers}}),o.info(this.toString(),"Attempting to execute: ".concat(a,".")),T=new m.Z({logger:o,source:this.toString(),urn:M.execute,payload:b,endpointKey:v,logTransaction:r}),e.abrupt("return",(0,c.Z)((0,p.Z)(l.prototype),"request",this).call(this,{payload:b,dustLogUtility:T,resultMapper:function(e){var t=e.data,n=e.headers,r=t.data;r.headers=S.getHeadersObject(n);var i={flexData:f.Types.object(D.ExecutionResponseTypedef)};return f.typecheck.warn(i,[r]),r}}));case 9:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"getPayload",value:function(e){var t,n,r=e.accessToken,i=e.endpointKey,o=e.data,a=this.config.endpoints[i],s=a,c=s.headers,u=s.href,l=s.method,p=s.templated,d=o.queryParams,y=o.version,v=o.configOverride,g=o.clientOverrideHeaders,m=o.requestBody,b=l,T=u;if(v)if(i===Z.Z.default||i===Z.Z.execution){var k=v(O({},a));b=k.method,T=k.href}else this.logger.warn(this.toString(),"configOverride is only allowed for unknown key(s).");p&&y&&(T=T.replace(/\{version\}/gi,y)),n=T,f.Check.assigned(d)&&(n=(0,P.Z)(T,(0,h.stringify)(d))),!f.Check.assigned(m)||b!==S.Z.POST&&b!==S.Z.PUT||(t=JSON.stringify(m));var E=(0,A.Z)({Authorization:function(){return{replacer:"{accessToken}",value:r.token}}},c);return f.Check.nonEmptyObject(g)&&(E=O(O({},E),g)),{url:n,method:b,body:t,headers:new C.Z(E)}}},{key:"isKeyInConfig",value:function(e){return!!this.config.endpoints[e]}},{key:"toString",value:function(){return"SDK.Services.Flex.FlexClient"}}]),l}(R.Z)},63580:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Flex.FlexClientConfiguration"}}]),n}(n(88152).Z)},96543:function(e,t){"use strict";var n;!function(e){e.billingHistory="billingHistory",e.subscriptionSummary="subscriptionSummary",e.cancelFlow="cancelFlow",e.cancelSuccess="cancelSuccess",e.lrPlanSwitch="lrPlanSwitch",e.lrPlanSwitchSuccess="lrPlanSwitchSuccess",e.lrBillingCadence="lrBillingCadence",e.planSwitch="planSwitch",e.planSwitchLedger="planSwitchLedger",e.planSwitchSuccess="planSwitchSuccess",e.subscriptionRestart="subscriptionRestart",e.subscriptionCancel="subscriptionCancel",e.subscriptionSwitch="subscriptionSwitch",e.subscriptionSuccess="subscriptionSuccess",e.welcome="welcome",e.execution="execution",e.default="default"}(n||(n={})),t.Z=n},40026:function(e,t,n){"use strict";n.d(t,{ExecutionResponseTypedef:function(){return o},ScreenTypedef:function(){return i}});var r=n(67682),i={content:r.Types.object(),screenType:r.Types.nonEmptyString,templateId:r.Types.nonEmptyString,initialFocus:r.Types.nonEmptyString,metricsData:r.Types.object(),headers:r.Types.object()},o={success:r.Types.boolean,successData:r.Types.object().optional,errorData:r.Types.object().optional,metricsData:r.Types.object(),headers:r.Types.object()}},84191:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(87757),c=n.n(s),u=(n(41539),n(39714),n(67682)),l=n(80761),p=n(19496),d=n(87891),y=n(53514),f=n(24965),h=n(43425),v=n(70928),g=n(69867),m=n(83668),b=function(){function e(){(0,o.Z)(this,e)}var t,n,s;return(0,a.Z)(e,[{key:"toString",value:function(){return e.toString()}}],[{key:"query",value:(s=(0,i.Z)(c().mark((function t(n){var r,i,o,a,s,f,g,m,b=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={options:u.Types.object({endpoint:u.Types.instanceStrict(y.Z),request:u.Types.instanceStrict(l.Z),logger:u.Types.instanceStrict(d.Z),httpClient:u.Types.instanceStrict(p.Z),extraHeaders:u.Types.object().optional,accessToken:u.Types.instanceStrict(v.Z)})},(0,u.typecheck)(e,"query",r,b),i=n.endpoint,o=n.request,a=n.accessToken,s=n.logger,f=n.httpClient,g=n.extraHeaders,m=e.getPayload({accessToken:a,endpoint:i,request:o,logger:s,extraHeaders:g}),s.info(this.toString(),"Attempting to execute GraphQl query with variables: ".concat(JSON.stringify(o.variables,(0,h.Z)()))),t.abrupt("return",f.request(m));case 5:case"end":return t.stop()}}),t,this)}))),function(e){return s.apply(this,arguments)})},{key:"refreshToken",value:(n=(0,i.Z)(c().mark((function t(n){var r,i,o,a,s,f,v,g,m=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={options:u.Types.object({endpoint:u.Types.instanceStrict(y.Z),request:u.Types.instanceStrict(l.Z),logger:u.Types.instanceStrict(d.Z),httpClient:u.Types.instanceStrict(p.Z),apiKey:u.Types.nonEmptyString,enableADRT:u.Types.boolean})},(0,u.typecheck)(e,"refreshToken",r,m),i=n.endpoint,o=n.request,a=n.apiKey,s=n.logger,f=n.httpClient,v=n.enableADRT,g=e.getPayload({apiKey:a,endpoint:i,request:o,logger:s,enableADRT:v}),s.info(this.toString(),"Attempting to refresh token with variables: ".concat(JSON.stringify(o.variables,(0,h.Z)()))),t.abrupt("return",f.request(g));case 5:case"end":return t.stop()}}),t,this)}))),function(e){return n.apply(this,arguments)})},{key:"registerDevice",value:(t=(0,i.Z)(c().mark((function t(n){var r,i,o,a,s,f,v,g,m=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={options:u.Types.object({endpoint:u.Types.instanceStrict(y.Z),request:u.Types.instanceStrict(l.Z),logger:u.Types.instanceStrict(d.Z),httpClient:u.Types.instanceStrict(p.Z),extraHeaders:u.Types.object().optional,apiKey:u.Types.nonEmptyString})},(0,u.typecheck)(e,"registerDevice",r,m),i=n.endpoint,o=n.request,a=n.apiKey,s=n.logger,f=n.httpClient,v=n.extraHeaders,g=e.getPayload({apiKey:a,endpoint:i,extraHeaders:v,request:o,logger:s}),s.info(this.toString(),"Attempting to register a device with variables: ".concat(JSON.stringify(o.variables,(0,h.Z)()))),t.abrupt("return",f.request(g));case 5:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"getPayload",value:function(t){var n={options:u.Types.object({accessToken:u.Types.instanceStrict(v.Z).optional,apiKey:u.Types.nonEmptyString.optional})};u.typecheck.atLeastOne(e,"getPayload",n,arguments);var i=t.accessToken,o=t.apiKey,a=t.endpoint,s=t.request,c=t.extraHeaders,l=void 0===c?{}:c,p=t.enableADRT,d=void 0===p||p,y=a.href,h=a.method,b=JSON.stringify(s),T=(0,f.Z)((0,r.Z)({Authorization:function(){return o?{replacer:"{apiKey}",value:o}:{replacer:"{accessToken}",value:null==i?void 0:i.token}}},m.GENERATE_ADRT,(function(){return{value:d}})),a.headers,l);return{url:y,method:h,body:b,headers:new g.Z(T)}}},{key:"toString",value:function(){return"SDK.Services.GraphQl.GraphQlClient"}}]),e}()},80761:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({query:o.Types.string,variables:o.Types.object().optional})};(0,o.typecheck)(this,n,arguments);var i=t.query,a=t.variables;this.query=i,this.variables=a||{}}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.GraphQl.GraphQlRequest"}}]),e}()},36047:function(e,t){"use strict";t.Z={api:{event:":event:sdk",error:":error:sdk"},service:{event:":event:service",error:":error:service"},glimpse:"urn:bamtech:dust:bamsdk:event:glimpse",personalization:"urn:bamtech:dust:bamsdk:event:app",qoe:"urn:bamtech:dust:bamsdk:event:qoe"}},9598:function(e,t,n){"use strict";n(41539),n(39714),n(68309);var r=n(67682),i=n(1206),o=n(52662),a=n(77831),s={MockDustLogUtility:void 0};t.Z={internalTestabilityOverride:s,apiMethodDecorator:function(e,t){var n={urnBaseObj:r.Types.nonEmptyObject,apiMethodOptions:r.Types.object({skipDustLogUtility:r.Types.boolean.optional,paramTypes:r.Types.object().optional}).optional};return(0,r.typecheck)("DustDecorators","apiMethodDecorator",n,arguments),function(n,c,u){var l=e[c];if(!l)throw new a.Z("DustDecorator - Could not find urn name based on key ".concat(c));var p=u.value;return r.Check.function(p)&&(u.value=function(){for(var e=this,a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];var y=this,f=y.logger,h=t||{},v=h.paramTypes,g=h.skipDustLogUtility,m=c;v&&(0,r.typecheck)(this,m,v,arguments);var b=this.toString();return o.Z.wrapLogTransaction({urn:l,file:b,logger:f,action:function(t){if(g)return p.call(e,{method:m,logTransaction:t,args:u});var r=n.toString===Object.prototype.toString?n.constructor.name:n.toString();return i.Z.wrap({dustUtilityCtorOptions:{logger:f,source:r,urn:l,skipLogTransaction:!0},action:function(n){return p.call(e,{method:m,logTransaction:t,dustLogUtility:n,args:u})},DustLogUtilityCtorOverride:s.MockDustLogUtility})}})}),u}}}},1206:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=(n(68309),n(41539),n(88674),n(17727),n(19601),n(92222),n(67682)),u=n(87891),l=n(52662),p=n(33044),d=n(37736),y=n(84983),f=n(36047),h={url:c.Types.string.optional,method:c.Types.nonEmptyString},v=n(83668),g=function(e){return!(!e||!0!==e.skipLogTransaction&&!c.Check.instanceStrict(e.logTransaction,l.Z))},m=function(){function e(t){(0,i.Z)(this,e);var n={options:c.Types.object({logger:c.Types.instanceStrict(u.Z),source:c.Types.nonEmptyString,urn:c.Types.nonEmptyString,data:c.Types.object().optional,payload:c.Types.object(h).optional,category:c.Types.nonEmptyString.optional,endpointKey:c.Types.nonEmptyString.optional,dataVersion:c.Types.nonEmptyString.optional})};(0,c.typecheck)(this,n,arguments);var r={options:c.Types.custom(g," { logTransaction: LogTransaction } instance or { skipLogTransaction: true }")};(0,c.typecheck)(this,r,arguments);var o=t.logger,a=t.source,s=t.urn,l=t.data,d=void 0===l?{}:l,y=t.payload,f=t.category,v=t.logTransaction,m=t.endpointKey,b=t.dataVersion,T=null==y?void 0:y.method;this.logger=o,this.source=a,this.urn=s,this.data=d,this.payload=y,this.category=f,this.logTransaction=v,this.endpointKey=m,this.timestamp=new Date,this.name=this.urn,this.level=p.Z.info,this.isPublic=!0,this.error=null,this.dataVersion=b,this.server={},T&&(this.server.method=T),this.parsePayload()}var t;return(0,o.Z)(e,[{key:"log",value:function(){try{var e=this.isPublic,t=this.logger,n=this.source;if(!t.dustEnabled)return Promise.resolve();var r=this.generateLogEvent();return t.log(n,r,e).catch((function(e){return t.warn(e,r)})).finally((function(){return Promise.resolve()}))}catch(e){return Promise.resolve()}}},{key:"captureError",value:function(e){var t,n,r;this.exception=e;var i=null!=e?e:{};return this.error={case:null===(t=i.data)||void 0===t?void 0:t.name,reasons:i.reasons,cause:{message:null!==(n=i.message)&&void 0!==n?n:"",transactionId:null!==(r=i.transactionId)&&void 0!==r?r:""}},e}},{key:"logData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.data=Object.assign(this.data,e)}},{key:"parseResponse",value:function(e){if(c.Check.object(e)){var t=this.timestamp,n=e.response.status,r=e.transactionId;this.server.requestId=r,this.server.statusCode=n,this.server.roundTripTime=+Date.now()-+t}}},{key:"setServiceInteraction",value:function(e){var t=this.logTransaction,n=this.timestamp,r=this.server,i=this.endpointKey,o=e.response,a=e.exception,s=o.status,c=o.headers,u=t,l={request:{host:r.host,path:r.path,method:r.method},response:{requestId:c.get(v.REQUEST_ID),region:c.get(v.SDK_REGION),cloudFrontPop:c.get(v.AMZ_CF_POP),cloudFrontId:c.get(v.AMZ_CF_ID),statusCode:s,roundTripTime:+Date.now()-+n},timing:{requestStart:+n-+u.startTime,requestEnd:+Date.now()-+u.startTime},configuration:{endpoint:i},error:null==a?void 0:a.reasons};u.appendRequest(l)}},{key:"parsePayload",value:function(){var e,t=(0,d.Z)(null===(e=this.payload)||void 0===e?void 0:e.url),n=t.host,r=t.path;this.server.host=n,this.server.path=r}},{key:"generateLogEvent",value:function(){var e=this.data,t=this.error,n=this.isPublic,r=this.level,i=this.name,o=this.payload,a=this.server,s=this.timestamp,u=this.dataVersion,l=c.Check.nonEmptyObject(o),p=c.Check.assigned(t),d={category:this.generateCategory({isServiceEvent:l,hasErrors:p}),timestamp:s.toISOString(),dataVersion:u},y={extraData:d,isPublic:n,name:i,level:r};return l&&(d.server=a),c.Check.nonEmptyObject(e)&&(d.data=e),p&&(d.error=t),y}},{key:"generateCategory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.category;if(c.Check.not.assigned(t)){var n=e.isServiceEvent,r=e.hasErrors,i=n?"service":"api",o=r?"error":"event";return"".concat(y.Z.bamSdk).concat(f.Z[i][o])}return t}},{key:"toString",value:function(){return"SDK.Services.Internal.Dust.DustLogUtility"}}],[{key:"wrap",value:(t=(0,r.Z)(s().mark((function t(n){var r,i,o,a,u,l,p=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={options:c.Types.object({dustUtilityCtorOptions:c.Types.nonEmptyObject,action:c.Types.function,DustLogUtilityCtorOverride:c.Types.function.optional})},(0,c.typecheck)(this,"wrap",r,p),i=n.dustUtilityCtorOptions,o=n.action,a=n.DustLogUtilityCtorOverride||e,i.logger.dustEnabled){t.next=5;break}return t.abrupt("return",o());case 5:return u=new a(i),t.prev=6,t.next=9,o(u);case 9:return t.abrupt("return",t.sent);case 12:throw t.prev=12,t.t0=t.catch(6),l=t.t0,u.captureError(l),l;case 17:return t.prev=17,u.log(),t.finish(17);case 20:case"end":return t.stop()}}),t,this,[[6,12,17,20]])}))),function(e){return t.apply(this,arguments)})}]),e}()},84983:function(e,t){"use strict";t.Z={account:{accountApi:{authorize:"urn:bamtech:dust:bamsdk:api:account:authorize",createAccount:"urn:bamtech:dust:bamsdk:api:account:createAccount",getAccount:"urn:bamtech:dust:bamsdk:api:account:getAccount",linkSubscriptionsFromDevice:"urn:bamtech:dust:bamsdk:api:account:linkSubscriptionsFromDevice",updateAccount:"urn:bamtech:dust:bamsdk:api:account:updateAccount",updateProtectProfileCreationWithActionGrant:"urn:bamtech:dust:bamsdk:api:account:updateProtectProfileCreationWithActionGrant"}},bamSdk:"urn:bamtech:dust:bamsdk",commerce:{commerceApi:{associateAuthValuesWithPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:associateAuthValuesWithPaymentMethod",createCardPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:createPaymentMethod",getDdcJwtToken:"urn:bamtech:dust:bamsdk:api:commerce:getDdcJwtToken",getDefaultPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:getDefaultPaymentMethod",getLocationCandidates:"urn:bamtech:dust:bamsdk:api:commerce:getLocationCandidate",getPaymentCard:"urn:bamtech:dust:bamsdk:api:commerce:getPaymentCard",getPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:getPaymentMethod",listAllPaymentMethods:"urn:bamtech:dust:bamsdk:api:commerce:listAllPaymentMethods",planSwitch:"urn:bamtech:dust:bamsdk:api:commerce:planSwitch",priceOrder:"urn:bamtech:dust:bamsdk:api:commerce:priceOrder",redeem:"urn:bamtech:dust:bamsdk:api:commerce:redeem",restartSubscription:"urn:bamtech:dust:bamsdk:api:commerce:restartSubscription",resumeAccount:"urn:bamtech:dust:bamsdk:api:commerce:resumeAccount",shareDefaultPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:shareDefaultPaymentMethod",submitOrderWithCardPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:submitOrderWithPaymentMethod",submitOrderWithPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:submitOrderWithPaymentMethod",updateOrder:"urn:bamtech:dust:bamsdk:api:commerce:updateOrder",updatePaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:updatePaymentMethod",validateOrder:"urn:bamtech:dust:bamsdk:api:commerce:checkOrderStatus"},comcastApi:{createComcastPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:comcast:createComcastPaymentMethod",getComcastConsent:"urn:bamtech:dust:bamsdk:api:commerce:comcast:getComcastConsent",submitPayment:"urn:bamtech:dust:bamsdk:api:commerce:comcast:submitPayment"},iDealApi:{createIDealPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:iDeal:createIDealPaymentMethod",getIDealPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:iDeal:getIDealPaymentMethod",submitPayment:"urn:bamtech:dust:bamsdk:api:commerce:iDeal:submitPayment"},klarnaApi:{submitPayment:"urn:bamtech:dust:bamsdk:api:commerce:klarna:submitPayment"},mercadoApi:{submitPayment:"urn:bamtech:dust:bamsdk:api:commerce:mercado:submitPayment"},paymentCardApi:{createCardPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:paymentCard:createPaymentMethod",submitOrderWithCardPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:paymentCard:submitOrderWithPaymentMethod"},payPalApi:{createBraintreePaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:paypal:createBraintreePaymentMethod",createBraintreeToken:"urn:bamtech:dust:bamsdk:api:commerce:paypal:createBraintreeToken",getBraintreePaymentMethodId:"urn:bamtech:dust:bamsdk:api:commerce:paypal:getBraintreePaymentMethodId",updateBraintreePaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:paypal:updateBraintreePaymentMethod"}},configuration:{configurationManager:{getConfiguration:"urn:bamtech:dust:bamsdk:service:configuration:loadRemote"}},content:{contentApi:{query:"urn:bamtech:dust:bamsdk:api:content:query",search:"urn:bamtech:dust:bamsdk:api:content:search"}},customerService:{customerServiceApi:{createSupportCode:"urn:bamtech:dust:bamsdk:api:customerService:createSupportCode"}},drm:{fairPlayDrmProvider:{getFairPlayCertificate:"urn:bamtech:dust:bamsdk:api:fairPlayDrmProvider:getFairPlayCertificate",getFairPlayLicense:"urn:bamtech:dust:bamsdk:api:fairPlayDrmProvider:getFairPlayLicense"},nagraDrmProvider:{getNagraCertificate:"urn:bamtech:dust:bamsdk:api:nagraDrmProvider:getNagraCertificate"},playReadyDrmProvider:{getPlayReadyLicense:"urn:bamtech:dust:bamsdk:api:playReadyDrmProvider:getPlayReadyLicense"},silkDrmProvider:{getSilkKey:"urn:bamtech:dust:bamsdk:api:silkDrmProvider:getSilkKey"},widevineDrmProvider:{getWidevineCertificate:"urn:bamtech:dust:bamsdk:api:widevineDrmProvider:getWidevineCertificate",getWidevineLicense:"urn:bamtech:dust:bamsdk:api:widevineDrmProvider:getWidevineLicense"}},entitlement:{entitlementApi:{verifyMediaRights:"urn:bamtech:dust:bamsdk:api:entitlement:verifyMediaRights"}},explore:{exploreApi:{getDeeplink:"urn:bamtech:dust:bamsdk:api:explore:getDeeplink",getDownloadMetadata:"urn:bamtech:dust:bamsdk:api:explore:getDownloadMetadata",getPage:"urn:bamtech:dust:bamsdk:api:explore:getPage",getSet:"urn:bamtech:dust:bamsdk:api:explore:getSet",getUserState:"urn:bamtech:dust:bamsdk:api:explore:getUserState",query:"urn:bamtech:dust:bamsdk:api:explore:query",getPlayerExperience:"urn:bamtech:dust:bamsdk:api:explore:getPlayerExperience",addToWatchlist:"urn:bamtech:dust:bamsdk:api:explore:addToWatchlist",removeFromWatchlist:"urn:bamtech:dust:bamsdk:api:explore:removeFromWatchlist",getSeason:"urn:bamtech:dust:bamsdk:api:explore:getSeason",getUpNext:"urn:bamtech:dust:bamsdk:api:explore:getUpNext",search:"urn:bamtech:dust:bamsdk:api:explore:search",getPartnerContinueWatching:"urn:bamtech:dust:bamsdk:api:explore:getPartnerContinueWatching",watchlist:"urn:dss:event:cs:user-content-actions:preference:v1:watchlist"}},flex:{flexApi:{getScreen:"urn:bamtech:dust:bamsdk:api:flex:getScreen",execute:"urn:bamtech:dust:bamsdk:api:flex:execute"}},invoice:{invoiceApi:{getInvoice:"urn:bamtech:dust:bamsdk:api:invoice:getInvoice",getPaginatedInvoices:"urn:bamtech:dust:bamsdk:api:invoice:getPaginatedInvoices"}},media:{encryptionKeyProvider:{getEncryptionKey:"urn:bamtech:dust:bamsdk:api:media:encryptionKeyProvider:getEncryptionKey"},mediaApi:{createPlaybackSession:"urn:bamtech:dust:bamsdk:api:media:createPlaybackSession",fetch:"urn:bamtech:dust:bamsdk:api:media:fetch",getSpriteSheetThumbnailSets:"urn:bamtech:dust:bamsdk:api:media:getSpriteSheetThumbnailSets",getSpriteSheetThumbnailSet:"urn:bamtech:dust:bamsdk:api:media:getSpriteSheetThumbnailSet",getSpriteSheetThumbnail:"urn:bamtech:dust:bamsdk:api:media:getSpriteSheetThumbnail",getBifThumbnailSets:"urn:bamtech:dust:bamsdk:api:media:getBifThumbnailSets",getBifThumbnailSet:"urn:bamtech:dust:bamsdk:api:media:getBifThumbnailSet",updateAdEngineCookies:"urn:bamtech:dust:bamsdk:service:adEngine:setToken",checkPlaybackRights:"urn:bamtech:dust:bamsdk:api:media:checkPlaybackRights"},playbackSession:{onAccessChanged:"urn:bamtech:dust:bamsdk:api:media:playbackSession:onAccessChanged",prepare:"urn:bamtech:dust:bamsdk:api:media:playbackSession:prepare",release:"urn:bamtech:dust:bamsdk:api:media:playbackSession:release"}},messaging:{messagingApi:{registerChannel:"urn:bamtech:dust:bamsdk:api:messaging:registerChannel"}},orchestration:{orchestrationApi:{getOperationUrn:function(e){return"urn:bamtech:dust:bamsdk:api:orchestration:".concat(e)},query:"urn:bamtech:dust:bamsdk:api:orchestration:query"}},paywall:{paywallApi:{getPaywall:"urn:bamtech:dust:bamsdk:api:paywall:getPaywall"}},purchase:{purchaseApi:{createExternalRedemptionToken:"urn:bamtech:dust:bamsdk:api:purchase:createExternalRedemptionToken",generateActivationToken:"urn:bamtech:dust:bamsdk:api:purchase:generateActivationToken",getEligibilityStatus:"urn:bamtech:dust:bamsdk:api:purchase:getEligibilityStatus",redeemBundle:"urn:bamtech:dust:bamsdk:api:purchase:redeemBundle",redeemToken:"urn:bamtech:dust:bamsdk:api:purchase:redeemToken"}},qualityOfService:{bitrateChanged:"urn:dss:event:fed:media:playback:bitrate:changed",custom:"urn:dss:event:client:playback:custom:v1",drmCertificateFetched:"urn:dss:event:fed:media:drm:certificate:fetched",drmKeyFetched:"urn:dss:event:fed:media:drm:key:fetched",error:"urn:dss:event:qoe:client:error:v1",interstitial:"urn:dss:event:client:playback:interstitial:v1",mediaPayloadFetched:"urn:dss:event:fed:media:payload:fetched",multivariantPlaylistFetched:"urn:dss:event:fed:media:playlist:master:fetched",playback:"urn:dss:event:client:playback:event:v1",playbackAd:"urn:dss:event:client:playback:ad:v1",playbackHeartbeat:"urn:dss:event:client:playback:heartbeat:v1",playbackStartup:"urn:dss:event:client:playback:startup:v1",playbackSnapshot:"urn:dss:event:client:playback:snapshot:v1"},sdkSession:{assumeIdentity:"urn:bamtech:dust:bamsdk:api:session:assumeIdentity",authorize:"urn:bamtech:dust:bamsdk:api:session:authorize",createCustomerSupportCode:"urn:bamtech:dust:bamsdk:api:session:createCustomerSupportCode",createSdkSession:"urn:bamtech:dust:bamsdk:api:session:create",getAccessState:"urn:bamtech:dust:bamsdk:api:session:getAccessState",getExperimentAssignment:"urn:bamtech:dust:bamsdk:api:session:getExperimentAssignment",getInitializationState:"urn:bamtech:dust:bamsdk:api:session:getInitializationState",getSessionInfo:"urn:bamtech:dust:bamsdk:api:session:getSessionInfo",getSessionToken:"urn:bamtech:dust:bamsdk:api:session:getSessionToken",initialize:"urn:bamtech:dust:bamsdk:api:session:initialize",initializeWithUserToken:"urn:bamtech:dust:bamsdk:api:session:initializeWithUserToken",isAuthorized:"urn:bamtech:dust:bamsdk:api:session:isAuthorized",reauthorize:"urn:bamtech:dust:bamsdk:api:session:reauthorize",reset:"urn:bamtech:dust:bamsdk:api:session:reset",restoreAccessState:"urn:bamtech:dust:bamsdk:api:session:restoreAccessState"},services:{account:{accountClient:{createAccount:"urn:bamtech:dust:bamsdk:service:account:createAccount",createAccountGrant:"urn:bamtech:dust:bamsdk:service:account:createAccountGrant",getCurrentAccount:"urn:bamtech:dust:bamsdk:service:account:getCurrentAccount",onboardProfileToStar:"urn:bamtech:dust:bamsdk:service:account:onboardProfileToStar",updateAttributes:"urn:bamtech:dust:bamsdk:service:account:updateAttributes",updateProtectProfileCreationWithActionGrant:"urn:bamtech:dust:bamsdk:service:account:updateProtectProfileCreationWithActionGrant"}},commerce:{commerceClient:{associateAuthValuesWithPaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:associateAuthValuesWithPaymentMethod",createBraintreePaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:createBraintreePaymentMethod",createBraintreeToken:"urn:bamtech:dust:bamsdk:service:commerce:createBraintreeToken",createCardPaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:createPaymentMethod",createComcastPaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:createComcastPaymentMethod",getBraintreePaymentMethodId:"urn:bamtech:dust:bamsdk:service:commerce:getBraintreePaymentMethodId",getComcastConsent:"urn:bamtech:dust:bamsdk:service:commerce:getComcastConsent",getDdcJwtToken:"urn:bamtech:dust:bamsdk:service:commerce:getDdcJwtToken",getDefaultPaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:getDefaultPaymentMethod",getOrderStatus:"urn:bamtech:dust:bamsdk:service:commerce:getOrderStatus",getPaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:getPaymentMethod",listAllPaymentMethods:"urn:bamtech:dust:bamsdk:service:commerce:listAllPaymentMethods",lookupByZipCode:"urn:bamtech:dust:bamsdk:service:commerce:lookupByZipCode",planSwitch:"urn:bamtech:dust:bamsdk:service:commerce:planSwitch",priceOrder:"urn:bamtech:dust:bamsdk:service:commerce:priceOrder",redeem:"urn:bamtech:dust:bamsdk:service:commerce:redeem",restartSubscription:"urn:bamtech:dust:bamsdk:service:commerce:restartSubscription",resumeAccount:"urn:bamtech:dust:bamsdk:service:commerce:resumeAccount",shareDefaultPaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:shareDefaultPaymentMethod",submitComcastPayment:"urn:bamtech:dust:bamsdk:service:commerce:submitComcastPayment",submitIDealPayment:"urn:bamtech:dust:bamsdk:service:commerce:submitIDealPayment",submitKlarnaPayment:"urn:bamtech:dust:bamsdk:service:commerce:submitKlarnaPayment",submitMercadoPayment:"urn:bamtech:dust:bamsdk:service:commerce:submitMercadoPayment",submitOrderWithPaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:submitOrderWithPaymentMethod",updateBraintreePaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:updateBraintreePaymentMethod",updateOrder:"urn:bamtech:dust:bamsdk:service:commerce:updateOrder",updatePaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:updatePaymentMethod"}},configuration:{configurationClient:{getConfiguration:"urn:bamtech:dust:bamsdk:service:configuration:getConfiguration"}},content:{contentClient:{getSearchSuggestions:"urn:bamtech:dust:bamsdk:service:content:getSearchSuggestions",query:"urn:bamtech:dust:bamsdk:service:content:query"}},customerService:{customerServiceClient:{createSupportCode:"urn:bamtech:dust:bamsdk:service:customerService:createSupportCode"}},drm:{drmClient:{getFairPlayCertificate:"urn:bamtech:dust:bamsdk:service:drm:fairPlayCertificate",getFairPlayLicense:"urn:bamtech:dust:bamsdk:service:drm:fairPlayLicense",getNagraCertificate:"urn:bamtech:dust:bamsdk:service:drm:nagraCertificate",getNagraLicense:"urn:bamtech:dust:bamsdk:service:drm:nagraLicense",getPlayReadyLicense:"urn:bamtech:dust:bamsdk:service:drm:playReadyLicense",getSilkKey:"urn:bamtech:dust:bamsdk:service:drm:silkKey",getWidevineCertificate:"urn:bamtech:dust:bamsdk:service:drm:widevineCertificate",getWidevineLicense:"urn:bamtech:dust:bamsdk:service:drm:widevineLicense"}},eligibility:{eligibilityClient:{getEligibilityStatus:"urn:bamtech:dust:bamsdk:service:eligibility:getEligibilityStatus"}},entitlement:{entitlementClient:{verifyMediaRights:"urn:bamtech:dust:bamsdk:service:entitlement:verifyMediaRights"}},explore:{exploreClient:{getDeeplink:"urn:bamtech:dust:bamsdk:service:explore:getDeeplink",getDownloadMetadata:"urn:bamtech:dust:bamsdk:service:explore:getDownloadMetadata",getPage:"urn:bamtech:dust:bamsdk:service:explore:getPage",getSet:"urn:bamtech:dust:bamsdk:service:explore:getSet",getUserState:"urn:bamtech:dust:bamsdk:service:explore:getUserState",query:"urn:bamtech:dust:bamsdk:service:explore:query",getPlayerExperience:"urn:bamtech:dust:bamsdk:service:explore:getPlayerExperience",sendUserAction:"urn:bamtech:dust:bamsdk:service:explore:sendUserAction",getSeason:"urn:bamtech:dust:bamsdk:service:explore:getSeason",getUpNext:"urn:bamtech:dust:bamsdk:service:explore:getUpNext",search:"urn:bamtech:dust:bamsdk:service:explore:search",getPartnerContinueWatching:"urn:bamtech:dust:bamsdk:service:explore:getPartnerContinueWatching"}},externalActivation:{externalActivationClient:{createExternalRedemptionToken:"urn:bamtech:dust:bamsdk:service:externalActivation:createExternalRedemptionToken",generateActivationToken:"urn:bamtech:dust:bamsdk:service:externalActivation:generateActivationToken",redeemBundle:"urn:bamtech:dust:bamsdk:service:externalActivation:redeemBundle",redeemToken:"urn:bamtech:dust:bamsdk:service:externalActivation:redeemToken"}},flex:{flexClient:{getScreen:"urn:bamtech:dust:bamsdk:service:flex:getScreen",execute:"urn:bamtech:dust:bamsdk:service:flex:execute"}},internal:{telemetry:{telemetryClient:{postEvents:"urn:bamtech:dust:bamsdk:service:telemetry:postEvent"},eventBuffer:{processBatch:"urn:bamtech:dust:bamsdk:service:telemetry:processBatch"}}},invoice:{invoiceClient:{getInvoice:"urn:bamtech:dust:bamsdk:service:invoice:getInvoice",getPaginatedInvoices:"urn:bamtech:dust:bamsdk:service:invoice:getPaginatedInvoices"}},media:{adEngine:{adEngineClient:{getCookies:"urn:bamtech:dust:bamsdk:service:adEngine:setTokenRedirect",updateCookies:"urn:bamtech:dust:bamsdk:service:adEngine:setToken"}},mediaClient:{checkPlaybackRights:"urn:bamtech:dust:bamsdk:service:media:checkProgramBoundaryPlaybackRights",createAuthCookie:"urn:bamtech:dust:bamsdk:service:media:createAuthCookie",downloadBifThumbnail:"urn:bamtech:dust:bamsdk:service:media:bifThumbnail",getBifThumbnails:"urn:bamtech:dust:bamsdk:service:media:bifThumbnails",getSpriteSheetThumbnail:"urn:bamtech:dust:bamsdk:service:media:spriteSheetThumbnail",getSpriteSheetThumbnails:"urn:bamtech:dust:bamsdk:service:media:spriteSheetThumbnails",mediaPayload:"urn:bamtech:dust:bamsdk:service:media:postForMediaPayload"}},orchestration:{orchestrationClient:{getOperationUrn:function(e){return"urn:bamtech:dust:bamsdk:service:orchestration:".concat(e)},exchangeDeviceGrantForAccessToken:"urn:bamtech:dust:bamsdk:service:orchestration:exchangeDeviceGrantForAccessToken",query:"urn:bamtech:dust:bamsdk:service:orchestration:query",refreshToken:"urn:bamtech:dust:bamsdk:service:orchestration:refreshToken",registerDevice:"urn:bamtech:dust:bamsdk:service:orchestration:registerDevice"}},paywall:{paywallClient:{getPaywall:"urn:bamtech:dust:bamsdk:service:paywall:paywall"}},subscription:{subscriptionClient:{getAccountSubscription:"urn:bamtech:dust:bamsdk:service:subscription:getAccountSubscription",getSubscriberInfo:"urn:bamtech:dust:bamsdk:service:subscription:getSubscriberInfo",getSubscriptions:"urn:bamtech:dust:bamsdk:service:subscription:getSubscriptions",linkSubscriptionsFromDevice:"urn:bamtech:dust:bamsdk:service:subscription:linkSubscriptionsFromDevice"}},token:{tokenClient:{exchange:"urn:bamtech:dust:bamsdk:service:token:exchange"}}},socket:{socketApi:{sendMessage:"urn:bamtech:dust:bamsdk:api:socket:sendMessage",start:"urn:bamtech:dust:bamsdk:api:socket:start",stop:"urn:bamtech:dust:bamsdk:api:socket:stop"},socketManager:{ageVerificationRedeemCompleted:"urn:dss:event:age-verification:redeem:completed",ageVerificationRedeemErrored:"urn:dss:event:age-verification:redeem:errored",ageVerificationRequestCompleted:"urn:dss:event:age-verification:request:completed",ageVerificationRequestErrored:"urn:dss:event:age-verification:request:errored",authenticated:"urn:dss:transport:edge:event:authenticated",authentication:"urn:dss:event:edge:sdk:authentication",edgeEventReceived:"urn:dss:transport:edge:event:received",event:"urn:dss:event:sdk:api:event",exposure:"urn:dss:event:weaponx:exposure",flowControl:"urn:dss:event:edge:sdk:flowControlRequest",flowControlError:"urn:dss:transport:edge:event:flowControlError",offDeviceTokenRefresh:"urn:dss:event:offDeviceLogin:refresh:v2",ping:"urn:dss:transport:edge:event:ping",pong:"urn:dss:transport:edge:event:pong",received:"urn:dss:transport:edge:event:received",reconnect:"urn:dss:event:edge:sdk:reconnect",refresh:"urn:dss:event:edge:sdk:token:refresh",sessionAuthentication:"urn:dss:event:edge:sdk:sessionAuthentication",sourcePrefix:"urn:dss:source:sdk:javascript",unauthenticated:"urn:dss:transport:edge:event:unauthenticated"}},streamSample:"urn:dss:telemetry-service:event:stream-sample",subscription:{subscriptionApi:{getAccountSubscription:"urn:bamtech:dust:bamsdk:api:subscription:getAccountSubscription",getSubscriberInfo:"urn:bamtech:dust:bamsdk:api:subscription:getSubscriberInfo",getSubscriptions:"urn:bamtech:dust:bamsdk:api:subscription:getSubscriptions"}},userActivity:{personalization:{contentRecommendationAward:"urn:bamtech:dust:bamsdk:app:content-recommendation-reward:v1"},glimpse:{appLaunched:"urn:dss:glimpse:event:app-lifecycle:app-launched",backgroundPlaybackExited:"urn:dss:glimpse:track-action:background-playback-exited",backgroundPlaybackStarted:"urn:dss:glimpse:track-action:background-playback-started",contentSelected:"urn:dss:glimpse:event:track-action:content-selected",playbackExited:"urn:dss:glimpse:event:track-action:playback-exited",playbackSelected:"urn:dss:glimpse:event:track-action:playback-selected",purchaseCompleted:"urn:dss:glimpse:event:track-action:purchase-completed",purchaseCompletedv2:"urn:dss:event:fed:purchase:completed-v2",searchViewLoaded:"urn:dss:glimpse:event:track-action:search-view-loaded",viewLoaded:"urn:dss:glimpse:event:track-state:view-loaded"}}}},97682:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),u=n(67682),l=n(19546),p=n(42658),d={description:u.Types.string.optional,metadataMatcher:u.Types.object().optional,owner:u.Types.string.optional,status:u.Types.string.optional,url:u.Types.string.optional,urnCategoryMatcher:u.Types.array.of.string.optional},y={countErrors:u.Types.number.optional,countErrorsRelative:u.Types.number.optional,countSkipped:u.Types.number.optional,countSuccess:u.Types.number.optional,skipped:u.Types.array.of.object().optional,description:u.Types.string.optional,failures:u.Types.array.of.object().optional,httpMessage:u.Types.string.optional,httpStatus:u.Types.number.optional,name:u.Types.string.optional,result:u.Types.string.optional,sha:u.Types.string.optional,source:u.Types.string.optional,successes:u.Types.array.of.object().optional,validationManifest:u.Types.object(d).optional,validationMessage:u.Types.array.of.string.optional},f={countErrors:u.Types.number.optional,countErrorsRelative:u.Types.number.optional,countSkipped:u.Types.number.optional,countSuccess:u.Types.number.optional,skipped:u.Types.array.of.object(y).optional,description:u.Types.string.optional,failures:u.Types.array.of.object(y).optional,httpMessage:u.Types.string.optional,httpStatus:u.Types.number.optional,name:u.Types.string.optional,result:u.Types.string.optional,sha:u.Types.string.optional,source:u.Types.string.optional,successes:u.Types.array.of.object(y).optional,validationManifest:u.Types.object(d).optional,validationMessage:u.Types.array.of.string.optional};function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var v=function(e){(0,a.Z)(n,e);var t=h(n);function n(e){var i;(0,r.Z)(this,n),i=t.call(this,e);var a={options:u.Types.object({results:u.Types.array.of.object(f),playbackActivity:u.Types.in(l.PlaybackActivity).optional,startupActivity:u.Types.in(l.StartupActivity).optional,event:u.Types.nonEmptyString.optional,replyAfter:u.Types.skip,requestId:u.Types.skip})};u.typecheck.warn((0,o.Z)(i),a,arguments);var s=e.results,c=e.playbackActivity,p=e.startupActivity,d=e.event;return i.results=s,i.playbackActivity=c,i.startupActivity=p,i.event=d,i}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.HoraValidatedTelemetryResponse"}}]),n}(p.Z)},23404:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({event:o.Types.nonEmptyString,timestamp:o.Types.number,playbackSessionId:o.Types.nonEmptyString,playhead:o.Types.number.optional,bitrate:o.Types.number.optional,interactionId:o.Types.nonEmptyString.optional,groupId:o.Types.nonEmptyString.optional})};(0,o.typecheck)(this,n,arguments);var i=t.event,a=t.timestamp,s=t.playbackSessionId,c=t.playhead,u=t.bitrate,l=t.interactionId,p=void 0===l?null:l,d=t.groupId;this.event=i,this.timestamp=a,this.play_head=c,this.playback_session_id=s,this.bitrate=u,this.interaction_id=p,this.group_id=d}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.StreamSampleClientPayload"}}]),e}()},66796:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),u=n(67682),l=n(23404);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var d=function(e){(0,a.Z)(n,e);var t=p(n);function n(e){var i;(0,r.Z)(this,n),i=t.call(this,e);var a={options:u.Types.object({server:u.Types.object(),client:u.Types.instanceStrict(l.Z)})};return(0,u.typecheck)((0,o.Z)(i),a,arguments),i}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.StreamSamplePayload"}}]),n}(n(31759).Z)},47940:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}}),n(12419);var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(97326),c=n(2291),u=n(60136),l=n(82963),p=n(61120),d=n(87757),y=n.n(d),f=(n(41539),n(39714),n(9653),n(67682)),h=n(7694),v=n(24965),g=n(32394),m=n(66311),b=n(31759),T=n(42658),k=n(97682),S=n(1206),P=n(84983),E=n(52662),Z=n(70928),w=n(69867),D=n(40064),C=n(77309),A={source:f.Types.nonEmptyString,time:f.Types.nonEmptyString,id:f.Types.nonEmptyString,datacontenttype:f.Types.nonEmptyString,schemaurl:f.Types.nonEmptyString,type:f.Types.nonEmptyString,data:f.Types.object().optional,subject:f.Types.nonEmptyString.optional},R=(f.Types.instanceStrict(C.Z),f.Types.nonEmptyString.optional,n(83668));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var O=P.Z.services.internal.telemetry.telemetryClient,I=function(e){(0,u.Z)(d,e);var t,n,l=x(d);function d(e){var t;(0,o.Z)(this,d),t=l.call(this,e);var n=f.Types.object({config:f.Types.instanceStrict(m.Z)});return(0,f.typecheck)((0,s.Z)(t),n,arguments),t.logger.log(t.toString(),"Created."),t}return(0,a.Z)(d,[{key:"postEvents",value:function(e,t){var n=this,r={options:f.Types.object({accessToken:f.Types.instanceStrict(Z.Z),telemetryPayloads:f.Types.array.of.instanceStrict(b.Z),useProxy:f.Types.boolean}),logTransaction:f.Types.instanceStrict(E.Z)};(0,f.typecheck)(this,"postEvents",r,arguments);var i=e.accessToken,o=e.telemetryPayloads,a=e.useProxy,s=this.logger,u=g.Z.postEvent,l=this.getPayload({accessToken:i,endpointKey:u,body:o,data:{useProxy:a}}),y=new S.Z({logger:s,source:this.toString(),urn:O.postEvents,payload:l,endpointKey:u,logTransaction:t});return s.info(this.toString(),"Posting telemetry events: Count: ".concat(o.length)),(0,c.Z)((0,p.Z)(d.prototype),"request",this).call(this,{payload:l,dustLogUtility:y,resultMapper:function(e){return a?n.createHoraValidatedTelemetryResponse(e,o):n.createTelemetryResponse(e)}})}},{key:"postDustEvents",value:function(e){var t=this,n={options:f.Types.object({accessToken:f.Types.instanceStrict(Z.Z),telemetryPayloads:f.Types.array.of.instanceStrict(b.Z),useProxy:f.Types.boolean})};(0,f.typecheck)(this,"postDustEvents",n,arguments);var r=e.accessToken,i=e.telemetryPayloads,o=e.useProxy,a=this.logger,s=this.getPayload({accessToken:r,endpointKey:g.Z.dustEvent,body:i,data:{useProxy:o}});return a.info(this.toString(),"Posting dust events: Count: ".concat(i.length)),(0,c.Z)((0,p.Z)(d.prototype),"request",this).call(this,{payload:s,resultMapper:function(e){return o?t.createHoraValidatedTelemetryResponse(e,i):t.createTelemetryResponse(e)}})}},{key:"postDustEnvelopes",value:function(e){var t=this,n={options:f.Types.object({accessToken:f.Types.instanceStrict(Z.Z),messageEnvelopes:f.Types.array.of.object(A),useProxy:f.Types.boolean})};(0,f.typecheck)(this,"postDustEnvelopes",n,arguments);var r,o=e.accessToken,a=e.messageEnvelopes,s=e.useProxy,u=this.logger,l=this.getPayload({accessToken:o,endpointKey:g.Z.envelopeEvent,body:a,data:{useProxy:s}});return u.info(this.toString(),"Posting dust envelopes: Count: ".concat(a.length)),(0,c.Z)((0,p.Z)(d.prototype),"request",this).call(this,{payload:l,skipHandleServiceResponse:!0,resultMapper:(r=(0,i.Z)(y().mark((function e(n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.mapMessageEnvelopeResult(n));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})})}},{key:"horaEventValidation",value:function(e,t){var n=this,r={accessToken:f.Types.instanceStrict(Z.Z),telemetryPayloads:f.Types.array.of.instanceStrict(b.Z)};(0,f.typecheck)(this,"horaEventValidation",r,arguments);var o,a=this.logger,s=this.getPayload({accessToken:e,endpointKey:g.Z.validateQoeEvent,body:t});return a.info(this.toString(),"Validating QoE events: Count: ".concat(t.length)),(0,c.Z)((0,p.Z)(d.prototype),"request",this).call(this,{payload:s,skipHandleServiceResponse:!0,resultMapper:(o=(0,i.Z)(y().mark((function e(r){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.mapResult(r,t));case 1:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})})}},{key:"createHoraValidatedTelemetryResponse",value:function(e,t){var n,r=e.headers,i=e.data,o=this.getReplyAfter(r),a=this.getRequestId(r),s=null==t||null===(n=t[0])||void 0===n?void 0:n.client,c=(s||{}).event,u=(null==s?void 0:s.data)||{},l=u.playbackActivity,p=u.startupActivity;return new k.Z({replyAfter:o,requestId:a,playbackActivity:l,startupActivity:p,event:c,results:[i]})}},{key:"createTelemetryResponse",value:function(e){var t=e.headers,n=this.getReplyAfter(t),r=this.getRequestId(t);return new T.Z({replyAfter:n,requestId:r})}},{key:"getPayload",value:function(e){var t,n=e.accessToken,i=e.endpointKey,o=e.body,a=e.data,s=(void 0===a?{}:a).useProxy,c=this.config.endpoints[i],u=c.href,l=c.headers,p=c.optionalHeaders,d=c.method,y=JSON.stringify(o),f=(0,v.Z)((t={Authorization:function(){return{replacer:"{accessToken}",value:n.token}}},(0,r.Z)(t,R.EVENT_TRANSPORT_TIMESTAMP,(function(){return{replacer:"{time}",value:new Date}})),(0,r.Z)(t,R.HORA_PROXY,(function(){return{value:s}})),t),l,p);return{url:u,method:d,body:y,headers:new w.Z(f)}}},{key:"getRequestId",value:function(e){var t;return null!==(t=e.get(R.REQUEST_ID))&&void 0!==t?t:void 0}},{key:"getReplyAfter",value:function(e){return Number(e.get(R.REPLY_AFTER))}},{key:"mapResult",value:(n=(0,i.Z)(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.status<=400&&"application/json"===t.headers.get("content-type")){e.next=4;break}return e.next=4,(0,h.Z)({response:t});case 4:return e.abrupt("return",this.createHoraValidatedTelemetryResponse(t,n));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"mapMessageEnvelopeResult",value:(t=(0,i.Z)(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.status<=400&&"application/json"===t.headers.get("content-type")){e.next=4;break}return e.next=4,(0,h.Z)({response:t});case 4:return e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.TelemetryClient"}}]),d}(D.Z)},66311:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.TelemetryClientConfiguration"}}]),n}(n(88152).Z)},32394:function(e,t){"use strict";var n;!function(e){e.postEvent="postEvent",e.dustEvent="dustEvent",e.envelopeEvent="envelopeEvent",e.validateDustEvent="validateDustEvent",e.validateQoeEvent="validateQoeEvent",e.validateDustEnvelope="validateDustEnvelope"}(n||(n={})),t.Z=n},31759:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.Z)(this,e);var n={options:o.Types.object({server:o.Types.object().optional,client:o.Types.object().optional}).optional};(0,o.typecheck)(this,n,arguments);var i=t,a=i.server,s=void 0===a?{}:a,c=i.client,u=void 0===c?{}:c;this.server=s,this.client=u}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.TelemetryPayload"}}]),e}()},42658:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({replyAfter:o.Types.number.optional,requestId:o.Types.nonEmptyString.optional})};o.typecheck.warn(this,n,arguments);var i=t.replyAfter,a=t.requestId;this.replyAfter=i,this.requestId=a}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.TelemetryResponse"}}]),e}()},70280:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}}),n(12419);var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),u=(n(41539),n(39714),n(29254),n(92222),n(67682)),l=n(17563),p=n(94037),d={streetAddress:u.Types.nonEmptyString.optional,city:u.Types.nonEmptyString.optional,state:u.Types.nonEmptyString.optional,postalCode:u.Types.nonEmptyString.optional,country:u.Types.nonEmptyString,phoneNumber:u.Types.nonEmptyString.optional,faxNumber:u.Types.nonEmptyString.optional},y={name:u.Types.nonEmptyString,address:u.Types.object(d),vatTaxId:u.Types.nonEmptyString.optional},f={type:u.Types.nonEmptyString.optional,url:u.Types.nonEmptyString.optional},h={rate:u.Types.number,calculatedTax:u.Types.number,jurisdiction:u.Types.nonEmptyString,type:u.Types.nonEmptyString},v={total:u.Types.number,effectiveRate:u.Types.number,breakdown:u.Types.array.of.object(h)},g={sku:u.Types.nonEmptyString,name:u.Types.nonEmptyString,price:u.Types.number},m={start:u.Types.nonEmptyString,end:u.Types.nonEmptyString.optional},b={total:u.Types.number,subtotal:u.Types.number,discount:u.Types.number,tax:u.Types.object(v),product:u.Types.object(g),servicePeriod:u.Types.object(m)},T={reference:u.Types.nonEmptyString,externalReference:u.Types.nonEmptyString.optional,due:u.Types.nonEmptyString,total:u.Types.number,subtotal:u.Types.number,tax:u.Types.number,taxDocuments:u.Types.array.of.object(f).optional,currency:u.Types.nonEmptyString,paymentMethod:u.Types.object(p.PaymentMethodTypedef),businessEntity:u.Types.object(y).optional,lineItems:u.Types.array.of.object(b)},k={due:u.Types.nonEmptyString,total:u.Types.number,currency:u.Types.nonEmptyString,lineItems:u.Types.array.of.object(b)},S={link:u.Types.nonEmptyString,invoice:u.Types.object(k)},P={nextPageToken:u.Types.nonEmptyString.optional},E={paging:u.Types.object(P).optional,items:u.Types.array.of.object(S)},Z=n(24965),w=n(1206),D=n(84983),C=n(60777),A=n(11043),R=n(52662),x=n(29466),O=n(70928),I=n(69867),M=n(40064);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var L=D.Z.services.invoice.invoiceClient,N=function(e){(0,a.Z)(n,e);var t=j(n);function n(e){var i;(0,r.Z)(this,n),i=t.call(this,e);var a=u.Types.object({config:u.Types.instanceStrict(C.Z)});return(0,u.typecheck)((0,o.Z)(i),a,arguments),i.logger.log(i.toString(),"Created."),i}return(0,i.Z)(n,[{key:"getInvoice",value:function(e){var t={options:u.Types.object({link:u.Types.nonEmptyString,accessToken:u.Types.instanceStrict(O.Z),logTransaction:u.Types.instanceStrict(R.Z)})};(0,u.typecheck)(this,"getInvoice",t,arguments);var n=e.link,r=e.accessToken,i=e.logTransaction,o=this.logger,a=A.Z.getInvoice,s=this.getPayload({accessToken:r,endpointKey:a,data:{link:n}}),c=new w.Z({logger:o,source:this.toString(),urn:L.getInvoice,payload:s,endpointKey:a,logTransaction:i});return this.request({payload:s,dustLogUtility:c,resultMapper:function(e){var t=e.data,n={data:u.Types.object(T)};return u.typecheck.warn(n,[t]),t}})}},{key:"getPaginatedInvoices",value:function(e){var t={options:u.Types.object({pageToken:u.Types.nonEmptyString.optional,pageSize:u.Types.number.optional,accessToken:u.Types.instanceStrict(O.Z),logTransaction:u.Types.instanceStrict(R.Z)})};(0,u.typecheck)(this,"getPaginatedInvoices",t,arguments);var n=e.pageToken,r=e.pageSize,i=e.accessToken,o=e.logTransaction,a=this.logger,s=A.Z.getPaginatedInvoices,c=this.getPayload({accessToken:i,endpointKey:s,data:{pageToken:n,pageSize:r}}),l=new w.Z({logger:a,source:this.toString(),urn:L.getPaginatedInvoices,payload:c,endpointKey:s,logTransaction:o});return this.request({payload:c,dustLogUtility:l,resultMapper:function(e){var t=e.data,n={data:u.Types.object(E)};return u.typecheck.warn(n,[t]),t}})}},{key:"getPayload",value:function(e){var t,n=e.accessToken,r=e.endpointKey,i=e.data,o=void 0===i?{}:i,a=e.body,s=this.config.endpoints[r],c=s.href,u=s.headers,p=s.method,d=a?JSON.stringify(a):"";r===A.Z.getPaginatedInvoices&&(t=(0,x.Z)(c,l.stringify(o))),r===A.Z.getInvoice&&(t="".concat(c).concat(o.link));var y=(0,Z.Z)({Authorization:function(){return{replacer:"{accessToken}",value:n.token}}},u);return{url:t,method:p,body:d,headers:new I.Z(y)}}},{key:"toString",value:function(){return"SDK.Services.Invoice.InvoiceClient"}}]),n}(M.Z)},60777:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Invoice.InvoiceClientConfiguration"}}]),n}(n(88152).Z)},11043:function(e,t){"use strict";var n;!function(e){e.getInvoice="getInvoice",e.getPaginatedInvoices="getPaginatedInvoices"}(n||(n={})),t.Z=n},91966:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(15861),i=n(4942),o=n(15671),a=n(43144),s=n(97326),c=n(2291),u=n(60136),l=n(82963),p=n(61120),d=n(87757),y=n.n(d),f=(n(41539),n(39714),n(88674),n(92222),n(67682)),h=n(17563),v=n(37347),g=n(1206),m=n(84983),b=n(11355),T=n(89420),k=n(52662),S=n(70928),P=n(69867),E=n(24965),Z=n(40064),w=n(90262),D=n(51431);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var x=m.Z.services.media.adEngine.adEngineClient,O=function(e){(0,u.Z)(d,e);var t,n,i,l=R(d);function d(e){var t;(0,o.Z)(this,d),t=l.call(this,e);var n={options:f.Types.object({config:f.Types.instanceStrict(b.Z),geoProvider:f.Types.instanceStrict(v.Z.GeoProvider),sdkver:f.Types.nonEmptyString,advertisingIdProvider:f.Types.instanceStrict(w.Z),disabled:f.Types.boolean.optional})};(0,f.typecheck)((0,s.Z)(t),n,arguments);var r=e.sdkver,i=e.advertisingIdProvider,a=e.geoProvider,c=e.config,u=e.disabled,p=c.extras,y=p||{},h=y.adTargeting,g=void 0===h?{}:h;return t.sdkver=r,t.adTargeting=A(A({},g),{sdkver:r}),t.advertisingIdProvider=i,t.geoProvider=a,t.disabled=u,t.logger.log(t.toString(),"Created."),t}return(0,a.Z)(d,[{key:"updateCookies",value:(i=(0,r.Z)(y().mark((function e(t,n,r){var i,o,a,s,u,l,h=this,v=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={options:f.Types.nonEmptyObject,accessToken:f.Types.instanceStrict(S.Z),logTransaction:f.Types.instanceStrict(k.Z)},(0,f.typecheck)(this,"updateCookies",i,v),e.next=3,this.constructAdEngineData(t);case 3:return o=e.sent,a=this.logger,s=T.Z.setTokenPost,(u=this.getPayload({accessToken:n,endpointKey:s,body:o})).credentials="include",a.info(this.toString(),'Attempting to update AdEngine cookies with: "'.concat(u.body,'".')),l=new g.Z({logger:a,source:this.toString(),urn:x.updateCookies,payload:u,data:{query:u.body},endpointKey:s,logTransaction:r}),e.abrupt("return",(0,c.Z)((0,p.Z)(d.prototype),"request",this).call(this,{payload:u,dustLogUtility:l,resultMapper:function(e){return e}}).catch((function(e){return h.logger.warn(h.toString(),e),Promise.resolve()})));case 11:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"getCookies",value:(n=(0,r.Z)(y().mark((function e(t,n,r){var i,o,a,s,u,l,h=this,v=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={options:f.Types.nonEmptyObject,accessToken:f.Types.instanceStrict(S.Z),logTransaction:f.Types.instanceStrict(k.Z)},(0,f.typecheck)(this,"getCookies",i,v),e.next=3,this.constructAdEngineData(t);case 3:return o=e.sent,a=this.logger,s=T.Z.setTokenPost,u=this.getPayload({accessToken:n,endpointKey:s,body:o}),a.info(this.toString(),'Attempting to update AdEngine cookies with: "'.concat(u.body,'".')),l=new g.Z({logger:a,source:this.toString(),urn:x.getCookies,payload:u,data:{query:u.body},endpointKey:s,logTransaction:r}),e.abrupt("return",(0,c.Z)((0,p.Z)(d.prototype),"request",this).call(this,{payload:u,dustLogUtility:l,resultMapper:function(e){return e}}).catch((function(e){return h.logger.warn(h.toString(),e),Promise.resolve([])})));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"constructAdEngineData",value:(t=(0,r.Z)(y().mark((function e(t){var n,r,i,o,a,s,c,u,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.adTargeting,e.next=3,this.geoProvider.getGeoLocation();case 3:return r=e.sent,i=r.latitude,o=r.longitude,a="[".concat(i,",").concat(o,"]"),s=this.advertisingIdProvider.getId(),c=this.advertisingIdProvider.getLimitAdTrackingEnabled(),u={devid:s,lat:c===D.Z.YES?1:0,xny:"[0,0]"!==a?a:void 0},l=A(A(A({},u),t),n),e.abrupt("return",l);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getPayload",value:function(e){var t=e.accessToken,n=e.endpointKey,r=e.body,i=this.config.endpoints[n],o=i.href,a=i.headers,s=i.method,c=r?h.stringify(r):"",u=o,l=(0,E.Z)({Authorization:function(){return{replacer:"{accessToken}",value:t.token}}},a);return{url:u,method:s,body:c,headers:new P.Z(l)}}},{key:"toString",value:function(){return"SDK.Services.Media.AdEngine.AdEngineClient"}}]),d}(Z.Z)},11355:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Media.AdEngine.AdEngineClientConfiguration"}}]),n}(n(88152).Z)},89420:function(e,t){"use strict";var n;!function(e){e.setTokenPost="setTokenPost",e.setTokenRedirectPost="setTokenRedirectPost"}(n||(n={})),t.Z=n},78318:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={adTargeting:o.Types.object()};o.typecheck.warn(this,n,arguments),this.adTargeting=t}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.AdEngine.AdEngineClientExtrasMap"}}]),e}()},90450:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Media.BifThumbnailSet"}}]),n}(n(61719).Z)},28928:function(e,t,n){"use strict";var r,i,o,a,s,c,u,l,p,d,y,f,h,v,g,m,b,T,k,S,P,E;n.d(t,{AssetInsertionStrategyQos:function(){return r},AudioRole:function(){return i},AudioType:function(){return o},DrmType:function(){return a},EncryptionMode:function(){return s},HdrType:function(){return c},InsertionMode:function(){return u},InsertionPointActionType:function(){return l},InsertionPointContentSubType:function(){return p},InsertionPointContentType:function(){return d},InsertionPointPlacement:function(){return y},InsertionPointVisualElementType:function(){return f},MediaPlayheadStatus:function(){return h},MediaQuality:function(){return v},PlaylistType:function(){return g},Protocol:function(){return m},ResolutionMax:function(){return b},StreamingType:function(){return T},SubscriptionType:function(){return k},SubtitleRole:function(){return S},SupportedCodec:function(){return P},ThumbnailPresentationType:function(){return E}}),function(e){e.ssai="SSAI",e.sgai="SGAI",e.none="NONE"}(r||(r={})),function(e){e.PRIMARY="PRIMARY",e.NARRATION="NARRATION"}(i||(i={})),function(e){e.atmos="ATMOS"}(o||(o={})),function(e){e.NONE="NONE",e.SILK="SILK",e.PLAYREADY="PLAYREADY",e.WIDEVINE="WIDEVINE",e.FAIRPLAY="FAIRPLAY",e.PRMNAGRA="PRMNAGRA"}(a||(a={})),function(e){e.cbcs="cbcs",e.ctr="ctr",e.silk="silk"}(s||(s={})),function(e){e.dolbyVision="DOLBY_VISION",e.hdr10="HDR10"}(c||(c={})),function(e){e.SGAI="SGAI",e.SSAI="SSAI"}(u||(u={})),function(e){e.SKIP="SKIP"}(l||(l={})),function(e){e.BUMPER="BUMPER",e.BRAND_BUMPER="BRAND_BUMPER",e.SLUG="SLUG",e.CONTENT_PROMO="CONTENT_PROMO",e.NOAH_CARD="NOAH_CARD",e.TUNE_IN_CARD="TUNE_IN_CARD"}(p||(p={})),function(e){e.AUXILIARY_CONTENT="AUXILIARY_CONTENT",e.AD_SERVICE_CONTENT="AD_SERVICE_CONTENT"}(d||(d={})),function(e){e.BUMPER_PREROLL="BUMPER_PREROLL",e.PREROLL="PREROLL",e.MIDROLL="MIDROLL"}(y||(y={})),function(e){e.PROMO_TEXT="PROMO_TEXT"}(f||(f={})),function(e){e.Success="Success",e.NoPlayhead="NoPlayhead",e.Unavailable="Unavailable"}(h||(h={})),function(e){e.limited="limited",e.regular="regular",e.high="high"}(v||(v={})),function(e){e.COMPLETE="complete",e.SLIDE="sliding"}(g||(g={})),function(e){e.HTTPS="HTTPS",e.HTTP="HTTP"}(m||(m={})),function(e){e.res1920x1080="1920x1080",e.res1280x720="1280x720"}(b||(b={})),function(e){e.VOD="VOD",e.LIVE="LIVE"}(T||(T={})),function(e){e.adsRequired="ADS_REQUIRED",e.noAdsRequired="NO_ADS_REQUIRED"}(k||(k={})),function(e){e.NORMAL="NORMAL",e.SDH="SDH",e.FORCED="FORCED"}(S||(S={})),function(e){e.h264="h.264",e.h265="h.265"}(P||(P={})),function(e){e.BUMPER="BUMPER",e.MAIN="MAIN",e.DUB_CARD="DUB_CARD"}(E||(E={}))},54268:function(e,t,n){"use strict";n.d(t,{Z:function(){return ue}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(49337);var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(97326),c=n(2291),u=n(60136),l=n(82963),p=n(61120),d=n(87757),y=n.n(d),f=(n(41539),n(39714),n(74916),n(15306),n(21249),n(54747),n(88674),n(69826),n(26699),n(32023),n(92222),n(68309),n(67682)),h=n(87891),v=n(7694),g=n(24965),m=n(1206),b=n(84983),T=n(36047),k=n(19496),S=n(15004),P=n(12204),E=n(90642),Z=n(15227),w=n(6078),D=n(283),C=n(84961),A=n(33738),R=n(62120),x=n(33657),O=n(36149),I=n(28979),M=n(90450),j=n(59056),L=n(52662),N=n(28928),B=n(60532),_=n(19546),F=n(6456),U=n(40206),q=n(57890),K=n(70928),V=n(12719),H=n(63362),G=n(73688),Q=n(78641),z=n(70187),W=n(25279),Y=n(70825),J=n(16471),X=n(69867),$=n(40064),ee=n(9588),te=n(14024),ne=n(83668),re=n(96581);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var se=b.Z.qualityOfService,ce=b.Z.services.media.mediaClient,ue=function(e){(0,u.Z)(d,e);var t,n,l=ae(d);function d(e){var t;(0,o.Z)(this,d),t=l.call(this,e);var n=f.Types.object({config:f.Types.instanceStrict(w.Z),logger:f.Types.instanceStrict(h.Z),httpClient:f.Types.instanceStrict(k.Z),monotonicTimestampProvider:f.Types.object(J.z)});return(0,f.typecheck)((0,s.Z)(t),n,arguments),t.monotonicTimestampProvider=e.monotonicTimestampProvider,t.logger.log(t.toString(),"Created."),t}return(0,a.Z)(d,[{key:"mediaPayload",value:(n=(0,i.Z)(y().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,d,h,g,b,k,P,E,w,C,x,I,M,j,B,G,Q,z,Y,J,X,$,te,ne,re,ie,ae,ue,le,pe,de,ye,fe,he,ve,ge,me,be,Te,ke,Se,Pe,Ee,Ze,we,De,Ce,Ae,Re,xe,Oe,Ie,Me,je,Le,Ne,Be,_e,Fe,Ue,qe,Ke,Ve,He,Ge,Qe,ze,We,Ye,Je,Xe,$e,et,tt,nt,rt,it,ot,at,st,ct,ut,lt,pt,dt,yt,ft,ht,vt,gt,mt,bt,Tt,kt,St,Pt,Et,Zt,wt,Dt,Ct,At=this,Rt=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:f.Types.object({mediaLocator:f.Types.instanceStrict(H.Z),accessToken:f.Types.instanceStrict(K.Z),baseDeviceCapability:f.Types.nonEmptyString,playbackSelectionPayload:f.Types.instanceStrict(D.Z),playbackContext:f.Types.instanceStrict(A.Z).optional,preferredPlaylistType:f.Types.in(N.PlaylistType),qcPlaybackExperienceContext:f.Types.string.optional,logTransaction:f.Types.instanceStrict(L.Z)})},(0,f.typecheck)(this,"mediaPayload",n,Rt),r=t.mediaLocator,i=t.accessToken,o=t.baseDeviceCapability,a=t.playbackSelectionPayload,s=t.playbackContext,c=t.preferredPlaylistType,u=t.qcPlaybackExperienceContext,l=t.logTransaction,p=this.httpClient,d=this.logger,h=a.playback.attributes.assetInsertionStrategy,r.mediaLocatorType===W.$g.url?(g=Z.Z.mediaPayloadV5,b=r.id):r.mediaLocatorType===W.$g.v6Url?(g=Z.Z.mediaPayloadV6,b=r.id):(g=Z.Z.mediaPayload,b=this.config.endpoints[g].href),k=b.replace(/\{scenario\}/,o),P=this.getPayload({accessToken:i,endpointKey:g,body:oe({},a),data:{qcPlaybackExperienceContext:u,url:k}}),d.info(this.toString(),"Sending post media payload request: ".concat(P.url)),E=new m.Z({logger:d,source:this.toString(),urn:ce.mediaPayload,payload:P,endpointKey:g,logTransaction:l}),e.prev=9,e.next=12,p.request(P);case 12:return re=e.sent,e.next=15,(0,v.Z)({response:re,dustLogUtility:E});case 15:return G=re.requestStartTime,ie=re.data,ue=(ae=ie||{}).stream,le=ae.tracking,pe=ae.playhead,de=ae.thumbnails,null!=ie&&null!==(z=ie.tracking)&&void 0!==z&&z[W.aD.qoe]||(r.mediaLocatorType===W.$g.url&&(ie.tracking[W.aD.qoe]={pboVersion:5}),r.mediaLocatorType===W.$g.v6Url&&(ie.tracking[W.aD.qoe]={pboVersion:6})),ye=this.parseMediaPlayhead(pe),fe=this.parseMediaPayloadStream(ue),he=fe.sources[0],c===N.PlaylistType.COMPLETE?(ve=he.complete||he.slide,M=fe.qosDecisions.complete):c===N.PlaylistType.SLIDE&&(ve=he.slide||he.complete,M=fe.qosDecisions.slide),C=null!==(Y=null===(J=ve)||void 0===J||null===(X=J.tracking)||void 0===X?void 0:X.qos)&&void 0!==Y?Y:{},x=null!==($=null===(te=ve)||void 0===te||null===(ne=te.tracking)||void 0===ne?void 0:ne.qoe)&&void 0!==$?$:{},f.Check.assigned(de)&&(ge=new O.Z(de)),w={stream:fe,tracking:le,playhead:ye,thumbnails:ge},e.abrupt("return",new S.Z(w));case 30:throw e.prev=30,e.t0=e.catch(9),me=e.t0,j=me.reasons||[],B=me.data?me.data.message:void 0,I=this.constructErrorFromMediaPayloadException(me),Q=this.constructQoeErrorFromMediaPayloadException(me),me;case 38:return e.prev=38,d.dustEnabled&&f.Check.nonEmptyString(null==s?void 0:s.playbackSessionId)&&(Oe=[],Me=(Ie=s).playbackSessionId,je=Ie.productType,Le=Ie.playbackIntent,Ne=Ie.isPreBuffering,Be=Ie.contentKeys,_e=void 0===Be?{}:Be,Fe=Ie.startupContext,Ue=Ie.data,qe=Ie.offline,Ke=void 0!==qe&&qe,Ve=Ie.interactionId,He=d.analyticsProvider,Ge=null===(be=w)||void 0===be?void 0:be.stream.attributes,Qe=null!==(Te=null===(ke=w)||void 0===ke?void 0:ke.stream.variants)&&void 0!==Te?Te:[],ze=Qe.map((function(e){return new R.Z(e)})),We=this.getQosServerRequestData(E),Ye=null!==(Se=null===(Pe=w)||void 0===Pe||null===(Ee=Pe.tracking)||void 0===Ee?void 0:Ee.qos)&&void 0!==Se?Se:null,Je=oe(oe({},Ye),C),Xe=null!==(Ze=null===(we=w)||void 0===we||null===(De=we.tracking)||void 0===De?void 0:De.qoe)&&void 0!==Ze?Ze:null,$e=oe(oe({},Xe),x),tt=(et=M||{}).clientDecisions,nt=void 0===tt?{}:tt,rt=et.serverDecisions,it=void 0===rt?{}:rt,ot=_.AdInsertionType[h.toLowerCase()],at=null!==(Ce=null===(Ae=w)||void 0===Ae?void 0:Ae.stream.adsQos)&&void 0!==Ce?Ce:null,st=null!==(Re=null===(xe=w)||void 0===xe?void 0:xe.stream.insertion)&&void 0!==Re?Re:null,ct=this.monotonicTimestampProvider.getTimestamp(),pt="",dt=0,yt=0,ft=0,He&&(mt=He.getCommonProperties(Me),gt=oe(oe({},Ue),mt),ut=He.getDictionaryVersion(Me)),ot!==_.AdInsertionType.none&&(lt=null!==(bt=null==at||null===(Tt=at.adSession)||void 0===Tt?void 0:Tt.id)&&void 0!==bt?bt:ee.DEFAULT_ZERO_GUID,pt=null==at?void 0:at.subscriptionType,ht=null==at||null===(kt=at.adSession)||void 0===kt?void 0:kt.responseCode,ot===_.AdInsertionType.ssai&&(vt=null==at||null===(St=at.getPods)||void 0===St?void 0:St.responseCode)),null!=st&&st.points&&(dt=st.points.length,ot===_.AdInsertionType.ssai&&st.points.forEach((function(e){var t=e.plannedSlotCount,n=e.duration;yt=yt?yt+t:t,ft=ft?ft+n:n}))),Pt=new q.Z({startupActivity:_.StartupActivity.fetched,playbackSessionId:Me,productType:je,networkType:_.NetworkType.unknown,playbackIntent:Le,mediaPreBuffer:Ne,playbackUrl:r.id,serverRequest:We,playbackScenario:o,attributes:Ge,streamVariants:ze,mediaFetchError:I,clientGroupIds:nt.clientGroupIds,serverGroupIds:it.serverGroupIds,contentKeys:_e,subscriptionType:pt,adSessionId:lt,totalPodCount:dt,totalSlotCount:yt,totalAdLength:ft,createAdSessionResponseCode:ht,getPodsResponseCode:vt,monotonicTimestamp:ct,adInsertionType:ot,data:gt,qos:Je,startupContext:Fe,playlistFetchedStartTime:G,playlistFetchedDuration:G?Date.now()-G:void 0,interactionId:Ve,qoe:$e}),Oe.push({eventDataUrn:se.playbackStartup,eventData:Pt}),f.Check.assigned(I)&&(Dt=new U.Z({applicationContext:_.ApplicationContext.player,playbackSessionId:Me,isFatal:!0,source:_.ErrorSource.service,errorName:Q,errorLevel:_.ErrorLevel.error,productType:je,cdnName:null!==(Et=We.cdnName)&&void 0!==Et?Et:void 0,dictionaryVersion:ut,underlyingSdkError:null===(Zt=j)||void 0===Zt?void 0:Zt[0],errorMessage:B,contentKeys:_e,clientGroupIds:nt.clientGroupIds,serverGroupIds:it.serverGroupIds,adInsertionType:ot,subscriptionType:pt,data:gt,monotonicTimestamp:ct,localMedia:Ke,interactionId:Ve,mediaFetchSucceeded:!1,qoe:$e}),Ct=new F.Z({playbackActivity:_.PlaybackActivity.ended,productType:je,cdnName:null!==(wt=We.cdnName)&&void 0!==wt?wt:void 0,cdnVendor:null==Je?void 0:Je.cdnVendor,cdnWithOrigin:null==Je?void 0:Je.cdnWithOrigin,cause:_.PlaybackExitedCause.error,clientGroupIds:nt.clientGroupIds,serverGroupIds:it.serverGroupIds,contentKeys:_e,data:gt,localMedia:Ke,interactionId:Ve,mediaFetchSucceeded:!1,qoe:$e}),Oe.push({eventDataUrn:se.error,eventData:Dt}),Oe.push({eventDataUrn:se.playback,eventData:Ct})),Oe.forEach((function(e){new m.Z({category:T.Z.qoe,logger:d,source:At.toString(),urn:e.eventDataUrn,data:oe({},e.eventData),dataVersion:(0,V.y)(e.eventDataUrn),skipLogTransaction:!0}).log()}))),E.log(),e.finish(38);case 42:case"end":return e.stop()}}),e,this,[[9,30,38,42]])}))),function(e){return n.apply(this,arguments)})},{key:"createAuthCookie",value:function(e,t){var n={accessToken:f.Types.instanceStrict(K.Z),logTransaction:f.Types.instanceStrict(L.Z)};(0,f.typecheck)(this,"createAuthCookie",n,arguments);var r=this.logger,i=Z.Z.playbackCookie,o=this.getPayload({accessToken:e,endpointKey:i});o.credentials="include",r.info(this.toString(),"Sending create auth cookie request: ".concat(o.url));var a=new m.Z({logger:r,source:this.toString(),urn:ce.createAuthCookie,payload:o,endpointKey:i,logTransaction:t});return(0,c.Z)((0,p.Z)(d.prototype),"request",this).call(this,{payload:o,dustLogUtility:a,resultMapper:function(e){return e}})}},{key:"getSpriteSheetThumbnails",value:function(e){var t={options:f.Types.object({thumbnailLink:f.Types.instanceStrict(x.Z),resolution:f.Types.nonEmptyString.optional,accessToken:f.Types.instanceStrict(K.Z),logTransaction:f.Types.instanceStrict(L.Z)})};(0,f.typecheck)(this,"getSpriteSheetThumbnails",t,arguments);var n=e.thumbnailLink,r=e.resolution,i=e.accessToken,o=e.logTransaction,a=this.logger,s=this.createThumbnailUrl(n,r),u=Z.Z.spriteSheetThumbnails,l=this.getPayload({accessToken:i,endpointKey:u,data:{url:s,headers:n.headers}});l.method=n.method.toUpperCase(),a.info(this.toString(),"request spritesheet thumbnails ".concat(n.url));var y=new m.Z({logger:a,source:this.toString(),urn:ce.getSpriteSheetThumbnails,payload:l,endpointKey:u,logTransaction:o});return(0,c.Z)((0,p.Z)(d.prototype),"request",this).call(this,{payload:l,dustLogUtility:y,resultMapper:function(e){var t=e.data.spritesheets;if(f.Check.not.nonEmptyArray(t)){var n=new Q.Z({exceptionData:z.Z.media.thumbnailsNotAvailable});return Promise.reject(n)}return t.map((function(e){var t=e.presentations.map((function(e){return new j.Z(e)}));return new I.Z(oe(oe({},e),{presentations:t}))}))}})}},{key:"getSpriteSheetThumbnail",value:function(e,t,n){var r={presentation:f.Types.instanceStrict(j.Z),index:f.Types.number,logTransaction:f.Types.instanceStrict(L.Z)};(0,f.typecheck)(this,"getSpriteSheetThumbnail",r,arguments);var i=this.logger,o=Z.Z.spriteSheetThumbnail,a=this.getPayload({endpointKey:o,data:{url:e.paths[t]},bodyType:"arrayBuffer"});i.info(this.toString(),"request spritesheet thumbnail ".concat(a.url));var s=new m.Z({logger:i,source:this.toString(),urn:ce.getSpriteSheetThumbnail,payload:a,endpointKey:o,logTransaction:n});return(0,c.Z)((0,p.Z)(d.prototype),"request",this).call(this,{payload:a,dustLogUtility:s,resultMapper:function(e){return e.data}})}},{key:"getBifThumbnails",value:function(e){var t={options:f.Types.object({thumbnailLink:f.Types.instanceStrict(x.Z),resolution:f.Types.nonEmptyString.optional,accessToken:f.Types.instanceStrict(K.Z),logTransaction:f.Types.instanceStrict(L.Z)})};(0,f.typecheck)(this,"getBifThumbnails",t,arguments);var n=e.thumbnailLink,r=e.resolution,i=e.accessToken,o=e.logTransaction,a=this.logger,s=this.createThumbnailUrl(n,r),u=Z.Z.bifThumbnails,l=this.getPayload({accessToken:i,endpointKey:u,data:{url:s,headers:n.headers}});l.method=n.method.toUpperCase(),a.info(this.toString(),"request bif thumbnails ".concat(s));var y=new m.Z({logger:a,source:this.toString(),urn:ce.getBifThumbnails,payload:l,endpointKey:u,logTransaction:o});return(0,c.Z)((0,p.Z)(d.prototype),"request",this).call(this,{payload:l,dustLogUtility:y,resultMapper:function(e){var t=e.data.bifs;if(f.Check.not.nonEmptyArray(t)){var n=new Q.Z({exceptionData:z.Z.media.thumbnailsNotAvailable});return Promise.reject(n)}return t.map((function(e){var t=e.presentations.map((function(e){return new j.Z(e)}));return new M.Z(oe(oe({},e),{presentations:t}))}))}})}},{key:"downloadBifThumbnail",value:(t=(0,i.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("".concat(this,".downloadBifThumbnail() - not-implemented"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"checkPlaybackRights",value:function(e){var t={options:f.Types.object({playbackRightsProgramBoundaryCheck:f.Types.object(re.Bu),accessToken:f.Types.instanceStrict(K.Z),logTransaction:f.Types.instanceStrict(L.Z)})};(0,f.typecheck)(this,"checkPlaybackRights",t,arguments);var n=e.playbackRightsProgramBoundaryCheck,r=e.accessToken,i=e.logTransaction,o=this.logger,a=Z.Z.checkProgramBoundaryPlaybackRights,s=this.getPayload({body:oe({},n),accessToken:r,endpointKey:a});s.credentials="include",o.info(this.toString(),"Sending check for playback media rights request: ".concat(s.url));var u=new m.Z({logger:o,source:this.toString(),urn:ce.checkPlaybackRights,payload:s,endpointKey:a,logTransaction:i});return(0,c.Z)((0,p.Z)(d.prototype),"request",this).call(this,{payload:s,dustLogUtility:u,resultMapper:function(e){var t=e.data,n={data:f.Types.object(Y.PlaybackRightsTypedef)};return f.typecheck.warn(n,[t]),t}})}},{key:"parseMediaPayloadStream",value:function(e){var t,n,r=e||{},i=r.adsQos,o=r.sources,a=void 0===o?this.translateMediaPayloadV5(e):o,s=r.insertion,c=r.editorial,u=r.attributes,l=r.variants,p=r.renditions,d=r.qosDecisions,y=r.streamingType,f=void 0===y?N.StreamingType.VOD:y,h=C.Z.parse(u),v=null==l?void 0:l.map((function(e){return new R.Z(e)})),g={audio:null!==(t=null==p?void 0:p.audio.map((function(e){return e})))&&void 0!==t?t:[],subtitles:null!==(n=null==p?void 0:p.subtitles.map((function(e){return e})))&&void 0!==n?n:[]};return new P.Z({adsQos:i,sources:a,variants:null!=v?v:[],renditions:g,attributes:h,qosDecisions:d,streamingType:f,insertion:s,editorial:c})}},{key:"translateMediaPayloadV5",value:function(e){var t=e||{},n=t.complete,r=t.slide,i=this.translateSourceInfo(n,"complete"),o=this.translateSourceInfo(r,"slide");return i.length>=o.length?this.mergeSources(i,o):this.mergeSources(o,i)}},{key:"mergeSources",value:function(e,t){return e.map((function(e){var n=t.find((function(t){return t.priority===e.priority}));return oe(oe({},e),n)}))}},{key:"translateSourceInfo",value:function(e,t){return e?e.map((function(e){return(0,r.Z)({priority:e.priority},t,{url:e.url,tracking:e.tracking})})):[]}},{key:"parseMediaPlayhead",value:function(e){var t=e||{},n=t.position,r=t.last_updated,i=t.last_modified,o=t.status,a=r||i,s={PlayheadFound:N.MediaPlayheadStatus.Success},c={position:n,lastUpdated:a,status:N.MediaPlayheadStatus[o]||s[o]||N.MediaPlayheadStatus.Unavailable};return new E.Z(c)}},{key:"getQosServerRequestData",value:function(e){if(f.Check.not.instanceStrict(e,m.Z))return new G.Z;var t,n=e.server,r=n.roundTripTime,i=n.host,o=n.path,a=n.method,s=void 0===a?"":a,c=n.statusCode,u=_.FetchStatus.completed;return c>=400&&(c===te.Z.UNAUTHORIZED||c===te.Z.FORBIDDEN?t=_.NetworkError.prohibited:c>=500?(t=_.NetworkError.notConnected,u=_.FetchStatus.noNetwork):t=_.NetworkError.unknown),new G.Z({host:i,path:o,statusCode:c,roundTripTime:r,method:s.toLowerCase(),status:u,error:t})}},{key:"createThumbnailUrl",value:function(e,t){var n=e.href.includes("?")?"&":"?",r=t?"resolution=".concat(t):null,i=r?"".concat(n).concat(r):"";return"".concat(e.href).concat(i)}},{key:"constructErrorFromMediaPayloadException",value:function(e){return B.G[e.name]||B.G.default}},{key:"constructQoeErrorFromMediaPayloadException",value:function(e){return B.f[e.name]||B.f.default}},{key:"getPayload",value:function(e){var t=e.accessToken,n=e.endpointKey,i=e.data,o=e.body,a=e.bodyType,s=this.config.endpoints[n],c=s.href,u=s.optionalHeaders,l=s.method,p=i||{},d=p.url,y=p.headers,f=p.qcPlaybackExperienceContext,h=d||c,v=o?JSON.stringify(o):void 0,m=(0,g.Z)((0,r.Z)({Authorization:function(){return{replacer:"{accessToken}",value:null==t?void 0:t.token}}},ne.PLAYBACK_EXPERIENCE_CONTEXT,(function(){return{replacer:"{qcPlaybackExperienceContext}",value:f}})),oe(oe({},y),s.headers),u);return{url:h,method:l,body:v,bodyType:a,headers:new X.Z(m)}}},{key:"toString",value:function(){return"SDK.Services.Media.MediaClient"}}]),d}($.Z)},6078:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Media.MediaClientConfiguration"}}]),n}(n(88152).Z)},15227:function(e,t){"use strict";var n;!function(e){e.mediaPayload="mediaPayload",e.mediaPayloadV5="mediaPayloadV5",e.mediaPayloadV6="mediaPayloadV6",e.key="key",e.playbackCookie="playbackCookie",e.spriteSheetThumbnails="spriteSheetThumbnails",e.spriteSheetThumbnail="spriteSheetThumbnail",e.bifThumbnails="bifThumbnails",e.bifThumbnail="bifThumbnail",e.checkProgramBoundaryPlaybackRights="checkProgramBoundaryPlaybackRights"}(n||(n={})),t.Z=n},60532:function(e,t,n){"use strict";n.d(t,{G:function(){return i},f:function(){return o}});var r=n(19546),i={AccountConsentTokenCreationFailedException:r.MediaFetchError.gdprConsentConflict,AgeNotVerifiedException:r.MediaFetchError.ageNotVerified,AgeNotVerifiedKrException:r.MediaFetchError.ageNotVerifiedKr,AuthenticationExpiredException:r.MediaFetchError.authenticationExpired,AuthorizationExpiredException:r.MediaFetchError.authorizationExpired,BlackoutException:r.MediaFetchError.blackout,StreamConcurrencyException:r.MediaFetchError.concurrency,MediaUnavailableException:r.MediaFetchError.contentNotAvailable,LocationAcquisitionException:r.MediaFetchError.locationAcquisitionError,LocationNotAllowedException:r.MediaFetchError.locationNotAllowed,LoginRequiredException:r.MediaFetchError.loginRequired,MediaNotAllowedException:r.MediaFetchError.mediaNotAllowed,NetworkConnectionException:r.MediaFetchError.networkFailure,NotEntitledException:r.MediaFetchError.notEntitled,ParentalControlsRestrictedException:r.MediaFetchError.parentalControlsRestricted,ProfilePinExpiredException:r.MediaFetchError.pinExpired,ProfileMissingException:r.MediaFetchError.profileMissing,ProfilePinMissingException:r.MediaFetchError.profilePinMissing,RequestBlockedException:r.MediaFetchError.requestBlocked,RequestTemporarilyBlockedException:r.MediaFetchError.requestTemporarilyBlocked,TemporarilyThrottledException:r.MediaFetchError.temporarilyThrottled,TemporarilyUnavailableException:r.MediaFetchError.temporarilyUnavailable,UnexpectedErrorException:r.MediaFetchError.unexpectedError,UpgradeRequiredException:r.MediaFetchError.upgradeRequired,default:r.MediaFetchError.unknown},o={AccountConsentTokenCreationFailedException:r.QoePlaybackError.gdprConsentConflict,AgeNotVerifiedException:r.QoePlaybackError.ageNotVerified,AuthenticationExpiredException:r.QoePlaybackError.authenticationExpired,AuthorizationExpiredException:r.QoePlaybackError.authorizationExpired,BlackoutException:r.QoePlaybackError.blackout,StreamConcurrencyException:r.QoePlaybackError.concurrency,MediaUnavailableException:r.QoePlaybackError.contentNotAvailable,LocationAcquisitionException:r.QoePlaybackError.locationAcquisitionError,LocationNotAllowedException:r.QoePlaybackError.locationNotAllowed,LoginRequiredException:r.QoePlaybackError.loginRequired,MediaNotAllowedException:r.QoePlaybackError.mediaNotAllowed,NetworkConnectionException:r.QoePlaybackError.networkFailure,NotEntitledException:r.QoePlaybackError.notEntitled,ParentalControlsRestrictedException:r.QoePlaybackError.parentalControlsRestricted,ProfilePinExpiredException:r.QoePlaybackError.pinExpired,ProfileMissingException:r.QoePlaybackError.profileMissing,ProfilePinMissingException:r.QoePlaybackError.profilePinMissing,RequestBlockedException:r.QoePlaybackError.requestBlocked,RequestTemporarilyBlockedException:r.QoePlaybackError.requestTemporarilyBlocked,TemporarilyThrottledException:r.QoePlaybackError.temporarilyThrottled,TemporarilyUnavailableException:r.QoePlaybackError.temporarilyUnavailable,UnexpectedErrorException:r.QoePlaybackError.unexpectedError,UpgradeRequiredException:r.QoePlaybackError.upgradeRequired,default:r.QoePlaybackError.unknown}},15004:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(15671),i=n(43144),o=n(67682),a=n(12204),s=n(90642),c=n(36149),u=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({stream:o.Types.instanceStrict(a.Z),tracking:o.Types.object(),playhead:o.Types.instanceStrict(s.Z),thumbnails:o.Types.instanceStrict(c.Z).optional})};(0,o.typecheck)(this,n,arguments);var i=t.stream,u=t.tracking,l=t.playhead,p=t.thumbnails;this.stream=i,this.tracking=u,this.playhead=l,this.thumbnails=p}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.MediaPayload"}}]),e}()},12204:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(15671),i=n(43144),o=n(67682),a=n(70825),s=n(84961),c=n(62120),u=n(28928),l=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({adsQos:o.Types.object(a.AdsQosTypedef).optional,sources:o.Types.array.of.object(a.SourceInfoTypedef),variants:o.Types.array.of.instanceStrict(c.Z),renditions:o.Types.object(a.PlaybackRenditionsTypedef),attributes:o.Types.instanceStrict(s.Z).optional,qosDecisions:o.Types.object(a.QosDecisionsResponseTypedef).optional,streamingType:o.Types.in(u.StreamingType),insertion:o.Types.object(a.InsertionTypedef).optional,editorial:o.Types.array.of.object(a.EditorialTypedef).optional})};(0,o.typecheck)(this,n,arguments);var i=t.adsQos,l=t.sources,p=t.variants,d=t.renditions,y=t.attributes,f=t.qosDecisions,h=t.streamingType,v=t.insertion,g=t.editorial;this.adsQos=i,this.sources=l,this.variants=p,this.renditions=d,this.attributes=y,this.qosDecisions=null!=f?f:{},this.streamingType=h,this.insertion=v,this.editorial=g}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.MediaPayloadStream"}}]),e}()},283:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(59410),s=function(){function e(t,n){(0,r.Z)(this,e);var i={playback:o.Types.instanceStrict(a.Z),playbackId:o.Types.nonEmptyString.optional};(0,o.typecheck)(this,i,arguments),this.playback=t,this.playbackId=n}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.MediaPlaybackSelectionPayload"}}]),e}()},90642:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(28928),s=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({position:o.Types.number.optional,lastUpdated:o.Types.dateString.optional,status:o.Types.in(a.MediaPlayheadStatus)})};(0,o.typecheck)(this,n,arguments);var i=t.position,s=t.lastUpdated,c=t.status;this.position=i,this.lastUpdated=s,this.status=c}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.MediaPlayhead"}}]),e}()},33657:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({href:o.Types.nonEmptyString,rel:o.Types.nonEmptyString,method:o.Types.nonEmptyString,headers:o.Types.object().optional})};(0,o.typecheck)(this,n,arguments);var i=t.href,a=t.rel,s=t.method,c=t.headers;this.href=i,this.rel=a,this.method=s,this.headers=c}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.MediaThumbnailLink"}}]),e}()},36149:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(33657),s=function(){function e(t){(0,r.Z)(this,e);var n={thumbnails:o.Types.object()};(0,o.typecheck)(this,n,arguments);var i=t.bif,s=t.spritesheet;this.bif=o.Check.assigned(i)?new a.Z(i):null,this.spritesheet=o.Check.assigned(s)?new a.Z(s):null}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.MediaThumbnailLinks"}}]),e}()},84961:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}}),n(47941),n(82526),n(57327),n(41539),n(38880),n(54747),n(49337);var r=n(4942),i=n(15671),o=n(43144),a=n(67682),s=n(28928),c=n(70825);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(){function e(t){(0,i.Z)(this,e);var n={options:a.Types.object({adPartner:a.Types.nonEmptyString.optional,drms:a.Types.array.of.in(s.DrmType),security:a.Types.object(c.PlaybackSecurityTypedef),encryptionType:a.Types.nonEmptyString,audioSegmentTypes:a.Types.array.of.nonEmptyString,videoSegmentTypes:a.Types.array.of.nonEmptyString,videoRanges:a.Types.array.of.nonEmptyString,imageAspectRatio:a.Types.number.optional,experienceContext:a.Types.nonEmptyString.optional})};(0,a.typecheck)(this,n,arguments);var r=t.adPartner,o=t.drms,u=t.security,l=t.encryptionType,p=t.audioSegmentTypes,d=t.videoSegmentTypes,y=t.videoRanges,f=t.imageAspectRatio,h=t.experienceContext;this.adPartner=r,this.drms=o,this.security=u,this.encryptionType=l,this.audioSegmentTypes=p,this.videoSegmentTypes=d,this.videoRanges=y,this.imageAspectRatio=f,this.experienceContext=h}return(0,o.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.PlaybackAttributes"}}],[{key:"parse",value:function(t){if(t){var n=t.security;return new e(l(l({},t),{},{security:n}))}}}]),e}()},33738:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(15671),i=n(43144),o=n(67682),a=n(19546),s=n(25279),c=n(53169),u=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({interactionId:o.Types.nonEmptyString.optional,offline:o.Types.boolean.optional,playbackIntent:o.Types.in(a.PlaybackIntent),productType:o.Types.in(a.ProductType),isPreBuffering:o.Types.boolean,disablePlaybackSnapshotEventsOverride:o.Types.boolean,snapshotEventFeatureFlagEnabled:o.Types.boolean,artificialDelayDuration:o.Types.number.optional,pqmGroupId:o.Types.nonEmptyString.optional,pqmVersion:o.Types.nonEmptyString.optional,isNsaIncludedInVst:o.Types.boolean.optional,startupContext:o.Types.object().optional,contentKeys:o.Types.object(),data:o.Types.object().optional,mediaLocatorType:o.Types.in(s.$g).optional,viewingEnvironment:o.Types.nonEmptyString.optional})};(0,o.typecheck)(this,n,arguments);var i=t.interactionId,u=t.offline,l=t.playbackIntent,p=t.productType,d=t.isPreBuffering,y=t.disablePlaybackSnapshotEventsOverride,f=t.snapshotEventFeatureFlagEnabled,h=t.artificialDelayDuration,v=t.pqmGroupId,g=t.pqmVersion,m=t.isNsaIncludedInVst,b=void 0===m||m,T=t.startupContext,k=t.contentKeys,S=t.data,P=t.mediaLocatorType,E=t.viewingEnvironment;this.interactionId=i,this.offline=u||!1,this.playbackSessionId=(0,c.Z)(),this.playbackIntent=l,this.productType=p,this.isPreBuffering=d,this.contentKeys=k||{},this.data=S||{},this.artificialDelayDuration=null!=h?h:0,this.playbackRequestedAtTimestamp=null,this.startupContext=T||{},this.disablePlaybackSnapshotEventsOverride=y,this.snapshotEventFeatureFlagEnabled=f,this.pqmGroupId=v,this.pqmVersion=g,this.isNsaIncludedInVst=b,this.mediaLocatorType=P,this.viewingEnvironment=E}return(0,i.Z)(e,[{key:"setPlaybackRequestedAtTimestamp",value:function(){this.playbackRequestedAtTimestamp=Date.now()}},{key:"setMediaLocatorType",value:function(e){this.mediaLocatorType=e}},{key:"toString",value:function(){return"SDK.Services.Media.PlaybackContext"}}]),e}()},66165:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(15671),i=n(43144),o=n(67682),a=n(51431),s=n(48900),c=function(){function e(t,n,i){(0,r.Z)(this,e);var c={limitAdTrackingEnabled:o.Types.in(a.Z),deviceAdId:o.Types.nonEmptyString.optional,privacyOptOut:o.Types.in(s.Z).optional};(0,o.typecheck)(this,c,arguments),this.limitAdTrackingEnabled=t,this.deviceAdId=n,this.privacyOptOut=i}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.PlaybackSelectionAdTracking"}}]),e}()},5714:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(15671),i=n(43144),o=n(67682),a=n(70825),s=n(28928),c=n(25279),u=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({audioTypes:o.Types.array.of.in(s.AudioType).optional,hdrTypes:o.Types.array.of.in(s.HdrType).optional,resolution:o.Types.object(a.VideoResolutionTypedef).optional,codecs:o.Types.object(a.CodecAttributesTypedef).optional,protocol:o.Types.in(s.Protocol).optional,ads:o.Types.nonEmptyString.optional,assetInsertionStrategy:o.Types.in(c.We),playbackInitiationContext:o.Types.in(c.Fz).optional,frameRates:o.Types.array.of.number.optional,slugDuration:o.Types.in(c.nG).optional}).optional};(0,o.typecheck)(this,n,arguments);var i=t||{},u=i.audioTypes,l=i.hdrTypes,p=i.resolution,d=i.codecs,y=i.protocol,f=i.ads,h=i.assetInsertionStrategy,v=i.playbackInitiationContext,g=i.frameRates,m=i.slugDuration;this.audioTypes=u,this.videoRanges=l,this.resolution=p,this.codecs=d,this.protocol=y,this.ads=f,this.assetInsertionStrategy=h,this.playbackInitiationContext=v,this.frameRates=g,this.slugDuration=m}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.PlaybackSelectionAttributes"}}]),e}()},59410:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(15671),i=n(43144),o=n(67682),a=n(5714),s=n(66165),c=n(70825),u=function(){function e(t,n,i){(0,r.Z)(this,e);var u={attributes:o.Types.instanceStrict(a.Z),adTracking:o.Types.instanceStrict(s.Z).optional,tracking:o.Types.object(c.PlaybackSelectionTrackingTypedef).optional};(0,o.typecheck)(this,u,arguments),this.attributes=t,this.adTracking=n,this.tracking=i}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.PlaybackSelectionProperties"}}]),e}()},62120:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({bandwidth:o.Types.number.optional,resolution:o.Types.nonEmptyString.optional,videoBytes:o.Types.number.optional,maxAudioRenditionBytes:o.Types.number.optional,maxSubtitleRenditionBytes:o.Types.number.optional,audioChannels:o.Types.number.optional,videoRange:o.Types.nonEmptyString.optional,videoCodec:o.Types.nonEmptyString.optional,audioType:o.Types.nonEmptyString.optional,audioCodec:o.Types.nonEmptyString.optional,averageBandwidth:o.Types.number.optional,frameRate:o.Types.number.optional}).optional};(0,o.typecheck)(this,n,arguments);var i=t||{},a=i.bandwidth,s=i.resolution,c=i.videoBytes,u=i.maxAudioRenditionBytes,l=i.maxSubtitleRenditionBytes,p=i.audioChannels,d=i.videoRange,y=i.videoCodec,f=i.audioType,h=i.audioCodec,v=i.averageBandwidth,g=i.frameRate;this.bandwidth=null!=a?a:null,this.resolution=null!=s?s:null,this.videoBytes=null!=c?c:null,this.maxAudioRenditionBytes=null!=u?u:null,this.maxSubtitleRenditionBytes=null!=l?l:null,this.audioChannels=null!=p?p:null,this.videoRange=null!=d?d:null,this.videoCodec=null!=y?y:null,this.audioType=null!=f?f:null,this.audioCodec=null!=h?h:null,this.averageBandwidth=null!=v?v:null,this.frameRate=null!=g?g:null}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.PlaybackVariant"}}]),e}()},59056:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({presentationType:o.Types.nonEmptyString,thumbnailCount:o.Types.number,offsetMilliseconds:o.Types.number,paths:o.Types.array.of.nonEmptyString})};(0,o.typecheck)(this,n,arguments);var i=t.presentationType,a=t.thumbnailCount,s=t.offsetMilliseconds,c=t.paths;this.presentationType=i,this.thumbnailCount=a,this.offsetMilliseconds=s,this.paths=c}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.Presentation"}}]),e}()},28979:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),u=n(67682);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var p=function(e){(0,a.Z)(n,e);var t=l(n);function n(e){var i;(0,r.Z)(this,n),i=t.call(this,e);var a={options:u.Types.object({thumbnailRows:u.Types.number,thumbnailColumns:u.Types.number,quality:u.Types.number})};(0,u.typecheck)((0,o.Z)(i),a,arguments);var s=e.thumbnailRows,c=e.thumbnailColumns,l=e.quality;return i.thumbnailRows=s,i.thumbnailColumns=c,i.quality=l,i}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Media.SpriteThumbnailSet"}}]),n}(n(61719).Z)},43898:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(15671),i=n(43144),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;(0,r.Z)(this,e),this.streamSampleInterval=t}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.StreamSampleConfiguration"}}]),e}()},61719:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(15671),i=n(43144),o=n(67682),a=n(59056),s=n(25279),c=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({resolution:o.Types.in(s.xy),thumbnailWidth:o.Types.number,thumbnailHeight:o.Types.number,intervalMilliseconds:o.Types.number,totalBytes:o.Types.number,presentations:o.Types.array.of.instanceStrict(a.Z)})};(0,o.typecheck)(this,n,arguments);var i=t.resolution,c=t.thumbnailWidth,u=t.thumbnailHeight,l=t.intervalMilliseconds,p=t.totalBytes,d=t.presentations;this.resolution=i,this.thumbnailWidth=c,this.thumbnailHeight=u,this.intervalMilliseconds=l,this.totalBytes=p,this.presentations=d}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.ThumbnailSet"}}]),e}()},70825:function(e,t,n){"use strict";n.d(t,{AdsQosTypedef:function(){return m},AudioRenditionTypedef:function(){return b},CodecAttributesTypedef:function(){return E},EditorialTypedef:function(){return s},InsertionTypedef:function(){return c},InsertionUrlInfoTypedef:function(){return u},PlaybackRenditionsTypedef:function(){return S},PlaybackRightsTypedef:function(){return Z},PlaybackSecurityTypedef:function(){return T},PlaybackSelectionTrackingTypedef:function(){return w},QosDecisionsResponseTypedef:function(){return h},SourceInfoTypedef:function(){return y},SubtitleRenditionTypedef:function(){return k},UrlInfoTypedef:function(){return d},VideoResolutionTypedef:function(){return P}});var r=n(67682),i=n(28928),o={id:r.Types.nonEmptyString,getPodUrl:r.Types.nonEmptyString.optional},a={id:r.Types.nonEmptyString,offset:r.Types.number,placement:r.Types.in(i.InsertionPointPlacement)},s={label:r.Types.nonEmptyString,offsetMillis:r.Types.number},c={mode:r.Types.in(i.InsertionMode),adSession:r.Types.object(o).optional,points:r.Types.array.of.object(a).optional},u={base:r.Types.nonEmptyString.optional,queryParams:r.Types.nonEmptyString.optional},l={clientSettings:r.Types.object().optional,clientGroupIds:r.Types.nonEmptyString.optional},p={serverSettings:r.Types.object().optional,serverGroupIds:r.Types.nonEmptyString.optional},d={base:r.Types.nonEmptyString.optional,path:r.Types.nonEmptyString.optional,queryParams:r.Types.string.optional,tracking:r.Types.nonEmptyObject.optional,url:r.Types.nonEmptyString.optional},y={priority:r.Types.integer,slide:r.Types.object(d).optional,complete:r.Types.object(d).optional,insertion:r.Types.object(u).optional},f={clientDecisions:r.Types.object(l).optional,serverDecisions:r.Types.object(p).optional},h={complete:r.Types.object(f).optional,slide:r.Types.object(f).optional},v={id:r.Types.nonEmptyString.optional,responseCode:r.Types.number,hasSlugs:r.Types.boolean.optional,errorMessage:r.Types.nonEmptyString.optional},g={responseCode:r.Types.number,errorMessage:r.Types.nonEmptyString.optional},m={subscriptionType:r.Types.in(i.SubscriptionType),assetInsertionStrategy:r.Types.in(i.AssetInsertionStrategyQos),adSession:r.Types.object(v).optional,getPods:r.Types.object(g).optional},b={name:r.Types.nonEmptyString.optional,language:r.Types.nonEmptyString.optional,role:r.Types.in(i.AudioRole).optional},T={drmEndpointKey:r.Types.nonEmptyString},k={name:r.Types.nonEmptyString.optional,language:r.Types.nonEmptyString.optional,forced:r.Types.boolean.optional,role:r.Types.in(i.SubtitleRole).optional},S={audio:r.Types.array.of.object(b),subtitles:r.Types.array.of.object(k)},P={max:r.Types.array.of.in(i.ResolutionMax).optional},E={video:r.Types.array.of.in(i.SupportedCodec).optional},Z={availId:r.Types.nonEmptyString,tracking:r.Types.object()},w={playbackSessionId:r.Types.nonEmptyString.optional}},54303:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(81350);function i(e){var t=e.getTimestamp,n=e.storage;return function(e){var i=e.headers.get("Date"),o=t();return n.set(r.SERVER_TIME_KEY,JSON.stringify({date:i,retrievedTime:o})),e}}},62221:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120),c=n(67230),u=n(17389);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var p=function(e){(0,o.Z)(n,e);var t=l(n);function n(e){(0,r.Z)(this,n);var i={input:e};return t.call(this,{query:u.pm,variables:i,operationName:"exchangeDeviceGrantForAccessToken"})}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Orchestration.Internal.ExchangeDeviceGrantForAccessTokenRequest"}}]),n}(c.Z)},67230:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),u=n(67682);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var p=function(e){(0,a.Z)(n,e);var t=l(n);function n(e){var i;(0,r.Z)(this,n),i=t.call(this,e);var a={options:u.Types.object({operationName:u.Types.nonEmptyString})};u.typecheck.warn((0,o.Z)(i),a,arguments);var s=e.operationName;return i.operationName=s,i}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Orchestration.Internal.OrchestrationRequest"}}]),n}(n(80761).Z)},580:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120),c=n(67230),u=n(17389);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var p=function(e){(0,o.Z)(n,e);var t=l(n);function n(e){(0,r.Z)(this,n);var i={input:e};return t.call(this,{query:u.hs,variables:i,operationName:"refreshToken"})}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Orchestration.Internal.RefreshTokenRequest"}}]),n}(c.Z)},25888:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120),c=n(67230),u=n(17389);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var p=function(e){(0,o.Z)(n,e);var t=l(n);function n(e){(0,r.Z)(this,n);var i={input:e};return t.call(this,{query:u.tL,variables:i,operationName:"registerDevice"})}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Orchestration.Internal.RegisterDeviceRequest"}}]),n}(c.Z)},26957:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120),c=n(67230),u=n(17389);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var p=function(e){(0,o.Z)(n,e);var t=l(n);function n(e){(0,r.Z)(this,n);var i={input:e};return t.call(this,{query:u.q5,variables:i,operationName:"updateDeviceOperatingSystem"})}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Orchestration.Internal.UpdateDeviceOperatingSystemRequest"}}]),n}(c.Z)},81143:function(e,t){"use strict";var n;!function(e){e.Register="REGISTER",e.Login="LOGIN",e.PlanSwitch="PLAN_SWITCH"}(n||(n={})),t.Z=n},7607:function(e,t,n){"use strict";n.d(t,{Z:function(){return z}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r,i=n(4942),o=n(15861),a=n(15671),s=n(43144),c=n(97326),u=n(60136),l=n(82963),p=n(61120),d=n(87757),y=n.n(d),f=(n(41539),n(39714),n(88674),n(17727),n(67682)),h=n(60340),v=n(87891),g=n(1206),m=n(84983),b=n(19496),T=n(73492),k=n(84191);!function(e){e.query="query",e.registerDevice="registerDevice",e.exchangeDeviceGrantForAccessToken="exchangeDeviceGrantForAccessToken",e.refreshToken="refreshToken"}(r||(r={}));var S=r,P=n(87501),E=n(60439),Z=n(43469),w=n(46516),D=n(7694),C=n(70928),A=n(7135),R=n(41824),x=n(82616),O=n(62221),I=n(67230),M=n(580),j=n(25888),L=n(52662),N=n(81763),B=n(9344),_=n(16471),F=n(14008),U=n(40064),q=n(83668),K=n(54303);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var Q=m.Z.services.orchestration.orchestrationClient,z=function(e){(0,u.Z)(U,e);var t,n,r,i,l,p,d,m=G(U);function U(e){var t;(0,a.Z)(this,U),t=m.call(this,e);var n={options:f.Types.object({config:f.Types.instanceStrict(P.Z),logger:f.Types.instanceStrict(v.Z),tokenUpdater:f.Types.instanceStrict(T.Z),httpClient:f.Types.instanceStrict(b.Z),deviceGrantStorage:f.Types.instanceStrict(A.Z),sessionInfoStorage:f.Types.instanceStrict(E.Z),accountDelegationRefreshTokenStorage:f.Types.instanceStrict(x.Z),featureFlagsStorage:f.Types.instanceStrict(Z.Z),accessStorage:f.Types.instanceStrict(R.Z),apiKey:f.Types.nonEmptyString,monotonicTimestampProvider:f.Types.object(_.z),storage:f.Types.instanceStrict(F.Z.Storage)})};(0,f.typecheck)((0,c.Z)(t),n,arguments);var r=e.tokenUpdater,i=e.deviceGrantStorage,o=e.sessionInfoStorage,s=e.accountDelegationRefreshTokenStorage,u=e.featureFlagsStorage,l=e.accessStorage,p=e.apiKey,d=e.monotonicTimestampProvider,y=e.storage;return t.tokenUpdater=r,t.deviceGrantStorage=i,t.sessionInfoStorage=o,t.accountDelegationRefreshTokenStorage=s,t.featureFlagsStorage=u,t.accessStorage=l,t.apiKey=p,t.monotonicTimestampProvider=d,t.storage=y,t.logger.log(t.toString(),"Created."),t}return(0,s.Z)(U,[{key:"query",value:function(e){var t=this,n={options:f.Types.object({request:f.Types.instanceStrict(I.Z),accessToken:f.Types.instanceStrict(C.Z),logTransaction:f.Types.instanceStrict(L.Z)})};(0,f.typecheck)(this,"query",n,arguments);var r=this.logger,i=this.httpClient,a=this.config,s=a.endpoints,c=e.request,u=e.accessToken,l=e.logTransaction,p=c.operationName,d=p||"query",h=S[p]||S.query,v=s[h],m=Q.getOperationUrn(d),b=new g.Z({logger:r,source:this.toString(),urn:m,payload:{url:v.href,method:N.Z.POST},endpointKey:d,logTransaction:l}),T={endpoint:v,request:c,accessToken:u,logger:r,httpClient:i};return r.info(this.toString(),"Send custom query"),k.Z.query(T).then((0,K.Z)({getTimestamp:this.monotonicTimestampProvider.getTimestamp,storage:this.storage})).then(function(){var e=(0,o.Z)(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,D.Z)({response:t,dustLogUtility:b}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(function(){var e=(0,o.Z)(y().mark((function e(n){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.processExtensions(n,l);case 2:return r=n.data.data,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){b.log()}))}},{key:"registerDevice",value:function(e,t){var n=this,r={request:f.Types.instanceStrict(j.Z),logTransaction:f.Types.instanceStrict(L.Z)};(0,f.typecheck)(this,"registerDevice",r,arguments);var i=this.logger,a=this.httpClient,s=this.config,c=this.apiKey,u=s.endpoints,l=S.registerDevice,p=u[l],d=Q.registerDevice,h=new g.Z({logger:i,source:this.toString(),urn:d,payload:{url:p.href,method:N.Z.POST},endpointKey:l,logTransaction:t}),v={endpoint:p,request:e,apiKey:c,logger:i,httpClient:a};return i.info(this.toString(),"Send custom query to register a device"),k.Z.registerDevice(v).then((0,K.Z)({getTimestamp:this.monotonicTimestampProvider.getTimestamp,storage:this.storage})).then(function(){var e=(0,o.Z)(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,D.Z)({response:t,dustLogUtility:h}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(function(){var e=(0,o.Z)(y().mark((function e(r){var i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.processExtensions(r,t);case 2:return i=e.sent,e.abrupt("return",H(H({},r),{},{extensions:i}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){h.log()}))}},{key:"exchangeDeviceGrantForAccessToken",value:function(e,t){var n=this,r={request:f.Types.instanceStrict(O.Z),logTransaction:f.Types.instanceStrict(L.Z)};(0,f.typecheck)(this,"exchangeDeviceGrantForAccessToken",r,arguments);var i=this.logger,a=this.httpClient,s=this.config,c=this.apiKey,u=s.endpoints,l=S.exchangeDeviceGrantForAccessToken,p=u[l],d=Q.exchangeDeviceGrantForAccessToken,h=new g.Z({logger:i,source:this.toString(),urn:d,payload:{url:p.href,method:N.Z.POST},endpointKey:l,logTransaction:t}),v={endpoint:p,request:e,apiKey:c,logger:i,httpClient:a};return i.info(this.toString(),"Send custom query to exchange device grant for access token"),k.Z.registerDevice(v).then((0,K.Z)({getTimestamp:this.monotonicTimestampProvider.getTimestamp,storage:this.storage})).then(function(){var e=(0,o.Z)(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,D.Z)({response:t,dustLogUtility:h}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(function(){var e=(0,o.Z)(y().mark((function e(r){var i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.processExtensions(r,t);case 2:return i=e.sent,e.abrupt("return",H(H({},r),{},{extensions:i}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){h.log()}))}},{key:"refreshToken",value:function(e){var t=this,n={options:f.Types.object({request:f.Types.instanceStrict(M.Z),reason:f.Types.nonEmptyString.optional,logTransaction:f.Types.instanceStrict(L.Z)})};(0,f.typecheck)(this,"refreshToken",n,arguments);var r=this.logger,i=this.httpClient,a=this.config,s=this.apiKey,c=e.request,u=e.reason,l=e.logTransaction,p=a.endpoints,d=u?{reason:u}:void 0,v=S.refreshToken,m=p[v],b=Q.refreshToken,T=new g.Z({logger:r,source:this.toString(),urn:b,payload:{url:m.href,method:N.Z.POST},data:d,endpointKey:v,logTransaction:l}),P=this.accessStorage.getAccess(),E=(null==P?void 0:P.context.accessTokenType)!==h.TV.Device,Z={endpoint:m,request:c,apiKey:s,logger:r,httpClient:i,enableADRT:E};return r.info(this.toString(),"Send custom query to refresh a token"),k.Z.refreshToken(Z).then((0,K.Z)({getTimestamp:this.monotonicTimestampProvider.getTimestamp,storage:this.storage})).then(function(){var e=(0,o.Z)(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,D.Z)({response:t,dustLogUtility:T}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(function(){var e=(0,o.Z)(y().mark((function e(n){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.processExtensions(n,l);case 2:return r=e.sent,e.abrupt("return",H(H({},n),{},{extensions:r}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){T.log()}))}},{key:"wrapTry",value:(d=(0,o.Z)(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:e.next=10;break;case 5:if(e.prev=5,e.t0=e.catch(0),this.logger.error(this.toString(),e.t0),"test"!==B.$.Test){e.next=10;break}throw e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e){return d.apply(this,arguments)})},{key:"processExtensions",value:(p=(0,o.Z)(y().mark((function e(t,n){var r,i,a,s,c,u=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},i=t.headers,a=t.data,s=(a=void 0===a?{}:a).extensions,c=void 0===s?{}:s,e.next=6,this.wrapTry((0,o.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.processDeviceGrant(c);case 2:r.deviceGrant=e.sent;case 3:case"end":return e.stop()}}),e)}))));case 6:return e.next=8,this.wrapTry((0,o.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.processToken(c,i,n);case 2:case"end":return e.stop()}}),e)}))));case 8:return e.next=10,this.wrapTry((0,o.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.processSessionInfo(c);case 2:r.sessionInfo=e.sent;case 3:case"end":return e.stop()}}),e)}))));case 10:return e.next=12,this.wrapTry((0,o.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.processAccountDelegationRefreshToken(c);case 2:r.accountDelegationRefreshToken=e.sent;case 3:case"end":return e.stop()}}),e)}))));case 12:return e.next=14,this.wrapTry((0,o.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.processFeatureFlags(c);case 2:r.featureFlags=e.sent;case 3:case"end":return e.stop()}}),e)}))));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"processDeviceGrant",value:(l=(0,o.Z)(y().mark((function e(t){var n,r,i,a,s,c,u=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=null===(n=t.sdk)||void 0===n||null===(r=n.grant)||void 0===r?void 0:r.device)){e.next=6;break}return s=i.grantType,c=i.assertion,a=new w.Z(s,c),e.next=6,this.wrapTry((0,o.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.deviceGrantStorage.saveDeviceGrant(a);case 2:case"end":return e.stop()}}),e)}))));case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"processToken",value:(i=(0,o.Z)(y().mark((function e(t,n,r){var i,o,a,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=null===(i=t.sdk)||void 0===i?void 0:i.token)){e.next=7;break}return a=n.get(q.SDK_REGION),s=H(H({},o),{},{region:a}),e.next=7,this.tokenUpdater.updateAccessToken({newAccessToken:s,shouldRefreshSessionInfo:!1,logTransaction:r});case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"processSessionInfo",value:(r=(0,o.Z)(y().mark((function e(t){var n,r,i,a=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=null===(n=t.sdk)||void 0===n?void 0:n.session)){e.next=5;break}return i=E.Z.normalizeSessionInfoFromCache(r),e.next=5,this.wrapTry((0,o.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.sessionInfoStorage.saveSessionInfo(i);case 2:case"end":return e.stop()}}),e)}))));case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"processAccountDelegationRefreshToken",value:(n=(0,o.Z)(y().mark((function e(t){var n,r,i,a,s=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null===(n=t.sdk)||void 0===n||null===(r=n.accountDelegationRefreshToken)||void 0===r?void 0:r.token,a="",!i){e.next=6;break}return a=i,e.next=6,this.wrapTry((0,o.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.accountDelegationRefreshTokenStorage.saveAccountDelegationRefreshToken(a);case 2:case"end":return e.stop()}}),e)}))));case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"processFeatureFlags",value:(t=(0,o.Z)(y().mark((function e(t){var n,r,i,a=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.sdk)||void 0===n?void 0:n.featureFlags,i={},!r){e.next=6;break}return i=r,e.next=6,this.wrapTry((0,o.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.featureFlagsStorage.saveFeatureFlags(i);case 2:case"end":return e.stop()}}),e)}))));case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Services.Orchestration.OrchestrationClient"}}]),U}(U.Z)},87501:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Orchestration.OrchestrationClientConfiguration"}}]),n}(n(88152).Z)},35924:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({enableUpdateDeviceOS:o.Types.boolean}).optional};o.typecheck.warn(this,n,arguments);var i=t||{},a=i.enableUpdateDeviceOS;this.enableUpdateDeviceOS=a||!1}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Orchestration.OrchestrationExtrasMap"}}]),e}()},23279:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({documentCode:o.Types.nonEmptyString,requiresActiveConsent:o.Types.boolean,requiresActiveReview:o.Types.boolean})};(0,o.typecheck)(this,n,arguments);var i=t.documentCode,a=t.requiresActiveConsent,s=t.requiresActiveReview;this.documentCode=i,this.requiresActiveConsent=a,this.requiresActiveReview=s}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Paywall.Assertion"}}]),e}()},21650:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t,n){(0,r.Z)(this,e);var i={campaignCode:o.Types.nonEmptyString,voucherCode:o.Types.nonEmptyString};(0,o.typecheck)(this,i,arguments),this.campaignCode=t,this.voucherCode=n}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Paywall.Campaign"}}]),e}()},88141:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({length:o.Types.number,price:o.Types.number,unit:o.Types.nonEmptyString})};(0,o.typecheck)(this,n,arguments);var i=t.length,a=t.price,s=t.unit;this.length=i,this.price=a,this.unit=s}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Paywall.IntroPrice"}}]),e}()},87131:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(15671),i=n(43144),o=(n(69826),n(41539),n(26833),n(67682)),a=n(23279),s=n(87968),c=n(26151),u={subscriptionId:o.Types.nonEmptyString,sourceType:o.Types.nonEmptyString,sourceProvider:o.Types.nonEmptyString,partnerPurchaseSupport:o.Types.boolean},l=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({accountEntitlementContext:o.Types.nonEmptyString,paywallHash:o.Types.nonEmptyString,products:o.Types.array.of.instanceStrict(s.Z),assertions:o.Types.array.of.instanceStrict(a.Z),reason:o.Types.nonEmptyString,currentSubscription:o.Types.object(u).optional})};(0,o.typecheck)(this,n,arguments);var i=t.accountEntitlementContext,l=t.paywallHash,p=t.products,d=t.assertions,y=t.reason,f=t.currentSubscription;this.accountEntitlementContext=i,this.paywallHash=l,this.products=p,this.assertions=d,this.reason=Object.values(c.Z).find((function(e){return e===y}))||c.Z.other,this.currentSubscription=f}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Paywall.Paywall"}}]),e}()},64504:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}}),n(12419);var r,i=n(15671),o=n(43144),a=n(97326),s=n(2291),c=n(60136),u=n(82963),l=n(61120),p=(n(41539),n(39714),n(21249),n(67682)),d=n(17563),y=n(24965),f=n(1206),h=n(84983),v=n(23279),g=n(87131),m=n(88144);!function(e){e.paywall="paywall"}(r||(r={}));var b=r,T=n(87968),k=n(52662),S=n(29466),P=n(70928),E=n(69867),Z=n(40064);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var D=h.Z.services.paywall.paywallClient,C=function(e){(0,c.Z)(n,e);var t=w(n);function n(e){var r;(0,i.Z)(this,n),r=t.call(this,e);var o=p.Types.object({config:p.Types.instanceStrict(m.Z)});return(0,p.typecheck)((0,a.Z)(r),o,arguments),r.logger.log(r.toString(),"Created."),r}return(0,o.Z)(n,[{key:"getPaywall",value:function(e,t,r,i){var o={accessToken:p.Types.instanceStrict(P.Z),logTransaction:p.Types.instanceStrict(k.Z),purchaseContextId:p.Types.nonEmptyString.optional,purchaseContext:p.Types.nonEmptyString.optional};(0,p.typecheck)(this,"getPaywall",o,arguments);var a=this.logger,c=b.paywall,u=this.getPayload({accessToken:e,endpointKey:c,data:{purchaseContext:i,purchaseContextId:r}}),d=new f.Z({logger:a,source:this.toString(),urn:D.getPaywall,payload:u,endpointKey:c,logTransaction:t});return(0,s.Z)((0,l.Z)(n.prototype),"request",this).call(this,{payload:u,dustLogUtility:d,resultMapper:function(e){var t=e.data,n=t.paywallHash,r=t.skus,i=t.reason,o=t.context,a=t.assertions,s=t.currentSubscription,c=r.map((function(e){return T.Z.parse(e)})),u=a.map((function(e){return new v.Z(e)}));return new g.Z({accountEntitlementContext:o,paywallHash:n,products:c,assertions:u,reason:i,currentSubscription:s})}})}},{key:"getPayload",value:function(e){var t=e.accessToken,n=e.endpointKey,r=e.body,i=e.data,o=void 0===i?{}:i,a=e.bodyType,s=this.config.endpoints[n],c=s.href,u=s.headers,l=s.method,p=r?JSON.stringify(r):"",f=(0,S.Z)(c,d.stringify(o)),h=(0,y.Z)({Authorization:function(){return{replacer:"{accessToken}",value:t.token}}},u);return{url:f,method:l,body:p,bodyType:a,headers:new E.Z(h)}}},{key:"toString",value:function(){return"SDK.Services.Paywall.PaywallClient"}}]),n}(Z.Z)},88144:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Paywall.PaywallClientConfiguration"}}]),n}(n(88152).Z)},80194:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({sourceType:o.Types.nonEmptyString,sourceProvider:o.Types.nonEmptyString,paymentPeriod:o.Types.nonEmptyString})};(0,o.typecheck)(this,n,arguments);var i=t.sourceType,a=t.sourceProvider,s=t.paymentPeriod;this.sourceType=i,this.sourceProvider=a,this.paymentPeriod=s}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Paywall.PaywallSubscription"}}]),e}()},87968:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(4942),i=n(15671),o=n(43144),a=(n(68309),n(47941),n(82526),n(57327),n(41539),n(38880),n(54747),n(49337),n(67682)),s=n(21650),c=n(88141),u=n(80194),l=n(73812);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(){function e(t){(0,i.Z)(this,e);var n={options:a.Types.object({name:a.Types.nonEmptyString,productType:a.Types.in(l.Z),sku:a.Types.nonEmptyString,entitlements:a.Types.array.of.nonEmptyString,campaign:a.Types.instanceStrict(s.Z).optional,introPrice:a.Types.instanceStrict(c.Z).optional,subscriptionId:a.Types.nonEmptyString.optional,groups:a.Types.array.of.nonEmptyString.optional,subscription:a.Types.instanceStrict(u.Z).optional,offerId:a.Types.nonEmptyString.optional,paywallEvent:a.Types.nonEmptyString.optional,purchaseBehavior:a.Types.nonEmptyString.optional})};(0,a.typecheck)(this,n,arguments);var r=t||{},o=r.name,p=r.productType,d=r.sku,y=r.entitlements,f=r.campaign,h=r.introPrice,v=r.subscriptionId,g=r.groups,m=r.subscription,b=r.offerId,T=r.paywallEvent,k=r.purchaseBehavior;this.campaign=f||null,this.entitlements=y,this.groups=g,this.introPrice=h||null,this.name=o,this.productType=p,this.sku=d,this.subscription=m,this.offerId=b,this.subscriptionId=v||null,this.paywallEvent=T,this.purchaseBehavior=k}return(0,o.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Paywall.Product"}}],[{key:"parse",value:function(t){var n,r=t.campaign,i=t.introPrice,o=t.subscription,l=t.subscriptionId,p=r||{},y=p.campaignCode,f=p.voucherCode,h=i||{},v=h.unit,g=h.price,m=h.length,b=o||{},T=b.sourceType,k=b.sourceProvider,S=b.subscriptionPeriod,P=null,E=null,Z=null;return a.Check.assigned(y)&&a.Check.assigned(f)&&(P=new s.Z(y,f)),a.Check.assigned(v)&&a.Check.assigned(g)&&a.Check.assigned(m)&&(E=new c.Z({length:m,price:g,unit:v})),a.Check.assigned(T)&&a.Check.assigned(k)&&a.Check.assigned(S)&&(n=new u.Z({sourceType:T,sourceProvider:k,paymentPeriod:S})),a.Check.assigned(l)&&(Z=l),new e(d(d({},t),{},{campaign:P,introPrice:E,subscription:n,subscriptionId:Z}))}}]),e}()},73812:function(e,t){"use strict";var n;!function(e){e.D2C="D2C",e.IAP="IAP"}(n||(n={})),t.Z=n},26151:function(e,t){"use strict";var n;!function(e){e.other="other",e.comingSoon="comingSoon",e.platformUnavailable="platformUnavailable",e.purchaseAllowed="purchaseAllowed",e.purchased="purchased",e.blockout="blockout",e.expired="expired"}(n||(n={})),t.Z=n},88681:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}}),n(41539),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(4942),i=n(15671),o=n(43144),a=n(60136),s=n(82963),c=n(61120),u=(n(73210),n(68309),n(92222),n(36109)),l=n(9310),p=function(){function e(t){(0,i.Z)(this,e);var n=t||{},r=n.applicationRuntime,o=n.applicationRuntimeConfigSegment,a=n.applicationVersion,s=n.platform,c=n.deviceFamily,u=n.deviceProfile,p=n.deviceRuntimeProfile,d=n.configVersion,y=n.device;this.applicationRuntime=r||"",this.applicationVersion=a||"",this.deviceFamily=c||"browser",this.deviceFamilyOverride="javascript",this.deviceProfile=u||"",this.deviceRuntimeProfile=p||"",this.configVersion=d||l.$y,this.platform=s||"",this.device=y,this.applicationRuntimeConfigSegment=o||this.applicationRuntime}return(0,o.Z)(e,[{key:"constructedPlatformIdentifier",get:function(){return"".concat(this.deviceFamilyOverride,"/").concat(this.deviceProfile||"fallbackDeviceProfile","/").concat(this.applicationRuntime||"fallbackApplicationRuntime")}},{key:"sdkVersion",get:function(){return u.Z.versionShort}},{key:"toString",value:function(){return"SDK.Services.Providers.BaseEnvironmentConfiguration"}}]),e}(),d=n(37892);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var v=function(e){(0,a.Z)(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.Z)(this,n);var r=e.userAgent,o=e.deviceProfile,a=e.deviceRuntimeProfile,s=e.applicationRuntime,c=e.platform,u=new d.Z(r);return o&&""!==o.trim()||(o=u.is.desktop||u.is.tablet||u.is.phone||u.is.tesla?u.details.name:u.is.smarttv||u.is.connecteddevice?u.details.family:"fallbackDeviceProfile"),a&&""!==a.trim()||(a=u.platformVersion||"fallbackRuntimeProfile"),s&&""!==s.trim()||(s=u.is.desktop||u.is.tablet||u.is.phone||u.is.tesla?u.browser:u.is.smarttv||u.is.connecteddevice?u.details.name:"fallbackApplicationRuntime"),c&&""!==c.trim()||(c=u.platform),t.call(this,f(f({},e),{},{deviceProfile:o,deviceRuntimeProfile:a,applicationRuntime:s,platform:c,device:u}))}return(0,o.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Providers.Browser.EnvironmentConfiguration"}}]),n}(p)},49636:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(2291),c=n(60136),u=n(82963),l=n(61120),p=n(87757),d=n.n(p),y=(n(41539),n(39714),n(67682)),f=n(19496),h=n(81763);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var b=function(e){(0,c.Z)(r,e);var t,n=m(r);function r(e){var t;(0,o.Z)(this,r);var i=e.logger,a=e.tokenUpdater,s=e.fetch,c=e.Request,u=e.Headers;return(t=n.call(this,i,a)).fetch=s,t.Request=c,t.Headers=u,t.logger.log(t.toString(),"Created Browser Provider."),t}return(0,a.Z)(r,[{key:"getResponseData",value:(t=(0,i.Z)(d().mark((function e(){var t,n,i,o,a,c,u=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},n=u.length>1&&void 0!==u[1]?u[1]:null,i=u.length>2?u[2]:void 0,o=y.Check.assigned(n),a="arrayBuffer"===n,c=y.Check.assigned(t.arrayBuffer),!(o&&a&&c)){e.next=11;break}return e.next=9,t.arrayBuffer();case 9:return e.t0=e.sent,e.abrupt("return",{data:e.t0,dataType:"arrayBuffer"});case 11:return e.abrupt("return",(0,s.Z)((0,l.Z)(r.prototype),"getResponseData",this).call(this,t,n,i));case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"rawFetch",value:function(e){var t=e.url,n=e.headers,r=e.method,i=null==r?void 0:r.toUpperCase();i!==h.Z.GET&&i!==h.Z.HEAD||delete e.body;var o=new this.Request(t,g(g({},e),{},{headers:new this.Headers(n.headers)}));return this.fetch(o)}},{key:"toString",value:function(){return"SDK.Services.Providers.Browser.HttpClientBase"}}]),r}(f.Z)},22221:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}}),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120),c=(n(41539),n(39714),n(89565)),u=n(40467),l=n(20987),p=n(26251),d=n(95292),y=n(88366),f=n(39695);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var v=function(e){(0,o.Z)(n,e);var t=h(n);function n(e){var i,o,a;(0,r.Z)(this,n);var s=e.logger,c=e.useMemoryFirst,h=void 0===c||c;if((0,l.Z)()){var v=(0,u.Z)().localStorage;o=new p.Z(v),o=new f.Z(o)}return o?a=h?new y.Z(o):o:(s.warn("Storage","No local storage implementation detected. Using memory storage"),a=new d.Z),(i=t.call(this,{logger:s,store:a})).logger.log(i.toString(),"Created Browser Provider."),i}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Providers.Browser.Storage"}}]),n}(c.Z)},37892:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var r=n(15671),i=n(43144),o=(n(74916),n(4723),n(15306),n(41539),n(54747),n(47941),n(47042),n(23123),n(69600),n(67682)),a=(n(24603),n(39714),"(ip[honead]+)(?:.*os\\s([\\w]+)*\\slike\\smac|;\\sopera)"),s="\\((bb)(10);|(blackberry)\\w*\\/?([\\w\\.]+)*|Rim",c="(android)[\\/\\s-]?([\\w\\.]+)*",u="(windows\\sphone(?:\\sos)*|windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)",l="(Linux)(?!.*(?:Android|Tizen|CrKey|Tivo|Web[0|O]S))[\\/\\s]([\\w\\.]+)",p="(mac\\sos\\sx)\\s?([\\w\\s\\.]+\\w)*",d="(cros)\\s[\\w]+\\s([\\w\\.]+\\w)",y="Trident(?:.*?Touch(?:.*?Mobile))",f="(CrKey)[\\/\\s]([\\w\\.]+)",h="(Tesla|QtCarBrowser)",v="(NetCast)[\\/\\s]([\\w\\.]+)",g="(Tizen)[\\/\\s]([\\w\\.]+)",m="(Web[0|O]S)(?!Linux)[\\/\\s-]?([\\w\\.]+)*",b="(?:"+[p,u,l,d].join("|")+"(?!.*(Tizen|SMART-TV|Tivo|Web[0|O]S)))",T={desktop:"desktop",other:"desktop",phone:"phone",tablet:"tablet",smarttv:"smarttv",connecteddevice:"connecteddevice"};function k(e,t){return new RegExp(e,t||"i")}var S=[{family:"microsoft",regExes:[k("(edg/)"),k("[\\s\\(;](xbox(?:\\sone)?)[\\s\\);]"),k("(windows\\sphone|windows\\smobile|windows)(?!.*(?:xbox|WPDesktop))"),k("(?:windows).+(WPDesktop)")],groupIndex:1,done:function(e){return"edg/"===(e=e.toLowerCase())?e="chromium":-1!==["windows","windows phone","windows mobile","wpdesktop"].indexOf(e)&&(e="windows"),e}},{family:"apple",regExes:[k(a),k(p)],groupIndex:1},{family:"amazon",regExes:[k("(kf[A-z]+)\\sbuild\\/[\\w\\.]+.*silk\\/")],groupIndex:1,done:function(e){return"kftt"===e.toLowerCase()&&(e="kindle fire"),e}},{family:"samsung",regExes:[k("(?:Smart-TV|Linux).+(Tizen).+(?:TV)?"),k("(?:Smart-TV).+(Maple)"),k("((s[cgp]h-\\w+|gt-\\w+|galaxy\\snexus|sm-n900))")],groupIndex:1,done:function(e){return e=e.toLowerCase(),/^(s[cgp]h-|gt-|galaxy\snexus|sm-n)/gi.test(e)?e="galaxy":"tizen"===e&&(e="tizenbrowser"),e}},{family:"google",regExes:[k(f),k(d)],groupIndex:1,done:function(e){return"crkey"===(e=e.toLowerCase())?e="chromecast":"cros"===e&&(e="chromium"),e}},{family:"blackberry",regExes:[k("(PlayBook|Blackberry 9900|BB10)")],groupIndex:1,done:function(e){return"blackberry 9900"===(e=e.toLowerCase())&&(e="bold"),e}},{family:"tesla",regExes:[k(h)],groupIndex:1},{family:"sony",regExes:[k("(SonyCEBrowser)")],groupIndex:1,done:function(e){return"sonycebrowser"===(e=e.toLowerCase())&&(e="sonybraviabrowser"),e}},{family:"panasonic",regExes:[k("(Viera)")],groupIndex:1,done:function(e){return"viera"===(e=e.toLowerCase())&&(e="panasonictvbrowser"),e}},{family:"lg",regExes:[k("(Web[0|O]S).*(?:SmartTV)"),k("(NetCast).*(?:TV)")],groupIndex:1,done:function(e){return"web0s"===(e=e.toLowerCase())||"webos"===e?e="webosbrowser":"netcast"===e&&(e="netcastbrowser"),e}},{family:"android",regExes:[k(c)],groupIndex:1},{family:"linux",regExes:[k(l)],groupIndex:1}],P={IOS:k(a),WINDOWSPHONE:k([y,"windows phone","WPDesktop"].join("|")),WINDOWS:k(u),ANDROID:k(c),MACINTOSH:k(p),CHROMECAST:k(f),CHROMEBOOK:k(d),BLACKBERRY:k(s),TESLA:k(h),TIZEN:k(g),NETCAST:k(v),PANASONICTV:k("(Viera)[\\/\\s]([\\w\\.]+)"),SONYBRAVIA:k("(SonyCEBrowser)[\\/\\s]([\\w\\.]+)"),WEBOS:k(m),LINUX:k(l)},E={IOS:k(a),WINDOWSPHONE:k(u),WINDOWS:k(u),ANDROID:k(c),MACINTOSH:k(p),CHROMECAST:k(f),CHROMEBOOK:k(d),BLACKBERRY:k(s),TESLA:k(h),TIZEN:k(g),NETCAST:k(v),PANASONICTV:k("(Viera)[\\/\\s]([\\w\\.]+)"),SONYBRAVIA:k("(SonyCEBrowser)[\\/\\s]([\\w\\.]+)"),WEBOS:k(m),LINUX:k(l)},Z={ANDROID:k("(?:android).+version\\/([\\w\\.]+)\\s+(?:mobile\\s?safari|safari)"),MSIE:[k("(?:ms|\\()(?:ie)[\\/\\s]([\\w\\.]+)"),k("(?:trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko")],EDGE:k("(?:edge|edg)\\/((\\d+)?[\\w\\.]+)"),CHROME:[k("(?:chrome)\\/v?([\\w\\.]+)"),k("(?:(?:android.+)crmo|crios)\\/([\\w\\.]+)")],FIREFOX:k("(?:firefox|FxiOS)\\/([\\w\\.-]+)"),OPERA:[k("(?:opera(?!.*?mini)\\s[mobiletab]+).+version\\/([\\w\\.-]+)"),k("(?:opera(?!.*?mini)).+version\\/([\\w\\.]+)"),k("(?:opera(?!.*?mini))[\\/\\s]+([\\w\\.]+)"),k("(?:OPiOS)[\\/\\s]+([\\w\\.]+)")],OPERAMINI:k("(?:opera\\smini)\\/([\\w\\.-]+)"),SILK:k("(?:silk)\\/([\\w\\.-]+)"),SAFARI:k("version\\/([\\w\\.]+).+?(?:mobile\\s?safari|safari)"),PHANTOMJS:k("(?:PhantomJS)\\/([\\w\\.-]+)")},w={WEBKIT:k("AppleWebKit"),GECKO:k("gecko"),TRIDENT:k("trident"),EDGE:k("Edge")},D={default:{tablet:k("("+["Tablet|iPad","\\sNT.*?"+y,c+"(?!.*Mobi)","silk",s+".*?Tablet"].join("|")+")"),phone:k("("+["Mobi|Mobile",a,y,s].join("|")+")"),smarttv:k("("+["Tizen","SMART-TV","SmartTV","NetCast","Viera"].join("|")+")"),connecteddevice:k("("+["CrKey","Tivo","SonyCEBrowser"].join("|")+")"),desktop:k(b)},ms:{tablet:k("("+["Tablet|iPad","\\sNT.*?"+y,c+"(?!.*Mobi)","silk",s+".*?Tablet","xbox"].join("|")+")"),phone:k("("+["Mobi|Mobile","WPDesktop",a,y,s].join("|")+")"),smarttv:k("("+["Tizen","SMART-TV","NetCast","Viera"].join("|")+")"),connecteddevice:k("("+["Xbox","CrKey","Tivo","SonyCEBrowser"].join("|")+")"),desktop:k("(?:Windows NT(?!.*WPDesktop)(?!.*Xbox))")}},C={constants:{OPEN:"(",CLOSE:")",CASE:"i",PIPE:"|",OTHER:"desktop",VERSION:"version",FORMFACTORS:T},re:k,devices:S,platforms:P,platformVersion:E,browser:Z,browserCore:w,formFactor:D},A=C.constants.OTHER,R=C.constants.VERSION,x=C.constants.FORMFACTORS,O=function(){function e(t){var n;(0,r.Z)(this,e);var i={userAgent:o.Types.nonEmptyString.optional};(0,o.typecheck)(this,i,arguments),t=null!==(n=t)&&void 0!==n?n:window.navigator.userAgent,this.userAgent=t,this.is={},this.details=this.getDeviceDetails(),this.platform=this.getPlatform(),this.platformVersion=this.getPlatformVersion(),this.browser=this.getBrowser(),this.browserVersion=this.getBrowserVersion(),this.formFactor=this.getFormFactor(),this.browserLanguage=this.getBrowserLanguage()}return(0,i.Z)(e,[{key:"getDeviceDetails",value:function(){for(var e=null,t=0;t<C.devices.length;t++){for(var n=C.devices[t],r=0;r<n.regExes.length;r++){var i=n.regExes[r],o=this.match(i,n.groupIndex);if(o){n.done&&(o=n.done(o)),e={family:n.family,name:o.toLowerCase().replace(/(\s|-|_)/gi,"")};break}}if(e)break}return e||{family:"default",name:"default"}}},{key:"match",value:function(e,t){return this.safeArray(e.exec(this.userAgent),t)||""}},{key:"test",value:function(e){var t,n=this,r=this.userAgent,i="";return Object.keys(e).forEach((function(o){var a,s=e[o];if(Array.isArray(s))for(var c=0;c<s.length&&!(t=s[c].test(r));c++);else t=s.test(r);o=o.toLowerCase(),n.is[o]=null!==(a=n.is[o])&&void 0!==a?a:t&&!i,t&&!i&&(i=o)})),i}},{key:"getPlatform",value:function(){return this.test(C.platforms)||A}},{key:"getPlatformVersion",value:function(){var e="";switch(this.platform&&this.platform!==A&&(e=this.match(C.platformVersion[this.platform.toUpperCase()],2)||R),!0){case this.is.android:case this.is.ios:case this.is.macintosh:e=this.version(e);break;case this.is.windows:case this.is.windowsphone:e=this.windowsVersion(e)}return e}},{key:"getBrowser",value:function(){return this.test(C.browserCore),this.test(C.browser)||A}},{key:"getBrowserVersion",value:function(){var e="";if(this.browser){var t=C.browser[this.browser.toUpperCase()];if(t)if(Array.isArray(t))for(var n=0;n<t.length&&""===(e=this.match(t[n],1));n++);else e=this.match(t,1)}return this.version(e)}},{key:"getFormFactor",value:function(){var e={},t=x;return e=this.is.msie?C.formFactor.ms:C.formFactor.default,t[this.test(e)]||t.other}},{key:"getBrowserLanguage",value:function(){for(var e,t=["language","browserLanguage","systemLanguage","userLanguage"],n=0;n<t.length;n++)if(e=window.navigator[t[n]])return e;return null}},{key:"version",value:function(e){var t=e.split(/[._]/).slice(0,3);return e&&t.length<2&&t.push("0"),t.join(".")}},{key:"safeArray",value:function(e,t){return e&&t?e[t]:e}},{key:"windowsVersion",value:function(e){var t;return null!==(t={"NT 6.0":"vista","NT 6.1":"7.0","NT 6.2":"8.0","NT 6.3":"8.1","NT 6.4":"10.0","NT 10.0":"10.0"}[e])&&void 0!==t?t:e}},{key:"toString",value:function(){return"SDK.Services.Providers.Device"}}]),e}()},14008:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r,i,o,a=n(15671),s=n(43144),c=n(67682),u=function(){function e(){(0,a.Z)(this,e)}return(0,s.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Providers.PlatformProviders"}}],[{key:"setProviders",value:function(t){var n={options:c.Types.object({EnvironmentConfiguration:c.Types.function,HttpClient:c.Types.function,Storage:c.Types.function})};(0,c.typecheck)(e,"setProviders",n,arguments);var a=t.EnvironmentConfiguration,s=t.HttpClient,u=t.Storage;r=a,i=s,o=u}},{key:"EnvironmentConfiguration",get:function(){if(!r)throw new Error("EnvironmentConfiguration provider not specified");return r}},{key:"HttpClient",get:function(){if(!i)throw new Error("HttpClient provider not specified");return i}},{key:"Storage",get:function(){if(!o)throw new Error("Storage provider not specified");return o}}]),e}()},19496:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}}),n(47941),n(57327),n(38880),n(54747),n(49337);var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(87757),c=n.n(s),u=(n(41539),n(39714),n(88674),n(68309),n(92222),n(26699),n(82526),n(41817),n(32023),n(74916),n(15306),n(67682)),l=n(87891),p=n(73492),d=n(80540),y=n(70187),f=n(9344),h=n(69867),v={url:u.Types.string.optional,headers:u.Types.instanceStrict(h.Z),body:u.Types.skip,bodyType:u.Types.string.optional,credentials:u.Types.string.optional,method:u.Types.string.optional,mode:u.Types.string.optional,tuningOptions:u.Types.object({ignoreRequestIdValidation:u.Types.boolean.optional}).optional,preJsonParseProcessor:u.Types.function.optional},g=n(83668),m=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,b=n(5301);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(){function e(t,n){(0,o.Z)(this,e);var r={logger:u.Types.instanceStrict(l.Z),tokenUpdater:u.Types.instanceStrict(p.Z)};(0,u.typecheck)(this,r,arguments),this.optionsBaseline={url:""},this.optionsMismatchError="Options do not match expected input",this.logger=t,this.tokenUpdater=n,this.regionHeader=g.SDK_REGION,"test"===f.$.Test&&(this.testRetryCount=0),this.logger.log(this.toString(),"Created Core Provider.")}var t,n,r,s;return(0,a.Z)(e,[{key:"request",value:(s=(0,i.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetchRequest(k({},t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"getResponseData",value:(r=(0,i.Z)(c().mark((function e(t,n,r){var i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="text",e.prev=1,e.next=4,t.text();case 4:i=e.sent,o="text",r&&(this.logger.trace(this.toString(),"preJsonParseProcessor Before"),this.logger.trace(this.toString(),i),i=r(i),this.logger.trace(this.toString(),"preJsonParseProcessor After"),this.logger.trace(this.toString(),i)),i=JSON.parse(i),o="json",e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:return e.abrupt("return",{data:i,dataType:o});case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(e,t,n){return r.apply(this,arguments)})},{key:"onError",value:function(e,t){"test"===f.$.Test&&(console.log("DEBUG: HTTP fetch options",t),console.error("DEBUG: Error",e));var n=y.Z.common.network;return Promise.reject((0,b.Kf)({code:e.name,description:e.message,exceptionData:n}))}},{key:"fetchRequest",value:(n=(0,i.Z)(c().mark((function e(t){var n,r,i,o,a,s,l,p,d,y,h,m,b,T=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(T.length>1&&void 0!==T[1])||T[1],i={options:u.Types.object(v),retry:u.Types.boolean.optional},(0,u.typecheck)(this,i,T),"test"===f.$.Test&&!0!==(null===(n=t.tuningOptions)||void 0===n?void 0:n.ignoreRequestIdValidation)&&this.validateHeadersForRequestId(t.headers),e.prev=3,o=Date.now(),e.next=7,this.rawFetch(t);case 7:return a=e.sent,s=Date.now(),l=s-o,e.next=12,this.getResponseData(a,t.bodyType,t.preJsonParseProcessor);case 12:if(p=e.sent,d=a.status,y=a.headers,h=p.data,m=y.get(g.REFRESH_ACCESS_TOKEN),b={url:t.url,status:d,headers:y,data:h,requestStartTime:o,requestEndTime:s,requestDuration:l},!r){e.next=32;break}return e.next=20,this.isTokenInvalidatedBasedOnErrorResponse({status:d,dataWrapper:p});case 20:if(!e.sent){e.next=25;break}return e.next=24,this.applyNewTokenToHeaders(t.headers);case 24:return e.abrupt("return",this.fetchRequest(t,!1));case 25:if("test"!==f.$.Test){e.next=32;break}if(this.testRetryCount++,!this.requestTimedOut({status:a.status,dataWrapper:p})){e.next=32;break}return console.log("**************************************"),console.log("* TIMEOUT DETECTED RETRYING REQUEST..."),console.log("**************************************"),e.abrupt("return",this.fetchRequest(t,this.testRetryCount<4));case 32:if("true"!==m){e.next=35;break}return e.next=35,this.tokenUpdater.refreshAccessToken({forceRefresh:!0,reason:"".concat(g.REFRESH_ACCESS_TOKEN," set to true.")});case 35:return e.abrupt("return",b);case 38:return e.prev=38,e.t0=e.catch(3),e.abrupt("return",this.onError(e.t0,t));case 41:case"end":return e.stop()}}),e,this,[[3,38]])}))),function(e){return n.apply(this,arguments)})},{key:"validateHeadersForRequestId",value:function(e){var t,n=e.get(g.REQUEST_ID);if(t=n,!m.test(t||""))throw new Error("".concat(g.REQUEST_ID," is required to be a guid, actual value: ").concat(n))}},{key:"isTokenInvalidatedBasedOnErrorResponse",value:(t=(0,i.Z)(c().mark((function e(t){var n,r,i,o,a,s,u,l,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.status,r=t.dataWrapper,i=401===n,o="json"===r.dataType,!i||!o){e.next=16;break}if(e.prev=4,u=null==r||null===(a=r.data)||void 0===a||null===(s=a.errors)||void 0===s?void 0:s[0],l=u&&"access-token.invalid"===u.code,p=["auth.invalidated","auth.expired"],!l||!p.includes(u.description)&&!p.includes(u.reason)){e.next=11;break}return this.logger.warn("CoreHttpClientProvider","".concat(u.code," found - going to re-try acquire token")),e.abrupt("return",!0);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),this.logger.error("Error reading JSON response",e.t0,r.data);case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,this,[[4,13]])}))),function(e){return t.apply(this,arguments)})},{key:"requestTimedOut",value:function(e){var t,n,r=e.status,i=e.dataWrapper;if(504===r)return!0;var o="json"===(null==i?void 0:i.dataType),a=null==i||null===(t=i.data)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.length;if(200===r&&o&&a)try{var s=i.data.errors[0],c="graph.upstream.timeout"===s.code,u=s.description&&s.description.includes("upstream error with status '503'");if(c||u)return console.log("DEBUG: HTTP fetch options",r),console.error("DEBUG: Error",s),this.logger.warn("CoreHttpClientProvider","".concat(s.code," found - going to re-try the request")),!0}catch(e){this.logger.error("Error reading JSON response",e,i.data)}return!1}},{key:"applyNewTokenToHeaders",value:function(e){var t=this;return new Promise(function(){var n=(0,i.Z)(c().mark((function n(r,i){var o,a,s;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t.tokenUpdater&&t.tokenUpdater.once&&t.tokenUpdater.once(d.Z.TokenRefreshFailed,(function(e){i(e)})),n.next=5,t.tokenUpdater.refreshAccessToken({forceRefresh:!0});case 5:o=e.get(g.AUTHORIZATION),a=t.tokenUpdater.getAccessToken(),(s=null==a?void 0:a.token)&&o&&e.set(g.AUTHORIZATION,o.replace(/([Bb]earer ?)?(.*)/,"$1".concat(s))),r(),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),i(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e,t){return n.apply(this,arguments)}}())}},{key:"toString",value:function(){return"SDK.Services.Providers.Shared.CoreHttpClientProvider"}}]),e}()},89565:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(15861),i=n(15671),o=n(43144),a=(n(92222),n(41539),n(39714),n(40561),n(66992),n(88674),n(78783),n(33948),n(21249),n(87757)),s=n.n(a),c=n(67682),u=function(){function e(t){(0,i.Z)(this,e);var n=t.store,r=t.logger;this.store=n,this.storedKeys=[],this.logger=r}var t,n,a,u;return(0,o.Z)(e,[{key:"set",value:(u=(0,r.Z)(s().mark((function e(t,n){var r,i=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={key:c.Types.nonEmptyString,value:c.Types.skip},(0,c.typecheck)(this,"set",r,i),this.storedKeys.push(t),e.next=4,this.store.setItem(t,n);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"get",value:(a=(0,r.Z)(s().mark((function e(t){var n,r,i=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={key:c.Types.nonEmptyString},(0,c.typecheck)(this,"get",n,i),e.next=3,this.store.getItem(t);case 3:return r=e.sent,c.Check.not.assigned(r)&&this.logger.warn("Storage","".concat(this.toString(),'.get(key) reference cache key "').concat(t,'" does not exist')),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"remove",value:(n=(0,r.Z)(s().mark((function e(t){var n,r=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={key:c.Types.nonEmptyString},(0,c.typecheck)(this,"remove",n,r),this.storedKeys.splice(this.storedKeys.indexOf(t),1),e.next=4,this.store.removeItem(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"clear",value:(t=(0,r.Z)(s().mark((function e(){var t=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.storedKeys.map(function(){var e=(0,r.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.store.removeItem(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:this.storedKeys=[];case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Services.Providers.Shared.CoreStorageProvider"}}]),e}()},83668:function(e,t,n){"use strict";n.d(t,{AMZ_CF_ID:function(){return r},AMZ_CF_POP:function(){return i},APPLICATION_VERSION:function(){return o},AUTHORIZATION:function(){return a},BROWSER_INFO:function(){return s},BYPASS_CDN_CACHE:function(){return c},CONTENT_TRANSACTION_ID:function(){return u},CONTENT_TYPE:function(){return l},CTF_UBA_ID:function(){return p},DELOREAN:function(){return d},EVENT_TRANSPORT_TIMESTAMP:function(){return y},GENERATE_ADRT:function(){return f},GEO_OVERRIDE:function(){return h},HORA_PROXY:function(){return v},PLAYBACK_EXPERIENCE_CONTEXT:function(){return g},PURCHASE_PLATFORM:function(){return m},RATE_LIMIT_DURATION:function(){return b},REFRESH_ACCESS_TOKEN:function(){return T},REPLY_AFTER:function(){return k},REQUEST_ID:function(){return S},SALES_PLATFORM:function(){return P},SDK_ERROR:function(){return E},SDK_PLATFORM:function(){return Z},SDK_REGION:function(){return w},SDK_VERSION:function(){return D},TEMPORARY_ACCESS_GRANTED:function(){return C}});var r="x-amz-cf-id",i="x-amz-cf-pop",o="X-Application-Version",a="Authorization",s="X-BAMTech-Browser-Info",c="X-CDN-No-Cache",u="X-Content-Transaction-ID",l="Content-Type",p="X-BAMTECH-CTF-UBA-ID",d="X-DELOREAN",y="X-BAMTECH-Event-Transport-Timestamp",f="X-BAMTech-Generate-ADRT",h="X-GEO-OVERRIDE",v="X-BAMTech-Hora-Proxy",g="X-Bamtech-Playback-Experience-Context",m="X-BAMTech-Purchase-Platform",b="X-Rate-Limit-Duration",T="X-BAMTech-Refresh-Access-Token",k="x-mlbam-reply-after",S="X-Request-ID",P="X-BAMTech-Sales-Platform",E="X-BAMTECH-ERROR",Z="X-BAMSDK-Platform",w="x-bamtech-region",D="X-BAMSDK-Version",C="X-BAMTech-Temporary-Access-Granted"},69867:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(15671),i=n(43144),o=(n(41539),n(54747),n(47941),function(){function e(t){var n=this;(0,r.Z)(this,e),this.headers={},Object.keys(t).forEach((function(e){n.headers[e.toLowerCase()]=t[e]}))}return(0,i.Z)(e,[{key:"get",value:function(e){return this.headers[e.toLowerCase()]}},{key:"set",value:function(e,t){this.headers[e.toLowerCase()]=t}},{key:"delete",value:function(e){delete this.headers[e.toLowerCase()]}},{key:"has",value:function(e){return"string"==typeof e&&e.toLowerCase()in this.headers}},{key:"toString",value:function(){return"SDK.Services.Providers.Shared.HttpHeaders"}}]),e}())},81350:function(e,t,n){"use strict";n.d(t,{ACCESS_KEY:function(){return l},ACCOUNT_DELEGATION_REFRESH_TOKEN_KEY:function(){return d},AUTHORIZATION_CONTEXT_KEY:function(){return p},BAM_DRM_KEY:function(){return o},CERTIFICATE_KEY:function(){return s},DEVICE_GRANT_KEY:function(){return y},DSS_DRM_KEY:function(){return a},FEATURE_FLAGS_KEY:function(){return c},SDKSESSION_CONFIGURATION_KEY:function(){return i},SERVER_TIME_KEY:function(){return r},SESSION_INFO_KEY:function(){return u}});var r="__bam_sdk_serverTime",i="__bam_sdk_sdkSession_configuration--",o="__bam_sdk_drm-",a="__dss_sdk_drm-",s="-certificate--",c="__bam_sdk_feature_flags--",u="__bam_sdk_session_info--",l="__bam_sdk_access--",p="__bam_sdk_authorization_context--",d="__bam_sdk_account_delegation_refresh_token--",y="__bam_sdk_device_grant--"},39695:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=(n(92222),n(41539),n(39714),n(67682)),u=n(10869),l=function(){function e(t){(0,i.Z)(this,e),this.store=t}var t,n,a;return(0,o.Z)(e,[{key:"setItem",value:(a=(0,r.Z)(s().mark((function e(t,n){var r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=JSON.stringify(n),e.next=4,this.store.setItem(t,r);case 4:e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),i="".concat(this.toString(),".setItem(key, value) cannot complete successfully - ").concat(e.t0),new u.Z(i);case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e,t){return a.apply(this,arguments)})},{key:"getItem",value:(n=(0,r.Z)(s().mark((function e(t){var n,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.store.getItem(t);case 3:return r=e.sent,c.Check.nonEmptyString(r)&&(n=JSON.parse(r)),e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),i="".concat(this.toString(),".getItem(key) unable to parse value - ").concat(e.t0),new u.Z(i);case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return n.apply(this,arguments)})},{key:"removeItem",value:(t=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.store.removeItem(t);case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),n="".concat(this.toString(),".removeItem(key) cannot complete successfully - ").concat(e.t0),new u.Z(n);case 9:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Services.Providers.Store.JsonStorageMiddlewareStore"}}]),e}()},26251:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=(n(92222),n(41539),n(39714),n(67682)),u=n(10869),l=function(){function e(t){(0,i.Z)(this,e),this.localStorage=t}var t,n,a;return(0,o.Z)(e,[{key:"setItem",value:(a=(0,r.Z)(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.localStorage.setItem(t,n);case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),r="".concat(this.toString(),".setItem(key, value) cannot complete successfully - ").concat(e.t0),new u.Z(r);case 9:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e,t){return a.apply(this,arguments)})},{key:"getItem",value:(n=(0,r.Z)(s().mark((function e(t){var n,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.localStorage.getItem(t);case 3:return r=e.sent,c.Check.nonEmptyString(r)&&(n=r),e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),i="".concat(this.toString(),".getItem(key) unable to parse value - ").concat(e.t0),new u.Z(i);case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return n.apply(this,arguments)})},{key:"removeItem",value:(t=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.localStorage.removeItem(t);case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),n="".concat(this.toString(),".removeItem(key) cannot complete successfully - ").concat(e.t0),new u.Z(n);case 9:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Services.Providers.Store.LocalStore"}}]),e}()},88366:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=(n(66992),n(41539),n(88674),n(78783),n(33948),n(92222),n(39714),n(67682)),u=n(95292),l=n(10869),p=function(){function e(t){(0,i.Z)(this,e),this.memoryStore=new u.Z,this.platformStore=t}var t,n,a;return(0,o.Z)(e,[{key:"setItem",value:(a=(0,r.Z)(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.memoryStore.setItem(t,n),this.platformStore.setItem(t,n)]);case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),r="".concat(this.toString(),".setItem(key, value) cannot complete successfully - ").concat(e.t0),new l.Z(r);case 9:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e,t){return a.apply(this,arguments)})},{key:"getItem",value:(n=(0,r.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.memoryStore.getItem(t);case 3:if(n=e.sent,!c.Check.not.assigned(n)){e.next=8;break}return e.next=7,this.platformStore.getItem(t);case 7:n=e.sent;case 8:return e.abrupt("return",n);case 11:throw e.prev=11,e.t0=e.catch(0),r="".concat(this.toString(),".getItem(key) unable to parse value - ").concat(e.t0),new l.Z(r);case 15:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e){return n.apply(this,arguments)})},{key:"removeItem",value:(t=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.memoryStore.removeItem(t);case 3:return e.next=5,this.platformStore.removeItem(t);case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),n="".concat(this.toString(),".removeItem(key) cannot complete successfully - ").concat(e.t0),new l.Z(n);case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Services.Providers.Store.MemoryFirstStore"}}]),e}()},95292:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=function(){function e(){(0,i.Z)(this,e),this.store={}}var t,n,a;return(0,o.Z)(e,[{key:"setItem",value:(a=(0,r.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.store[t]=n;case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"getItem",value:(n=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.store[t]);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"removeItem",value:(t=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.store[t];case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Services.Providers.Store.MemoryStore"}}]),e}()},14988:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}}),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(4942),i=n(15671),o=n(43144),a=(n(41539),n(39714),n(92222),n(67682)),s=n(17563),c=n(87891),u=n(29466),l=n(66008),p=n(27747),d=n(82011);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(){function e(t){(0,i.Z)(this,e);var n={options:a.Types.object({config:a.Types.instanceStrict(l.Z),logger:a.Types.instanceStrict(c.Z)})};(0,a.typecheck)(this,n,arguments);var r=t.logger,o=t.config;this.logger=r,this.config=o,this.logger.log(this.toString(),"Created.")}return(0,o.Z)(e,[{key:"getQrCodeUrl",value:function(e){var t={params:a.Types.object(d.QRCodeQueryParamsTypedef)};(0,a.typecheck)(this,"getQrCodeUrl",t,arguments);var n=e.size,r=p.Z.main,i=this.config.endpoints,o=i[r],c=o.href,l=(0,u.Z)(c,(0,s.stringify)(f(f({},e),{},{size:"".concat(n,"x").concat(n)})));return l}},{key:"toString",value:function(){return"SDK.Services.QrCode.QrCodeClient"}}]),e}()},66008:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.QrCode.QrCodeClientConfiguration"}}]),n}(n(88152).Z)},27747:function(e,t){"use strict";var n;!function(e){e.main="main"}(n||(n={})),t.Z=n},19546:function(e,t,n){"use strict";var r,i,o,a,s,c,u,l,p,d,y,f,h,v,g,m,b,T,k,S,P,E,Z,w,D,C,A,R;n.d(t,{AdActivity:function(){return r},AdInsertionType:function(){return i},ApplicationContext:function(){return v},ApplicationProtocol:function(){return o},AudioTrackType:function(){return a},BufferType:function(){return g},ErrorLevel:function(){return m},ErrorSource:function(){return b},ExperimentPlatform:function(){return T},FetchStatus:function(){return k},HeartbeatSampleType:function(){return S},HttpMethod:function(){return P},InterstitialActivity:function(){return E},InterstitialEndedCause:function(){return Z},InterstitialInsertionType:function(){return w},InterstitialPlacement:function(){return D},InterstitialType:function(){return C},MediaFetchError:function(){return A},MediaSegmentType:function(){return R},MediaSegmentTypeMap:function(){return Q},NetworkError:function(){return x},NetworkType:function(){return O},PlaybackActivity:function(){return I},PlaybackExitedCause:function(){return M},PlaybackIntent:function(){return j},PlaybackMode:function(){return c},PlaybackPausedCause:function(){return L},PlaybackResumedCause:function(){return N},PlaybackSeekCause:function(){return B},PlaybackState:function(){return _},PlayerSeekDirection:function(){return F},PlaylistBitrateType:function(){return U},PodPosition:function(){return u},PresentationType:function(){return l},ProductType:function(){return q},QoePlaybackError:function(){return K},SeekDirection:function(){return V},SkipType:function(){return G},SnapshotDownloadDataType:function(){return y},SnapshotDownloadFailure:function(){return f},SnapshotEventType:function(){return p},SnapshotFragmentType:function(){return h},SnapshotNextAction:function(){return d},StartupActivity:function(){return H},TimedTextTrackType:function(){return s}}),function(e){e.adPodRequested="adPodRequested",e.adPodFetched="adPodFetched",e.adMultivariantFetched="adMultivariantFetched",e.adVariantFetched="adVariantFetched",e.adPlaybackStarted="adPlaybackStarted",e.adPlaybackEnded="adPlaybackEnded"}(r||(r={})),function(e){e.ssai="ssai",e.sgai="sgai",e.none="none"}(i||(i={})),function(e){e.http="http",e.https="https"}(o||(o={})),function(e){e.primary="primary",e.descriptive="descriptive",e.unknown="unknown"}(a||(a={})),function(e){e.normal="normal",e.forced="forced",e.sdh="sdh",e.cc="cc",e.unknown="unknown"}(s||(s={})),function(e){e.fullScreen="fullScreen",e.pip="pip",e.windowed="windowed"}(c||(c={})),function(e){e.preroll="preroll",e.midroll="midroll",e.postroll="postroll"}(u||(u={})),function(e){e.ad="ad",e.bumper="bumper",e.main="main",e.dubcard="dubcard",e.promo="promo",e.slug="slug",e.unknown="unknown"}(l||(l={})),function(e){e.qosFragment="qosFragment",e.qosPlaylist="qosPlaylist",e.seeking="seeking",e.seeked="seeked",e.waiting="waiting",e.canPlay="canPlay"}(p||(p={})),function(e){e.fail="fail",e.next="next",e.retry="retry"}(d||(d={})),function(e){e.audio="audio",e.multivariantPlaylist="multivariantPlaylist",e.video="video"}(y||(y={})),function(e){e.abort="abort",e.error="error",e.fragmentMissing="fragmentMissing",e.playlistNotUpdated="playlistNotUpdated",e.timeout="timeout",e.unknown="unknown"}(f||(f={})),function(e){e.init="init",e.media="media"}(h||(h={})),function(e){e.player="player",e.account="account",e.login="login",e.onboarding="onboarding",e.ad="ad"}(v||(v={})),function(e){e.initializing="initializing",e.seeking="seeking",e.resuming="resuming",e.buffering="buffering",e.rebuffering="rebuffering",e.stalePlaylist="stalePlaylist",e.segmentGap="segmentGap",e.segmentDownloadFailure="segmentDownloadFailure",e.unknown="unknown"}(g||(g={})),function(e){e.info="info",e.warn="warn",e.error="error"}(m||(m={})),function(e){e.app="app",e.player="player",e.sdk="sdk",e.service="service"}(b||(b={})),function(e){e.optimizely="optimizely",e.weaponX="weapon_x"}(T||(T={})),function(e){e.completed="completed",e.cancelled="cancelled",e.noNetwork="noNetwork"}(k||(k={})),function(e){e.periodic="periodic",e.user="user",e.responsive="responsive",e.state="state"}(S||(S={})),function(e){e.get="get",e.post="post",e.put="put",e.delete="delete",e.patch="patch",e.head="head"}(P||(P={})),function(e){e.interstitialStarted="interstitialStarted",e.interstitialEnded="interstitialEnded"}(E||(E={})),function(e){e.applicationExit="applicationExit",e.applicationBackground="applicationBackground",e.user="user",e.error="error",e.playedToEnd="playedToEnd",e.skip="skip",e.seek="seek",e.scrub="scrub"}(Z||(Z={})),function(e){e.ssai="ssai",e.sgai="sgai"}(w||(w={})),function(e){e.preroll="preroll",e.midroll="midroll",e.postroll="postroll"}(D||(D={})),function(e){e.promo="promo"}(C||(C={})),function(e){e.ageNotVerified="ageNotVerified",e.ageNotVerifiedKr="ageNotVerifiedKr",e.authenticationExpired="authenticationExpired",e.authorizationExpired="authorizationExpired",e.blackout="blackout",e.concurrency="concurrency",e.contentNotAvailable="contentNotAvailable",e.gdprConsentConflict="gdprConsentConflict",e.locationAcquisitionError="locationAcquisitionError",e.locationNotAllowed="locationNotAllowed",e.loginRequired="loginRequired",e.mediaNotAllowed="mediaNotAllowed",e.networkFailure="networkFailure",e.notEntitled="notEntitled",e.parentalControlsRestricted="parentalControlsRestricted",e.pcon="pcon",e.pinExpired="pinExpired",e.profileMissing="profileMissing",e.profilePersonalInfoMissing="profilePersonalInfoMissing",e.profilePinMissing="profilePinMissing",e.requestBlocked="requestBlocked",e.requestTemporarilyBlocked="requestTemporarilyBlocked",e.temporarilyThrottled="temporarilyThrottled",e.temporarilyUnavailable="temporarilyUnavailable",e.unexpectedError="unexpectedError",e.upgradeRequired="upgradeRequired",e.unknown="unknown"}(A||(A={})),function(e){e.video="video",e.audio="audio",e.subtitle="subtitle",e.iframe="iframe"}(R||(R={}));var x,O,I,M,j,L,N,B,_,F,U,q,K,V,H,G,Q={video:R.video,audio:R.audio,subtitles:R.subtitle,subtitle:R.subtitle,iframe:R.iframe};!function(e){e.dns="dns",e.timeout="timeout",e.notConnected="notConnected",e.prohibited="prohibited",e.unknown="unknown"}(x||(x={})),function(e){e.cellular3g="3g",e.cellular4g="4g",e.cellular5g="5g",e.wifi="wifi",e.ethernet="ethernet",e.unknown="unknown"}(O||(O={})),function(e){e.bitrateChanged="bitrateChanged",e.ended="ended",e.paused="paused",e.reattempt="reattempt",e.rebufferingEnded="rebufferingEnded",e.rebufferingStarted="rebufferingStarted",e.resumed="resumed",e.seekEnded="seekEnded",e.seekStarted="seekStarted",e.started="started",e.variantFetched="variantFetched"}(I||(I={})),function(e){e.applicationExit="applicationExit",e.applicationBackground="applicationBackground",e.user="user",e.error="error",e.playedToEnd="playedToEnd"}(M||(M={})),function(e){e.autoplay="autoplay",e.userAction="userAction",e.autoAdvance="autoAdvance",e.background="background",e.pip="pip",e.transferred="transferred",e.userActionRestartButton="userActionRestartButton",e.tileFocus="tileFocus",e.feedSwitch="feedSwitch",e.nextEpisode="nextEpisode"}(j||(j={})),function(e){e.user="user",e.stall="stall",e.applicationBackgrounded="applicationBackgrounded"}(L||(L={})),function(e){e.user="user",e.stall="stall",e.applicationForegrounded="applicationForegrounded",e.app="app"}(N||(N={})),function(e){e.app="app",e.seek="seek",e.scrub="scrub",e.skip="skip",e.startAtBookmark="startAtBookmark"}(B||(B={})),function(e){e.buffering="buffering",e.finished="finished",e.paused="paused",e.playing="playing",e.seeking="seeking",e.notready="notready"}(_||(_={})),function(e){e.forward="forward",e.backward="backward",e.same="same"}(F||(F={})),function(e){e.average="average",e.peak="peak"}(U||(U={})),function(e){e.live="Live",e.vod="VOD"}(q||(q={})),function(e){e.drmHdcp="drmHdcp",e.drmDecryption="drmDecryption",e.drmExpiredLicense="drmExpiredLicense",e.drmSecurityLevel="drmSecurityLevel",e.drmOther="drmOther",e.networkFailure="networkFailure",e.serviceError="serviceError",e.authorizationExpired="authorizationExpired",e.concurrency="concurrency",e.pcon="pcon",e.blackout="blackout",e.notEntitled="notEntitled",e.contentNotAvailable="contentNotAvailable",e.ageNotVerified="ageNotVerified",e.authenticationExpired="authenticationExpired",e.locationAcquisitionError="locationAcquisitionError",e.locationNotAllowed="locationNotAllowed",e.loginRequired="loginRequired",e.mediaNotAllowed="mediaNotAllowed",e.parentalControlsRestricted="parentalControlsRestricted",e.pinExpired="pinExpired",e.profileMissing="profileMissing",e.profilePersonalInfoMissing="profilePersonalInfoMissing",e.profilePinMissing="profilePinMissing",e.requestBlocked="requestBlocked",e.requestTemporarilyBlocked="requestTemporarilyBlocked",e.temporarilyThrottled="temporarilyThrottled",e.temporarilyUnavailable="temporarilyUnavailable",e.unexpectedError="unexpectedError",e.upgradeRequired="upgradeRequired",e.unknown="unknown",e.adBeaconError="adBeaconError",e.adServerError="adServerError",e.gdprConsentConflict="gdprConsentConflict"}(K||(K={})),function(e){e.fromLiveEdge="fromLiveEdge",e.toLiveEdge="toLiveEdge"}(V||(V={})),function(e){e.requested="requested",e.ready="ready",e.initialized="initialized",e.fetched="fetched",e.masterFetched="masterFetched",e.variantFetched="variantFetched",e.drmCertificateFetched="drmCertificateFetched",e.drmKeyFetched="drmKeyFetched",e.reattempt="reattempt",e.preparing="preparing"}(H||(H={})),function(e){e.skipIntro="skipIntro",e.skipRecap="skipRecap",e.skipGeneral="skipGeneral",e.unknown="unknown"}(G||(G={}))},40206:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(15671),i=n(43144),o=(n(19601),n(67682)),a=n(3920),s=n(67045),c=n(19546),u=n(53169),l=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({applicationContext:o.Types.in(c.ApplicationContext),isFatal:o.Types.boolean.optional,source:o.Types.in(c.ErrorSource).optional,errorLevel:o.Types.in(c.ErrorLevel).optional,errorName:o.Types.in(c.QoePlaybackError).optional,playbackSessionId:o.Types.nonEmptyString.optional,productType:o.Types.in(c.ProductType).optional,playheadPosition:o.Types.number.optional,videoBitrate:o.Types.number.optional,videoAverageBitrate:o.Types.number.optional,audioBitrate:o.Types.number.optional,maxAllowedVideoBitrate:o.Types.number.optional,segmentPosition:o.Types.number.optional,cdnName:o.Types.nonEmptyString.optional,networkType:o.Types.in(c.NetworkType).optional,liveLatencyAmount:o.Types.number.optional,errorLocalizationKey:o.Types.nonEmptyString.optional,dictionaryVersion:o.Types.nonEmptyString.optional,underlyingSdkError:o.Types.instanceStrict(a.Z).optional,errorMessage:o.Types.nonEmptyString.optional,contentKeys:o.Types.object().optional,clientGroupIds:o.Types.nonEmptyString.optional,serverGroupIds:o.Types.nonEmptyString.optional,data:o.Types.object().optional,presentationType:o.Types.in(c.PresentationType).optional,adInsertionType:o.Types.in(c.AdInsertionType).optional,hasSlugs:o.Types.boolean.optional,subscriptionType:o.Types.string.optional,adSessionId:o.Types.nonEmptyString.optional,adPodPlacement:o.Types.object(s.AdPodPlacementTypedef).optional,adPodData:o.Types.object(s.AdPodDataTypedef).optional,adSlotData:o.Types.object(s.AdSlotDataTypedef).optional,monotonicTimestamp:o.Types.number.optional,videoPlayerName:o.Types.nonEmptyString.optional,videoPlayerVersion:o.Types.nonEmptyString.optional,localMedia:o.Types.boolean.optional,interactionId:o.Types.nonEmptyString.optional,mediaFetchSucceeded:o.Types.boolean,qoe:o.Types.object().optional,maxAttainedBitrate:o.Types.number.optional,viewingEnvironment:o.Types.nonEmptyString.optional,programBoundaryInfoBlock:o.Types.nonEmptyString.optional}).optional};o.typecheck.warn(this,n,arguments);var i=t||{},l=i.applicationContext,p=i.isFatal,d=i.source,y=i.errorLevel,f=i.errorName,h=i.playbackSessionId,v=i.productType,g=i.playheadPosition,m=i.videoBitrate,b=i.videoAverageBitrate,T=i.audioBitrate,k=i.maxAllowedVideoBitrate,S=i.segmentPosition,P=i.cdnName,E=i.networkType,Z=i.liveLatencyAmount,w=i.errorLocalizationKey,D=i.dictionaryVersion,C=i.underlyingSdkError,A=i.errorMessage,R=i.clientGroupIds,x=i.serverGroupIds,O=i.contentKeys,I=i.data,M=void 0===I?{}:I,j=i.presentationType,L=i.adInsertionType,N=i.hasSlugs,B=i.subscriptionType,_=i.adSessionId,F=i.adPodPlacement,U=i.adPodData,q=i.adSlotData,K=i.monotonicTimestamp,V=i.videoPlayerName,H=i.videoPlayerVersion,G=i.localMedia,Q=i.interactionId,z=i.mediaFetchSucceeded,W=i.qoe,Y=void 0===W?{}:W,J=i.maxAttainedBitrate,X=i.viewingEnvironment,$=i.programBoundaryInfoBlock;this.applicationContext=l,this.isFatal=null!=p?p:void 0,this.source=d,this.errorId=(0,u.Z)(),this.errorLevel=y,this.errorName=this.setErrorName(l,f),this.playbackSessionId=h,this.productType=v,this.playheadPosition=Math.floor(null!=g?g:-1),this.videoBitrate=null!=m?m:0,this.videoAverageBitrate=null!=b?b:0,this.audioBitrate=null!=T?T:0,this.maxAllowedVideoBitrate=null!=k?k:0,this.segmentPosition=o.Check.number(S)?Math.floor(S):0,this.cdnName=P||"null",this.networkType=E||c.NetworkType.unknown,this.liveLatencyAmount=o.Check.number(Z)?Math.floor(Z):0,this.errorLocalizationKey=w,this.dictionaryVersion=D,this.underlyingSdkError=C,this.errorMessage=A,this.clientGroupIds=R,this.serverGroupIds=x,this.contentKeys=O||{},this.presentationType=j||c.PresentationType.unknown,this.adInsertionType=L||c.AdInsertionType.none,this.hasSlugs=N||!1,this.subscriptionType=B||"",this.adSessionId=_,this.adPodPlacement=F,this.adPodData=U,this.adSlotData=q,this.periodType="deprecated",this.monotonicTimestamp=K,this.videoPlayerName=V,this.videoPlayerVersion=H,this.interactionId=Q,this.localMedia=l===c.ApplicationContext.ad||l===c.ApplicationContext.player?G:void 0,this.mediaFetchSucceeded=null==z||z,this.maxAttainedBitrate=null!=J?J:0,this.viewingEnvironment=X,this.programBoundaryInfoBlock=$,this.setData(M),this.setData(Y)}return(0,i.Z)(e,[{key:"setData",value:function(e){o.Check.nonEmptyObject(e)&&Object.assign(this,e)}},{key:"setErrorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.QoePlaybackError.unknown;return e!==c.ApplicationContext.player&&e!==c.ApplicationContext.ad?c.QoePlaybackError.unknown:t}},{key:"toString",value:function(){return"SDK.Services.QualityOfService.ErrorEventData"}}]),e}()},94894:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}}),n(69826),n(41539),n(47941);var r=n(19546);function i(e){var t=(e||"").toLowerCase(),n=Object.keys(r.FetchStatus).find((function(e){return e.toLowerCase()===t}));return n?r.FetchStatus[n]:r.FetchStatus.completed}},25745:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(15671),i=n(43144),o=(n(19601),n(67682)),a=n(19546),s=n(67045),c=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({interstitialType:o.Types.in(a.InterstitialType),interstitialActivity:o.Types.in(a.InterstitialActivity),interstitialInsertionType:o.Types.in(a.InterstitialInsertionType),interstitialPlacement:o.Types.in(a.InterstitialPlacement),interstitialPlayhead:o.Types.number,interstitialPlannedLength:o.Types.number,interstitialId:o.Types.nonEmptyString.optional,errorData:o.Types.object(s.AdErrorDataTypedef).optional,data:o.Types.object().optional,contentKeys:o.Types.object(),interactionId:o.Types.nonEmptyString.optional,monotonicTimestamp:o.Types.number,networkType:o.Types.in(a.NetworkType),playbackSessionId:o.Types.nonEmptyString.optional,productType:o.Types.in(a.ProductType).optional,cause:o.Types.in(a.InterstitialEndedCause).optional,mediaFetchSucceeded:o.Types.boolean,videoPlayerName:o.Types.nonEmptyString.optional,videoPlayerVersion:o.Types.nonEmptyString.optional,hasSlugs:o.Types.boolean.optional,subscriptionType:o.Types.nonEmptyString.optional,programBoundaryInfoBlock:o.Types.nonEmptyString.optional,qoe:o.Types.object().optional})};o.typecheck.warn(this,n,arguments);var i=t.interstitialType,c=t.interstitialActivity,u=t.interstitialInsertionType,l=t.interstitialPlacement,p=t.interstitialPlayhead,d=t.interstitialPlannedLength,y=t.interstitialId,f=t.errorData,h=t.data,v=void 0===h?{}:h,g=t.contentKeys,m=t.interactionId,b=t.monotonicTimestamp,T=t.networkType,k=t.playbackSessionId,S=t.productType,P=t.cause,E=t.mediaFetchSucceeded,Z=t.videoPlayerName,w=t.videoPlayerVersion,D=t.hasSlugs,C=t.subscriptionType,A=t.programBoundaryInfoBlock,R=t.qoe,x=void 0===R?{}:R;this.interstitialType=i,this.interstitialActivity=c,this.interstitialInsertionType=u,this.interstitialPlacement=l,this.interstitialPlayhead=p,this.interstitialPlannedLength=d,this.interstitialId=y,this.errorData=f,this.contentKeys=g,this.interactionId=m,this.monotonicTimestamp=b,this.networkType=T,this.playbackSessionId=k,this.productType=S,this.cause=P,this.mediaFetchSucceeded=E,this.videoPlayerName=Z,this.videoPlayerVersion=w,this.hasSlugs=D,this.subscriptionType=C,this.programBoundaryInfoBlock=A,this.setData(v),this.setData(x)}return(0,i.Z)(e,[{key:"setData",value:function(e){Object.assign(this,e)}},{key:"toString",value:function(){return"SDK.Services.QualityOfService.InterstitialEventData"}}]),e}()},72462:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(19546),i={5101:r.QoePlaybackError.networkFailure,5102:r.QoePlaybackError.networkFailure,5103:r.QoePlaybackError.networkFailure,5104:r.QoePlaybackError.networkFailure,5105:r.QoePlaybackError.networkFailure,5106:r.QoePlaybackError.networkFailure,5107:r.QoePlaybackError.networkFailure,5108:r.QoePlaybackError.networkFailure,5109:r.QoePlaybackError.networkFailure,5299:r.QoePlaybackError.networkFailure,5401:r.QoePlaybackError.networkFailure,5411:r.QoePlaybackError.networkFailure,5400:r.QoePlaybackError.networkFailure,5412:r.QoePlaybackError.networkFailure,5203:r.QoePlaybackError.networkFailure,5204:r.QoePlaybackError.networkFailure,5206:r.QoePlaybackError.networkFailure,5286:r.QoePlaybackError.networkFailure,5296:r.QoePlaybackError.networkFailure,5300:r.QoePlaybackError.drmDecryption,5301:r.QoePlaybackError.drmDecryption,5302:r.QoePlaybackError.drmOther,5303:r.QoePlaybackError.drmDecryption,5304:r.QoePlaybackError.drmDecryption,5305:r.QoePlaybackError.drmOther,5306:r.QoePlaybackError.drmOther,5307:r.QoePlaybackError.drmOther,5308:r.QoePlaybackError.drmOther,5309:r.QoePlaybackError.drmOther,5310:r.QoePlaybackError.drmOther,5311:r.QoePlaybackError.drmOther,5312:r.QoePlaybackError.drmOther,5313:r.QoePlaybackError.drmOther,5314:r.QoePlaybackError.drmDecryption,5315:r.QoePlaybackError.drmHdcp,5316:r.QoePlaybackError.drmDecryption,5317:r.QoePlaybackError.drmDecryption,5318:r.QoePlaybackError.drmOther,5319:r.QoePlaybackError.drmOther,5320:r.QoePlaybackError.drmSecurityLevel,5321:r.QoePlaybackError.drmOther,5322:r.QoePlaybackError.upgradeRequired,5399:r.QoePlaybackError.drmOther,5900:r.QoePlaybackError.unexpectedError,5901:r.QoePlaybackError.unexpectedError,5903:r.QoePlaybackError.unexpectedError,5904:r.QoePlaybackError.unexpectedError,5905:r.QoePlaybackError.unexpectedError,5940:r.QoePlaybackError.unexpectedError,5950:r.QoePlaybackError.unexpectedError,5951:r.QoePlaybackError.unexpectedError,5952:r.QoePlaybackError.unexpectedError,5953:r.QoePlaybackError.unexpectedError,5954:r.QoePlaybackError.unexpectedError,5955:r.QoePlaybackError.unexpectedError,5499:r.QoePlaybackError.unexpectedError};function o(e){var t=(e||{}).code;return i[String(t)]||r.QoePlaybackError.unknown}},82209:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(15671),i=n(43144),o=(n(19601),n(67682)),a=n(73688),s=n(19546),c=n(67045),u=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({adActivity:o.Types.in(s.AdActivity).optional,adSessionId:o.Types.nonEmptyString.optional,adInsertionType:o.Types.in(s.AdInsertionType).optional,hasSlugs:o.Types.boolean.optional,subscriptionType:o.Types.string.optional,serverRequest:o.Types.instanceStrict(a.Z).optional,mediaSegmentType:o.Types.in(s.MediaSegmentType).optional,cause:o.Types.in(s.PlaybackExitedCause).optional,adPodPlacement:o.Types.object(c.AdPodPlacementTypedef).optional,adPodData:o.Types.object(c.AdPodDataTypedef).optional,adSlotData:o.Types.object(c.AdSlotDataTypedef).optional,adVideoData:o.Types.object(c.AdVideoDataTypedef).optional,adAudioData:o.Types.object(c.AdAudioDataTypedef).optional,adSubtitleData:o.Types.object(c.AdSubtitleDataTypedef).optional,adStartupData:o.Types.object(c.AdStartupDataTypedef).optional,adErrorData:o.Types.object(c.AdErrorDataTypedef).optional,playbackSessionId:o.Types.nonEmptyString.optional,productType:o.Types.in(s.ProductType).optional,networkType:o.Types.in(s.NetworkType).optional,monotonicTimestamp:o.Types.number.optional,contentKeys:o.Types.object().optional,data:o.Types.object().optional,videoPlayerName:o.Types.nonEmptyString.optional,videoPlayerVersion:o.Types.nonEmptyString.optional,interactionId:o.Types.nonEmptyString.optional,mediaFetchSucceeded:o.Types.boolean,qoe:o.Types.object().optional,viewingEnvironment:o.Types.nonEmptyString.optional,programBoundaryInfoBlock:o.Types.nonEmptyString.optional}).optional};o.typecheck.warn(this,n,arguments);var i=t||{},u=i.adActivity,l=i.adSessionId,p=i.adInsertionType,d=i.hasSlugs,y=i.subscriptionType,f=i.serverRequest,h=i.mediaSegmentType,v=i.cause,g=i.adPodPlacement,m=i.adPodData,b=i.adSlotData,T=i.adVideoData,k=i.adAudioData,S=i.adSubtitleData,P=i.adStartupData,E=i.adErrorData,Z=i.playbackSessionId,w=i.productType,D=i.networkType,C=i.monotonicTimestamp,A=i.contentKeys,R=i.data,x=void 0===R?{}:R,O=i.videoPlayerName,I=i.videoPlayerVersion,M=i.interactionId,j=i.mediaFetchSucceeded,L=i.qoe,N=void 0===L?{}:L,B=i.viewingEnvironment,_=i.programBoundaryInfoBlock;this.adActivity=u,this.adSessionId=l,this.adInsertionType=p||s.AdInsertionType.none,this.hasSlugs=d||!1,this.adInsertionType=p,this.subscriptionType=y||"",this.serverRequest=f,this.mediaSegmentType=h,this.cause=v,this.adPodPlacement=g,this.adPodData=m,this.adSlotData=b,this.adVideoData=T,this.adAudioData=k,this.adSubtitleData=S,this.adStartupData=P,this.adErrorData=E,this.playbackSessionId=Z,this.productType=w,this.networkType=D||s.NetworkType.unknown,this.monotonicTimestamp=C,this.contentKeys=A||{},this.videoPlayerName=O,this.videoPlayerVersion=I,this.interactionId=M,this.mediaFetchSucceeded=null==j||j,this.viewingEnvironment=B,this.programBoundaryInfoBlock=_,this.setData(x),this.setData(N)}return(0,i.Z)(e,[{key:"setData",value:function(e){Object.assign(this,e)}},{key:"toString",value:function(){return"SDK.Services.QualityOfService.PlaybackAdEventData"}}]),e}()},66229:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=(n(19601),n(67682)),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({playbackSessionId:o.Types.nonEmptyString,playbackDiagnostics:o.Types.nonEmptyString,interactionId:o.Types.nonEmptyString.optional,programBoundaryInfoBlock:o.Types.nonEmptyString.optional,data:o.Types.object().optional})};o.typecheck.warn(this,n,arguments),this.playbackSessionId=t.playbackSessionId,this.playbackDiagnostics=t.playbackDiagnostics,this.interactionId=t.interactionId,this.programBoundaryInfoBlock=t.programBoundaryInfoBlock,this.setData(t.data)}return(0,i.Z)(e,[{key:"setData",value:function(e){o.Check.nonEmptyObject(e)&&Object.assign(this,e)}},{key:"toString",value:function(){return"SDK.Services.QualityOfService.PlaybackCustomEventData"}}]),e}()},6456:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(15671),i=n(43144),o=(n(19601),n(67682)),a=n(19546),s=n(73688),c=n(67045),u=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({playbackActivity:o.Types.in(a.PlaybackActivity).optional,streamUrl:o.Types.nonEmptyString.optional,productType:o.Types.in(a.ProductType).optional,playheadPosition:o.Types.number.optional,videoBitrate:o.Types.number.optional,videoAverageBitrate:o.Types.number.optional,audioBitrate:o.Types.number.optional,maxAllowedVideoBitrate:o.Types.number.optional,segmentPosition:o.Types.number.optional,cdnName:o.Types.nonEmptyString.optional,cdnVendor:o.Types.nonEmptyString.optional,cdnWithOrigin:o.Types.nonEmptyString.optional,networkType:o.Types.in(a.NetworkType).optional,liveLatencyAmount:o.Types.number.optional,cause:o.Types.nonEmptyString.optional,bufferType:o.Types.in(a.BufferType).optional,duration:o.Types.number.optional,playerSeekDirection:o.Types.in(a.PlayerSeekDirection).optional,seekDistance:o.Types.number.optional,seekDirection:o.Types.in(a.SeekDirection).optional,seekSize:o.Types.number.optional,playbackError:o.Types.in(a.QoePlaybackError).optional,playbackErrorDetail:o.Types.nonEmptyString.optional,cdnRequestedTrail:o.Types.array.of.nonEmptyString.optional,cdnFailedTrail:o.Types.array.of.nonEmptyString.optional,cdnFallbackCount:o.Types.number.optional,isCdnFallback:o.Types.boolean.optional,contentKeys:o.Types.object().optional,clientGroupIds:o.Types.nonEmptyString.optional,serverGroupIds:o.Types.nonEmptyString.optional,monotonicTimestamp:o.Types.number.optional,data:o.Types.object().optional,presentationType:o.Types.in(a.PresentationType).optional,adInsertionType:o.Types.in(a.AdInsertionType).optional,hasSlugs:o.Types.boolean.optional,subscriptionType:o.Types.string.optional,adSessionId:o.Types.nonEmptyString.optional,adPodPlacement:o.Types.object(c.AdPodPlacementTypedef).optional,adPodData:o.Types.object(c.AdPodDataTypedef).optional,adSlotData:o.Types.object(c.AdSlotDataTypedef).optional,adPlayheadPosition:o.Types.number.optional,videoPlayerName:o.Types.nonEmptyString.optional,videoPlayerVersion:o.Types.nonEmptyString.optional,localMedia:o.Types.boolean.optional,interactionId:o.Types.nonEmptyString.optional,mediaFetchSucceeded:o.Types.boolean.optional,qoe:o.Types.object().optional,maxAttainedBitrate:o.Types.number.optional,mediaSegmentType:o.Types.in(a.MediaSegmentType).optional,serverRequest:o.Types.instanceStrict(s.Z).optional,adMetadata:o.Types.object().optional,skipType:o.Types.in(a.SkipType).optional,viewingEnvironment:o.Types.nonEmptyString.optional,programBoundaryInfoBlock:o.Types.nonEmptyString.optional})};o.typecheck.warn(this,n,arguments);var i=t||{},u=i.playbackActivity,l=i.streamUrl,p=i.productType,d=i.playheadPosition,y=i.videoBitrate,f=i.videoAverageBitrate,h=i.audioBitrate,v=i.maxAllowedVideoBitrate,g=i.segmentPosition,m=i.cdnName,b=i.cdnVendor,T=i.cdnWithOrigin,k=i.networkType,S=i.liveLatencyAmount,P=i.cause,E=i.bufferType,Z=i.duration,w=i.playerSeekDirection,D=i.seekDistance,C=i.seekDirection,A=i.seekSize,R=i.playbackError,x=i.playbackErrorDetail,O=i.cdnRequestedTrail,I=i.cdnFailedTrail,M=i.cdnFallbackCount,j=i.isCdnFallback,L=i.clientGroupIds,N=i.serverGroupIds,B=i.monotonicTimestamp,_=i.contentKeys,F=i.data,U=void 0===F?{}:F,q=i.presentationType,K=i.adInsertionType,V=i.hasSlugs,H=i.subscriptionType,G=i.adSessionId,Q=i.adPodPlacement,z=i.adPodData,W=i.adSlotData,Y=i.adPlayheadPosition,J=i.videoPlayerName,X=i.videoPlayerVersion,$=i.localMedia,ee=i.interactionId,te=i.mediaFetchSucceeded,ne=i.qoe,re=void 0===ne?{}:ne,ie=i.maxAttainedBitrate,oe=i.mediaSegmentType,ae=i.serverRequest,se=i.adMetadata,ce=i.skipType,ue=i.viewingEnvironment,le=i.programBoundaryInfoBlock;this.playbackActivity=u,this.streamUrl=l||"null",this.productType=p,this.playheadPosition=Math.ceil(null!=d?d:-1),this.videoBitrate=y||0,this.videoAverageBitrate=f||0,this.audioBitrate=h||0,this.maxAllowedVideoBitrate=v||0,this.segmentPosition=o.Check.number(g)?Math.floor(g):void 0,this.cdnName=m||"null",this.cdnVendor=b||"null",this.cdnWithOrigin=T||"null",this.networkType=k||a.NetworkType.unknown,this.liveLatencyAmount=o.Check.number(S)?Math.floor(S):void 0,this.cause=P,this.bufferType=E,this.duration=Z,this.playerSeekDirection=w,this.seekDistance=D,this.seekDirection=C,this.seekSize=A,this.playbackError=R,this.playbackErrorDetail=x,this.cdnRequestedTrail=O||[],this.cdnFailedTrail=I||[],this.cdnFallbackCount=M||0,this.isCdnFallback=j||!1,this.clientGroupIds=L,this.serverGroupIds=N,this.monotonicTimestamp=B,this.contentKeys=_||{},this.presentationType=q||a.PresentationType.unknown,this.adInsertionType=K||a.AdInsertionType.none,this.hasSlugs=V||!1,this.subscriptionType=H||"",this.adSessionId=G,this.adPodPlacement=Q,this.adPodData=z,this.adSlotData=W,this.adPlayheadPosition=Y,this.localMedia=$||!1,this.interactionId=ee,this.periodType="deprecated",this.videoPlayerName=J,this.videoPlayerVersion=X,this.mediaFetchSucceeded=null==te||te,this.maxAttainedBitrate=null!=ie?ie:0,this.mediaSegmentType=oe,this.serverRequest=ae,this.adMetadata=se||null,this.skipType=ce||a.SkipType.unknown,this.viewingEnvironment=ue,this.programBoundaryInfoBlock=le,this.setData(U),this.setData(re)}return(0,i.Z)(e,[{key:"setData",value:function(e){o.Check.nonEmptyObject(e)&&Object.assign(this,e)}},{key:"toString",value:function(){return"SDK.Services.QualityOfService.PlaybackEventData"}}]),e}()},85569:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(15671),i=n(43144),o=(n(19601),n(67682)),a=n(19546),s=n(67045),c=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({playbackDuration:o.Types.number.optional,playbackState:o.Types.in(a.PlaybackState).optional,productType:o.Types.in(a.ProductType).optional,totalVst:o.Types.number.optional,videoStartTimestamp:o.Types.number.optional,bufferSegmentDuration:o.Types.number.optional,mediaBytesDownloaded:o.Types.number.optional,mediaDownloadTotalTime:o.Types.number.optional,mediaDownloadTotalCount:o.Types.number.optional,playbackSessionId:o.Types.nonEmptyString.optional,playheadPosition:o.Types.number.optional,videoBitrate:o.Types.number.optional,videoAverageBitrate:o.Types.number.optional,audioBitrate:o.Types.number.optional,maxAllowedVideoBitrate:o.Types.number.optional,segmentPosition:o.Types.number.optional,cdnName:o.Types.nonEmptyString.optional,networkType:o.Types.in(a.NetworkType).optional,liveLatencyAmount:o.Types.number.optional,playlistBitrateType:o.Types.in(a.PlaylistBitrateType).optional,currentThroughput:o.Types.number.optional,cpuPercentage:o.Types.number.optional,freeMemory:o.Types.number.optional,seekableRangeEndProgramDateTime:o.Types.number.optional,isLiveEdge:o.Types.boolean.optional,artificialDelayDuration:o.Types.number.optional,clientGroupIds:o.Types.nonEmptyString.optional,serverGroupIds:o.Types.nonEmptyString.optional,contentKeys:o.Types.object().optional,data:o.Types.object().optional,sampleType:o.Types.in(a.HeartbeatSampleType).optional,playlistAudioChannels:o.Types.number.optional,playlistAudioCodec:o.Types.nonEmptyString.optional,playlistAudioLanguage:o.Types.nonEmptyString.optional,playlistAudioName:o.Types.nonEmptyString.optional,playlistSubtitleLanguage:o.Types.nonEmptyString.optional,playlistSubtitleName:o.Types.nonEmptyString.optional,subtitleVisibility:o.Types.boolean.optional,presentationType:o.Types.in(a.PresentationType).optional,adInsertionType:o.Types.in(a.AdInsertionType).optional,hasSlugs:o.Types.boolean.optional,subscriptionType:o.Types.string.optional,adSessionId:o.Types.nonEmptyString.optional,adPodPlacement:o.Types.object(s.AdPodPlacementTypedef).optional,adPodData:o.Types.object(s.AdPodDataTypedef).optional,adSlotData:o.Types.object(s.AdSlotDataTypedef).optional,adPlayheadPosition:o.Types.number.optional,videoPlayerName:o.Types.nonEmptyString.optional,videoPlayerVersion:o.Types.nonEmptyString.optional,localMedia:o.Types.boolean.optional,interactionId:o.Types.nonEmptyString.optional,mediaFetchSucceeded:o.Types.boolean.optional,playlistAudioTrackType:o.Types.in(a.AudioTrackType).optional,playlistTimedTextTrackType:o.Types.in(a.TimedTextTrackType).optional,qoe:o.Types.object().optional,maxAttainedBitrate:o.Types.number.optional,playbackMode:o.Types.in(a.PlaybackMode).optional,viewingEnvironment:o.Types.nonEmptyString.optional,monotonicTimestamp:o.Types.number.optional,programBoundaryInfoBlock:o.Types.nonEmptyString.optional}).optional};o.typecheck.warn(this,n,arguments);var i=t||{},c=i.playbackDuration,u=i.playbackState,l=i.productType,p=i.totalVst,d=i.videoStartTimestamp,y=i.bufferSegmentDuration,f=i.mediaBytesDownloaded,h=i.mediaDownloadTotalTime,v=i.mediaDownloadTotalCount,g=i.playbackSessionId,m=i.playheadPosition,b=i.videoBitrate,T=i.videoAverageBitrate,k=i.audioBitrate,S=i.maxAllowedVideoBitrate,P=i.segmentPosition,E=i.cdnName,Z=i.networkType,w=i.liveLatencyAmount,D=i.playlistBitrateType,C=i.currentThroughput,A=i.cpuPercentage,R=i.freeMemory,x=i.seekableRangeEndProgramDateTime,O=i.isLiveEdge,I=i.artificialDelayDuration,M=i.clientGroupIds,j=i.serverGroupIds,L=i.contentKeys,N=i.sampleType,B=i.data,_=void 0===B?{}:B,F=i.playlistAudioChannels,U=i.playlistAudioCodec,q=i.playlistAudioLanguage,K=i.playlistAudioName,V=i.playlistSubtitleLanguage,H=i.playlistSubtitleName,G=i.subtitleVisibility,Q=i.presentationType,z=i.adInsertionType,W=i.hasSlugs,Y=i.subscriptionType,J=i.adSessionId,X=i.adPodPlacement,$=i.adPodData,ee=i.adSlotData,te=i.adPlayheadPosition,ne=i.videoPlayerName,re=i.videoPlayerVersion,ie=i.localMedia,oe=i.interactionId,ae=i.mediaFetchSucceeded,se=i.playlistAudioTrackType,ce=i.playlistTimedTextTrackType,ue=i.qoe,le=void 0===ue?{}:ue,pe=i.maxAttainedBitrate,de=i.playbackMode,ye=i.viewingEnvironment,fe=i.monotonicTimestamp,he=i.programBoundaryInfoBlock;this.playbackDuration=o.Check.greaterOrEqual(c,0)?c:0,this.playbackState=u,this.productType=l,this.totalVst=null!=p?p:0,this.videoStartTimestamp=null!=d?d:0,this.bufferSegmentDuration=Math.ceil(null!=y?y:0),this.mediaBytesDownloaded=f,this.mediaDownloadTotalTime=h,this.mediaDownloadTotalCount=v,this.playbackSessionId=g,this.playheadPosition=Math.ceil(null!=m?m:-1),this.videoBitrate=null!=b?b:0,this.videoAverageBitrate=null!=T?T:0,this.audioBitrate=null!=k?k:0,this.maxAllowedVideoBitrate=o.Check.assigned(S)?S:0,this.segmentPosition=o.Check.number(P)?Math.floor(P):void 0,this.cdnName=E||"null",this.networkType=Z||a.NetworkType.unknown,this.liveLatencyAmount=o.Check.number(w)?Math.floor(w):void 0,this.artificialDelay=o.Check.greater(I,0),this.playlistBitrateType=D,this.currentThroughput=C,this.cpuPercentage=A,this.freeMemory=R,this.seekableRangeEndProgramDateTime=x,this.isLiveEdge=O,this.artificialDelayDuration=null!=I?I:0,this.clientGroupIds=M,this.serverGroupIds=j,this.contentKeys=L||{},this.sampleType=N,this.playlistAudioChannels=F,this.playlistAudioCodec=U,this.playlistAudioLanguage=q,this.playlistAudioName=K,this.playlistSubtitleLanguage=V,this.playlistSubtitleName=H,this.subtitleVisibility=null!=G&&G,this.presentationType=Q||a.PresentationType.unknown,this.adInsertionType=z||a.AdInsertionType.none,this.hasSlugs=W,this.subscriptionType=Y||"",this.adSessionId=J,this.adPodPlacement=X,this.adPodData=$,this.adSlotData=ee,this.adPlayheadPosition=te,this.videoPlayerName=ne,this.videoPlayerVersion=re,this.localMedia=ie||!1,this.interactionId=oe,this.periodType="deprecated",this.playlistAudioTrackType=se||a.AudioTrackType.unknown,this.playlistTimedTextTrackType=ce||a.TimedTextTrackType.unknown,this.mediaFetchSucceeded=null==ae||ae,this.maxAttainedBitrate=null!=pe?pe:0,this.playbackMode=de,this.viewingEnvironment=ye,this.monotonicTimestamp=fe,this.programBoundaryInfoBlock=he,this.setData(_),this.setData(le)}return(0,i.Z)(e,[{key:"setData",value:function(e){o.Check.nonEmptyObject(e)&&Object.assign(this,e)}},{key:"toString",value:function(){return"SDK.Services.QualityOfService.PlaybackHeartbeatEventData"}}]),e}()},57890:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(15671),i=n(43144),o=(n(68309),n(41539),n(39714),n(23157),n(19601),n(91038),n(78783),n(67682)),a=n(73688),s=n(84961),c=n(62120),u=n(28928),l=n(70825),p=n(19546),d=function(){function e(t){var n,i,d,y,f,h,v,g,m,b;(0,r.Z)(this,e);var T={options:o.Types.object({startupActivity:o.Types.in(p.StartupActivity),playbackSessionId:o.Types.nonEmptyString.optional,productType:o.Types.in(p.ProductType).optional,playheadPosition:o.Types.number.optional,networkType:o.Types.in(p.NetworkType).optional,playbackIntent:o.Types.in(p.PlaybackIntent).optional,mediaPreBuffer:o.Types.boolean.optional,bufferSegmentDuration:o.Types.number.optional,videoPlayerName:o.Types.nonEmptyString.optional,videoPlayerVersion:o.Types.nonEmptyString.optional,playbackUrl:o.Types.nonEmptyString.optional,playbackScenario:o.Types.nonEmptyString.optional,playlistLiveType:o.Types.in(u.PlaylistType).optional,localMedia:o.Types.boolean.optional,serverRequest:o.Types.instanceStrict(a.Z).optional,cpuPercentage:o.Types.number.optional,freeMemory:o.Types.number.optional,audio:o.Types.object(l.AudioRenditionTypedef).optional,subtitle:o.Types.object(l.SubtitleRenditionTypedef).optional,variant:o.Types.instanceStrict(c.Z).optional,streamUrl:o.Types.nonEmptyString.optional,attributes:o.Types.instanceStrict(s.Z).optional,streamVariants:o.Types.array.of.instanceStrict(c.Z).optional,mediaFetchError:o.Types.in(p.MediaFetchError).optional,drmKeyId:o.Types.nonEmptyString.optional,playlistName:o.Types.nonEmptyString.optional,playlistLanguage:o.Types.nonEmptyString.optional,mediaSegmentType:o.Types.in(p.MediaSegmentType).optional,monotonicTimestamp:o.Types.number.optional,contentKeys:o.Types.object().optional,data:o.Types.object().optional,playbackError:o.Types.in(p.QoePlaybackError).optional,playbackErrorDetail:o.Types.nonEmptyString.optional,qos:o.Types.object().optional,clientGroupIds:o.Types.nonEmptyString.optional,serverGroupIds:o.Types.nonEmptyString.optional,cdnRequestedTrail:o.Types.array.of.nonEmptyString.optional,cdnFailedTrail:o.Types.array.of.nonEmptyString.optional,cdnFallbackCount:o.Types.number.optional,isCdnFallback:o.Types.boolean.optional,adInsertionType:o.Types.in(p.AdInsertionType).optional,hasSlugs:o.Types.boolean.optional,subscriptionType:o.Types.string.optional,totalPodCount:o.Types.number.optional,adSessionId:o.Types.nonEmptyString.optional,totalSlotCount:o.Types.number.optional,totalAdLength:o.Types.number.optional,createAdSessionResponseCode:o.Types.number.optional,getPodsResponseCode:o.Types.number.optional,startupContext:o.Types.object().optional,fetchCertificateDuration:o.Types.number.optional,fetchCertificateStartTime:o.Types.number.optional,fetchLicenseDuration:o.Types.number.optional,fetchLicenseStartTime:o.Types.number.optional,initializePlayerDuration:o.Types.number.optional,initializePlayerStartTime:o.Types.number.optional,multivariantFetchedDuration:o.Types.number.optional,multivariantFetchedStartTime:o.Types.number.optional,playlistFetchedDuration:o.Types.number.optional,playlistFetchedStartTime:o.Types.number.optional,readyPlayerDuration:o.Types.number.optional,readyPlayerStartTime:o.Types.number.optional,requestedStartTime:o.Types.number.optional,variantFetchedDuration:o.Types.number.optional,variantFetchedStartTime:o.Types.number.optional,interactionId:o.Types.nonEmptyString.optional,mediaFetchSucceeded:o.Types.boolean.optional,playlistAudioTrackType:o.Types.in(p.AudioTrackType).optional,playlistTimedTextTrackType:o.Types.in(p.TimedTextTrackType).optional,qoe:o.Types.object().optional,viewingEnvironment:o.Types.nonEmptyString.optional,programBoundaryInfoBlock:o.Types.nonEmptyString.optional})};(0,o.typecheck)(this,T,arguments);var k=t.startupActivity,S=t.playbackSessionId,P=t.productType,E=t.playheadPosition,Z=t.networkType,w=t.playbackIntent,D=t.mediaPreBuffer,C=t.bufferSegmentDuration,A=t.videoPlayerName,R=t.videoPlayerVersion,x=t.playbackUrl,O=t.playbackScenario,I=t.playlistLiveType,M=t.localMedia,j=t.serverRequest,L=t.cpuPercentage,N=t.freeMemory,B=t.audio,_=t.subtitle,F=t.variant,U=t.streamUrl,q=t.attributes,K=t.streamVariants,V=t.mediaFetchError,H=t.drmKeyId,G=t.playlistName,Q=t.playlistLanguage,z=t.mediaSegmentType,W=t.monotonicTimestamp,Y=t.contentKeys,J=t.data,X=void 0===J?{}:J,$=t.playbackError,ee=t.playbackErrorDetail,te=t.qos,ne=void 0===te?{}:te,re=t.clientGroupIds,ie=t.serverGroupIds,oe=t.cdnRequestedTrail,ae=t.cdnFailedTrail,se=t.cdnFallbackCount,ce=t.isCdnFallback,ue=t.adInsertionType,le=t.hasSlugs,pe=t.subscriptionType,de=t.totalPodCount,ye=t.adSessionId,fe=t.totalSlotCount,he=t.totalAdLength,ve=t.createAdSessionResponseCode,ge=t.getPodsResponseCode,me=t.startupContext,be=void 0===me?{}:me,Te=t.fetchCertificateDuration,ke=t.fetchCertificateStartTime,Se=t.fetchLicenseDuration,Pe=t.fetchLicenseStartTime,Ee=t.initializePlayerDuration,Ze=t.initializePlayerStartTime,we=t.multivariantFetchedDuration,De=t.multivariantFetchedStartTime,Ce=t.playlistFetchedDuration,Ae=t.playlistFetchedStartTime,Re=t.readyPlayerDuration,xe=t.readyPlayerStartTime,Oe=t.requestedStartTime,Ie=t.variantFetchedDuration,Me=t.variantFetchedStartTime,je=t.interactionId,Le=t.mediaFetchSucceeded,Ne=t.playlistAudioTrackType,Be=t.playlistTimedTextTrackType,_e=t.qoe,Fe=void 0===_e?{}:_e,Ue=t.viewingEnvironment,qe=t.programBoundaryInfoBlock;this.startupActivity=k,this.playbackSessionId=S,this.productType=P,this.playheadPosition=Math.ceil(null!=E?E:-1),this.networkType=Z||p.NetworkType.unknown,this.playbackIntent=w,this.mediaPreBuffer=null!=D&&D,this.bufferSegmentDuration=Math.ceil(C||0),this.videoPlayerName=A,this.videoPlayerVersion=R,this.playbackUrl=x,this.playbackScenario=O,this.playlistLiveType=I,this.localMedia=null!=M&&M,this.serverRequest=j,this.cpuPercentage=L,this.freeMemory=N,this.playlistAudioChannels=null!==(n=null==F?void 0:F.audioChannels)&&void 0!==n?n:void 0,this.playlistAudioCodec=null!==(i=null==F?void 0:F.audioCodec)&&void 0!==i?i:void 0,this.playlistAudioLanguage=null==B?void 0:B.language,this.playlistAudioName=null==B?void 0:B.name,this.mediaStartBitrate=null!==(d=null==F?void 0:F.bandwidth)&&void 0!==d?d:void 0,this.playlistSubtitleLanguage=null==_?void 0:_.language,this.playlistSubtitleName=null==_?void 0:_.name,this.subtitleVisibility=null==_?void 0:_.forced,this.playlistVideoCodec=null!==(y=null==F?void 0:F.videoCodec)&&void 0!==y?y:void 0,this.playlistVideoRange=null!==(f=null==F?void 0:F.videoRange)&&void 0!==f?f:void 0,this.streamUrl=U,this.attributes=q,this.streamVariants=K,this.mediaFetchError=V||null,this.drmKeyId=H,this.videoBitrate=null!==(h=null==F?void 0:F.bandwidth)&&void 0!==h?h:void 0,this.videoAverageBitrate=null!==(v=null==F?void 0:F.averageBandwidth)&&void 0!==v?v:void 0,this.playlistChannels=null==F||null===(g=F.audioChannels)||void 0===g?void 0:g.toString(),this.playlistName=G,this.playlistLanguage=Q,this.mediaSegmentType=z,this.playlistResolution=null!==(m=null==F?void 0:F.resolution)&&void 0!==m?m:void 0,this.playlistFrameRate=null!==(b=null==F?void 0:F.frameRate)&&void 0!==b?b:void 0,this.monotonicTimestamp=W||void 0,this.contentKeys=Y||{},this.playbackError=$||null,this.playbackErrorDetail=ee,this.cdnRequestedTrail=oe||void 0,this.cdnFailedTrail=ae||void 0,this.cdnFallbackCount=se||0,this.isCdnFallback=ce||!1,this.clientGroupIds=re,this.serverGroupIds=ie,this.adInsertionType=ue||p.AdInsertionType.none,k!==p.StartupActivity.requested&&(this.hasSlugs=le||!1),this.subscriptionType=pe||"",this.totalPodCount=de,this.adSessionId=ye,this.totalSlotCount=fe,this.totalAdLength=he,this.createAdSessionResponseCode=ve||0,this.getPodsResponseCode=ge,this.interactionId=je,this.playlistAudioTrackType=Ne||p.AudioTrackType.unknown,this.playlistTimedTextTrackType=Be||p.TimedTextTrackType.unknown,this.applicationProtocol=((null==j?void 0:j.host)||"").startsWith("https")?p.ApplicationProtocol.https:p.ApplicationProtocol.http,this.cdnName="null",this.cdnVendor="null",this.cdnWithOrigin="null",this.fetchCertificateDuration=Te,this.fetchCertificateStartTime=ke,this.fetchLicenseDuration=Se,this.fetchLicenseStartTime=Pe,this.initializePlayerDuration=Ee,this.initializePlayerStartTime=Ze,this.multivariantFetchedDuration=we,this.multivariantFetchedStartTime=De,this.playlistFetchedDuration=Ce,this.playlistFetchedStartTime=Ae,this.readyPlayerDuration=Re,this.readyPlayerStartTime=xe,this.requestedStartTime=Oe,this.variantFetchedDuration=Ie,this.variantFetchedStartTime=Me,this.mediaFetchSucceeded=null==Le||Le,this.viewingEnvironment=Ue,this.programBoundaryInfoBlock=qe,this.setQosData(ne),this.setData(X),this.setData(be),this.setData(Fe)}return(0,i.Z)(e,[{key:"setQosData",value:function(e){e&&o.Check.nonEmptyObject(e)&&(this.fixProductType(e),Object.assign(this,e))}},{key:"fixProductType",value:function(e){var t=e.productType;if(t){var n=t.toLowerCase();n===p.ProductType.live.toLowerCase()?t=p.ProductType.live:n===p.ProductType.vod.toLowerCase()&&(t=p.ProductType.vod),e.productType=t}}},{key:"setData",value:function(e){o.Check.nonEmptyObject(e)&&Object.assign(this,e)}},{key:"fallbackAttempt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isCdnFallback&&this.cdnFallbackCount++,this.cdnRequestedTrail?this.cdnRequestedTrail.push(e):this.cdnRequestedTrail=[e]}},{key:"fallbackFailed",value:function(){this.isCdnFallback=!0,this.cdnRequestedTrail&&(this.cdnFailedTrail=Array.from(this.cdnRequestedTrail))}},{key:"toString",value:function(){return"SDK.Services.QualityOfService.PlaybackStartupEventData"}}]),e}()},73688:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(19546),s=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({method:o.Types.in(a.HttpMethod).optional,host:o.Types.nonEmptyString.optional,path:o.Types.nonEmptyString.optional,statusCode:o.Types.number.optional,requestId:o.Types.nonEmptyString.optional,roundTripTime:o.Types.number.optional,status:o.Types.in(a.FetchStatus).optional,serverIP:o.Types.nonEmptyString.optional,cdnName:o.Types.nonEmptyString.optional,networkType:o.Types.in(a.NetworkType).optional,timeToFirstByte:o.Types.number.optional,error:o.Types.in(a.NetworkError).optional}).optional};(0,o.typecheck)(this,n,arguments);var i=t||{},s=i.method,c=i.host,u=i.path,l=i.statusCode,p=i.requestId,d=i.roundTripTime,y=i.status,f=i.serverIP,h=i.cdnName,v=i.networkType,g=i.timeToFirstByte,m=i.error;this.method=s||null,this.host=c||null,this.path=u||null,this.statusCode=null!=l?l:null,this.requestId=p||null,this.roundTripTime=null!=d?d:null,this.status=y||null,this.serverIP=f||null,this.cdnName=h||"null",this.networkType=v||null,this.timeToFirstByte=null!=g?g:null,this.error=m||null}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.QualityOfService.ServerRequest"}}]),e}()},67045:function(e,t,n){"use strict";n.d(t,{AdAudioDataTypedef:function(){return d},AdErrorDataTypedef:function(){return h},AdPodDataTypedef:function(){return u},AdPodPlacementTypedef:function(){return c},AdSlotDataTypedef:function(){return l},AdStartupDataTypedef:function(){return f},AdSubtitleDataTypedef:function(){return y},AdVideoDataTypedef:function(){return p},SnapshotEventTypedef:function(){return g}}),n(47941),n(82526),n(57327),n(41539),n(38880),n(54747),n(49337);var r=n(4942),i=n(67682),o=n(19546);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={podPosition:i.Types.in(o.PodPosition),midrollIndex:i.Types.number.optional},u={plannedLength:i.Types.number,plannedSlotCount:i.Types.number},l={adMediaId:i.Types.nonEmptyString,slotNumber:i.Types.number,plannedLength:i.Types.number},p={playlistVideoCodec:i.Types.nonEmptyString,playlistVideoRange:i.Types.nonEmptyString,videoBitrate:i.Types.number.optional,videoAverageBitrate:i.Types.number.optional,playlistResolution:i.Types.nonEmptyString,playlistFrameRate:i.Types.number},d={playlistAudioChannels:i.Types.number,playlistAudioCodec:i.Types.nonEmptyString,playlistAudioLanguage:i.Types.nonEmptyString,playlistAudioName:i.Types.nonEmptyString},y={subtitleVisibility:i.Types.boolean,playlistSubtitleLanguage:i.Types.nonEmptyString.optional,playlistSubtitleName:i.Types.nonEmptyString.optional},f={startTimestamp:i.Types.number,requestDuration:i.Types.number},h={errorName:i.Types.in(o.QoePlaybackError).optional,errorMessage:i.Types.nonEmptyString},v={nextAction:i.Types.in(o.SnapshotNextAction),nextCdnUrl:i.Types.nonEmptyString,nextVideoBitrate:i.Types.number,estimatedBandwidth:i.Types.number,perceivedBandwidth:i.Types.number},g={eventName:i.Types.in(o.SnapshotEventType),millisecondTimestamp:i.Types.number,videoBufferLength:i.Types.number,audioBufferLength:i.Types.number,playheadPosition:i.Types.number,pqmDecisionData:i.Types.object(v)},m={eventName:i.Types.nonEmptyString,downloadStartTime:i.Types.number,downloadTotalTime:i.Types.number,rtt:i.Types.number,downloadByteSize:i.Types.number,downloadSuccessful:i.Types.boolean,dataType:i.Types.in(o.SnapshotDownloadDataType),httpStatus:i.Types.number,failureType:i.Types.in(o.SnapshotDownloadFailure).optional},b={codec:i.Types.nonEmptyString,frameRate:i.Types.number,videoResolution:i.Types.nonEmptyString,videoBitrate:i.Types.number},T={codec:i.Types.nonEmptyString},k=s(s({},g),{},{downloadMetadata:i.Types.object(m),fragmentType:i.Types.in(o.SnapshotFragmentType)});s(s({},k),{},{videoFragmentMetadata:i.Types.object(b)}),s(s({},k),{},{audioFragmentMetadata:i.Types.object(T)}),s(s({},g),{},{bufferType:i.Types.in(o.BufferType)})},87172:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}}),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(2291),c=n(60136),u=n(82963),l=n(61120),p=n(87757),d=n.n(p),y=(n(41539),n(39714),n(73210),n(92222),n(67682)),f=n(17563),h=n(87891),v=n(19496),g=n(29466),m=n(35493),b=n(10063),T=n(63792),k=n(75298),S=n(70911),P=n(69867),E=n(24965),Z=n(40064),w=n(83668);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var C=function(e){(0,c.Z)(u,e);var t,n=D(u);function u(e){var t;(0,i.Z)(this,u),t=n.call(this,e);var r={options:y.Types.object({config:y.Types.instanceStrict(k.Z),logger:y.Types.instanceStrict(h.Z),httpClient:y.Types.instanceStrict(v.Z)})};return(0,y.typecheck)((0,a.Z)(t),r,arguments),t.logger.log(t.toString(),"Created."),t}return(0,o.Z)(u,[{key:"getImage",value:(t=(0,r.Z)(d().mark((function e(t){var n,r,i,o,a,c,p,f,h,v,g=this,m=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:y.Types.object({version:y.Types.nonEmptyString.optional,imageId:y.Types.nonEmptyString,imageRequestMode:y.Types.in(b.Z),partnerId:y.Types.nonEmptyString,queryParams:y.Types.object(S.RipcutQueryParamsTypedef).optional})},(0,y.typecheck)(this,"getImage",n,m),r=t.imageId,i=t.imageRequestMode,o=t.partnerId,a=t.queryParams,c=t.version,p=void 0===c?"v1":c,f=this.logger,h=T.Z[i],v=this.getPayload({endpointKey:h,data:{version:p,imageId:r,partnerId:o,queryParams:a},bodyType:"arrayBuffer"}),e.abrupt("return",(0,s.Z)((0,l.Z)(u.prototype),"request",this).call(this,{payload:v,resultMapper:function(e){var t,n=e.data,r=e.headers.get(w.SDK_ERROR);try{t=JSON.parse(r)}catch(e){f.error(g.toString(),'Could not parse error from "'.concat(w.SDK_ERROR,'" header.')),t=null}return{image:n,error:t}}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getImageUrl",value:function(e){var t={options:y.Types.object({version:y.Types.nonEmptyString.optional,imageId:y.Types.nonEmptyString,imageRequestMode:y.Types.in(b.Z),partnerId:y.Types.nonEmptyString,queryParams:y.Types.object(S.RipcutQueryParamsTypedef).optional})};(0,y.typecheck)(this,"getImageUrl",t,arguments);var n=e.imageId,r=e.imageRequestMode,i=e.partnerId,o=e.queryParams,a=e.version,s=void 0===a?"v1":a,c=T.Z[r],u=this.getPayload({endpointKey:c,data:{version:s,imageId:n,partnerId:i,queryParams:o}}),l=u.url;return l}},{key:"getPayload",value:function(e){var t=e.endpointKey,n=e.data,r=e.bodyType,i=n.imageId,o=n.partnerId,a=n.queryParams,s=n.version,c=this.config.endpoints[t],u=c.headers,l=c.method;t===T.Z.trim&&null!=a&&a.width&&a.height&&(a.max="".concat(a.width,"|").concat(a.height),delete a.width,delete a.height);var p=(0,m.Z)(c.href,{imageId:i,partnerId:o,version:s}),d=(0,g.Z)(p,(0,f.stringify)(a)),y=(0,E.Z)({},u);return{url:d,headers:new P.Z(y),method:l,bodyType:r}}},{key:"toString",value:function(){return"SDK.Services.Ripcut.RipcutClient"}}]),u}(Z.Z)},75298:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Ripcut.RipcutClientConfiguration"}}]),n}(n(88152).Z)},63792:function(e,t,n){"use strict";var r;n(73210),function(e){e.main="main",e.mainScale="mainScale",e.mainCompose="mainCompose",e.mainBadging="mainBadging",e.rawFiles="rawFiles",e.trim="trim"}(r||(r={})),t.Z=r},50786:function(e,t){"use strict";t.Z={ANONYMOUS_IP:"AnonymousIp",COUNTRY_CODE:"CountryCode",LOW_CONFIDENCE:"LowConfidence",PROXIED_IP:"ProxiedIp",UNAVAILABLE:"Unavailable",UNKNOWN:"Unknown",ZIP_CODE:"ZipCode",AnonymousIp:"AnonymousIp",CountryCode:"CountryCode",LowConfidence:"LowConfidence",ProxiedIp:"ProxiedIp",Unavailable:"Unavailable",Unknown:"Unknown",ZipCode:"ZipCode"}},18479:function(e,t,n){"use strict";n.d(t,{Z:function(){return P}}),n(47941),n(82526),n(57327),n(38880),n(49337);var r=n(54546),i=n(4942),o=n(15671),a=n(43144),s=(n(68309),n(41539),n(54747),n(69720),n(21249),n(67682));n(69826);var c=n(72357),u=n(50786),l={countryCode:s.Types.nonEmptyString,adsSupported:s.Types.boolean.optional},p={liveAndUnratedContent:s.Types.object({enabled:s.Types.boolean})},d={countryCode:s.Types.nonEmptyString,type:s.Types.keyIn(u.Z)},y={impliedMaturityRating:s.Types.number,ratingSystem:s.Types.nonEmptyString},f={id:s.Types.nonEmptyString},h={id:s.Types.nonEmptyString,platform:s.Types.nonEmptyString},v={name:s.Types.nonEmptyString},g=(s.Types.nonEmptyString,s.Types.number.optional,s.Types.nonEmptyString,{coPlay:s.Types.boolean,download:s.Types.boolean,noAds:s.Types.boolean}),m={id:s.Types.nonEmptyString},b={type:s.Types.nonEmptyString,zipCode:s.Types.string.optional,countryCode:s.Types.string.optional,dma:s.Types.number.optional,asn:s.Types.number.optional,regionName:s.Types.string.optional,connectionType:s.Types.string.optional,adsSupported:s.Types.boolean.optional,designatedMarketArea:s.Types.number.optional},T={id:s.Types.nonEmptyString,parentalControls:s.Types.object(p).optional};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(){function e(t){(0,o.Z)(this,e);var n={options:s.Types.object({id:s.Types.nonEmptyString,account:s.Types.object(f).optional,device:s.Types.object(h),location:s.Types.object(b),profile:s.Types.object(T).optional,entitlements:s.Types.array.of.object(v),inSupportedLocation:s.Types.boolean,isSubscriber:s.Types.boolean,experiments:s.Types.object(),portabilityLocation:s.Types.object(d).optional,preferredMaturityRating:s.Types.object(y).optional,homeLocation:s.Types.object(l).optional,partnerName:s.Types.nonEmptyString,identity:s.Types.object(m).optional,features:s.Types.object(g).optional})};(0,s.typecheck)(this,n,arguments);var r=t.id,i=t.account,a=t.device,c=t.location,u=t.profile,p=t.entitlements,k=t.inSupportedLocation,S=t.partnerName,P=t.isSubscriber,E=t.experiments,Z=t.portabilityLocation,w=t.preferredMaturityRating,D=t.homeLocation,C=t.identity,A=t.features;this.id=r,this.account=i,this.device=a,this.location=c,this.profile=u,this.entitlements=p,this.inSupportedLocation=k,this.isSubscriber=P,this.experiments=E,this.portabilityLocation=Z,this.preferredMaturityRating=w,this.homeLocation=D,this.partnerName=S,this.identity=C,this.features=A}return(0,a.Z)(e,[{key:"sessionId",get:function(){return this.id}},{key:"toString",value:function(){return"SDK.Services.Session.SessionInfo"}}],[{key:"create",value:function(t){var n,i,o,a=t,l=a,p=l.account,d=l.entitlements,y=l.experiments,f=void 0===y?{}:y,h=l.device,v=l.inSupportedLocation,g=l.isSubscriber,m=l.location,b=l.preferredMaturityRating,T=l.profile,k=l.identity,P=l.features,E=a.session_id||a.sessionId||a.id,Z=a.partnerName||a.partner&&a.partner.name;if(m){var w=function(e,t,n){if(t in e)return e[t];var r=Object.keys(e).find((function(n){return e[n]===t}));return r?e[r]:n}(u.Z,m.type,u.Z.UNKNOWN),D=m.dma||m.designatedMarketArea,C=m.zip_code||m.zipCode,A=m.country_code||m.countryCode;n=S(S({},m),{},{type:w,zipCode:C,countryCode:A,designatedMarketArea:D})}T&&(i=T);var R=a.portability_location||a.portabilityLocation;if(s.Check.assigned(R)){var x=u.Z[(0,c.Z)(u.Z,null==R?void 0:R.type)];x&&(o={countryCode:(null==R?void 0:R.country_code)||(null==R?void 0:R.countryCode),type:x})}var O=[];d&&d.forEach((function(e){var t=s.Check.string(e)?e:e.name;O.push({name:t})}));var I,M=Object.create(null);if(Array.isArray(f))f.forEach((function(e){var t=e.featureId;M[t]=e}));else for(var j=0,L=Object.entries(f);j<L.length;j++){var N=(0,r.Z)(L[j],2),B=N[0],_=N[1],F=_.variantId,U=_.variant_id,q={variantId:F||U,version:_.version,featureId:B};M[B]=q}var K=a.home_location||a.homeLocation;return s.Check.assigned(K)&&(I=S(S({},K),{},{countryCode:K.country_code||K.countryCode})),new e({id:E,account:p,device:h,location:n,profile:i,entitlements:O,inSupportedLocation:v,isSubscriber:g,experiments:M,portabilityLocation:o,preferredMaturityRating:b,homeLocation:I,partnerName:Z,identity:k,features:P})}},{key:"convertSessionExperimentsToArray",value:function(e){return Array.isArray(e)?e:s.Check.nonEmptyObject(e)?Object.entries(e).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return{featureId:n,variantId:i.variantId,version:i.version}})):[]}}]),e}()},9989:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Socket.SocketClientConfiguration"}}]),n}(n(88152).Z)},22243:function(e,t,n){"use strict";var r,i,o,a,s,c,u;n.d(t,{CancellationType:function(){return r},RiskState:function(){return i},SourceSubType:function(){return o},StackingStatus:function(){return a},SubscriberPeriod:function(){return s},SubscriberStatus:function(){return c},SubscriptionState:function(){return u}}),function(e){e.other="other",e.voluntaryCancel="VOLUNTARY_CANCEL",e.involuntaryCancel="INVOLUNTARY_CANCEL",e.autoCancel="AUTO_CANCEL",e.abuseRevocation="ABUSE_REVOCATION",e.unknown="UNKNOWN",e.chargeback="CHARGEBACK"}(r||(r={})),function(e){e.other="other",e.grace="GRACE",e.hold="HOLD",e.cancelled="CANCELLED"}(i||(i={})),function(e){e.giftSub="GIFT_SUB",e.giftCard="GIFT_CARD",e.paid="PAID",e.promoRedemption="PROMO_REDEMPTION",e.comp="COMP",e.temp="TEMP",e.initial="INITIAL",e.recurring="RECURRING",e.planSwitched="PLAN_SWITCHED"}(o||(o={})),function(e){e.other="other",e.doubleBilled="DOUBLE_BILLED",e.discounted="DISCOUNTED",e.stacked="STACKED"}(a||(a={})),function(e){e.other="other",e.monthly="MONTHLY",e.annual="ANNUAL",e.multiAnnual="MULTI_ANNUAL"}(s||(s={})),function(e){e.other="other",e.active="ACTIVE",e.grace="GRACE",e.hold="HOLD",e.cancelled="CANCELLED",e.paused="PAUSED",e.churned="CHURNED"}(c||(c={})),function(e){e.other="other",e.active="ACTIVE",e.grace="GRACE",e.hold="HOLD",e.cancelled="CANCELLED",e.paused="PAUSED",e.churned="CHURNED"}(u||(u={}))},10813:function(e,t,n){"use strict";n.d(t,{SubscriberInfoTypedef:function(){return v},SubscriptionTypedef:function(){return h}});var r=n(67682),i=n(72887),o=n(22243),a={type:r.Types.in(o.CancellationType).optional,restartEligible:r.Types.boolean.optional},s={id:r.Types.number,name:r.Types.nonEmptyString,desc:r.Types.nonEmptyString.optional,partner:r.Types.nonEmptyString.optional},c={campaignCode:r.Types.nonEmptyString,redemptionCode:r.Types.nonEmptyString.optional,voucherCode:r.Types.nonEmptyString},u={status:r.Types.in(o.StackingStatus).optional,overlappingSubscriptionProviders:r.Types.array.of.nonEmptyString,previouslyStacked:r.Types.boolean,previouslyStackedByProvider:r.Types.nonEmptyString.optional},l={purchaseDate:r.Types.date.optional,startDate:r.Types.date.optional,expiryDate:r.Types.date.optional,nextRenewalDate:r.Types.date.optional,pausedDate:r.Types.date.optional,churnedDate:r.Types.date.optional,isFreeTrial:r.Types.boolean.optional},p={duration:r.Types.nonEmptyString},d={sku:r.Types.nonEmptyString,offerId:r.Types.nonEmptyString,promotionId:r.Types.nonEmptyString.optional,campaignCode:r.Types.nonEmptyString,voucherCode:r.Types.nonEmptyString},y={sku:r.Types.nonEmptyString,id:r.Types.number,name:r.Types.nonEmptyString.optional,entitlements:r.Types.array.of.object(s),categoryCodes:r.Types.array.of.nonEmptyString.optional,redeemed:r.Types.object(c).optional,bundle:r.Types.boolean.optional,subscriptionPeriod:r.Types.in(o.SubscriberPeriod).optional,earlyAccess:r.Types.boolean.optional,trial:r.Types.object(p).optional,bundleType:r.Types.in(i.BundleType).optional,nextPhase:r.Types.object(d).optional},f={sourceType:r.Types.nonEmptyString,sourceProvider:r.Types.nonEmptyString,sourceRef:r.Types.nonEmptyString},h={id:r.Types.nonEmptyString,groupId:r.Types.nonEmptyString,state:r.Types.in(o.SubscriptionState),partner:r.Types.nonEmptyString,paymentProvider:r.Types.nonEmptyString,isEntitled:r.Types.boolean,source:r.Types.object(f),product:r.Types.object(y),term:r.Types.object(l),cancellation:r.Types.object(a).optional,stacking:r.Types.object(u).optional,canCancel:r.Types.boolean},v={subscriberStatus:r.Types.in(o.SubscriberStatus),subscriptionAtRisk:r.Types.in(o.RiskState).optional,overlappingSubscription:r.Types.boolean,doubleBilled:r.Types.boolean,doubleBilledProviders:r.Types.array.of.nonEmptyString.optional,subscriptions:r.Types.array.of.object(h)}},72887:function(e,t,n){"use strict";var r,i,o,a,s,c,u,l,p,d;n.d(t,{BundleType:function(){return r},SubscriptionCancellationReason:function(){return i},SubscriptionCancellationStatus:function(){return o},SubscriptionExpiryType:function(){return a},SubscriptionFreeTrialStatus:function(){return s},SubscriptionSourceSubType:function(){return c},SubscriptionSourceType:function(){return u},SubscriptionStatusSubType:function(){return l},SubscriptionStatusType:function(){return p},SubscriptionType:function(){return d}}),function(e){e.noah="NOAH",e.sash="SASH"}(r||(r={})),function(e){e.other="other",e.voluntaryCancel="VOLUNTARY_CANCEL",e.involuntaryCancel="INVOLUNTARY_CANCEL",e.unknownCancel="UNKNOWN_CANCEL",e.abuseRevocation="ABUSE_REVOCATION",e.planSwitched="PLAN_SWITCHED"}(i||(i={})),function(e){e.other="other",e.grace="GRACE",e.billingHold="BILLING_HOLD"}(o||(o={})),function(e){e.UNKNOWN="UNKNOWN",e.EXPIRY="EXPIRY",e.NO_EXPIRY="NO_EXPIRY"}(a||(a={})),function(e){e.unknown="UNKNOWN",e.active="ACTIVE",e.inactive="INACTIVE"}(s||(s={})),function(e){e.GIFT_SUB="GIFT_SUB",e.GIFT_CARD="GIFT_CARD",e.PAID="PAID",e.PROMO_REDEMPTION="PROMO_REDEMPTION",e.COMP="COMP",e.TEMP="TEMP",e.INITIAL="INITIAL",e.RECURRING="RECURRING",e.PLAN_SWITCHED="PLAN_SWITCHED",e.OTHER="OTHER"}(c||(c={})),function(e){e.D2C="D2C",e.IAP="IAP",e.CST="CST",e.EXT="EXT",e.MVPD="MVPD",e.OPS="OPS",e.thirdParty="3P"}(u||(u={})),function(e){e.PENDING_VOLUNTARY_CANCEL="PENDING_VOLUNTARY_CANCEL",e.PENDING_INVOLUNTARY_CANCEL="PENDING_INVOLUNTARY_CANCEL",e.VOLUNTARY_CANCEL="VOLUNTARY_CANCEL",e.INVOLUNTARY_CANCEL="INVOLUNTARY_CANCEL",e.LAPSED="LAPSED"}(l||(l={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.UNSUBSCRIBED="UNSUBSCRIBED"}(p||(p={})),function(e){e.BAM_IDENTITY="BAM_IDENTITY",e.BEARER="BEARER",e.EXTERNAL_IDENTITY="EXTERNAL_IDENTITY"}(d||(d={}))},85863:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=(n(82526),n(41817),n(67682)),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({description:o.Types.string.optional,id:o.Types.string.optional})};o.typecheck.warn(this,n,arguments);var i=t.description,a=t.id;this.description=i,this.id=a}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Subscription.ProductRule"}}]),e}()},96532:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=(n(69826),n(41539),n(47941),n(67682)),a=n(72887),s=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({reason:o.Types.nonEmptyString,status:o.Types.nonEmptyString.optional})};o.typecheck.warn(this,n,arguments);var i=t.reason,s=t.status,c=Object.keys(a.SubscriptionCancellationReason).find((function(e){return a.SubscriptionCancellationReason[e]===i})),u=Object.keys(a.SubscriptionCancellationStatus).find((function(e){return a.SubscriptionCancellationStatus[e]===s}));this.reason=c?a.SubscriptionCancellationReason[c]:a.SubscriptionCancellationReason.other,this.status=u?a.SubscriptionCancellationStatus[u]:a.SubscriptionCancellationStatus.other}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Subscription.SubscriptionCancellation"}}]),e}()},9978:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}}),n(12419);var r=n(15671),i=n(43144),o=n(97326),a=n(2291),s=n(60136),c=n(82963),u=n(61120),l=(n(41539),n(39714),n(88674),n(54747),n(74916),n(15306),n(67682)),p=n(52662),d=n(1206),y=n(84983),f=n(24965),h=n(75072),v=n(23389),g=n(29466),m=n(10813),b=n(70928),T=n(22243),k=n(69867),S=n(40064);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var E=y.Z.services.subscription.subscriptionClient,Z=function(e){(0,s.Z)(n,e);var t=P(n);function n(e){var i;(0,r.Z)(this,n),i=t.call(this,e);var a=l.Types.object({config:l.Types.instanceStrict(v.Z)});return(0,l.typecheck)((0,o.Z)(i),a,arguments),i.logger.log(i.toString(),"Created."),i}return(0,i.Z)(n,[{key:"getSubscriptions",value:function(e,t){var r={accessToken:l.Types.instanceStrict(b.Z),logTransaction:l.Types.instanceStrict(p.Z)};(0,l.typecheck)(this,"getSubscriptions",r,arguments);var i=this.logger,o=h.Z.getSubscriptions,s=this.getPayload({accessToken:e,endpointKey:o});i.info(this.toString(),"Attempting to get subscriptions.");var c=new d.Z({logger:i,source:this.toString(),urn:E.getSubscriptions,payload:s,endpointKey:o,logTransaction:t});return(0,a.Z)((0,u.Z)(n.prototype),"request",this).call(this,{payload:s,dustLogUtility:c,resultMapper:function(e){var t=e.data;return Promise.resolve(t)}})}},{key:"linkSubscriptionsFromDevice",value:function(e,t){var r={accessToken:l.Types.instanceStrict(b.Z),logTransaction:l.Types.instanceStrict(p.Z)};(0,l.typecheck)(this,"linkSubscriptionsFromDevice",r,arguments);var i=this.logger,o=h.Z.linkSubscriptionsFromDevice,s=this.getPayload({accessToken:e,endpointKey:o});i.info(this.toString(),"Attempting to link subscriptions from device.");var c=new d.Z({logger:i,source:this.toString(),urn:E.linkSubscriptionsFromDevice,payload:s,endpointKey:o,logTransaction:t});return(0,a.Z)((0,u.Z)(n.prototype),"request",this).call(this,{payload:s,dustLogUtility:c,resultMapper:function(e){return e}})}},{key:"getSubscriberInfo",value:function(e){var t=this,r={options:l.Types.object({state:l.Types.in(T.SubscriptionState).optional,includeChurned:l.Types.boolean.optional,accessToken:l.Types.instanceStrict(b.Z),logTransaction:l.Types.instanceStrict(p.Z)})};(0,l.typecheck)(this,"getSubscriberInfo",r,arguments);var i=e.state,o=e.includeChurned,s=e.accessToken,c=e.logTransaction,y=this.logger,f=h.Z.getSubscriberInfo,v=this.getPayload({accessToken:s,endpointKey:f}),k=v.url;l.Check.assigned(i)&&(k=(0,g.Z)(k,"state=".concat(i))),l.Check.assigned(o)&&(k=(0,g.Z)(k,"includeChurned=".concat(o))),v.url=k;var S=new d.Z({logger:y,source:this.toString(),urn:E.getSubscriberInfo,payload:v,endpointKey:f,logTransaction:c});return(0,a.Z)((0,u.Z)(n.prototype),"request",this).call(this,{payload:v,dustLogUtility:S,handleServiceResponseMethodName:"getSubscriberInfo",resultMapper:function(e){var n=e.data;n.subscriptions.forEach((function(e){var n=e.term;t.normalizeTerm(n)}));var r={data:l.Types.object(m.SubscriberInfoTypedef)};return l.typecheck.warn(r,[n]),n}})}},{key:"getAccountSubscription",value:function(e,t,r){var i=this,o={subscriptionId:l.Types.nonEmptyString,accessToken:l.Types.instanceStrict(b.Z),logTransaction:l.Types.instanceStrict(p.Z)};(0,l.typecheck)(this,"getAccountSubscription",o,arguments);var s=this.logger,c=h.Z.getAccountSubscription,y=this.getPayload({accessToken:t,endpointKey:c});y.url=y.url.replace(/\{subscriptionId\}/gi,e);var f=new d.Z({logger:s,source:this.toString(),urn:E.getAccountSubscription,payload:y,endpointKey:c,logTransaction:r});return(0,a.Z)((0,u.Z)(n.prototype),"request",this).call(this,{payload:y,dustLogUtility:f,handleServiceResponseMethodName:"getAccountSubscription",resultMapper:function(e){var t=e.data,n=t.term;i.normalizeTerm(n);var r={data:l.Types.object(m.SubscriptionTypedef)};return l.typecheck.warn(r,[t]),t}})}},{key:"getPayload",value:function(e){var t=e.accessToken,n=e.endpointKey,r=e.body,i=this.config.endpoints[n],o=i.headers,a=i.href,s=i.method,c=r?JSON.stringify(r):"",u=(0,f.Z)({Authorization:function(){return{replacer:"{accessToken}",value:t.token}}},o);return{url:a,method:s,body:c,headers:new k.Z(u)}}},{key:"normalizeTerm",value:function(e){if(e){var t=function(e){return e?new Date(e):e};e.purchaseDate=t(e.purchaseDate),e.startDate=t(e.startDate),e.expiryDate=t(e.expiryDate),e.nextRenewalDate=t(e.nextRenewalDate),e.pausedDate=t(e.pausedDate),e.churnedDate=t(e.churnedDate)}}},{key:"toString",value:function(){return"SDK.Services.Subscription.SubscriptionClient"}}]),n}(S.Z)},23389:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Subscription.SubscriptionClientConfiguration"}}]),n}(n(88152).Z)},75072:function(e,t){"use strict";var n;!function(e){e.getSubscriptions="getSubscriptions",e.linkSubscriptionsFromDevice="linkSubscriptionsFromDevice",e.getSubscriberInfo="getSubscriberInfo",e.getAccountSubscription="getAccountSubscription"}(n||(n={})),t.Z=n},94353:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(72887),s=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({status:o.Types.nonEmptyString,endDate:o.Types.dateString.optional})};o.typecheck.warn(this,n,arguments);var i=t.status,s=t.endDate;this.status=a.SubscriptionFreeTrialStatus[i.toLowerCase()]||a.SubscriptionFreeTrialStatus.unknown,this.endDate=s}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Subscription.SubscriptionFreeTrial"}}]),e}()},86650:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({campaignCode:o.Types.nonEmptyString.optional,voucherCode:o.Types.nonEmptyString.optional})};o.typecheck.warn(this,n,arguments);var i=t.campaignCode,a=t.voucherCode;this.campaignCode=i,this.voucherCode=a}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Subscription.SubscriptionOffer"}}]),e}()},71800:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(72887),s=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({subType:o.Types.nonEmptyString.optional,type:o.Types.nonEmptyString})};o.typecheck.warn(this,n,arguments);var i=t.subType,s=t.type;this.subType=i?a.SubscriptionStatusSubType[i]:void 0,this.type=a.SubscriptionStatusType[s]}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Subscription.SubscriptionStatus"}}]),e}()},23731:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(e){var i;(0,r.Z)(this,n);var o=e.token,a=e.tokenType,s=e.accessTokenType,c=e.expiresIn,u=e.issuedAt,l=e.region,p=e.refreshToken,d=e.tokenData;return(i=t.call(this,p||(null==d?void 0:d.refresh_token))).token=o,i.tokenType=a,i.expiresIn=c||600,i.issuedAt=u||Date.now(),i.region=l,i.accessTokenType=s,i}return(0,i.Z)(n,[{key:"getRefreshAt",value:function(e){return this.issuedAt+this.expiresIn*e*1e3}},{key:"isAccessTokenExpired",value:function(e){var t=this.getRefreshAt(e),n=Date.now();return n>=t||n<this.issuedAt}},{key:"toString",value:function(){return"SDK.Services.Token.AccessContext"}}]),n}(n(72667).Z)},70928:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,r.Z)(this,e);var i={token:o.Types.nonEmptyString,region:o.Types.nonEmptyString.optional};(0,o.typecheck)(this,i,arguments),this.token=t,this.region=n}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Token.AccessToken"}}]),e}()},80920:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),u=n(67682);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var p=function(e){(0,a.Z)(n,e);var t=l(n);function n(e,i){var a;(0,r.Z)(this,n),a=t.call(this);var s={subject:u.Types.nonEmptyString,subjectType:u.Types.nonEmptyString};return(0,u.typecheck)((0,o.Z)(a),s,arguments),a.subject=e,a.subjectType=i,a.grantType="urn:ietf:params:oauth:grant-type:token-exchange",a.actorType="urn:ietf:params:oauth:token-type:refresh_token",a.tokenData.subject_token_type=a.subjectType,a.tokenData.subject_token=a.subject,a.tokenData.actor_token_type=a.actorType,a.tokenData.actor_token="",a}return(0,i.Z)(n,[{key:"actor",get:function(){return this.tokenData.actor_token},set:function(e){this.tokenData.actor_token=e}},{key:"toString",value:function(){return"SDK.Services.Token.DelegationToken"}}]),n}(n(40937).Z)},46516:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this,i,e)).subjectTokenTypeKey="device",o}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Token.DeviceGrant"}}]),n}(n(19436).Z)},36630:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),u=n(67682),l=n(19436);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var d=function(e){(0,a.Z)(n,e);var t=p(n);function n(e,i){var a;(0,r.Z)(this,n),a=t.call(this);var s={grant:u.Types.instanceStrict(l.Z),subjectType:u.Types.nonEmptyString};return(0,u.typecheck)((0,o.Z)(a),s,arguments),a.grant=e,a.subjectType=i,a.grantType="urn:ietf:params:oauth:grant-type:token-exchange",a.tokenData.subject_token_type=a.subjectType,a.tokenData.subject_token=a.grant.assertion,a}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Token.ExchangeGrant"}}]),n}(n(40937).Z)},19436:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t,n){(0,r.Z)(this,e);var i={assertion:o.Types.nonEmptyString,grantType:o.Types.nonEmptyString.optional};(0,o.typecheck)(this,i,arguments),this.grantType=n,this.assertion=t,this.subjectTokenTypeKey=""}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Token.Grant"}}]),e}()},72667:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),u=n(67682);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var p=function(e){(0,a.Z)(n,e);var t=l(n);function n(e){var i;(0,r.Z)(this,n),i=t.call(this);var a={refreshToken:u.Types.nonEmptyString.optional};return(0,u.typecheck)((0,o.Z)(i),a,arguments),i.grantType="refresh_token",i.tokenData.refresh_token=e||"",i}return(0,i.Z)(n,[{key:"refreshToken",get:function(){return this.tokenData.refresh_token}},{key:"toString",value:function(){return"SDK.Services.Token.RefreshGrant"}}]),n}(n(40937).Z)},58761:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(e){var i;(0,r.Z)(this,n);var o=e;return(i=t.call(this,o,"urn:ietf:params:oauth:token-type:refresh_token")).refreshToken=e,i}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Token.RefreshTokenDelegation"}}]),n}(n(80920).Z)},58052:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(97326),c=n(2291),u=n(60136),l=n(82963),p=n(61120),d=n(87757),y=n.n(d),f=(n(41539),n(39714),n(74916),n(15306),n(92222),n(67682)),h=n(17563),v=n(87891),g=n(19496),m=n(23731),b=n(98289),T=n(60755),k=n(80921),S=n(24965),P=n(1206),E=n(84983),Z=n(52662),w=n(69867),D=n(40064),C=n(83668);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var O=E.Z.services.token.tokenClient,I=function(e){(0,u.Z)(r,e);var t,n=x(r);function r(e){var t;(0,o.Z)(this,r),t=n.call(this,e);var i={options:f.Types.object({config:f.Types.instanceStrict(k.Z),platformId:f.Types.nonEmptyString.optional,logger:f.Types.instanceStrict(v.Z),httpClient:f.Types.instanceStrict(g.Z)})};(0,f.typecheck)((0,s.Z)(t),i,arguments);var a=e.platformId;return t.platformData={platform:a||t.config.extras.platformId},t.logger.log(t.toString(),"Created."),t}return(0,a.Z)(r,[{key:"exchange",value:(t=(0,i.Z)(y().mark((function e(t,n,i){var o,a,s,u,l,d,h,v,g,k,S=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={tokenRequest:f.Types.instanceStrict(b.Z),apiKey:f.Types.nonEmptyString,logTransaction:f.Types.instanceStrict(Z.Z)},(0,f.typecheck)(this,"exchange",o,S),a=this.logger,s=this.platformData,u=t.grantType,l=t.tokenData,d=t.latitude,h=t.longitude,v=T.Z.exchange,g=this.getPayload({apiKey:n,endpointKey:v,body:R(R(R({},{grant_type:u,latitude:d,longitude:h}),l),s)}),a.info(this.toString(),'Exchange token request:\n            originating grantType: "'.concat(l.subject_token_type,'",\n            latitude: "').concat(d,'",\n            longitude: "').concat(h,'",\n            platform: "').concat(s.platform,'"\n        ').replace(/(\s(?=\s))/g,"")),k=new P.Z({logger:a,source:this.toString(),urn:O.exchange,payload:g,endpointKey:v,logTransaction:i}),e.abrupt("return",(0,c.Z)((0,p.Z)(r.prototype),"request",this).call(this,{payload:g,dustLogUtility:k,resultMapper:function(e){var t=e.data,n=e.headers,r=t.access_token,i=t.token_type,o=t.refresh_token,a=t.expires_in;return new m.Z({token:r,tokenType:i,refreshToken:o,expiresIn:a,region:n.get(C.SDK_REGION)})}}));case 8:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"getPayload",value:function(e){var t=e.apiKey,n=e.endpointKey,r=e.body,i=this.config.endpoints[n],o=i.href,a=i.headers,s=i.method,c=r?h.stringify(r):"",u=(0,S.Z)({Authorization:function(){return{replacer:"{apiKey}",value:t}}},a);return{url:o,method:s,body:c,headers:new w.Z(u)}}},{key:"toString",value:function(){return"SDK.Services.Token.TokenClient"}}]),r}(D.Z)},80921:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).extras=e.extras,i}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Token.TokenClientConfiguration"}}]),n}(n(88152).Z)},60755:function(e,t){"use strict";var n;!function(e){e.exchange="exchange"}(n||(n={})),t.Z=n},431:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({platformId:o.Types.nonEmptyString}).optional};o.typecheck.warn(this,n,arguments);var i=t||{},a=i.platformId;this.platformId=a}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Token.TokenClientExtrasMap"}}]),e}()},98289:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({grantType:o.Types.nonEmptyString,tokenData:o.Types.nonEmptyObject,latitude:o.Types.number,longitude:o.Types.number})};(0,o.typecheck)(this,n,arguments);var i=t.grantType,a=t.tokenData,s=t.latitude,c=t.longitude;this.grantType=i,this.tokenData=a,this.latitude=s,this.longitude=c}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Token.TokenRequest"}}]),e}()},40937:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(15861),i=n(15671),o=n(43144),a=n(4942),s=n(87757),c=n.n(s),u=n(67682),l=n(98289),p=function(){function e(){(0,i.Z)(this,e),(0,a.Z)(this,"grantType",""),this.tokenData=Object.create(null)}var t;return(0,o.Z)(e,[{key:"build",value:(t=(0,r.Z)(c().mark((function e(t,n){var r,i,o,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={latitude:u.Types.number,longitude:u.Types.number},(0,u.typecheck)(this,"build",r,a),i=this.grantType,o=this.tokenData,e.abrupt("return",new l.Z({grantType:i,tokenData:o,latitude:t,longitude:n}));case 3:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Services.Token.TokenRequestBuilder"}}]),e}()},73492:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({updateAccessToken:o.Types.function,refreshAccessToken:o.Types.function,getAccessToken:o.Types.function,once:o.Types.function,emit:o.Types.function})};(0,o.typecheck)(this,n,arguments);var i=t.updateAccessToken,a=t.refreshAccessToken,s=t.getAccessToken,c=t.once,u=t.emit;this.once=c,this.emit=u,this.updateAccessToken=i,this.refreshAccessToken=a,this.getAccessToken=s,this.tokenManager=null}return(0,i.Z)(e,[{key:"currentTokenRefreshPromise",get:function(){var e;return(null===(e=this.tokenManager)||void 0===e?void 0:e.currentTokenRefreshPromise)||null},set:function(e){this.tokenManager&&(this.tokenManager.currentTokenRefreshPromise=e)}},{key:"toString",value:function(){return"SDK.Services.TokenUpdater"}}]),e}()},97244:function(e,t,n){"use strict";n(24603),n(74916),n(39714);var r=new RegExp("//aeng(-test)?");t.Z=function(e){return r.test(e)}},11545:function(e,t,n){"use strict";n.d(t,{Types:function(){return f},antiCorrupt:function(){return o}});var r=n(4942),i=(n(41539),n(69720),n(44048),n(9653),n(67682));function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,i.typecheck)(e,{options:i.Types.object().optional},[t]),i.Check.not.object(t)?{}:Object.entries(n).reduce((function(r,o){var a=o[0],s=t[a],c=n[a];return i.Check.function(c)&&i.Check.assigned(c.hasArgs)&&(c.hasArgs?r[a]=c(e,a,s):r[a]=c()(e,a,s)),r}),{})}function a(){throw TypeError("Correct usage: Types.number.default(0)")}function s(){throw TypeError("Correct usage: Types.integer.default(0)")}function c(){throw TypeError("Correct usage: Types.string.default('')")}function u(){throw TypeError("Correct usage: Types.object.default({})")}function l(){throw TypeError("Correct usage: Types.boolean.default(false)")}function p(e){var t=function(){throw TypeError("Correct usage: Types.integerGreater(1).default(1)")};return t.hasArgs=!0,(t.default=function(t){var n=function(n,o,a){if(Number.isNaN(a))return t;if((0,i.typecheck)(n,(0,r.Z)({},o,i.Types.number.optional),[a]),i.Check.number(a)){var s=Math.floor(a);return s>e?s:t}return t};return n.hasArgs=!0,n}).hasArgs=!0,t}function d(e){var t=function(){throw TypeError("Correct usage: Types.integerGreaterOrEqual(1).default(1)")};return t.hasArgs=!0,(t.default=function(t){var n=function(n,o,a){if(Number.isNaN(a))return t;if((0,i.typecheck)(n,(0,r.Z)({},o,i.Types.number.optional),[a]),i.Check.number(a)){var s=Math.floor(a);return s>=e?s:t}return t};return n.hasArgs=!0,n}).hasArgs=!0,t}function y(e){var t=function(){throw TypeError("Correct usage: Types.in({}).default('none')")};return t.hasArgs=!0,(t.default=function(t){var n=function(n,o,a){return(0,i.typecheck)(n,(0,r.Z)({},o,i.Types.in(e).optional),[a]),i.Check.assigned(a)?a:t};return n.hasArgs=!0,n}).hasArgs=!0,t}a.hasArgs=!1,a.default=function(e){var t=function(t,n,o){return Number.isNaN(o)?e:((0,i.typecheck)(t,(0,r.Z)({},n,i.Types.number.optional),[o]),i.Check.number(o)?o:e)};return t.hasArgs=!0,t},a.default.hasArgs=!1,s.hasArgs=!1,s.default=function(e){var t=function(t,n,o){return Number.isNaN(o)?e:((0,i.typecheck)(t,(0,r.Z)({},n,i.Types.number.optional),[o]),i.Check.number(o)?Math.floor(o):e)};return t.hasArgs=!0,t},s.default.hasArgs=!1,c.hasArgs=!1,c.default=function(e){var t=function(t,n,o){return(0,i.typecheck)(t,(0,r.Z)({},n,i.Types.string.optional),[o]),i.Check.string(o)?o:e};return t.hasArgs=!0,t},c.default.hasArgs=!1,u.hasArgs=!1,u.default=function(e){var t=function(t,n,o){return(0,i.typecheck)(t,(0,r.Z)({},n,i.Types.object().optional),[o]),i.Check.object(o)?o:e};return t.hasArgs=!0,t},u.default.hasArgs=!1,l.hasArgs=!1,l.default=function(e){var t=function(t,n,o){return(0,i.typecheck)(t,(0,r.Z)({},n,i.Types.boolean.optional),[o]),i.Check.boolean(o)?o:e};return t.hasArgs=!0,t},l.default.hasArgs=!1,p.hasArgs=!1,d.hasArgs=!1,y.hasArgs=!1;var f={number:a,boolean:l,integer:s,integerGreater:p,integerGreaterOrEqual:d,in:y,string:c,object:u}},29466:function(e,t,n){"use strict";n(26699),n(32023),n(92222);var r=n(67682);t.Z=function(e,t){var n="";if(r.Check.string(e)&&(n=e),r.Check.nonEmptyString(t)){var i=n.includes("?")?"&":"?";return n.concat("".concat(i).concat(t))}return n}},43425:function(e,t,n){"use strict";var r=n(71002);n(66992),n(41539),n(78783),n(38478),n(43561),n(32049),n(33948),t.Z=function(){var e=new WeakSet;return function(t,n){if("object"===(0,r.Z)(n)&&null!==n){if(e.has(n))return;e.add(n)}return n}}},79337:function(e,t,n){"use strict";n(41539),n(88674),t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))}},1974:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}}),n(41539),n(47941);var r=n(40176);function i(e){var t=!1;if(Array.isArray(e)&&e.length){var n=e[0].code;Object.keys(r.Z).every((function(e){return r.Z[e].code!==n||(t=!0,!1)}))}return t}},5301:function(e,t,n){"use strict";n.d(t,{Co:function(){return c},Kf:function(){return u},ZP:function(){return l}}),n(9653),n(44048),n(82526),n(41817);var r=n(3920),i=n(70187),o=n(78641),a=n(14024),s=n(83668);function c(e,t,n){var r,c=t.status,u=t.headers,l=u.get(s.REQUEST_ID),p=u.get(s.CONTENT_TYPE);if(n===i.Z.common.temporarilyThrottled){var d=u.get(s.RATE_LIMIT_DURATION);r=Number(d),Number.isNaN(r)&&(r=void 0)}if(!n){var y="string"==typeof l,f="string"==typeof p&&"text/html"===p.toLowerCase();if(c>=500)n=i.Z.common.temporarilyUnavailable;else if(c===a.Z.FORBIDDEN&&!y&&f)n=i.Z.common.requestBlocked;else if(c===a.Z.OK&&e.length){n=i.Z.common.unexpectedError;var h=e[0];"string"==typeof h.description&&(n.message=h.description)}else n=i.Z.common.unexpectedError}return new o.Z({transactionId:null!=l?l:void 0,reasons:e,exceptionData:n,status:c,throttleTimeout:r})}function u(e){var t=e.exceptionData,n=e.description,i=e.code,a=e.backoffSeconds,s=e.data,c=[new r.Z({description:n,code:i,backoffSeconds:a,data:s})];return new o.Z({reasons:c,exceptionData:t})}function l(e){return u({exceptionData:i.Z.common.invalidState,description:e})}},68436:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}}),n(47941),n(41539);var r=n(61655);function i(e,t){for(var n,i=0,o=Object.keys(r.Ts);i<o.length;i++){var a=o[i],s=r.Ts[a],c=s.errorCases;if(Array.isArray(c)&&c.length&&c.some((function(n){return n.status===e&&n.method===t}))&&(n=s),n)break}return n}},4877:function(e,t,n){"use strict";var r=n(71002),i=(n(41539),n(54747),n(3920)),o={is:function(e){var t=(e||{}).data,n=void 0===t?{}:t,i=("object"===(0,r.Z)(n.error)?n.error:{}).details;return!!(void 0===i?[]:i).length},process:function(e){var t=e.data,n=((void 0===t?{}:t).error||{}).details,r=[];return(void 0===n?[]:n).forEach((function(e){var t=e.code,n=e.issue;r.push(new i.Z({code:t,description:n}))})),{errorReasons:r}}};t.Z=o},82518:function(e,t,n){"use strict";n(57327),n(41539),n(54747),n(82526),n(41817);var r=n(3920),i=function(e){return"string"==typeof e.code},o={is:function(e){var t=(e.data||{}).errors,n=void 0===t?[]:t;return Array.isArray(n)&&!!n.length},process:function(e){var t=[],n=(e.data||{}).errors;return(void 0===n?[]:n).filter(i).forEach((function(e){var n=e.code,i=e.description,o=e.data;t.push(new r.Z({code:n,description:i,data:o}))})),{errorReasons:t}}};t.Z=o},49772:function(e,t,n){"use strict";var r=n(67682),i=n(3920),o={is:function(e){var t=e.data,n=e.isSuccessStatus,i=t||{},o=i.errors,a=void 0===o?[]:o,s=i.data,c=(a.length?a[0]:{}).extensions;return!(!n||"string"!=typeof(void 0===c?{}:c).code||!r.Check.not.nonEmptyObject(s))},process:function(e){var t=(e.data||{}).errors,n=(void 0===t?[]:t)[0]||{},r=n.message,o=void 0===r?"":r,a=n.extensions,s=void 0===a?{}:a,c=n.data,u=void 0===c?void 0:c;return{errorReasons:[new i.Z({code:s.code,description:o,data:u})],_isGraphError:!0}}};t.Z=o},76253:function(e,t,n){"use strict";var r=n(40176),i=n(3920),o={is:function(e){var t=e.isError,n=e.headers;return!(!t||null==n||!n.get||n.get(r.Z.serviceCapacity.header)!==r.Z.serviceCapacity.code)},process:function(){return{errorReasons:[new i.Z({code:r.Z.serviceCapacity.code,description:r.Z.serviceCapacity.exceptionData.message,backoffSeconds:120})]}}};t.Z=o},5622:function(e,t,n){"use strict";var r=n(3920),i={is:function(e){var t=e.data,n=e.isError,r=(t||{}).error;return!(!n||"string"!=typeof r)},process:function(e){var t=e.data||{},n=t.error,i=t.error_description;return{errorReasons:[new r.Z({code:n,description:i})]}}};t.Z=i},14024:function(e,t){"use strict";var n;!function(e){e[e.OK=200]="OK",e[e.ACCEPTED=202]="ACCEPTED",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.UNPROCESSABLE_CONTENT=422]="UNPROCESSABLE_CONTENT",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE"}(n||(n={})),t.Z=n},84310:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}}),n(41539),n(54747);var r=n(4877),i=n(82518),o=n(49772),a=n(76253),s=n(5622);function c(e,t,n,c){var u=[],l=[a.Z,r.Z,o.Z,s.Z,i.Z],p={data:e,headers:t,isError:n,isSuccessStatus:c},d=!1;return l.forEach((function(e){if(e.is(p)){var t=e.process(p),n=t.errorReasons,r=t._isGraphError;n.forEach((function(e){u.push(e)})),r&&(d=!0)}})),{errors:u,isGraphError:d}}},72357:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(54546);function i(e,t){if(t in e)return t;var n=Object.entries(e).find((function(e){return(0,r.Z)(e,2)[1]===t}));return n?n[0]:void 0}n(69826),n(41539),n(69720)},40467:function(e,t,n){"use strict";var r=n(71002);t.Z=function(){return"object"===("undefined"==typeof self?"undefined":(0,r.Z)(self))&&self.self===self&&self||"object"===(void 0===n.g?"undefined":(0,r.Z)(n.g))&&n.g.global===n.g&&n.g||window}},7694:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}}),n(26699),n(32023),n(41539),n(88674);var r=n(67682),i=n(1974),o=n(9344),a=n(87891);function s(e,t,n){if(a.Z.instance.debugEnabled&&"test"===o.$.Test){var r=n.status,i=n.headers,s=n.url,c=n.body,u=console;u.info("\n**********************************************"),u.log("DEBUG: response.url:",s),u.log("DEBUG: response.status:",r),u.log("DEBUG: response.headers:",i),u.log("DEBUG: response.body:",c),u.log("DEBUG: exception.reasons:",t.reasons),e&&u.log("DEBUG: Graph Response Errors",e),u.info("**********************************************\n")}}var c=n(5301),u=(n(82526),n(41817),n(47941),n(40176)),l=n(68436);function p(e,t,n){for(var r,i=e[0]||{},o=i.description,a=i.code,s=0,c=Object.keys(u.Z);s<c.length;s++){var p=c[s],d=u.Z[p];if(Array.isArray(d.description)&&a===d.code&&d.description.includes(o)){r=d.exceptionData;break}if(Array.isArray(d.status)&&!r&&a===d.code&&d.status.includes(t)){r=d.exceptionData;break}if(a===d.code&&!r){r=d.exceptionData;break}}return n&&!r&&(r=(0,l.Z)(t,n)),r}var d=n(84310),y=n(14024),f=n(83668);function h(e){var t={options:r.Types.object({response:r.Types.object(),dustLogUtility:r.Types.skip,methodName:r.Types.nonEmptyString.optional})};(0,r.typecheck)("handleServiceResponse",t,arguments);var n=e.response,o=e.dustLogUtility,a=e.methodName,u=n.status,l=n.headers,h=n.data,v=[y.Z.OK,y.Z.ACCEPTED].includes(u),g=l.get(f.REQUEST_ID),m=u>=400,b=!1;o&&o.parseResponse({response:n,transactionId:g});var T=(0,d.Z)(h,l,m,v),k=T.errors,S=T.isGraphError;if(S&&(m=S),v&&(b=(0,i.Z)(k)),m||b){var P=p(k,u,a),E=(0,c.Co)(k,n,P);return null!=o&&o.logTransaction&&o.setServiceInteraction({response:n,exception:E}),null==o||o.captureError(E),s(k,E,n),Promise.reject(E)}return null!=o&&o.logTransaction&&o.setServiceInteraction({response:n}),Promise.resolve(n)}},20987:function(e,t,n){"use strict";var r=n(40467);t.Z=function(){var e="storage_feature_test";try{var t=(0,r.Z)().localStorage;if(t.setItem(e,"yes"),"yes"===t.getItem(e))return t.removeItem(e),!0}catch(e){}return!1}},88534:function(e,t,n){"use strict";n(24603),n(74916),n(39714),t.Z=function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}},37736:function(e,t,n){"use strict";n(24603),n(74916),n(39714),n(92222);var r=n(67682);t.Z=function(e){var t,n;if(r.Check.nonEmptyString(e)){var i=new RegExp("^(.*:)//?([www.]+)*([A-Za-z0-9-._]+)(:[0-9]+)?(.*)$","g").exec(e);r.Check.nonEmptyArray(i)&&(t="".concat(i[1],"//").concat(i[3]),n=i[5])}return{host:t,path:n}}},24965:function(e,t,n){"use strict";n(47941),n(82526),n(57327),n(38880),n(49337);var r=n(54546),i=n(4942),o=(n(41539),n(54747),n(69720),n(74916),n(15306),n(24603),n(39714),n(67682)),a=n(83668),s=n(53169);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return o.Check.object(e)?JSON.stringify(e):o.Check.date(e)?e.toISOString():"".concat(e)}var p=(0,i.Z)({},a.REQUEST_ID,(function(){return{value:(0,s.Z)()}}));t.Z=function(e,t,n,i){var a=u({},t),s=u(u({},e),null!=i&&i.ignoreRequestId?{}:p);return Object.entries(s).forEach((function(e){var i,s=(0,r.Z)(e,2),c=s[0],u=s[1],p=null!==(i=t[c])&&void 0!==i?i:null==n?void 0:n[c];if(o.Check.assigned(p)){var d=u(p),y=d.replacer,f=d.value,h=d.removeIfEmpty,v=void 0!==h&&h;o.Check.assigned(f)?a[c]=y?p.replace(new RegExp(y,"gi"),l(f)):l(f):v&&delete a[c]}})),a}},35493:function(e,t,n){"use strict";n(69600),n(41539),n(69720),n(24603),n(74916),n(39714),n(15306),t.Z=function(e,t){return t?Object.entries(t).reduce((function(e,t){var n=t[0],r=t[1],i=new RegExp("{".concat(n,"}"),"i");return e.replace(i,function(e){return Array.isArray(e)?e.join(""):null==e?"":"".concat(e)}(r))}),e):e}},53169:function(e,t,n){"use strict";var r;n.d(t,{Z:function(){return p}});var i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}for(var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(e){return"string"==typeof e&&a.test(e)},c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n},p=function(e,t,n){var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return l(r)}},43469:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}}),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(60136),c=n(82963),u=n(61120),l=n(87757),p=n.n(l),d=(n(74916),n(15306),n(92222),n(41539),n(39714),n(67682)),y=n(17187),f=n(87891),h=n(31545),v=n(61650),g=n(14008),m=n(81350),b=n(9588);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var k=function(e){(0,s.Z)(u,e);var t,n,c=T(u);function u(e){var t;(0,i.Z)(this,u),t=c.call(this);var n={options:d.Types.object({clientId:d.Types.nonEmptyString,environment:d.Types.nonEmptyString,logger:d.Types.instanceStrict(f.Z),storage:d.Types.instanceStrict(g.Z.Storage)})};(0,d.typecheck)((0,a.Z)(t),n,arguments);var r=e.clientId,o=e.environment,s=e.logger,l=e.storage;return t.clientId=r,t.environment=o,t.logger=s,t.storage=l,t.cacheKey="\n            ".concat(m.FEATURE_FLAGS_KEY).concat(t.clientId,"_").concat(t.environment,"\n        ").replace(b.REPLACE_NL_WS,""),t.logger.log(t.toString(),"Created."),t}return(0,o.Z)(u,[{key:"saveFeatureFlags",value:(n=(0,r.Z)(p().mark((function e(t){var n,r,i,o=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={featureFlags:d.Types.object()},(0,d.typecheck)(this,"saveFeatureFlags",n,o),this.logger.info(this.toString(),'Save feature flags to Storage using key: "'.concat(this.cacheKey,'".')),e.next=4,this.getFeatureFlags();case 4:return r=e.sent,i=new v.Z(r,t),e.next=8,this.storage.set(this.cacheKey,t);case 8:this.emit(h.Z.FeatureFlagsChanged,i);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getFeatureFlags",value:(t=(0,r.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.log(this.toString(),"Get cached feature flags."),e.prev=1,e.next=4,this.storage.get(this.cacheKey);case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this.logger.error(this.toString(),e.t0);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Session.FeatureFlagsStorage"}}]),u}(y.EventEmitter)},60439:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}}),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(60136),c=n(82963),u=n(61120),l=n(87757),p=n.n(l),d=(n(74916),n(15306),n(92222),n(41539),n(39714),n(67682)),y=n(17187),f=n(87891),h=n(14008),v=n(18479),g=n(97666),m=n(80540),b=n(81350),T=n(9588);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var S=function(e){(0,s.Z)(l,e);var t,n,c,u=k(l);function l(e){var t;(0,i.Z)(this,l),t=u.call(this);var n={options:d.Types.object({clientId:d.Types.nonEmptyString,environment:d.Types.nonEmptyString,logger:d.Types.instanceStrict(f.Z),storage:d.Types.instanceStrict(h.Z.Storage)})};(0,d.typecheck)((0,a.Z)(t),n,arguments);var r=e.clientId,o=e.environment,s=e.logger,c=e.storage;return t.clientId=r,t.environment=o,t.logger=s,t.storage=c,t.sessionInfo=null,t.cacheKey="\n            ".concat(b.SESSION_INFO_KEY).concat(t.clientId,"_").concat(t.environment,"\n        ").replace(T.REPLACE_NL_WS,""),t.logger.log(t.toString(),"Created."),t}return(0,o.Z)(l,[{key:"saveSessionInfo",value:(c=(0,r.Z)(p().mark((function e(t){var n,r,i,o,a,s,c=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={sessionInfo:d.Types.instanceStrict(v.Z)},(0,d.typecheck)(this,"saveSessionInfo",n,c),r=this.cacheKey,i=this.logger,o=this.storage,i.info(this.toString(),'Save SessionInfo to Storage using key: "'.concat(r,'".')),e.next=5,this.getSessionInfo();case 5:return a=e.sent,this.sessionInfo=t,e.next=9,o.set(r,t);case 9:this.hasSessionInfoChanged(a,t)&&(s=new g.Z(a,t),this.emit(m.Z.SessionInfoChanged,s));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"getSessionInfo",value:(n=(0,r.Z)(p().mark((function e(){var t,n,r,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.logger,n=this.storage,r=this.cacheKey,t.log(this.toString(),"Get cached SessionInfo."),e.prev=2,e.next=5,n.get(r);case 5:if(!(i=e.sent)){e.next=8;break}return e.abrupt("return",l.normalizeSessionInfoFromCache(i));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t.error(this.toString(),e.t0);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(){return n.apply(this,arguments)})},{key:"clear",value:(t=(0,r.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.cacheKey,n=this.storage,this.logger.warn(this.toString(),'Clearing cached SDK.Services.Session.SessionInfo for key: "'.concat(t,'".')),e.next=4,n.remove(t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"hasSessionInfoChanged",value:function(e,t){if(d.Check.not.assigned(e))return!0;try{return e.id!==t.id}catch(e){return this.logger.warn(this.toString(),e),!0}}},{key:"toString",value:function(){return"SDK.Session.SessionInfoStorage"}}],[{key:"normalizeSessionInfoFromCache",value:function(e){return v.Z.create(e)}}]),l}(y.EventEmitter)},35840:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=(n(41539),n(39714),n(69600),n(67682)),u=n(7607),l=n(87891),p=n(60439),d=(n(12419),n(60136)),y=n(82963),f=n(61120),h=n(67230),v=n(17389);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.Z)(e);if(t){var i=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,y.Z)(this,n)}}var m=function(e){(0,d.Z)(n,e);var t=g(n);function n(){return(0,i.Z)(this,n),t.call(this,{query:v.nk,operationName:"activeSession"})}return(0,o.Z)(n,[{key:"toString",value:function(){return"SDK.Session.SessionInfoRequest"}}]),n}(h.Z),b=n(43469),T=n(95400),k=n(18479),S=n(52662),P=n(84983),E=function(){function e(t){(0,i.Z)(this,e);var n={options:c.Types.object({logger:c.Types.instanceStrict(l.Z),tokenManager:c.Types.instanceStrict(T.Z),sessionInfoStorage:c.Types.instanceStrict(p.Z),featureFlagsStorage:c.Types.instanceStrict(b.Z),orchestrationClient:c.Types.instanceStrict(u.Z)})};(0,c.typecheck)(this,n,arguments);var r=t.logger,o=t.tokenManager,a=t.sessionInfoStorage,s=t.featureFlagsStorage,d=t.orchestrationClient;this.logger=r,this.tokenManager=o,this.storage=a,this.featureFlagsStorage=s,this.orchestrationClient=d,this.logger.log(this.toString(),"Created.")}var t,n,a,d;return(0,o.Z)(e,[{key:"getInfo",value:(d=(0,r.Z)(s().mark((function e(t){var n,i,o=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage,e.next=3,n.getSessionInfo();case 3:if(i=e.sent,!c.Check.instanceStrict(i,k.Z)){e.next=6;break}return e.abrupt("return",i);case 6:if(!t){e.next=8;break}return e.abrupt("return",this.getInfoFromServices(t));case 8:return e.abrupt("return",S.Z.wrapLogTransaction({file:this.toString(),urn:P.Z.sdkSession.getSessionInfo,logger:this.logger,action:function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.getInfoFromServices(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"getInfoFromServices",value:(a=(0,r.Z)(s().mark((function e(t){var n,r,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.accessToken,r=this.storage,e.next=3,this.orchestrationClient.query({request:new m,accessToken:n,logTransaction:t});case 3:return i=e.sent,o=k.Z.create(i.activeSession),e.next=7,r.saveSessionInfo(o);case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getFeatureFlags",value:(n=(0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.featureFlagsStorage.getFeatureFlags();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"createMessageSubject",value:(t=(0,r.Z)(s().mark((function e(){var t,n,r,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.accessToken){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,this.getInfo();case 5:if(!(t=e.sent)){e.next=14;break}if(r=t.id,i=null===(n=t.profile)||void 0===n?void 0:n.id,o=[],r&&o.push("sessionId=".concat(r)),i&&o.push("profileId=".concat(i)),!o.length){e.next=14;break}return e.abrupt("return",o.join());case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(0);case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this,[[0,16]])}))),function(){return t.apply(this,arguments)})},{key:"accessToken",get:function(){return this.tokenManager.getAccessToken()}},{key:"toString",value:function(){return"SDK.Session.SessionManager"}}]),e}()},97666:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(18479),s=function(){function e(t,n){(0,r.Z)(this,e);var i={oldSessionInfo:o.Types.instanceStrict(a.Z).optional,newSessionInfo:o.Types.instanceStrict(a.Z).optional};(0,o.typecheck)(this,i,arguments),this.oldSessionInfo=t,this.newSessionInfo=n}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.SessionInfoChangedEvent"}}]),e}()},77309:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(53169),s=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({eventType:o.Types.nonEmptyString,schemaUrl:o.Types.nonEmptyString,dataContentType:o.Types.nonEmptyString.optional,subject:o.Types.nonEmptyString.optional})};(0,o.typecheck)(this,n,arguments);var i=t.eventType,s=t.schemaUrl,c=t.dataContentType,u=t.data,l=t.subject;this.eventType=i,this.schemaUrl=s,this.data=u,this.dataContentType=c||"application/json;charset=utf-8",this.subject=l,this.id=(0,a.Z)(),this.time=new Date,this.sdkSource=null}return(0,i.Z)(e,[{key:"source",get:function(){return this.sdkSource}},{key:"getSocketMessage",value:function(e){var t={options:o.Types.object({subject:o.Types.nonEmptyString.optional,source:o.Types.nonEmptyString})};(0,o.typecheck)(this,"getSocketMessage",t,arguments);var n=e.source,r=e.subject;this.sdkSource=n;var i=this.eventType,a=this.data,s=this.dataContentType,c=this.id,u=this.subject,l={source:n,time:this.time.toISOString(),id:c,data:a,datacontenttype:s,type:i,schemaurl:this.schemaUrl,subject:r||u||null};return l}},{key:"toString",value:function(){return"SDK.Socket.MessageEnvelope"}}]),e}()},32499:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}}),n(41539),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(60136),s=n(82963),c=n(61120),u=n(87757),l=n.n(u),p=(n(26699),n(32023),n(60203)),d=n(65550),y=n(53744);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var h=n(84983).Z.socket.socketManager,v=function(e){(0,a.Z)(s,e);var t,n=f(s);function s(e){var t;(0,i.Z)(this,s);var r=[h.ageVerificationRequestCompleted,h.ageVerificationRequestErrored,h.ageVerificationRedeemCompleted,h.ageVerificationRedeemErrored];return(t=n.call(this,r)).socketManager=e,t}return(0,o.Z)(s,[{key:"process",value:(t=(0,r.Z)(l().mark((function e(t){var n,r,i,o,a,s,c,u,p,f,v;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.type,r=t.data,o=(i=r).deviceId,a=i.accountId,s=i.profileId,c=i.errorCode,u=i.timestamp,p=[h.ageVerificationRequestCompleted,h.ageVerificationRequestErrored],f=p.includes(n)?y.Z.request:y.Z.redeem,v={deviceId:o,accountId:a,profileId:s,errorCode:c,timestamp:u,flowType:f},this.socketManager.emit(d.Z.ageVerificationChanged,v);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Socket.Messages.AgeVerificationMessageProcessor"}}]),s}(p.Z)},36147:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}}),n(41539),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(60136),s=n(82963),c=n(61120),u=n(87757),l=n.n(u),p=n(60203),d=n(15910);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var f=n(84983).Z.socket,h=function(e){(0,a.Z)(s,e);var t,n=y(s);function s(e,t){var r;(0,i.Z)(this,s);var o=f.socketManager.authenticated;return(r=n.call(this,o)).socketManager=e,r.startupPromiseResolveCallback=t,r}return(0,o.Z)(s,[{key:"process",value:(t=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.startupPromiseResolveCallback(),this.socketManager.retryAttempts=0,this.socketManager.retryDelay=1e3*this.socketManager.retryPolicy.retryBasePeriod,this.socketManager.emitConnectionState(d.Z.connected),this.socketManager.sendFlowControl(),e.next=7,this.socketManager.flushAwaitingConnectionBuffer();case 7:this.socketManager.pingPongMessageProcessor.start(),this.socketManager.oldSocket&&this.socketManager.closeExistingSocket();case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Socket.Messages.AuthenticatedMessageProcessor"}}]),s}(p.Z)},36097:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120),c=n(60203),u=n(65550);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var p=n(84983).Z.socket,d=function(e){(0,o.Z)(n,e);var t=l(n);function n(e){var i;(0,r.Z)(this,n);var o=p.socketManager.flowControlError;return(i=t.call(this,o)).socketManager=e,i}return(0,i.Z)(n,[{key:"process",value:function(e){var t,n,r=null!==(t=null==e||null===(n=e.data)||void 0===n?void 0:n.errors)&&void 0!==t?t:[],i=this.createServiceException(r);this.socketManager.emit(u.Z.flowControlError,i)}},{key:"toString",value:function(){return"SDK.Socket.Messages.FlowControlErrorMessageProcessor"}}]),n}(c.Z)},2956:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(9493),s=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({policy:o.Types.in(a.Z),eventTypes:o.Types.array.of.nonEmptyString})};(0,o.typecheck)(this,n,arguments);var i=t.policy,s=t.eventTypes;this.policy=i,this.eventTypes=s}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Socket.Messages.FlowControlPolicy"}}]),e}()},9493:function(e,t){"use strict";var n;!function(e){e.unthrottledCustom="urn:dss:event-edge:flow-control:policy:unthrottled-custom",e.throttled="urn:dss:event-edge:flow-control:policy:throttled",e.paused="urn:dss:event-edge:flow-control:policy:paused"}(n||(n={})),t.Z=n},10376:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this)).socketManager=e,i}return(0,i.Z)(n,[{key:"is",value:function(){return!0}},{key:"process",value:function(e){this.socketManager.emit(e.type,e)}},{key:"toString",value:function(){return"SDK.Socket.Messages.ForwardAllMessagesProcessor"}}]),n}(n(60203).Z)},60203:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(15671),i=n(43144),o=(n(26699),n(32023),n(21249),n(82526),n(41817),n(69826),n(41539),n(26833),n(67682)),a=n(40176),s=n(3920),c=n(78641),u=function(){function e(t){(0,r.Z)(this,e),this.messageTypes=o.Check.array(t)?t:[t]}return(0,i.Z)(e,[{key:"is",value:function(e){var t=(e||{}).type;return this.messageTypes.includes(t)}},{key:"createServiceException",value:function(e){if(o.Check.not.nonEmptyArray(e)||o.Check.not.nonEmptyObject(e[0]))return new c.Z;var t=e[0].code,n=e.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new s.Z({code:e.code,description:e.description})})),r=Object.values(a.Z).find((function(e){return e.code===t})),i=r&&r.exceptionData;return new c.Z({reasons:n,exceptionData:i})}},{key:"toString",value:function(){return"SDK.Socket.Messages.MessageProcessorBase"}}]),e}()},36603:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(4942),i=n(15861),o=n(15671),a=n(43144),s=n(60136),c=n(82963),u=n(61120),l=n(87757),p=n.n(l),d=(n(41539),n(39714),n(52662)),y=n(60203),f=n(65550),h=n(84983),v=n(81143),g=n(72357);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var k=h.Z.socket,S=function(e){(0,s.Z)(r,e);var t,n=T(r);function r(e){var t;(0,o.Z)(this,r);var i=e.socketManager,a=e.tokenManager,s=e.logger,c=k.socketManager.offDeviceTokenRefresh;return(t=n.call(this,c)).socketManager=i,t.tokenManager=a,t.logger=s,t}return(0,a.Z)(r,[{key:"process",value:(t=(0,i.Z)(p().mark((function e(t){var n,r,o,a,s,c,u=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.tokenManager,r=this.logger,o=t.data,a=o.refreshToken,s=o.offDeviceRedemptionFlow,c=(0,g.Z)(v.Z,s),e.next=5,d.Z.wrapLogTransaction({urn:k.socketManager.offDeviceTokenRefresh,file:this.toString(),logger:r,action:function(){var e=(0,i.Z)(p().mark((function e(r){var i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.deviceManager.getDeviceGrant(void 0,r);case 3:return i=e.sent,e.next=6,n.reset({deviceGrant:i},r);case 6:return(o=n.getAccessState()).data.refreshToken=a,e.next=10,n.restoreAccessState(JSON.stringify(o),r);case 10:u.socketManager.emit(f.Z.offDeviceTokenRefresh,b(b({},t.data),{},{offDeviceRedemptionFlow:c})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),u.socketManager.emit(f.Z.offDeviceTokenRefresh,{exception:e.t0});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Socket.Messages.OffDeviceTokenRefreshMessageProcessor"}}]),r}(y.Z)},46531:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=(n(41539),n(88674),n(67682)),u=n(87891),l=n(77309),p=n(43118),d=n(84983).Z.socket,y=function(){function e(t){(0,i.Z)(this,e);var n={options:c.Types.object({socketManager:c.Types.object(),logger:c.Types.instanceStrict(u.Z),pongTimeout:c.Types.number,pingMaxAttempts:c.Types.number})};(0,c.typecheck)(this,n,arguments);var r=t.socketManager,o=t.logger,a=t.pongTimeout,s=t.pingMaxAttempts;this.socketManager=r,this.logger=o,this.pongTimeout=a,this.pingMaxAttempts=s,this.pingAttempts=0,this.pongResolve=function(){}}var t;return(0,o.Z)(e,[{key:"send",value:(t=(0,r.Z)(s().mark((function e(){var t=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,r.Z)(s().mark((function e(n,r){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new l.Z({eventType:d.socketManager.ping,schemaUrl:p.Z.ping}),t.pingAttempts++,t.pongResolve=function(){t.pingAttempts=0,t.timeoutId&&clearTimeout(t.timeoutId),n(void 0)},e.next=5,t.socketManager.sendMessage(i);case 5:t.timeoutId=setTimeout((function(){t.pingAttempts>=t.pingMaxAttempts?(t.logger.error("Ping","Server has been pinged ".concat(t.pingAttempts," times with no pong received")),r()):(t.logger.error("Ping","Ping request timed out before pong received - trying attempt: ".concat(t.pingAttempts)),t.send().then(n,r))}),1e3*t.pongTimeout);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"pong",value:function(){this.pongResolve()}},{key:"toString",value:function(){return"SDK.Socket.Messages.Ping"}}]),e}()},61811:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}}),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(15861),i=n(4942),o=n(15671),a=n(43144),s=n(97326),c=n(60136),u=n(82963),l=n(61120),p=(n(41539),n(88674),n(87757)),d=n.n(p),y=n(67682),f=n(46531),h=n(47642),v=n(60203),g=n(87891),m=n(84983),b=n(92522);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var P=m.Z.socket,E=function(e){(0,c.Z)(u,e);var t,n,i=S(u);function u(e){var t;(0,o.Z)(this,u);var n=P.socketManager.pong;t=i.call(this,n);var r={options:y.Types.object({socketManager:y.Types.assigned,config:y.Types.instanceStrict(b.Z),logger:y.Types.instanceStrict(g.Z)})};(0,y.typecheck)((0,s.Z)(t),r,arguments);var a=e.socketManager,c=e.config,l=e.logger,p={disabled:!1,pingInterval:5,pongTimeout:5,pingMaxAttempts:2};return t.socketManager=a,t.config=c,t.logger=l,t.pingPolicy=k(k({},p),t.config.extras.pingPolicy),t.intervalId=void 0,t.currentPing=null,t}return(0,a.Z)(u,[{key:"enable",value:function(e){this.pingPolicy=k(k({},this.pingPolicy),e),this.pingPolicy.disabled=!1,this.start()}},{key:"disable",value:function(){this.pingPolicy.disabled=!0,this.stop()}},{key:"stop",value:function(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=void 0}},{key:"process",value:(n=(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.currentPing&&(this.currentPing.pong(),this.logger.info("PingPongMessageProcessor","Pong received"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"reset",value:function(){this.currentPing&&(this.currentPing.pong(),this.logger.info("PingPongMessageProcessor","Message received, resetting the ping timer")),this.start()}},{key:"start",value:(t=(0,r.Z)(d().mark((function e(){var t=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){t.pingPolicy.disabled?e(void 0):t.isSocketConnected?(t.intervalId&&t.stop(),t.intervalId=setTimeout((0,r.Z)(d().mark((function r(){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.currentPing=new f.Z({socketManager:t.socketManager,logger:t.logger,pongTimeout:t.pingPolicy.pongTimeout,pingMaxAttempts:t.pingPolicy.pingMaxAttempts}),r.prev=1,r.next=4,t.currentPing.send();case 4:r.next=11;break;case 6:return r.prev=6,r.t0=r.catch(1),t.stop(),r.next=11,t.socketManager.beginReconnecting();case 11:t.start().then(e,n);case 12:case"end":return r.stop()}}),r,null,[[1,6]])}))),1e3*t.pingPolicy.pongTimeout)):setTimeout((function(){t.start().then(e,n)}),1e3*t.pingPolicy.pongTimeout)}));case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"isSocketConnected",get:function(){return this.socketManager.isSocketInReadyState(h.Z.OPEN)}},{key:"toString",value:function(){return"SDK.Socket.Messages.PingPongMessageProcessor"}}]),u}(v.Z)},15758:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120),c=n(60203);function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var l=n(84983).Z.socket,p=function(e){(0,o.Z)(n,e);var t=u(n);function n(e){var i;(0,r.Z)(this,n);var o=l.socketManager.received;return(i=t.call(this,o)).socketManager=e,i}return(0,i.Z)(n,[{key:"process",value:function(e){var t,n=this,r=null!==(t=e.data)&&void 0!==t?t:{},i=r.eventId,o=r.status,a=r.retriesExhausted;if(this.socketManager.pingPongMessageProcessor.reset(),i){var s={eventId:i,status:o,retriesExhausted:a};this.socketManager.envelopeMessageQueue.processAcknowledgment((function(e){return n.socketManager.sendSocketMessage(e)}),(function(e,t){n.socketManager.sendMessageWithSessionAuthentication({message:t,accessToken:e})}),s)}}},{key:"toString",value:function(){return"SDK.Socket.Messages.ReceivedMessageProcessor"}}]),n}(c.Z)},81575:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}}),n(41539),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(60136),s=n(82963),c=n(61120),u=n(87757),l=n.n(u),p=n(60203);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var y=n(84983).Z.socket,f=function(e){(0,a.Z)(s,e);var t,n=d(s);function s(e){var t;(0,i.Z)(this,s);var r=y.socketManager.reconnect;return(t=n.call(this,r)).socketManager=e,t}return(0,o.Z)(s,[{key:"process",value:(t=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.socketManager.reconnect(t.data.region);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Socket.Messages.ReconnectMessageProcessor"}}]),s}(p.Z)},3269:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}}),n(41539),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(60136),s=n(82963),c=n(61120),u=n(87757),l=n.n(u),p=n(60203),d=n(65550);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var f=n(84983).Z.socket,h=function(e){(0,a.Z)(s,e);var t,n=y(s);function s(e){var t;(0,i.Z)(this,s);var r=f.socketManager.refresh;return(t=n.call(this,r)).socketManager=e,t}return(0,o.Z)(s,[{key:"process",value:(t=(0,r.Z)(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data,r=n.reason,this.socketManager.emit(d.Z.tokenRefreshRequested,{reason:r});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Socket.Messages.RefreshMessageProcessor"}}]),s}(p.Z)},30736:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}}),n(41539),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(60136),s=n(82963),c=n(61120),u=n(87757),l=n.n(u),p=(n(82526),n(41817),n(26699),n(60203));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var y=n(84983).Z.socket,f=function(e){(0,a.Z)(s,e);var t,n=d(s);function s(e){var t;(0,i.Z)(this,s);var r=e.socketManager,o=e.tokenManager,a=e.logger,c=y.socketManager.unauthenticated;return(t=n.call(this,c)).socketManager=r,t.tokenManager=o,t.logger=a,t}return(0,o.Z)(s,[{key:"process",value:(t=(0,r.Z)(l().mark((function e(t){var n,r,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,i=(r=void 0===n?{}:n).code,o=r.description,this.socketManager.enabled){e.next=6;break}return this.logger.error("UnauthenticatedMessageProcessor","Socket token refresh disabled."),e.abrupt("return");case 6:if("access-token.invalid"!==i||!["auth.invalidated","auth.expired"].includes(o)){e.next=11;break}return e.next=9,this.tokenManager.refreshAccessToken();case 9:e.next=12;break;case 11:this.logger.error("UnauthenticatedMessageProcessor","Unauthenticated message with unknown data: ".concat(JSON.stringify(t)));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Socket.Messages.UnauthenticatedMessageProcessor"}}]),s}(p.Z)},88988:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var r,i,o,a,s,c=n(54546),u=n(15861),l=n(15671),p=n(43144),d=n(53229),y=n(87757),f=n.n(y),h=(n(41539),n(39714),n(38880),n(67682)),v=n(2956),g=n(15910),m=n(4942),b=n(47642),T=(r={},(0,m.Z)(r,b.Z.OPEN,g.Z.connected),(0,m.Z)(r,b.Z.CONNECTING,g.Z.connecting),(0,m.Z)(r,b.Z.CLOSED,g.Z.closed),r),k=n(77309),S=n(67324),P=n(9598),E=n(84983),Z=n(87891),w=n(32696),D=E.Z.socket.socketApi,C=P.Z.apiMethodDecorator.bind(null,D),A=(i=C(),o=C(),a=C({paramTypes:{messageEnvelope:h.Types.instanceStrict(k.Z)}}),s=function(){function e(t){(0,l.Z)(this,e);var n={options:h.Types.object({logger:h.Types.instanceStrict(Z.Z),socketManager:h.Types.instanceStrict(S.Z),envelopeMessageRouter:h.Types.instanceStrict(w.Z)})};(0,h.typecheck)(this,n,arguments);var r=t.socketManager,i=t.envelopeMessageRouter,o=t.logger;this.socketManager=r,this.envelopeMessageRouter=i,this.logger=o,this.logger.info(this.toString(),"Created.")}var t,n,r,i;return(0,p.Z)(e,[{key:"connectionState",get:function(){var e=this.socketManager.currentSocketReadyState;return this.socketManager.enabled?T[e]||g.Z.closed:g.Z.disabled}},{key:"start",value:(i=(0,u.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.socketManager.start());case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"stop",value:(r=(0,u.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.socketManager.stop());case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"sendMessage",value:(n=(0,u.Z)(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,r=(0,c.Z)(n.args,1),i=r[0],e.next=3,this.envelopeMessageRouter.route(i);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"on",value:function(e,t){return this.socketManager.on(e,t)}},{key:"off",value:function(e,t){return this.socketManager.off(e,t)}},{key:"requestFlowControl",value:(t=(0,u.Z)(f().mark((function e(t){var n,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={policies:h.Types.array.of.instanceStrict(v.Z)},(0,h.typecheck)(this,"requestFlowControl",n,r),e.abrupt("return",this.socketManager.requestFlowControl(t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"enablePing",value:function(e){var t={options:h.Types.object({pingInterval:h.Types.number.optional,pongTimeout:h.Types.number.optional,pingMaxAttempts:h.Types.number.optional}).optional};(0,h.typecheck)(this,"enablePing",t,arguments),this.socketManager.enablePing(e)}},{key:"disablePing",value:function(){this.socketManager.disablePing()}},{key:"toString",value:function(){return"SDK.Socket.SocketApi"}}]),e}(),(0,d.Z)(s.prototype,"start",[i],Object.getOwnPropertyDescriptor(s.prototype,"start"),s.prototype),(0,d.Z)(s.prototype,"stop",[o],Object.getOwnPropertyDescriptor(s.prototype,"stop"),s.prototype),(0,d.Z)(s.prototype,"sendMessage",[a],Object.getOwnPropertyDescriptor(s.prototype,"sendMessage"),s.prototype),s)},15910:function(e,t){"use strict";var n;!function(e){e.disabled="disabled",e.closed="closed",e.connecting="connecting",e.connected="connected",e.disconnected="disconnected"}(n||(n={})),t.Z=n},65550:function(e,t){"use strict";var n;!function(e){e.message="message",e.exception="exception",e.tokenRefreshRequested="tokenRefreshRequested",e.connectionStateChanged="connectionStateChanged",e.flowControlError="flowControlError",e.offDeviceTokenRefresh="offDeviceTokenRefresh",e.ageVerificationChanged="ageVerificationChanged"}(n||(n={})),t.Z=n},67324:function(e,t,n){"use strict";n.d(t,{Z:function(){return ae}}),n(12419),n(82526),n(38880),n(54747),n(49337);var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(60136),c=n(82963),u=n(61120),l=n(4942),p=(n(41539),n(39714),n(21249),n(57327),n(47941),n(26699),n(32023),n(69600),n(92222),n(88674),n(68309),n(66992),n(78783),n(33948),n(74916),n(23123),n(69826),n(47042),n(87757)),d=n.n(p),y=n(67682),f=n(17187),h=n(87891),v=n(47642),g=n(36147),m=n(36097),b=n(10376),T=n(61811),k=n(36603),S=n(81575),P=n(3269),E=n(15758),Z=n(30736),w=n(32499),D=n(15910),C=n(77309),A=n(65550),R=n(14008),x=n(80540),O=n(92522),I=n(9989),M=n(64932),j=n(8535),L=n(25824),N=n(43118),B=n(84983),_=n(95400),F=n(70928),U=n(35840),q=n(78641),K=n(10869),V=n(31880),H=n(29466),G=n(5301),Q=n(53169),z=n(83668);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var X=B.Z.socket,$=1e3,ee=1008,te=1011,ne=4e3,re=4001,ie=[v.Z.OPEN,v.Z.CONNECTING];function oe(){var e=!1;try{e="WebSocket"in n.g&&n.g.WebSocket.CLOSING===v.Z.CLOSING}catch(e){}if(!e)throw new K.Z("WebSockets are not supported in this environment")}var ae=function(e){(0,s.Z)(le,e);var t,n,c,u,p,f,B,K,W,ae,se,ce,ue=J(le);function le(e){var t;(0,i.Z)(this,le),t=ue.call(this),(0,l.Z)((0,a.Z)(t),"ignoreConnectionStateChanges",!1);var n={options:y.Types.object({config:y.Types.instanceStrict(O.Z),clientConfig:y.Types.instanceStrict(I.Z),tokenManager:y.Types.instanceStrict(_.Z),sessionManager:y.Types.instanceStrict(U.Z),logger:y.Types.instanceStrict(h.Z),environmentConfiguration:y.Types.instanceStrict(R.Z.EnvironmentConfiguration),bootstrapConfiguration:y.Types.instanceStrict(M.Z),deviceAttributeProvider:y.Types.instanceStrict(j.Z),sourceUrn:y.Types.nonEmptyString,envelopeMessageQueue:y.Types.instanceStrict(V.Z)})};(0,y.typecheck)((0,a.Z)(t),n,arguments);var o=e.config,s=e.clientConfig,c=e.tokenManager,u=e.sessionManager,p=e.logger,f=e.environmentConfiguration,v=e.bootstrapConfiguration,g=e.deviceAttributeProvider,m=e.sourceUrn,b=e.envelopeMessageQueue,k=f.deviceProfile;return t.config=o,t.clientConfig=s,t.tokenManager=c,t.sessionManager=u,t.bootstrapConfiguration=v,t.deviceAttributeProvider=g,t.deviceProfile=k,t.logger=p,t.socket=null,t.oldSocket=null,t.protocolHeaders=[],t.queryString="",t.enabled=!t.config.disabled,t.source=m,t.url="",t.reconnectCodes=[ee,te,ne,re],t.errorCodes=[1013],t.closeCodes={CLIENT_REQUESTED:$},t.retryAttempts=0,t.retryPolicy=t.config.extras.retryPolicy,t.retryDelay=1e3*t.retryPolicy.retryBasePeriod,t.init=t.init.bind((0,a.Z)(t)),t.userStartAttemptTimeout=4e3,t.policies=null,t.envelopeMessageQueue=b,t.pingPongMessageProcessor=new T.Z({socketManager:(0,a.Z)(t),config:o,logger:p}),t.reconnectionTimerInterval=2e4,t.reconnectionTimerId=void 0,t.duplicateEventBuffer=[],t.tokenManager.on(x.Z.TokenRefreshFailed,(function(e){null!=e&&e.hasResetToAnonymousToken||(t.enabled=!1)})),t.tokenManager.on(x.Z.AccessChanged,(function(){t.enabled=!t.config.disabled})),t.tokenManager.on(x.Z.DeviceRegistered,(function(){t.reconnect()})),t.sessionManager.storage.on(x.Z.SessionInfoChanged,function(){var e=(0,r.Z)(d().mark((function e(n){var r,i,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(null===(r=t.accessToken)||void 0===r?void 0:r.token)||"",!(a=null===(i=n.newSessionInfo)||void 0===i?void 0:i.id)){e.next=5;break}return e.next=5,t.sendSessionAuthentication({sessionId:a,accessToken:o});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.logger.log(t.toString(),"Created."),t}return(0,o.Z)(le,[{key:"init",value:(ce=(0,r.Z)(d().mark((function e(t){var n,r,i,o,a,s=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=3;break}return this.emitConnectionState(D.Z.disabled),e.abrupt("return");case 3:try{n={token:y.Types.instanceStrict(F.Z)},(0,y.typecheck)(this,"init",n,s),oe(),r=this.clientConfig.extras,i=r.protocolHeaders,o=r.supportedProtocols,delete(a=r.headers)[z.REQUEST_ID],this.protocolHeaders=Object.keys(i).filter((function(e){return o.includes(e)})).map((function(e){return i[e]})),this.queryString=Object.keys(a).map((function(e){return"".concat(e,"=").concat(a[e])})).join("&"),this.setUrl(t.region),this.logger.info("SocketManager","Initiated."),this.emit(A.Z.message,{origin:"init"})}catch(e){this.logger.error("SocketManager",e),this.emit(A.Z.exception,{origin:"init",data:{error:e}})}case 4:case"end":return e.stop()}}),e,this)}))),function(e){return ce.apply(this,arguments)})},{key:"checkIfReconnectionNeeded",value:function(){var e=this;this.reconnectionTimerId=setTimeout((function(){e.isSocketInReadyState(v.Z.CLOSED)&&e.beginReconnecting(),e.checkIfReconnectionNeeded()}),this.reconnectionTimerInterval)}},{key:"isSocketInReadyState",value:function(e){var t;return(null===(t=this.socket)||void 0===t?void 0:t.readyState)===e}},{key:"start",value:(se=(0,r.Z)(d().mark((function e(){var t,n,i,o,a,s=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.logger,n=this.toString(),this.enabled){e.next=7;break}throw i="SDK Sockets are disabled until a valid AccessToken is acquired.",this.config.disabled&&(i="SDK Sockets are disabled in the SDK config."),t.error(n,i),new q.Z(i);case 7:if(o=!1,this.checkIfReconnectionNeeded(),a=function e(){return new Promise((function(i,a){var c;function u(e){if(clearTimeout(c),e){t.error(n,e);var r=new q.Z(e);a(r)}else i(void 0)}if(!o)return s.isSocketInReadyState(v.Z.OPEN)?(t.info(n,"SDK Sockets already connected."),void u()):void(s.isSocketInReadyState(v.Z.CLOSING)?u("SDK Sockets closing."):s.isSocketInReadyState(v.Z.CLOSED)?u("SDK Sockets closed."):(setTimeout((0,r.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:u(t.sent),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),100),c=setTimeout((function(){s.isSocketInReadyState(v.Z.OPEN)||(o=!0,u("SDK Sockets timed out waiting for current connection to open"))}),s.userStartAttemptTimeout)))}))},!this.isSocketInReadyState(v.Z.OPEN)){e.next=13;break}return t.info(n,"SDK Sockets already connected."),e.abrupt("return",void 0);case 13:if(!this.isSocketInReadyState(v.Z.CONNECTING)){e.next=16;break}return t.log(n,"SDK Sockets Still connecting..."),e.abrupt("return",a());case 16:return e.abrupt("return",this.openSocket());case 17:case"end":return e.stop()}}),e,this)}))),function(){return se.apply(this,arguments)})},{key:"stop",value:function(){return this.reconnectionTimerId&&clearInterval(this.reconnectionTimerId),this.reconnectionTimerId=void 0,this.policies=null,this.duplicateEventBuffer=[],this.pingPongMessageProcessor.stop(),this.closeSocket(this.socket)}},{key:"enablePing",value:function(e){this.pingPongMessageProcessor.enable(e)}},{key:"disablePing",value:function(){this.pingPongMessageProcessor.disable()}},{key:"startPing",value:function(){this.isSocketInReadyState(v.Z.OPEN)&&this.pingPongMessageProcessor.start()}},{key:"stopPing",value:function(){this.isSocketInReadyState(v.Z.OPEN)&&this.pingPongMessageProcessor.stop()}},{key:"setUrl",value:function(e){var t,n={region:y.Types.nonEmptyString};(0,y.typecheck)(this,"setUrl",n,arguments);var r=this.clientConfig.extras.regionalEndpointMapping[e],i=(null===(t=this.clientConfig.endpoints[r])||void 0===t?void 0:t.href)||"";this.url=(0,H.Z)(i,this.queryString),this.emit(A.Z.message,{origin:"setUrl",data:{url:this.url}})}},{key:"reconnect",value:(ae=(0,r.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ignoreConnectionStateChanges=!0,e.next=3,this.tokenManager.refreshAccessToken();case 3:y.Check.assigned(t)?this.setUrl(t):this.closeExistingSocket();try{this.retryAttempts=0,this.beginReconnecting()}finally{this.ignoreConnectionStateChanges=!1}case 5:case"end":return e.stop()}}),e,this)}))),function(e){return ae.apply(this,arguments)})},{key:"beginReconnecting",value:function(){var e=this;this.logger.info(this.toString(),"Beginning reconnection attempt"),this.retryAttempts++,this.retryDelay*=this.retryPolicy.retryMultiplier,this.retryDelay>1e3*this.retryPolicy.retryMaxPeriod&&(this.retryDelay=1e3*this.retryPolicy.retryMaxPeriod),setTimeout((0,r.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.openSocket();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),e.logger.error(e.toString(),"Failed to open socket");case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),this.retryDelay)}},{key:"isAuthenticated",value:function(e){return e.type===X.socketManager.authenticated}},{key:"onError",value:function(e){var t=this.parseMessage(e);this.logger.error("SocketManager",t),this.emit(A.Z.exception,{origin:"onError",data:t})}},{key:"onClose",value:function(e){var t,n=e.code,r=e.wasClean,i=e.reason,o=e.type,a=e.timeStamp,s=e.isTrusted,c=A.Z.message,u=!1;this.logger.info("SocketManager",e),this.reconnectCodes.includes(n)&&this.canRetry()?(this.pingPongMessageProcessor.stop(),u=!0,this.beginReconnecting()):this.errorCodes.includes(n)&&(c=A.Z.exception,t=(0,G.Kf)({code:String(n),description:i})),!u&&this.isSocketInReadyState(v.Z.CLOSED)&&this.emitConnectionState(D.Z.closed),this.emit(c,{origin:"onClose",data:{code:n,wasClean:r,reason:i,type:o,timeStamp:a,isTrusted:s,error:t}})}},{key:"canRetry",value:function(){return this.retryAttempts<this.retryPolicy.retryMaxAttempts}},{key:"parseMessage",value:function(e){var t={data:{}};return this.tryParseMessage(e,t),t.data}},{key:"tryParseMessage",value:function(e,t){try{return t.data=JSON.parse(e.data),!0}catch(e){var n={error:(0,G.Kf)({description:e,exceptionData:e})};return this.emit(A.Z.exception,{origin:"parseMessage",data:n}),t.data=n,!1}}},{key:"onOpen",value:(W=(0,r.Z)(d().mark((function e(){var t,n,r,i,o,a,s,c,u,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSocketInReadyState(v.Z.CONNECTING)){e.next=4;break}setTimeout(this.onOpen.bind(this),100),e.next=14;break;case 4:return n=this.bootstrapConfiguration.application,r=n.id,i=n.name,o=n.version,a={id:r,name:i,version:o},s=null===(t=this.accessToken)||void 0===t?void 0:t.token,c=this.getDeviceInfo(),u=new C.Z({eventType:X.socketManager.authentication,schemaUrl:N.Z.authentication,data:{accessToken:s,application:a,device:c}}),e.next=11,this.sendMessage(u);case 11:l=e.sent,this.logger.info(this.toString(),"Opening socket - sending authentication frame"),this.emit(A.Z.message,{origin:"onOpen",data:l});case 14:case"end":return e.stop()}}),e,this)}))),function(){return W.apply(this,arguments)})},{key:"getDeviceInfo",value:function(){var e,t=this.deviceAttributeProvider.getDeviceAttributes(),n=L.Z.normalizeAttributes(t),r=n.manufacturer,i=n.operatingSystem,o=n.operatingSystemVersion,a=t.model;return null!==(e=a)&&void 0!==e||(a=this.deviceProfile),{manufacturer:r,model:a,operatingSystem:i,operatingSystemVersion:o,modelFamily:t.modelFamily}}},{key:"sendMessage",value:(K=(0,r.Z)(d().mark((function e(t){var n,r,i,o,a,s=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={socketEvent:y.Types.instanceStrict(C.Z)},(0,y.typecheck)(this,"sendMessage",n,s),e.next=3,this.sessionManager.createMessageSubject();case 3:return r=e.sent,i=t.getSocketMessage({source:this.source,subject:r}),this.isSocketInReadyState(v.Z.OPEN)?(a={message:t,accessToken:null===(o=this.accessToken)||void 0===o?void 0:o.token},this.envelopeMessageQueue.trackMessage(a),this.sendSocketMessage(i)):(this.logger.log(this.toString(),"Socket is not open yet. Adding this message to the queue"),this.envelopeMessageQueue.enqueue(t)),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return K.apply(this,arguments)})},{key:"sendSocketMessage",value:function(e){var t,n={rawEvent:y.Types.nonEmptyObject};(0,y.typecheck)(this,"sendSocketMessage",n,arguments),null===(t=this.socket)||void 0===t||t.send(JSON.stringify(e))}},{key:"requestFlowControl",value:(B=(0,r.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.policies=t,e.next=3,this.sendFlowControl();case 3:case"end":return e.stop()}}),e,this)}))),function(e){return B.apply(this,arguments)})},{key:"closeExistingSocket",value:function(){var e=this.oldSocket;return this.logger.info("SocketManager","closeExistingSocket"),this.oldSocket=null,this.closeSocket(e)}},{key:"closeSocket",value:function(e){if(this.logger.log(this.toString(),"closeSocket"),"undefined"!=typeof WebSocket&&y.Check.instanceStrict(e,WebSocket)){var t=e;if(ie.includes(t.readyState))return this.logger.log(this.toString(),"closing with readyState being: ".concat(v.Z[t.readyState])),t.close(this.closeCodes.CLIENT_REQUESTED),!0}return this.emit(A.Z.message,{origin:"closeSocket",data:{readyState:null==e?void 0:e.readyState}}),!1}},{key:"flushAwaitingConnectionBuffer",value:(f=(0,r.Z)(d().mark((function e(){var t,n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSocketInReadyState(v.Z.OPEN)){e.next=6;break}return this.envelopeMessageQueue.hasMessagesToSend&&this.logger.info(this.toString(),"Socket is open. Sending ".concat(this.envelopeMessageQueue.messageLength," messages that were waiting in the queue now.")),e.next=4,this.sessionManager.createMessageSubject();case 4:for(t=e.sent;this.envelopeMessageQueue.hasMessagesToSend;)(n=this.envelopeMessageQueue.dequeue())&&((r=n.getSocketMessage({source:this.source}))&&(null!==(i=r.subject)&&void 0!==i||(r.subject=t)),this.sendSocketMessage(r));case 6:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"emitConnectionState",value:function(e){this.ignoreConnectionStateChanges||this.emit(A.Z.connectionStateChanged,e)}},{key:"currentSocketReadyState",get:function(){var e,t;return null!==(e=null===(t=this.socket)||void 0===t?void 0:t.readyState)&&void 0!==e?e:v.Z.CLOSED}},{key:"openSocket",value:function(){var e=this;return new Promise((function(t,n){var i=e.url,o=e.protocolHeaders,a=e.pingPongMessageProcessor,s=!1,c=new g.Z(e,(function(){s=!0,t(void 0)})),u=new S.Z(e),l=new P.Z(e),p=new E.Z(e),y=new b.Z(e),f=new m.Z(e),h=new k.Z({socketManager:e,tokenManager:e.tokenManager,logger:e.logger}),v=new w.Z(e),T=[c,p,new Z.Z({socketManager:e,tokenManager:e.tokenManager,logger:e.logger}),u,l,y,f,a,h,v];e.emitConnectionState(D.Z.connecting),e.oldSocket=e.socket,e.socket=new WebSocket("".concat(i,"&").concat(z.REQUEST_ID,"=").concat((0,Q.Z)()),o),e.socket.onmessage=function(){var t=(0,r.Z)(d().mark((function t(r){var i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.processSocketMessage(T,r);case 2:s||(s=!0,i=new q.Z("Authentication frame not received"),e.emit(A.Z.exception,{origin:"openSocket",data:{info:"Expected auth frame, but received",actual:r}}),n(i));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.socket.onopen=e.onOpen.bind(e),e.socket.onclose=e.onClose.bind(e),e.socket.onerror=function(t){n(t),e.onError.call(e,t)},e.emit(A.Z.message,{origin:"openSocket",data:{url:i,protocolHeaders:o}})}))}},{key:"processSocketMessage",value:(p=(0,r.Z)(d().mark((function e(t,n){var i,o,a,s,c,u,l,p=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.duplicateEventBuffer,o={},a=this.config.extras.messageDeduplicationStoreSize,!this.tryParseMessage(n,o)){e.next=17;break}if(!(c=(s=o.data).id)||!i.includes(c)){e.next=9;break}return this.logger.info(this.toString(),"Message not processed by SDK due to duplicate event ".concat(n)),e.abrupt("return");case 9:return u=!1,l=t.map(function(){var e=(0,r.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.is(s)){e.next=6;break}return e.next=4,t.process(s);case 4:c&&(i.length>=(null!=a?a:0)&&i.shift(),i.push(c)),u=!0;case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),p.logger.error(p.toString(),"Failed to process message, ".concat(n.data,", ").concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),e.next=13,Promise.all(l);case 13:u||this.logger.warn(this.toString(),"Message not processed by SDK ".concat(n.data)),this.emit(A.Z.message,{origin:"onMessage",data:s}),e.next=18;break;case 17:this.logger.error(this.toString(),"Failed to parse message: ".concat(n.data));case 18:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"sendFlowControl",value:(u=(0,r.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.policies)||!this.isSocketInReadyState(v.Z.OPEN)){e.next=5;break}return n=new C.Z({eventType:X.socketManager.flowControl,schemaUrl:N.Z.flowControl,data:{policies:t}}),e.next=5,this.sendMessage(n);case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"sendSessionAuthentication",value:(c=(0,r.Z)(d().mark((function e(t){var n,r,i=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:y.Types.object({sessionId:y.Types.nonEmptyString,accessToken:y.Types.nonEmptyString})},(0,y.typecheck)(this,"sendSessionAuthentication",n,i),r=new C.Z({eventType:X.socketManager.sessionAuthentication,schemaUrl:N.Z.sessionAuthentication,data:t}),e.next=4,this.sendMessage(r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"sendMessageWithSessionAuthentication",value:(n=(0,r.Z)(d().mark((function e(t){var n,i,o,a,s,c,u,l,p,f,h=this,g=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:y.Types.object({message:y.Types.instanceStrict(C.Z),accessToken:y.Types.nonEmptyString})},(0,y.typecheck)(this,"sendMessageWithSessionAuthentication",n,g),i=t.message,o=t.accessToken,a="sessionId=",e.next=5,this.sessionManager.createMessageSubject();case 5:if(s=e.sent,c=i.getSocketMessage({source:this.source,subject:s}),u=(c.subject||"").split(","),l=u.find((function(e){return e.includes(a)})),p=(l||"").slice(a.length),f={sessionId:p,accessToken:o},!this.isSocketInReadyState(v.Z.OPEN)){e.next=17;break}return e.next=14,this.sendSessionAuthentication(f);case 14:this.sendSocketMessage(c),e.next=18;break;case 17:this.once(D.Z.connected,(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.sendSessionAuthentication(f);case 2:h.sendSocketMessage(c);case 3:case"end":return e.stop()}}),e)}))));case 18:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"sendExposureExperiment",value:(t=(0,r.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new C.Z({eventType:X.socketManager.exposure,schemaUrl:N.Z.exposure,data:Y({source:this.source},t)}),e.next=3,this.sendMessage(n);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"accessToken",get:function(){return this.tokenManager.getAccessToken()}},{key:"toString",value:function(){return"SDK.Socket.SocketManager"}}]),le}(f.EventEmitter)},43118:function(e,t){"use strict";var n,r=function(e){return"https://github.bamtech.co/schema-registry/schema-registry".concat(e,".oas2.yaml")},i=function(e){return r("/blob/master/dss/event/".concat(e))},o=function(e){return i("edge/1.0.0/sdk/".concat(e))};t.Z={authentication:o("authentication"),event:r("-sdk/blob/series/0.X.X/yaml/dss/event/sdk/client/api/event"),exposure:i("experimentation/weaponx/2.0.0/weaponx-exposure"),flowControl:o("flow-control-request"),ping:o("transport/ping"),reconnect:o("reconnect"),sessionAuthentication:o("session-authentication"),watchlist:(n="user-content-actions/preference/v1/watchlist","https://github.bamtech.co/schema-registry/schema-registry-client-signals/blob/series/0.X.X/smithy/dss/cs/event/".concat(n,".smithy"))}},47642:function(e,t){"use strict";var n;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(n||(n={})),t.Z=n},55814:function(e,t){"use strict";var n;!function(e){e.bundle="bundle",e.notBundle="notBundle",e.unknown="unknown"}(n||(n={})),t.Z=n},21840:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(15671),i=n(43144),o=(n(68309),n(82526),n(41817),n(21249),n(67682)),a=n(71814),s=n(60839),c=n(72887),u=n(3920),l=n(85863),p=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({categoryCodes:o.Types.array.of.nonEmptyString.optional,error:o.Types.object({code:o.Types.nonEmptyString,description:o.Types.nonEmptyString}).optional,id:o.Types.number.optional,name:o.Types.nonEmptyString.optional,partner:o.Types.nonEmptyString.optional,productEntitlements:o.Types.array.of.nonEmptyObject.optional,rule:o.Types.nonEmptyObject.optional,sku:o.Types.nonEmptyString,status:o.Types.nonEmptyString,bundleType:o.Types.in(c.BundleType).optional})};(0,o.typecheck)(this,n,arguments);var i=t.categoryCodes,p=void 0===i?[]:i,d=t.error,y=t.id,f=t.name,h=t.partner,v=t.productEntitlements,g=void 0===v?[]:v,m=t.rule,b=t.sku,T=t.status,k=t.bundleType,S=null;o.Check.assigned(d)&&(S=new u.Z({code:null==d?void 0:d.code,description:null==d?void 0:d.description})),this.categoryCodes=p,this.id=y,this.name=f,this.sku=b,this.status=s.Z[T]||s.Z.UNKNOWN,this.error=S,this.entitlements=g.map((function(e){return new a.Z(e)})),this.partner=h,this.rule=m?new l.Z(m):null,this.bundleType=k}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Subscription.Product"}}]),e}()},71814:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=(n(68309),n(82526),n(41817),n(67682)),a=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({desc:o.Types.nonEmptyString.optional,id:o.Types.number,name:o.Types.nonEmptyString,partner:o.Types.nonEmptyString.optional})};(0,o.typecheck)(this,n,arguments);var i=t.id,a=t.name,s=t.desc,c=t.partner;this.id=i,this.name=a,this.description=s,this.partner=c}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Subscription.ProductEntitlement"}}]),e}()},60839:function(e,t){"use strict";var n;!function(e){e.AVAILABLE="AVAILABLE",e.UNKNOWN="UNKNOWN",e.UNAVAILABLE="UNAVAILABLE"}(n||(n={})),t.Z=n},58637:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(15671),i=n(43144),o=(n(21249),n(67682)),a=n(55814),s=n(21840),c=n(45905),u=n(67584),l=n(42033),p=n(85863),d=n(96532),y=n(71800),f=n(86650),h=n(94353),v=n(72887),g=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({accountId:o.Types.nonEmptyString.optional,deviceId:o.Types.nonEmptyString.optional,expirationDate:o.Types.nonEmptyString.optional,expiryType:o.Types.nonEmptyString.optional,externalIdentity:o.Types.nonEmptyString.optional,id:o.Types.nonEmptyString,isActive:o.Types.boolean,lastSyncDate:o.Types.nonEmptyString.optional,nextRenewalDate:o.Types.nonEmptyString.optional,products:o.Types.array.of.instanceStrict(Object),rule:o.Types.nonEmptyObject.optional,source:o.Types.object(),startDate:o.Types.nonEmptyString.optional,status:o.Types.object(),type:o.Types.nonEmptyString.optional,purchaseDate:o.Types.dateString.optional,bundle:o.Types.boolean.optional,offer:o.Types.object().optional,freeTrial:o.Types.object().optional,cancellation:o.Types.object().optional,earlyAccess:o.Types.boolean.optional,paymentProvider:o.Types.nonEmptyString.optional,canCancel:o.Types.boolean.optional})};(0,o.typecheck)(this,n,arguments);var i,l=t.accountId,g=t.deviceId,m=t.expirationDate,b=t.expiryType,T=t.externalIdentity,k=t.id,S=t.isActive,P=t.lastSyncDate,E=t.nextRenewalDate,Z=t.products,w=void 0===Z?[]:Z,D=t.rule,C=t.source,A=t.startDate,R=t.status,x=t.type,O=t.purchaseDate,I=t.bundle,M=t.offer,j=t.freeTrial,L=t.cancellation,N=t.earlyAccess,B=t.paymentProvider,_=t.canCancel;o.Check.assigned(I)&&(i=I?a.Z.bundle:a.Z.notBundle),this.expirationDate=m?new Date(m):null,this.expiryType=v.SubscriptionExpiryType[b]||v.SubscriptionExpiryType.UNKNOWN,this.id=k,this.isActive=S,this.nextRenewalDate=E?new Date(E):null,this.products=w.map((function(e){return new s.Z(e)})),this.startDate=A?new Date(A):null,this.status=new y.Z(R),this.provider=u.Z[C.provider]||C.provider,this.accountId=l,this.deviceId=g,this.externalIdentity=T,this.lastSyncDate=P?new Date(P):null,this.rule=D?new p.Z(D):null,this.source=new c.Z(C),this.type=v.SubscriptionType[x],this.purchaseDate=O,this.bundleStatus=i||a.Z.unknown,this.offer=M?new f.Z(M):null,this.freeTrial=j?new h.Z(j):null,this.cancellation=L?new d.Z(L):null,this.earlyAccess=N,this.canCancel=_,this.paymentProvider=B}return(0,i.Z)(e,[{key:"isBoundToDevice",value:function(){return o.Check.nonEmptyString(this.deviceId)}},{key:"isBoundToAccount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.accountId,n=o.Check.assigned(t);return n&&o.Check.instanceStrict(e,l.Z)?t===e.accountId:n}},{key:"toString",value:function(){return"SDK.Subscription.Subscription"}}]),e}()},77082:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}}),n(12419);var r,i,o,a,s=n(54546),c=n(15861),u=n(15671),l=n(43144),p=n(97326),d=n(2291),y=n(60136),f=n(82963),h=n(61120),v=n(53229),g=n(87757),m=n.n(g),b=(n(41539),n(39714),n(54747),n(38880),n(67682)),T=n(82625),k=n(9978),S=n(58637),P=n(22243),E=n(84983),Z=n(9598);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var i=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var D=E.Z.subscription.subscriptionApi,C=Z.Z.apiMethodDecorator.bind(null,D),A=(r=C(),i=C({paramTypes:{state:b.Types.in(P.SubscriptionState).optional,includeChurned:b.Types.boolean.optional}}),o=C({paramTypes:{subscriptionId:b.Types.nonEmptyString}}),a=function(e){(0,y.Z)(o,e);var t,n,r,i=w(o);function o(e){var t;(0,u.Z)(this,o),t=i.call(this,e);var n={options:b.Types.object({subscriptionClient:b.Types.instanceStrict(k.Z)})};(0,b.typecheck)((0,p.Z)(t),n,arguments);var r=e.subscriptionClient;return t.subscriptionClient=r,t.logger.info(t.toString(),"Created."),t}return(0,l.Z)(o,[{key:"getSubscriptions",value:(r=(0,c.Z)(m().mark((function e(t){var n,r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.logTransaction,e.next=3,this.subscriptionClient.getSubscriptions((0,d.Z)((0,h.Z)(o.prototype),"accessToken",this),n);case 3:return r=e.sent,i=[],b.Check.nonEmptyArray(r)&&r.forEach((function(e){i.push(new S.Z(e))})),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getSubscriberInfo",value:(n=(0,c.Z)(m().mark((function e(t){var n,r,i,a,c;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,s.Z)(n.args,2),a=i[0],c=i[1],e.abrupt("return",this.subscriptionClient.getSubscriberInfo({state:a,includeChurned:c,logTransaction:r,accessToken:(0,d.Z)((0,h.Z)(o.prototype),"accessToken",this)}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getAccountSubscription",value:(t=(0,c.Z)(m().mark((function e(t){var n,r,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,s.Z)(n.args,1),a=i[0],e.abrupt("return",this.subscriptionClient.getAccountSubscription(a,(0,d.Z)((0,h.Z)(o.prototype),"accessToken",this),r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Subscription.SubscriptionApi"}}]),o}(T.Z),(0,v.Z)(a.prototype,"getSubscriptions",[r],Object.getOwnPropertyDescriptor(a.prototype,"getSubscriptions"),a.prototype),(0,v.Z)(a.prototype,"getSubscriberInfo",[i],Object.getOwnPropertyDescriptor(a.prototype,"getSubscriberInfo"),a.prototype),(0,v.Z)(a.prototype,"getAccountSubscription",[o],Object.getOwnPropertyDescriptor(a.prototype,"getAccountSubscription"),a.prototype),a)},67584:function(e,t){"use strict";var n;!function(e){e.BAMTECH="BAMTECH",e.APPLE="APPLE",e.GOOGLE="GOOGLE",e.ROKU="ROKU",e.SAMSUNG="SAMSUNG",e.HULU="HULU",e.AMAZON="AMAZON",e.VERIZON="VERIZON",e.NO_PAYMENT="NO_PAYMENT",e.CANAL="CANAL",e.FREE="FREE",e.BOUYGUES="BOUYGUES",e.SKYUK="SKYUK",e.MOVISTAR="MOVISTAR",e.TIM="TIM",e.ORANGE="ORANGE",e.DETELEKOM="DETELEKOM",e.SFR="SFR",e.O2="O2"}(n||(n={})),t.Z=n},45905:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(15671),i=n(43144),o=(n(47941),n(26833),n(67682)),a=n(67584),s=n(72887),c=function(){function e(t){(0,r.Z)(this,e);var n={options:o.Types.object({provider:o.Types.nonEmptyString,ref:o.Types.nonEmptyString,type:o.Types.nonEmptyString,subType:o.Types.nonEmptyString.optional})};(0,o.typecheck)(this,n,arguments);var i=t.provider,c=t.ref,u=t.subType,l=t.type,p=Object.keys(s.SubscriptionSourceType)[Object.values(s.SubscriptionSourceType).indexOf(l)];this.provider=a.Z[i]||i,this.ref=c,this.subType=s.SubscriptionSourceSubType[u]||s.SubscriptionSourceSubType.OTHER,this.type=s.SubscriptionSourceType[p]||l}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Subscription.SubscriptionSource"}}]),e}()},57797:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(15671),i=n(43144),o=n(67682),a=n(70986),s=n(23731),c=function(){function e(t,n){(0,r.Z)(this,e);var i={context:o.Types.instanceStrict(s.Z),contextState:o.Types.instanceStrict(a.Z)};(0,o.typecheck)(this,i,arguments),this.context=t,this.contextState=n}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Token.Access"}}]),e}()},70986:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(15671),i=n(43144),o=(n(26699),n(32023),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,r.Z)(this,e),this.modes=t}return(0,i.Z)(e,[{key:"hasMode",value:function(e){return this.modes.includes(e)}},{key:"toString",value:function(){return"SDK.Token.AccessContextState"}}]),e}())},87360:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(19966),s=function(){function e(t,n){(0,r.Z)(this,e);var i={version:o.Types.nonEmptyString,data:o.Types.instanceStrict(a.Z)};(0,o.typecheck)(this,i,arguments),this.version=t,this.data=n}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Token.AccessState"}}]),e}()},19966:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),o=n(67682),a=n(70986),s=function(){function e(t,n,i){(0,r.Z)(this,e);var s={token:o.Types.nonEmptyString,refreshToken:o.Types.nonEmptyString,contextState:o.Types.instanceStrict(a.Z)};(0,o.typecheck)(this,s,arguments),this.token=t,this.refreshToken=n,this.contextState=i}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Token.AccessStateData"}}]),e}()},41824:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=(n(74916),n(15306),n(92222),n(41539),n(39714),n(67682)),u=n(87891),l=n(14008),p=n(57797),d=n(70986),y=n(23731),f=n(81350),h=n(9588),v=function(){function e(t){(0,i.Z)(this,e);var n={options:c.Types.object({clientId:c.Types.nonEmptyString,environment:c.Types.nonEmptyString,logger:c.Types.instanceStrict(u.Z),access:c.Types.instanceStrict(p.Z).optional,storage:c.Types.instanceStrict(l.Z.Storage)})};(0,c.typecheck)(this,n,arguments);var r=t.clientId,o=t.environment,a=t.logger,s=t.access,d=t.storage;this.clientId=r,this.environment=o,this.logger=a,this.access=s||null,this.storage=d,this.cacheKey="\n            ".concat(f.ACCESS_KEY).concat(this.clientId,"_").concat(this.environment,"\n        ").replace(h.REPLACE_NL_WS,""),this.cacheKeyLegacy="\n            ".concat(f.AUTHORIZATION_CONTEXT_KEY).concat(this.clientId,"_").concat(this.environment,"\n        ").replace(h.REPLACE_NL_WS,""),this.isLegacyToken=!1,this.logger.log(this.toString(),"Created.")}var t,n,a;return(0,o.Z)(e,[{key:"saveAccess",value:(a=(0,r.Z)(s().mark((function e(t){var n,r=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={access:c.Types.instanceStrict(p.Z)},(0,c.typecheck)(this,"saveAccess",n,r),this.logger.info(this.toString(),'Saving Access to Storage for key: "'.concat(this.cacheKey,'".')),this.access=t,e.next=5,this.storage.set(this.cacheKey,this.access);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getAccess",value:function(){return this.access}},{key:"clear",value:(n=(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.warn(this.toString(),'Deleting Access from Storage for key: "'.concat(this.cacheKey,'".')),this.access=null,e.next=4,this.storage.remove(this.cacheKey);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"loadAccessFromStorage",value:(t=(0,r.Z)(s().mark((function e(){var t,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.info(this.toString(),'Loading Access from Storage for key: "'.concat(this.cacheKey,'".')),e.prev=1,e.next=4,this.storage.get(this.cacheKey);case 4:if(!(t=e.sent)){e.next=10;break}return n=new y.Z(t.context),r=new d.Z(t.contextState.modes),this.access=new p.Z(n,r),e.abrupt("return",this.access);case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:return c.Check.assigned(this.access)?this.logger.info(this.toString(),"Could not load Access from Storage but it is in memory."):this.logger.info(this.toString(),"Could not load Access from Storage and memory is null."),e.abrupt("return",this.access);case 16:case"end":return e.stop()}}),e,this,[[1,12]])}))),function(){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Token.AccessStorage"}}]),e}()},43473:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}}),n(41539),n(12419);var r=n(15671),i=n(43144),o=n(60136),a=n(82963),s=n(61120);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toString",value:function(){return"SDK.Token.AccessToken"}}]),n}(n(70928).Z)},27216:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}}),n(12419);var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(82963),c=n(61120),u=(n(41539),n(39714),n(67682)),l=n(17187),p=n(87891),d=n(41824),y=n(43473);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var h=function(e){(0,a.Z)(n,e);var t=f(n);function n(e,i){var a;(0,r.Z)(this,n),a=t.call(this);var s={storage:u.Types.instanceStrict(d.Z),logger:u.Types.instanceStrict(p.Z)};return(0,u.typecheck)((0,o.Z)(a),s,arguments),a.storage=e,a.accessToken=a.getAccessToken(),a.logger=i,a.logger.log(a.toString(),"Created."),a}return(0,i.Z)(n,[{key:"getAccessToken",value:function(){var e=this.storage.getAccess();if(!e)return null;var t=e,n=new y.Z(t.context.token,t.context.region);return this.accessToken=n,this.accessToken}},{key:"getAccessContext",value:function(){var e=this.storage,t=e&&e.getAccess();return t?t.context:null}},{key:"toString",value:function(){return"SDK.Token.AccessTokenProvider"}}]),n}(l.EventEmitter)},82616:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}}),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(60136),c=n(82963),u=n(61120),l=n(87757),p=n.n(l),d=(n(74916),n(15306),n(92222),n(41539),n(39714),n(67682)),y=n(17187),f=n(87891),h=n(31545),v=n(14008),g=n(81350),m=n(9588);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var T=function(e){(0,s.Z)(l,e);var t,n,c,u=b(l);function l(e){var t;(0,i.Z)(this,l),t=u.call(this);var n={options:d.Types.object({clientId:d.Types.nonEmptyString,environment:d.Types.nonEmptyString,logger:d.Types.instanceStrict(f.Z),accountDelegationRefreshToken:d.Types.nonEmptyString.optional,storage:d.Types.instanceStrict(v.Z.Storage)})};(0,d.typecheck)((0,a.Z)(t),n,arguments);var r=e.clientId,o=e.environment,s=e.logger,c=e.accountDelegationRefreshToken,p=e.storage;return t.clientId=r,t.environment=o,t.logger=s,t.accountDelegationRefreshToken=null!=c?c:null,t.storage=p,t.cacheKey="\n            ".concat(g.ACCOUNT_DELEGATION_REFRESH_TOKEN_KEY).concat(t.clientId,"_").concat(t.environment,"\n        ").replace(m.REPLACE_NL_WS,""),t.logger.log(t.toString(),"Created."),t}return(0,o.Z)(l,[{key:"saveAccountDelegationRefreshToken",value:(c=(0,r.Z)(p().mark((function e(t){var n,r=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={accountDelegationRefreshToken:d.Types.nonEmptyString},(0,d.typecheck)(this,"saveAccountDelegationRefreshToken",n,r),this.logger.info(this.toString(),'Saving account delegation refresh token to Storage for key: "'.concat(this.cacheKey,'".')),this.accountDelegationRefreshToken=t,e.next=5,this.storage.set(this.cacheKey,this.accountDelegationRefreshToken);case 5:this.emit(h.Z.AccountDelegationRefreshTokenChanged,t);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"getAccountDelegationRefreshToken",value:function(){return this.accountDelegationRefreshToken}},{key:"clear",value:(n=(0,r.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.warn(this.toString(),'Deleting account delegation refresh token from Storage for key: "'.concat(this.cacheKey,'".')),this.accountDelegationRefreshToken=null,e.next=4,this.storage.remove(this.cacheKey);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"loadAccountDelegationRefreshTokenFromStorage",value:(t=(0,r.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.info(this.toString(),'Loading account delegation refresh token from Storage for key: "'.concat(this.cacheKey,'".')),e.prev=1,e.next=4,this.storage.get(this.cacheKey);case 4:if(!(t=e.sent)){e.next=8;break}return this.accountDelegationRefreshToken=t,e.abrupt("return",this.accountDelegationRefreshToken);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:return d.Check.assigned(this.accountDelegationRefreshToken)?this.logger.info(this.toString(),"Could not load account delegation refresh token from Storage but it is in memory."):this.logger.info(this.toString(),"Could not load account delegation refresh token from Storage and memory is null."),e.abrupt("return",this.accountDelegationRefreshToken);case 14:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Token.AccountDelegationRefreshTokenStorage"}}]),l}(y.EventEmitter)},7135:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(15861),i=n(15671),o=n(43144),a=n(87757),s=n.n(a),c=(n(74916),n(15306),n(92222),n(41539),n(39714),n(67682)),u=n(87891),l=n(14008),p=n(46516),d=n(81350),y=n(9588),f=function(){function e(t){(0,i.Z)(this,e);var n={options:c.Types.object({clientId:c.Types.nonEmptyString,environment:c.Types.nonEmptyString,logger:c.Types.instanceStrict(u.Z),deviceGrant:c.Types.instanceStrict(p.Z).optional,storage:c.Types.instanceStrict(l.Z.Storage)})};(0,c.typecheck)(this,n,arguments);var r=t.clientId,o=t.environment,a=t.logger,s=t.deviceGrant,f=t.storage;this.clientId=r,this.environment=o,this.logger=a,this.deviceGrant=s||null,this.storage=f,this.cacheKey="\n            ".concat(d.DEVICE_GRANT_KEY).concat(this.clientId,"_").concat(this.environment,"\n        ").replace(y.REPLACE_NL_WS,""),this.logger.log(this.toString(),"Created.")}var t,n,a;return(0,o.Z)(e,[{key:"saveDeviceGrant",value:(a=(0,r.Z)(s().mark((function e(t){var n,r=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={deviceGrant:c.Types.instanceStrict(p.Z)},(0,c.typecheck)(this,"saveDeviceGrant",n,r),this.logger.info(this.toString(),'Saving deviceGrant to Storage for key: "'.concat(this.cacheKey,'".')),this.deviceGrant=t,e.next=5,this.storage.set(this.cacheKey,this.deviceGrant);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getDeviceGrant",value:function(){return this.deviceGrant}},{key:"clear",value:(n=(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.warn(this.toString(),'Deleting deviceGrant from Storage for key: "'.concat(this.cacheKey,'".')),this.deviceGrant=null,e.next=4,this.storage.remove(this.cacheKey);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"loadDeviceGrantFromStorage",value:(t=(0,r.Z)(s().mark((function e(){var t,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.info(this.toString(),'Loading deviceGrant from Storage for key: "'.concat(this.cacheKey,'".')),e.prev=1,e.next=4,this.storage.get(this.cacheKey);case 4:if(!(t=e.sent)){e.next=9;break}return n=t.grantType,r=t.assertion,this.deviceGrant=new p.Z(n,r),e.abrupt("return",this.deviceGrant);case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:return c.Check.assigned(this.deviceGrant)?this.logger.info(this.toString(),"Could not load deviceGrant from Storage but it is in memory."):this.logger.info(this.toString(),"Could not load deviceGrant from Storage and memory is null."),e.abrupt("return",this.deviceGrant);case 15:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Token.DeviceGrantStorage"}}]),e}()},357:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(67682),a=function(){function e(t,n){(0,r.Z)(this,e);var i={longitude:o.Types.number,latitude:o.Types.number};(0,o.typecheck)(this,i,arguments),this.longitude=t,this.latitude=n}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Token.GeoLocation"}}]),e}()},95400:function(e,t,n){"use strict";n.d(t,{Z:function(){return U}}),n(12419);var r=n(15861),i=n(15671),o=n(43144),a=n(97326),s=n(60136),c=n(82963),u=n(61120),l=n(87757),p=n.n(l),d=(n(41539),n(39714),n(67682)),y=n(60340),f=n(36109),h=n(87891),v=n(57797),g=n(87360),m=n(19966),b=n(41824),T=n(43473),k=n(27216),S=n(70986),P=n(55758),E=n(37347),Z=n(23731),w=n(26390),D=n(80540),C=n(74325),A=n(40176),R=n(84983),x=n(52662),O=n(58665),I=n(7135),M=n(36630),j=n(58761),L=n(58052),N=n(53034),B=n(82616),_=n(5301);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var U=function(e){(0,s.Z)(Q,e);var t,n,c,u,l,k,U,q,K,V,H,G=F(Q);function Q(e){var t;(0,i.Z)(this,Q);var n=e||{},r=n.storage,o=n.logger;t=G.call(this,r,o);var s={options:d.Types.object({apiKey:d.Types.nonEmptyString,tokenManagerConfiguration:d.Types.instanceStrict(N.Z),tokenClient:d.Types.instanceStrict(L.Z),geoProvider:d.Types.instanceStrict(E.Z.GeoProvider).optional,logger:d.Types.instanceStrict(h.Z),storage:d.Types.instanceStrict(b.Z),deviceManager:d.Types.instanceStrict(O.Z),deviceGrantStorage:d.Types.instanceStrict(I.Z),orchestrationManager:d.Types.instanceStrict(C.Z),refreshSessionInfo:d.Types.function,accountDelegationRefreshTokenStorage:d.Types.instanceStrict(B.Z)})};(0,d.typecheck)((0,a.Z)(t),s,arguments);var c=e.apiKey,u=e.tokenManagerConfiguration,l=e.tokenClient,p=e.deviceManager,y=e.deviceGrantStorage,f=e.orchestrationManager,v=e.refreshSessionInfo,g=e.accountDelegationRefreshTokenStorage,m=e.geoProvider;return t.apiKey=c,t.config=u,t.client=l,t.geoProvider=null!=m?m:new E.Z.GeoProvider(o),t.logger=o,t.deviceManager=p,t.orchestrationManager=f,t.refreshSessionInfo=v,t.deviceGrantStorage=y,t.accountDelegationRefreshTokenStorage=g,t.refreshTimeoutId=-1,t.retryAttempt=0,t.retryDelay=-1,t.currentTokenRefreshPromise=null,t.logger.log(t.toString(),"Created"),t}return(0,o.Z)(Q,[{key:"exchangeDeviceGrant",value:(H=(0,r.Z)(p().mark((function e(t,n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.orchestrationManager.exchangeDeviceGrantForAccessToken(t,n);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return H.apply(this,arguments)})},{key:"exchangeAccountGrant",value:(V=(0,r.Z)(p().mark((function e(t,n,r){var i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.config.extras.subjectTokenTypes[t.subjectTokenTypeKey],o=new M.Z(t,i),e.next=4,this.exchangeRequest(o,n,r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return V.apply(this,arguments)})},{key:"exchangeRequest",value:(K=(0,r.Z)(p().mark((function e(t,n,r){var i,o,a,s,c,u,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.apiKey,o=this.client,e.prev=1,e.next=4,this.geoProvider.getGeoLocation();case 4:return a=e.sent,s=a.latitude,c=a.longitude,e.next=8,t.build(s,c);case 8:return u=e.sent,e.next=11,o.exchange(u,i,r);case 11:return l=e.sent,e.next=14,this.processAccess({accessContext:l,accessContextState:n,logTransaction:r});case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(1),e.next=20,this.handleTokenException(e.t0,r);case 20:case"end":return e.stop()}}),e,this,[[1,16]])}))),function(e,t,n){return K.apply(this,arguments)})},{key:"getAccessState",value:function(){var e=this.storage.getAccess();return new g.Z(f.Z.versionShort,new m.Z(e.context.token,e.context.refreshToken,e.contextState))}},{key:"updateAccessToken",value:(q=(0,r.Z)(p().mark((function e(t){var n,r,i,o,a,s,c,u,l,f,h,v,g,m,b=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={object:d.Types.object({newAccessToken:d.Types.object(),shouldRefreshSessionInfo:d.Types.boolean.optional,logTransaction:d.Types.instanceStrict(x.Z)})},(0,d.typecheck)(this,"updateAccessToken",n,b),r=t.newAccessToken,i=t.shouldRefreshSessionInfo,o=void 0===i||i,a=t.logTransaction,s=r.accessToken,c=r.expiresIn,u=r.refreshToken,l=r.tokenType,f=r.region,h=r.accessTokenType,v=new Z.Z({token:s,tokenType:l,refreshToken:u,expiresIn:c,region:f,accessTokenType:h}),h===y.TV.Device||h===y.TV.AccountWithoutActiveProfile?g=new S.Z:(m=this.storage.getAccess(),g=m.contextState),e.next=7,this.processAccess({accessContext:v,accessContextState:g,shouldRefreshSessionInfo:o,logTransaction:a});case 7:case"end":return e.stop()}}),e,this)}))),function(e){return q.apply(this,arguments)})},{key:"executeTokenRefresh",value:(U=(0,r.Z)(p().mark((function e(t,n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.orchestrationManager.refreshToken(t,n);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,this.handleTokenException(e.t0,n);case 9:return e.prev=9,this.currentTokenRefreshPromise=null,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[0,5,9,12]])}))),function(e,t){return U.apply(this,arguments)})},{key:"refreshAccessToken",value:(k=(0,r.Z)(p().mark((function e(){var t,n,i,o,a,s,c,u,l=this,d=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:{forceRefresh:!1},!this.currentTokenRefreshPromise){e.next=4;break}return this.logger.info(this.toString(),"Waiting for current token refresh operation in progress to complete."),e.abrupt("return",this.currentTokenRefreshPromise);case 4:if(n=t.reason,i=t.forceRefresh,o=void 0!==i&&i,!(a=this.storage.getAccess())){e.next=10;break}return s=a.context.isAccessTokenExpired(this.config.extras.refreshThreshold),(o||s)&&(c=a.context.refreshToken,u={refreshToken:c,reason:n},t.logTransaction?this.currentTokenRefreshPromise=this.executeTokenRefresh(u,t.logTransaction):x.Z.wrapLogTransaction({urn:R.Z.services.orchestration.orchestrationClient.refreshToken,file:this.toString(),logger:this.logger,action:function(){var e=(0,r.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.currentTokenRefreshPromise=l.executeTokenRefresh(u,t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),e.abrupt("return",this.currentTokenRefreshPromise);case 10:throw(0,_.ZP)("A successful token exchange is required before refresh is allowed");case 11:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"handleTokenException",value:(l=(0,r.Z)(p().mark((function e(t,n){var r,i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.deviceGrantStorage.getDeviceGrant(),e.prev=1,!this.isInvalidTokenException(t)){e.next=5;break}return e.next=5,this.reset({deviceGrant:r},n);case 5:throw t;case 8:if(e.prev=8,e.t0=e.catch(1),i=e.t0,!this.isInvalidTokenException(i)){e.next=15;break}return e.next=14,this.deviceManager.createDeviceGrant(void 0,n);case 14:return e.abrupt("return");case 15:throw i;case 16:return e.prev=16,this.emit(D.Z.TokenRefreshFailed,new P.Z(null!==(o=i)&&void 0!==o?o:t,!0)),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,8,16,19]])}))),function(e,t){return l.apply(this,arguments)})},{key:"logout",value:(u=(0,r.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deviceManager.getDeviceGrant(void 0,t);case 2:return n=e.sent,e.next=5,this.reset({deviceGrant:n},t);case 5:return e.next=7,this.accountDelegationRefreshTokenStorage.clear();case 7:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"reset",value:(c=(0,r.Z)(p().mark((function e(t,n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.clearRetryRefresh(),e.next=4,this.exchangeDeviceGrant(t,n);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(0),!this.isInvalidTokenException(e.t0)){e.next=13;break}return e.next=11,this.deviceManager.createDeviceGrant(t,n);case 11:e.next=14;break;case 13:throw e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e,t){return c.apply(this,arguments)})},{key:"restoreAccessState",value:(n=(0,r.Z)(p().mark((function e(t,n){var r,i,o,a,s,c,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.parse(t),i=r.data,o=i.refreshToken,a=i.contextState,s=this.storage.getAccess(),c=new j.Z(o),u=new S.Z(a.modes),c.actor=null==s?void 0:s.context.refreshToken,this.clearRetryRefresh(),e.next=9,this.exchangeRequest(c,u,n);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"hasAccessMode",value:function(e){var t,n=this.storage.getAccess();return!!d.Check.assigned(n)&&null!==(t=null==n?void 0:n.contextState.hasMode(e))&&void 0!==t&&t}},{key:"processAccess",value:(t=(0,r.Z)(p().mark((function e(t){var n,r,i,o,a,s,c,u,l=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:d.Types.object({accessContext:d.Types.instanceStrict(Z.Z),accessContextState:d.Types.instanceStrict(S.Z),shouldRefreshSessionInfo:d.Types.boolean.optional,logTransaction:d.Types.instanceStrict(x.Z)})},(0,d.typecheck)(this,"processAccess",n,l),r=t.accessContext,i=t.accessContextState,o=t.shouldRefreshSessionInfo,a=void 0===o||o,s=t.logTransaction,c=new v.Z(r,i),u=new T.Z(r.token,r.region),e.prev=4,e.next=7,this.storage.saveAccess(c);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),this.logger.error(this.toString(),"Unable to save Access to local storage.");case 12:if(this.logger.info(this.toString(),"Dispatch AccessChanged event."),this.emit(D.Z.AccessChanged,new w.Z(u)),this.enqueueRefresh(),!a){e.next=18;break}return e.next=18,this.refreshSessionInfo(s);case 18:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e){return t.apply(this,arguments)})},{key:"enqueueRefresh",value:function(){if(this.config.extras.disableTokenRefresh)this.logger.warn(this.toString(),"TokenRefresh is disabled, skipping refresh logic.");else{var e=this.storage.getAccess();if(!e)throw(0,_.ZP)("A successful token exchange is required before refresh is allowed");if(e.context.refreshToken){this.clearRetryRefresh();var t=e.context.getRefreshAt(this.config.extras.refreshThreshold)-Date.now();this.retryAttempt=0,this.retryDelay=1e3*this.config.extras.autoRefreshRetryPolicy.retryBasePeriod,this.refreshTimeoutId=setTimeout(this.retryRefresh.bind(this),t)}else this.logger.warn(this.toString(),"refreshToken missing, skipping refresh logic.")}}},{key:"retryRefresh",value:function(){var e=this,t=this.config,n=this.logger,r=t.extras.autoRefreshRetryPolicy,i=r.retryMaxAttempts,o=r.retryMultiplier,a=1e3*r.retryMaxPeriod;return this.clearRetryRefresh(),x.Z.wrapLogTransaction({urn:R.Z.services.orchestration.orchestrationClient.refreshToken,file:this.toString(),logger:n,action:function(t){return e.refreshAccessToken({forceRefresh:!0,logTransaction:t}).catch((function(t){if(e.retryAttempt<i){e.refreshTimeoutId=setTimeout(e.retryRefresh.bind(e),e.retryDelay);var r=e.retryDelay*o;e.retryDelay=r<a?r:a,e.retryAttempt++}else n.error(e.toString(),"Token refresh failed."),n.info(e.toString(),"Dispatch TokenRefreshFailed event."),e.emit(D.Z.TokenRefreshFailed,new P.Z(t));throw t}))}})}},{key:"clearRetryRefresh",value:function(){clearTimeout(this.refreshTimeoutId),this.refreshTimeoutId=-1}},{key:"isInvalidTokenException",value:function(e){var t,n=null===(t=e.reasons[0])||void 0===t?void 0:t.code;return n===A.Z.tokenServiceInvalidGrant.code||n===A.Z.invalidGrant.code}},{key:"toString",value:function(){return"SDK.Token.TokenManager"}}]),Q}(k.Z)},55758:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(15671),i=n(43144),o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,r.Z)(this,e),this.error=t,this.hasResetToAnonymousToken=n}return(0,i.Z)(e,[{key:"toString",value:function(){return"SDK.Token.TokenRefreshFailure"}}]),e}()},9344:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});var r,i=n(67682),o=n(53744);i.Types.nonEmptyString,i.Types.nonEmptyString,i.Types.nonEmptyString,i.Types.nonEmptyString.optional,i.Types.nonEmptyString,i.Types.in(o.Z),function(e){e.Development="development",e.Test="test",e.Production="production"}(r||(r={}))},4954:function(e,t,n){"use strict";var r;n.d(t,{c:function(){return r}}),function(e){e.AppQoe="AppQoe",e.Glimpse="Glimpse"}(r||(r={}))},69708:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(67682),i=n(4954),o={eventUrn:r.Types.nonEmptyString};r.Types.object(o),r.Types.object(),r.Types.in(i.c),r.Types.string},36109:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r,i,o=n(15671),a=n(43144),s=(n(74916),n(4723),n(67682)),c=n(9310),u=function(){function e(){(0,o.Z)(this,e)}return(0,a.Z)(e,null,[{key:"version",get:function(){return r}},{key:"versionShort",get:function(){return i}},{key:"setVersion",value:function(t){var n={input:s.Types.match(c.gh)};(0,s.typecheck)(e,"setVersion",n,arguments),r=t,i=(0,c.oC)(r)}}]),e}();u.setVersion("29.0.0")},19662:function(e,t,n){var r=n(17854),i=n(60614),o=n(66330),a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a function")}},39483:function(e,t,n){var r=n(17854),i=n(4411),o=n(66330),a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a constructor")}},96077:function(e,t,n){var r=n(17854),i=n(60614),o=r.String,a=r.TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw a("Can't set "+o(e)+" as a prototype")}},51223:function(e,t,n){var r=n(5112),i=n(70030),o=n(3070),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},31530:function(e,t,n){"use strict";var r=n(28710).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},25787:function(e,t,n){var r=n(17854),i=n(47976),o=r.TypeError;e.exports=function(e,t){if(i(t,e))return e;throw o("Incorrect invocation")}},19670:function(e,t,n){var r=n(17854),i=n(70111),o=r.String,a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not an object")}},24019:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7556:function(e,t,n){var r=n(47293);e.exports=r((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},90260:function(e,t,n){"use strict";var r,i,o,a=n(24019),s=n(19781),c=n(17854),u=n(60614),l=n(70111),p=n(92597),d=n(70648),y=n(66330),f=n(68880),h=n(31320),v=n(3070).f,g=n(47976),m=n(79518),b=n(27674),T=n(5112),k=n(69711),S=c.Int8Array,P=S&&S.prototype,E=c.Uint8ClampedArray,Z=E&&E.prototype,w=S&&m(S),D=P&&m(P),C=Object.prototype,A=c.TypeError,R=T("toStringTag"),x=k("TYPED_ARRAY_TAG"),O=k("TYPED_ARRAY_CONSTRUCTOR"),I=a&&!!b&&"Opera"!==d(c.opera),M=!1,j={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L={BigInt64Array:8,BigUint64Array:8},N=function(e){if(!l(e))return!1;var t=d(e);return p(j,t)||p(L,t)};for(r in j)(o=(i=c[r])&&i.prototype)?f(o,O,i):I=!1;for(r in L)(o=(i=c[r])&&i.prototype)&&f(o,O,i);if((!I||!u(w)||w===Function.prototype)&&(w=function(){throw A("Incorrect invocation")},I))for(r in j)c[r]&&b(c[r],w);if((!I||!D||D===C)&&(D=w.prototype,I))for(r in j)c[r]&&b(c[r].prototype,D);if(I&&m(Z)!==D&&b(Z,D),s&&!p(D,R))for(r in M=!0,v(D,R,{get:function(){return l(this)?this[x]:void 0}}),j)c[r]&&f(c[r],x,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_CONSTRUCTOR:O,TYPED_ARRAY_TAG:M&&x,aTypedArray:function(e){if(N(e))return e;throw A("Target is not a typed array")},aTypedArrayConstructor:function(e){if(u(e)&&(!b||g(w,e)))return e;throw A(y(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(s){if(n)for(var i in j){var o=c[i];if(o&&p(o.prototype,e))try{delete o.prototype[e]}catch(n){try{o.prototype[e]=t}catch(e){}}}D[e]&&!n||h(D,e,n?t:I&&P[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(s){if(b){if(n)for(r in j)if((i=c[r])&&p(i,e))try{delete i[e]}catch(e){}if(w[e]&&!n)return;try{return h(w,e,n?t:I&&w[e]||t)}catch(e){}}for(r in j)!(i=c[r])||i[e]&&!n||h(i,e,t)}},isView:function(e){if(!l(e))return!1;var t=d(e);return"DataView"===t||p(j,t)||p(L,t)},isTypedArray:N,TypedArray:w,TypedArrayPrototype:D}},13331:function(e,t,n){"use strict";var r=n(17854),i=n(1702),o=n(19781),a=n(24019),s=n(76530),c=n(68880),u=n(12248),l=n(47293),p=n(25787),d=n(19303),y=n(17466),f=n(57067),h=n(11179),v=n(79518),g=n(27674),m=n(8006).f,b=n(3070).f,T=n(21285),k=n(41589),S=n(58003),P=n(29909),E=s.PROPER,Z=s.CONFIGURABLE,w=P.get,D=P.set,C=r.ArrayBuffer,A=C,R=A&&A.prototype,x=r.DataView,O=x&&x.prototype,I=Object.prototype,M=r.Array,j=r.RangeError,L=i(T),N=i([].reverse),B=h.pack,_=h.unpack,F=function(e){return[255&e]},U=function(e){return[255&e,e>>8&255]},q=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},K=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},V=function(e){return B(e,23,4)},H=function(e){return B(e,52,8)},G=function(e,t){b(e.prototype,t,{get:function(){return w(this)[t]}})},Q=function(e,t,n,r){var i=f(n),o=w(e);if(i+t>o.byteLength)throw j("Wrong index");var a=w(o.buffer).bytes,s=i+o.byteOffset,c=k(a,s,s+t);return r?c:N(c)},z=function(e,t,n,r,i,o){var a=f(n),s=w(e);if(a+t>s.byteLength)throw j("Wrong index");for(var c=w(s.buffer).bytes,u=a+s.byteOffset,l=r(+i),p=0;p<t;p++)c[u+p]=l[o?p:t-p-1]};if(a){var W=E&&"ArrayBuffer"!==C.name;if(l((function(){C(1)}))&&l((function(){new C(-1)}))&&!l((function(){return new C,new C(1.5),new C(NaN),W&&!Z})))W&&Z&&c(C,"name","ArrayBuffer");else{(A=function(e){return p(this,R),new C(f(e))}).prototype=R;for(var Y,J=m(C),X=0;J.length>X;)(Y=J[X++])in A||c(A,Y,C[Y]);R.constructor=A}g&&v(O)!==I&&g(O,I);var $=new x(new A(2)),ee=i(O.setInt8);$.setInt8(0,2147483648),$.setInt8(1,2147483649),!$.getInt8(0)&&$.getInt8(1)||u(O,{setInt8:function(e,t){ee(this,e,t<<24>>24)},setUint8:function(e,t){ee(this,e,t<<24>>24)}},{unsafe:!0})}else R=(A=function(e){p(this,R);var t=f(e);D(this,{bytes:L(M(t),0),byteLength:t}),o||(this.byteLength=t)}).prototype,O=(x=function(e,t,n){p(this,O),p(e,R);var r=w(e).byteLength,i=d(t);if(i<0||i>r)throw j("Wrong offset");if(i+(n=void 0===n?r-i:y(n))>r)throw j("Wrong length");D(this,{buffer:e,byteLength:n,byteOffset:i}),o||(this.buffer=e,this.byteLength=n,this.byteOffset=i)}).prototype,o&&(G(A,"byteLength"),G(x,"buffer"),G(x,"byteLength"),G(x,"byteOffset")),u(O,{getInt8:function(e){return Q(this,1,e)[0]<<24>>24},getUint8:function(e){return Q(this,1,e)[0]},getInt16:function(e){var t=Q(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Q(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return K(Q(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return K(Q(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return _(Q(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return _(Q(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){z(this,1,e,F,t)},setUint8:function(e,t){z(this,1,e,F,t)},setInt16:function(e,t){z(this,2,e,U,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){z(this,2,e,U,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){z(this,4,e,q,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){z(this,4,e,q,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){z(this,4,e,V,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){z(this,8,e,H,t,arguments.length>2?arguments[2]:void 0)}});S(A,"ArrayBuffer"),S(x,"DataView"),e.exports={ArrayBuffer:A,DataView:x}},1048:function(e,t,n){"use strict";var r=n(47908),i=n(51400),o=n(26244),a=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),s=o(n),c=i(e,s),u=i(t,s),l=arguments.length>2?arguments[2]:void 0,p=a((void 0===l?s:i(l,s))-u,s-c),d=1;for(u<c&&c<u+p&&(d=-1,u+=p-1,c+=p-1);p-- >0;)u in n?n[c]=n[u]:delete n[c],c+=d,u+=d;return n}},21285:function(e,t,n){"use strict";var r=n(47908),i=n(51400),o=n(26244);e.exports=function(e){for(var t=r(this),n=o(t),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);u>s;)t[s++]=e;return t}},18533:function(e,t,n){"use strict";var r=n(42092).forEach,i=n(9341)("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},97745:function(e,t,n){var r=n(26244);e.exports=function(e,t){for(var n=0,i=r(t),o=new e(i);i>n;)o[n]=t[n++];return o}},48457:function(e,t,n){"use strict";var r=n(17854),i=n(49974),o=n(46916),a=n(47908),s=n(53411),c=n(97659),u=n(4411),l=n(26244),p=n(86135),d=n(18554),y=n(71246),f=r.Array;e.exports=function(e){var t=a(e),n=u(this),r=arguments.length,h=r>1?arguments[1]:void 0,v=void 0!==h;v&&(h=i(h,r>2?arguments[2]:void 0));var g,m,b,T,k,S,P=y(t),E=0;if(!P||this==f&&c(P))for(g=l(t),m=n?new this(g):f(g);g>E;E++)S=v?h(t[E],E):t[E],p(m,E,S);else for(k=(T=d(t,P)).next,m=n?new this:[];!(b=o(k,T)).done;E++)S=v?s(T,h,[b.value,E],!0):b.value,p(m,E,S);return m.length=E,m}},41318:function(e,t,n){var r=n(45656),i=n(51400),o=n(26244),a=function(e){return function(t,n,a){var s,c=r(t),u=o(c),l=i(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},42092:function(e,t,n){var r=n(49974),i=n(1702),o=n(68361),a=n(47908),s=n(26244),c=n(65417),u=i([].push),l=function(e){var t=1==e,n=2==e,i=3==e,l=4==e,p=6==e,d=7==e,y=5==e||p;return function(f,h,v,g){for(var m,b,T=a(f),k=o(T),S=r(h,v),P=s(k),E=0,Z=g||c,w=t?Z(f,P):n||d?Z(f,0):void 0;P>E;E++)if((y||E in k)&&(b=S(m=k[E],E,T),e))if(t)w[E]=b;else if(b)switch(e){case 3:return!0;case 5:return m;case 6:return E;case 2:u(w,m)}else switch(e){case 4:return!1;case 7:u(w,m)}return p?-1:i||l?l:w}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},86583:function(e,t,n){"use strict";var r=n(22104),i=n(45656),o=n(19303),a=n(26244),s=n(9341),c=Math.min,u=[].lastIndexOf,l=!!u&&1/[1].lastIndexOf(1,-0)<0,p=s("lastIndexOf"),d=l||!p;e.exports=d?function(e){if(l)return r(u,this,arguments)||0;var t=i(this),n=a(t),s=n-1;for(arguments.length>1&&(s=c(s,o(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:u},81194:function(e,t,n){var r=n(47293),i=n(5112),o=n(7392),a=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:function(e,t,n){"use strict";var r=n(47293);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},53671:function(e,t,n){var r=n(17854),i=n(19662),o=n(47908),a=n(68361),s=n(26244),c=r.TypeError,u=function(e){return function(t,n,r,u){i(n);var l=o(t),p=a(l),d=s(l),y=e?d-1:0,f=e?-1:1;if(r<2)for(;;){if(y in p){u=p[y],y+=f;break}if(y+=f,e?y<0:d<=y)throw c("Reduce of empty array with no initial value")}for(;e?y>=0:d>y;y+=f)y in p&&(u=n(u,p[y],y,l));return u}};e.exports={left:u(!1),right:u(!0)}},41589:function(e,t,n){var r=n(17854),i=n(51400),o=n(26244),a=n(86135),s=r.Array,c=Math.max;e.exports=function(e,t,n){for(var r=o(e),u=i(t,r),l=i(void 0===n?r:n,r),p=s(c(l-u,0)),d=0;u<l;u++,d++)a(p,d,e[u]);return p.length=d,p}},50206:function(e,t,n){var r=n(1702);e.exports=r([].slice)},94362:function(e,t,n){var r=n(41589),i=Math.floor,o=function(e,t){var n=e.length,c=i(n/2);return n<8?a(e,t):s(e,o(r(e,0,c),t),o(r(e,c),t),t)},a=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},s=function(e,t,n,r){for(var i=t.length,o=n.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e};e.exports=o},77475:function(e,t,n){var r=n(17854),i=n(43157),o=n(4411),a=n(70111),s=n(5112)("species"),c=r.Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,(o(t)&&(t===c||i(t.prototype))||a(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?c:t}},65417:function(e,t,n){var r=n(77475);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},53411:function(e,t,n){var r=n(19670),i=n(99212);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){i(e,"throw",t)}}},17072:function(e,t,n){var r=n(5112)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},84326:function(e,t,n){var r=n(1702),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},70648:function(e,t,n){var r=n(17854),i=n(51694),o=n(60614),a=n(84326),s=n(5112)("toStringTag"),c=r.Object,u="Arguments"==a(function(){return arguments}());e.exports=i?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=c(e),s))?n:u?a(t):"Object"==(r=a(t))&&o(t.callee)?"Arguments":r}},31501:function(e,t,n){"use strict";var r=n(46916),i=n(19662),o=n(19670);e.exports=function(){for(var e=o(this),t=i(e.add),n=0,a=arguments.length;n<a;n++)r(t,e,arguments[n]);return e}},34092:function(e,t,n){"use strict";var r=n(46916),i=n(19662),o=n(19670);e.exports=function(){for(var e,t=o(this),n=i(t.delete),a=!0,s=0,c=arguments.length;s<c;s++)e=r(n,t,arguments[s]),a=a&&e;return!!a}},29320:function(e,t,n){"use strict";var r=n(1702),i=n(12248),o=n(62423).getWeakData,a=n(19670),s=n(70111),c=n(25787),u=n(20408),l=n(42092),p=n(92597),d=n(29909),y=d.set,f=d.getterFor,h=l.find,v=l.findIndex,g=r([].splice),m=0,b=function(e){return e.frozen||(e.frozen=new T)},T=function(){this.entries=[]},k=function(e,t){return h(e.entries,(function(e){return e[0]===t}))};T.prototype={get:function(e){var t=k(this,e);if(t)return t[1]},has:function(e){return!!k(this,e)},set:function(e,t){var n=k(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=v(this.entries,(function(t){return t[0]===e}));return~t&&g(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,n,r){var l=e((function(e,i){c(e,d),y(e,{type:t,id:m++,frozen:void 0}),null!=i&&u(i,e[r],{that:e,AS_ENTRIES:n})})),d=l.prototype,h=f(t),v=function(e,t,n){var r=h(e),i=o(a(t),!0);return!0===i?b(r).set(t,n):i[r.id]=n,e};return i(d,{delete:function(e){var t=h(this);if(!s(e))return!1;var n=o(e);return!0===n?b(t).delete(e):n&&p(n,t.id)&&delete n[t.id]},has:function(e){var t=h(this);if(!s(e))return!1;var n=o(e);return!0===n?b(t).has(e):n&&p(n,t.id)}}),i(d,n?{get:function(e){var t=h(this);if(s(e)){var n=o(e);return!0===n?b(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),l}}},77710:function(e,t,n){"use strict";var r=n(82109),i=n(17854),o=n(1702),a=n(54705),s=n(31320),c=n(62423),u=n(20408),l=n(25787),p=n(60614),d=n(70111),y=n(47293),f=n(17072),h=n(58003),v=n(79587);e.exports=function(e,t,n){var g=-1!==e.indexOf("Map"),m=-1!==e.indexOf("Weak"),b=g?"set":"add",T=i[e],k=T&&T.prototype,S=T,P={},E=function(e){var t=o(k[e]);s(k,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(m&&!d(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return m&&!d(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!d(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(a(e,!p(T)||!(m||k.forEach&&!y((function(){(new T).entries().next()})))))S=n.getConstructor(t,e,g,b),c.enable();else if(a(e,!0)){var Z=new S,w=Z[b](m?{}:-0,1)!=Z,D=y((function(){Z.has(1)})),C=f((function(e){new T(e)})),A=!m&&y((function(){for(var e=new T,t=5;t--;)e[b](t,t);return!e.has(-0)}));C||((S=t((function(e,t){l(e,k);var n=v(new T,e,S);return null!=t&&u(t,n[b],{that:n,AS_ENTRIES:g}),n}))).prototype=k,k.constructor=S),(D||A)&&(E("delete"),E("has"),g&&E("get")),(A||w)&&E(b),m&&k.clear&&delete k.clear}return P[e]=S,r({global:!0,forced:S!=T},P),h(S,e),m||n.setStrong(S,e,g),S}},99920:function(e,t,n){var r=n(92597),i=n(53887),o=n(31236),a=n(3070);e.exports=function(e,t,n){for(var s=i(t),c=a.f,u=o.f,l=0;l<s.length;l++){var p=s[l];r(e,p)||n&&r(n,p)||c(e,p,u(t,p))}}},84964:function(e,t,n){var r=n(5112)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},49920:function(e,t,n){var r=n(47293);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},14230:function(e,t,n){var r=n(1702),i=n(84488),o=n(41340),a=/"/g,s=r("".replace);e.exports=function(e,t,n,r){var c=o(i(e)),u="<"+t;return""!==n&&(u+=" "+n+'="'+s(o(r),a,"&quot;")+'"'),u+">"+c+"</"+t+">"}},24994:function(e,t,n){"use strict";var r=n(13383).IteratorPrototype,i=n(70030),o=n(79114),a=n(58003),s=n(97497),c=function(){return this};e.exports=function(e,t,n,u){var l=t+" Iterator";return e.prototype=i(r,{next:o(+!u,n)}),a(e,l,!1,!0),s[l]=c,e}},68880:function(e,t,n){var r=n(19781),i=n(3070),o=n(79114);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},79114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},86135:function(e,t,n){"use strict";var r=n(34948),i=n(3070),o=n(79114);e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},70654:function(e,t,n){"use strict";var r=n(82109),i=n(46916),o=n(31913),a=n(76530),s=n(60614),c=n(24994),u=n(79518),l=n(27674),p=n(58003),d=n(68880),y=n(31320),f=n(5112),h=n(97497),v=n(13383),g=a.PROPER,m=a.CONFIGURABLE,b=v.IteratorPrototype,T=v.BUGGY_SAFARI_ITERATORS,k=f("iterator"),S=function(){return this};e.exports=function(e,t,n,a,f,v,P){c(n,t,a);var E,Z,w,D=function(e){if(e===f&&O)return O;if(!T&&e in R)return R[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},C=t+" Iterator",A=!1,R=e.prototype,x=R[k]||R["@@iterator"]||f&&R[f],O=!T&&x||D(f),I="Array"==t&&R.entries||x;if(I&&(E=u(I.call(new e)))!==Object.prototype&&E.next&&(o||u(E)===b||(l?l(E,b):s(E[k])||y(E,k,S)),p(E,C,!0,!0),o&&(h[C]=S)),g&&"values"==f&&x&&"values"!==x.name&&(!o&&m?d(R,"name","values"):(A=!0,O=function(){return i(x,this)})),f)if(Z={values:D("values"),keys:v?O:D("keys"),entries:D("entries")},P)for(w in Z)(T||A||!(w in R))&&y(R,w,Z[w]);else r({target:t,proto:!0,forced:T||A},Z);return o&&!P||R[k]===O||y(R,k,O,{name:f}),h[t]=O,Z}},97235:function(e,t,n){var r=n(40857),i=n(92597),o=n(6061),a=n(3070).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},19781:function(e,t,n){var r=n(47293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},80317:function(e,t,n){var r=n(17854),i=n(70111),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},48324:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},98509:function(e,t,n){var r=n(80317)("span").classList,i=r&&r.constructor&&r.constructor.prototype;e.exports=i===Object.prototype?void 0:i},68886:function(e,t,n){var r=n(88113).match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},7871:function(e){e.exports="object"==typeof window},30256:function(e,t,n){var r=n(88113);e.exports=/MSIE|Trident/.test(r)},71528:function(e,t,n){var r=n(88113),i=n(17854);e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==i.Pebble},6833:function(e,t,n){var r=n(88113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},35268:function(e,t,n){var r=n(84326),i=n(17854);e.exports="process"==r(i.process)},71036:function(e,t,n){var r=n(88113);e.exports=/web0s(?!.*chrome)/i.test(r)},88113:function(e,t,n){var r=n(35005);e.exports=r("navigator","userAgent")||""},7392:function(e,t,n){var r,i,o=n(17854),a=n(88113),s=o.process,c=o.Deno,u=s&&s.versions||c&&c.version,l=u&&u.v8;l&&(i=(r=l.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},98008:function(e,t,n){var r=n(88113).match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},80748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},82109:function(e,t,n){var r=n(17854),i=n(31236).f,o=n(68880),a=n(31320),s=n(83505),c=n(99920),u=n(54705);e.exports=function(e,t){var n,l,p,d,y,f=e.target,h=e.global,v=e.stat;if(n=h?r:v?r[f]||s(f,{}):(r[f]||{}).prototype)for(l in t){if(d=t[l],p=e.noTargetGet?(y=i(n,l))&&y.value:n[l],!u(h?l:f+(v?".":"#")+l,e.forced)&&void 0!==p){if(typeof d==typeof p)continue;c(d,p)}(e.sham||p&&p.sham)&&o(d,"sham",!0),a(n,l,d,e)}}},47293:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},27007:function(e,t,n){"use strict";n(74916);var r=n(1702),i=n(31320),o=n(22261),a=n(47293),s=n(5112),c=n(68880),u=s("species"),l=RegExp.prototype;e.exports=function(e,t,n,p){var d=s(e),y=!a((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),f=y&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return t=!0,null},n[d](""),!t}));if(!y||!f||n){var h=r(/./[d]),v=t(d,""[e],(function(e,t,n,i,a){var s=r(e),c=t.exec;return c===o||c===l.exec?y&&!a?{done:!0,value:h(t,n,i)}:{done:!0,value:s(n,t,i)}:{done:!1}}));i(String.prototype,e,v[0]),i(l,d,v[1])}p&&c(l[d],"sham",!0)}},76677:function(e,t,n){var r=n(47293);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},22104:function(e,t,n){var r=n(34374),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(o):function(){return a.apply(o,arguments)})},49974:function(e,t,n){var r=n(1702),i=n(19662),o=n(34374),a=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},34374:function(e,t,n){var r=n(47293);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},27065:function(e,t,n){"use strict";var r=n(17854),i=n(1702),o=n(19662),a=n(70111),s=n(92597),c=n(50206),u=n(34374),l=r.Function,p=i([].concat),d=i([].join),y={},f=function(e,t,n){if(!s(y,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";y[t]=l("C,a","return new C("+d(r,",")+")")}return y[t](e,n)};e.exports=u?l.bind:function(e){var t=o(this),n=t.prototype,r=c(arguments,1),i=function(){var n=p(r,c(arguments));return this instanceof i?f(t,n.length,n):t.apply(e,n)};return a(n)&&(i.prototype=n),i}},46916:function(e,t,n){var r=n(34374),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},76530:function(e,t,n){var r=n(19781),i=n(92597),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),c=s&&"something"===function(){}.name,u=s&&(!r||r&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},1702:function(e,t,n){var r=n(34374),i=Function.prototype,o=i.bind,a=i.call,s=r&&o.bind(a,a);e.exports=r?function(e){return e&&s(e)}:function(e){return e&&function(){return a.apply(e,arguments)}}},35005:function(e,t,n){var r=n(17854),i=n(60614),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e]):r[e]&&r[e][t]}},71246:function(e,t,n){var r=n(70648),i=n(58173),o=n(97497),a=n(5112)("iterator");e.exports=function(e){if(null!=e)return i(e,a)||i(e,"@@iterator")||o[r(e)]}},18554:function(e,t,n){var r=n(17854),i=n(46916),o=n(19662),a=n(19670),s=n(66330),c=n(71246),u=r.TypeError;e.exports=function(e,t){var n=arguments.length<2?c(e):t;if(o(n))return a(i(n,e));throw u(s(e)+" is not iterable")}},58173:function(e,t,n){var r=n(19662);e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},10647:function(e,t,n){var r=n(1702),i=n(47908),o=Math.floor,a=r("".charAt),s=r("".replace),c=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,p,d){var y=n+e.length,f=r.length,h=l;return void 0!==p&&(p=i(p),h=u),s(d,h,(function(i,s){var u;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,n);case"'":return c(t,y);case"<":u=p[c(s,1,-1)];break;default:var l=+s;if(0===l)return i;if(l>f){var d=o(l/10);return 0===d?i:d<=f?void 0===r[d-1]?a(s,1):r[d-1]+a(s,1):i}u=r[l-1]}return void 0===u?"":u}))}},17854:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},92597:function(e,t,n){var r=n(1702),i=n(47908),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},3501:function(e){e.exports={}},842:function(e,t,n){var r=n(17854);e.exports=function(e,t){var n=r.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},60490:function(e,t,n){var r=n(35005);e.exports=r("document","documentElement")},64664:function(e,t,n){var r=n(19781),i=n(47293),o=n(80317);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},11179:function(e,t,n){var r=n(17854).Array,i=Math.abs,o=Math.pow,a=Math.floor,s=Math.log,c=Math.LN2;e.exports={pack:function(e,t,n){var u,l,p,d=r(n),y=8*n-t-1,f=(1<<y)-1,h=f>>1,v=23===t?o(2,-24)-o(2,-77):0,g=e<0||0===e&&1/e<0?1:0,m=0;for((e=i(e))!=e||e===1/0?(l=e!=e?1:0,u=f):(u=a(s(e)/c),e*(p=o(2,-u))<1&&(u--,p*=2),(e+=u+h>=1?v/p:v*o(2,1-h))*p>=2&&(u++,p/=2),u+h>=f?(l=0,u=f):u+h>=1?(l=(e*p-1)*o(2,t),u+=h):(l=e*o(2,h-1)*o(2,t),u=0));t>=8;)d[m++]=255&l,l/=256,t-=8;for(u=u<<t|l,y+=t;y>0;)d[m++]=255&u,u/=256,y-=8;return d[--m]|=128*g,d},unpack:function(e,t){var n,r=e.length,i=8*r-t-1,a=(1<<i)-1,s=a>>1,c=i-7,u=r-1,l=e[u--],p=127&l;for(l>>=7;c>0;)p=256*p+e[u--],c-=8;for(n=p&(1<<-c)-1,p>>=-c,c+=t;c>0;)n=256*n+e[u--],c-=8;if(0===p)p=1-s;else{if(p===a)return n?NaN:l?-1/0:1/0;n+=o(2,t),p-=s}return(l?-1:1)*n*o(2,p-t)}}},68361:function(e,t,n){var r=n(17854),i=n(1702),o=n(47293),a=n(84326),s=r.Object,c=i("".split);e.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?c(e,""):s(e)}:s},79587:function(e,t,n){var r=n(60614),i=n(70111),o=n(27674);e.exports=function(e,t,n){var a,s;return o&&r(a=t.constructor)&&a!==n&&i(s=a.prototype)&&s!==n.prototype&&o(e,s),e}},42788:function(e,t,n){var r=n(1702),i=n(60614),o=n(5465),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},62423:function(e,t,n){var r=n(82109),i=n(1702),o=n(3501),a=n(70111),s=n(92597),c=n(3070).f,u=n(8006),l=n(1156),p=n(52050),d=n(69711),y=n(76677),f=!1,h=d("meta"),v=0,g=function(e){c(e,h,{value:{objectID:"O"+v++,weakData:{}}})},m=e.exports={enable:function(){m.enable=function(){},f=!0;var e=u.f,t=i([].splice),n={};n[h]=1,e(n).length&&(u.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===h){t(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,h)){if(!p(e))return"F";if(!t)return"E";g(e)}return e[h].objectID},getWeakData:function(e,t){if(!s(e,h)){if(!p(e))return!0;if(!t)return!1;g(e)}return e[h].weakData},onFreeze:function(e){return y&&f&&p(e)&&!s(e,h)&&g(e),e}};o[h]=!0},29909:function(e,t,n){var r,i,o,a=n(68536),s=n(17854),c=n(1702),u=n(70111),l=n(68880),p=n(92597),d=n(5465),y=n(6200),f=n(3501),h=s.TypeError,v=s.WeakMap;if(a||d.state){var g=d.state||(d.state=new v),m=c(g.get),b=c(g.has),T=c(g.set);r=function(e,t){if(b(g,e))throw new h("Object already initialized");return t.facade=e,T(g,e,t),t},i=function(e){return m(g,e)||{}},o=function(e){return b(g,e)}}else{var k=y("state");f[k]=!0,r=function(e,t){if(p(e,k))throw new h("Object already initialized");return t.facade=e,l(e,k,t),t},i=function(e){return p(e,k)?e[k]:{}},o=function(e){return p(e,k)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw h("Incompatible receiver, "+e+" required");return n}}}},97659:function(e,t,n){var r=n(5112),i=n(97497),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},43157:function(e,t,n){var r=n(84326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},60614:function(e){e.exports=function(e){return"function"==typeof e}},4411:function(e,t,n){var r=n(1702),i=n(47293),o=n(60614),a=n(70648),s=n(35005),c=n(42788),u=function(){},l=[],p=s("Reflect","construct"),d=/^\s*(?:class|function)\b/,y=r(d.exec),f=!d.exec(u),h=function(e){if(!o(e))return!1;try{return p(u,l,e),!0}catch(e){return!1}},v=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!y(d,c(e))}catch(e){return!0}};v.sham=!0,e.exports=!p||i((function(){var e;return h(h.call)||!h(Object)||!h((function(){e=!0}))||e}))?v:h},45032:function(e,t,n){var r=n(92597);e.exports=function(e){return void 0!==e&&(r(e,"value")||r(e,"writable"))}},54705:function(e,t,n){var r=n(47293),i=n(60614),o=/#|\.prototype\./,a=function(e,t){var n=c[s(e)];return n==l||n!=u&&(i(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},55988:function(e,t,n){var r=n(70111),i=Math.floor;e.exports=Number.isInteger||function(e){return!r(e)&&isFinite(e)&&i(e)===e}},70111:function(e,t,n){var r=n(60614);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},31913:function(e){e.exports=!1},47850:function(e,t,n){var r=n(70111),i=n(84326),o=n(5112)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},52190:function(e,t,n){var r=n(17854),i=n(35005),o=n(60614),a=n(47976),s=n(43307),c=r.Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return o(t)&&a(t.prototype,c(e))}},20408:function(e,t,n){var r=n(17854),i=n(49974),o=n(46916),a=n(19670),s=n(66330),c=n(97659),u=n(26244),l=n(47976),p=n(18554),d=n(71246),y=n(99212),f=r.TypeError,h=function(e,t){this.stopped=e,this.result=t},v=h.prototype;e.exports=function(e,t,n){var r,g,m,b,T,k,S,P=n&&n.that,E=!(!n||!n.AS_ENTRIES),Z=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),D=i(t,P),C=function(e){return r&&y(r,"normal",e),new h(!0,e)},A=function(e){return E?(a(e),w?D(e[0],e[1],C):D(e[0],e[1])):w?D(e,C):D(e)};if(Z)r=e;else{if(!(g=d(e)))throw f(s(e)+" is not iterable");if(c(g)){for(m=0,b=u(e);b>m;m++)if((T=A(e[m]))&&l(v,T))return T;return new h(!1)}r=p(e,g)}for(k=r.next;!(S=o(k,r)).done;){try{T=A(S.value)}catch(e){y(r,"throw",e)}if("object"==typeof T&&T&&l(v,T))return T}return new h(!1)}},99212:function(e,t,n){var r=n(46916),i=n(19670),o=n(58173);e.exports=function(e,t,n){var a,s;i(e);try{if(!(a=o(e,"return"))){if("throw"===t)throw n;return n}a=r(a,e)}catch(e){s=!0,a=e}if("throw"===t)throw n;if(s)throw a;return i(a),n}},13383:function(e,t,n){"use strict";var r,i,o,a=n(47293),s=n(60614),c=n(70030),u=n(79518),l=n(31320),p=n(5112),d=n(31913),y=p("iterator"),f=!1;[].keys&&("next"in(o=[].keys())?(i=u(u(o)))!==Object.prototype&&(r=i):f=!0),null==r||a((function(){var e={};return r[y].call(e)!==e}))?r={}:d&&(r=c(r)),s(r[y])||l(r,y,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},97497:function(e){e.exports={}},26244:function(e,t,n){var r=n(17466);e.exports=function(e){return r(e.length)}},95948:function(e,t,n){var r,i,o,a,s,c,u,l,p=n(17854),d=n(49974),y=n(31236).f,f=n(20261).set,h=n(6833),v=n(71528),g=n(71036),m=n(35268),b=p.MutationObserver||p.WebKitMutationObserver,T=p.document,k=p.process,S=p.Promise,P=y(p,"queueMicrotask"),E=P&&P.value;E||(r=function(){var e,t;for(m&&(e=k.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?a():o=void 0,e}}o=void 0,e&&e.enter()},h||m||g||!b||!T?!v&&S&&S.resolve?((u=S.resolve(void 0)).constructor=S,l=d(u.then,u),a=function(){l(r)}):m?a=function(){k.nextTick(r)}:(f=d(f,p),a=function(){f(r)}):(s=!0,c=T.createTextNode(""),new b(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),e.exports=E||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},13366:function(e,t,n){var r=n(17854);e.exports=r.Promise},30133:function(e,t,n){var r=n(7392),i=n(47293);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},590:function(e,t,n){var r=n(47293),i=n(5112),o=n(31913),a=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},68536:function(e,t,n){var r=n(17854),i=n(60614),o=n(42788),a=r.WeakMap;e.exports=i(a)&&/native code/.test(o(a))},78523:function(e,t,n){"use strict";var r=n(19662),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},3929:function(e,t,n){var r=n(17854),i=n(47850),o=r.TypeError;e.exports=function(e){if(i(e))throw o("The method doesn't accept regular expressions");return e}},21574:function(e,t,n){"use strict";var r=n(19781),i=n(1702),o=n(46916),a=n(47293),s=n(81956),c=n(25181),u=n(55296),l=n(47908),p=n(68361),d=Object.assign,y=Object.defineProperty,f=i([].concat);e.exports=!d||a((function(){if(r&&1!==d({b:1},d(y({},"a",{enumerable:!0,get:function(){y(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=d({},e)[n]||"abcdefghijklmnopqrst"!=s(d({},t)).join("")}))?function(e,t){for(var n=l(e),i=arguments.length,a=1,d=c.f,y=u.f;i>a;)for(var h,v=p(arguments[a++]),g=d?f(s(v),d(v)):s(v),m=g.length,b=0;m>b;)h=g[b++],r&&!o(y,v,h)||(n[h]=v[h]);return n}:d},70030:function(e,t,n){var r,i=n(19670),o=n(36048),a=n(80748),s=n(3501),c=n(60490),u=n(80317),l=n(6200),p=l("IE_PROTO"),d=function(){},y=function(e){return"<script>"+e+"<\/script>"},f=function(e){e.write(y("")),e.close();var t=e.parentWindow.Object;return e=null,t},h=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t;h="undefined"!=typeof document?document.domain&&r?f(r):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(y("document.F=Object")),e.close(),e.F):f(r);for(var n=a.length;n--;)delete h.prototype[a[n]];return h()};s[p]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(d.prototype=i(e),n=new d,d.prototype=null,n[p]=e):n=h(),void 0===t?n:o.f(n,t)}},36048:function(e,t,n){var r=n(19781),i=n(3353),o=n(3070),a=n(19670),s=n(45656),c=n(81956);t.f=r&&!i?Object.defineProperties:function(e,t){a(e);for(var n,r=s(t),i=c(t),u=i.length,l=0;u>l;)o.f(e,n=i[l++],r[n]);return e}},3070:function(e,t,n){var r=n(17854),i=n(19781),o=n(64664),a=n(3353),s=n(19670),c=n(34948),u=r.TypeError,l=Object.defineProperty,p=Object.getOwnPropertyDescriptor;t.f=i?a?function(e,t,n){if(s(e),t=c(t),s(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var r=p(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return l(e,t,n)}:l:function(e,t,n){if(s(e),t=c(t),s(n),o)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},31236:function(e,t,n){var r=n(19781),i=n(46916),o=n(55296),a=n(79114),s=n(45656),c=n(34948),u=n(92597),l=n(64664),p=Object.getOwnPropertyDescriptor;t.f=r?p:function(e,t){if(e=s(e),t=c(t),l)try{return p(e,t)}catch(e){}if(u(e,t))return a(!i(o.f,e,t),e[t])}},1156:function(e,t,n){var r=n(84326),i=n(45656),o=n(8006).f,a=n(41589),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"Window"==r(e)?function(e){try{return o(e)}catch(e){return a(s)}}(e):o(i(e))}},8006:function(e,t,n){var r=n(16324),i=n(80748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},25181:function(e,t){t.f=Object.getOwnPropertySymbols},79518:function(e,t,n){var r=n(17854),i=n(92597),o=n(60614),a=n(47908),s=n(6200),c=n(49920),u=s("IE_PROTO"),l=r.Object,p=l.prototype;e.exports=c?l.getPrototypeOf:function(e){var t=a(e);if(i(t,u))return t[u];var n=t.constructor;return o(n)&&t instanceof n?n.prototype:t instanceof l?p:null}},52050:function(e,t,n){var r=n(47293),i=n(70111),o=n(84326),a=n(7556),s=Object.isExtensible,c=r((function(){s(1)}));e.exports=c||a?function(e){return!!i(e)&&(!a||"ArrayBuffer"!=o(e))&&(!s||s(e))}:s},47976:function(e,t,n){var r=n(1702);e.exports=r({}.isPrototypeOf)},16324:function(e,t,n){var r=n(1702),i=n(92597),o=n(45656),a=n(41318).indexOf,s=n(3501),c=r([].push);e.exports=function(e,t){var n,r=o(e),u=0,l=[];for(n in r)!i(s,n)&&i(r,n)&&c(l,n);for(;t.length>u;)i(r,n=t[u++])&&(~a(l,n)||c(l,n));return l}},81956:function(e,t,n){var r=n(16324),i=n(80748);e.exports=Object.keys||function(e){return r(e,i)}},55296:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},27674:function(e,t,n){var r=n(1702),i=n(19670),o=n(96077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return i(n),o(r),t?e(n,r):n.__proto__=r,n}}():void 0)},44699:function(e,t,n){var r=n(19781),i=n(1702),o=n(81956),a=n(45656),s=i(n(55296).f),c=i([].push),u=function(e){return function(t){for(var n,i=a(t),u=o(i),l=u.length,p=0,d=[];l>p;)n=u[p++],r&&!s(i,n)||c(d,e?[n,i[n]]:i[n]);return d}};e.exports={entries:u(!0),values:u(!1)}},90288:function(e,t,n){"use strict";var r=n(51694),i=n(70648);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},92140:function(e,t,n){var r=n(17854),i=n(46916),o=n(60614),a=n(70111),s=r.TypeError;e.exports=function(e,t){var n,r;if("string"===t&&o(n=e.toString)&&!a(r=i(n,e)))return r;if(o(n=e.valueOf)&&!a(r=i(n,e)))return r;if("string"!==t&&o(n=e.toString)&&!a(r=i(n,e)))return r;throw s("Can't convert object to primitive value")}},53887:function(e,t,n){var r=n(35005),i=n(1702),o=n(8006),a=n(25181),s=n(19670),c=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?c(t,n(e)):t}},40857:function(e,t,n){var r=n(17854);e.exports=r},12534:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},69478:function(e,t,n){var r=n(19670),i=n(70111),o=n(78523);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},18572:function(e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=t},12248:function(e,t,n){var r=n(31320);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},31320:function(e,t,n){var r=n(17854),i=n(60614),o=n(92597),a=n(68880),s=n(83505),c=n(42788),u=n(29909),l=n(76530).CONFIGURABLE,p=u.get,d=u.enforce,y=String(String).split("String");(e.exports=function(e,t,n,c){var u,p=!!c&&!!c.unsafe,f=!!c&&!!c.enumerable,h=!!c&&!!c.noTargetGet,v=c&&void 0!==c.name?c.name:t;i(n)&&("Symbol("===String(v).slice(0,7)&&(v="["+String(v).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(n,"name")||l&&n.name!==v)&&a(n,"name",v),(u=d(n)).source||(u.source=y.join("string"==typeof v?v:""))),e!==r?(p?!h&&e[t]&&(f=!0):delete e[t],f?e[t]=n:a(e,t,n)):f?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return i(this)&&p(this).source||c(this)}))},97651:function(e,t,n){var r=n(17854),i=n(46916),o=n(19670),a=n(60614),s=n(84326),c=n(22261),u=r.TypeError;e.exports=function(e,t){var n=e.exec;if(a(n)){var r=i(n,e,t);return null!==r&&o(r),r}if("RegExp"===s(e))return i(c,e,t);throw u("RegExp#exec called on incompatible receiver")}},22261:function(e,t,n){"use strict";var r,i,o=n(46916),a=n(1702),s=n(41340),c=n(67066),u=n(52999),l=n(72309),p=n(70030),d=n(29909).get,y=n(9441),f=n(38173),h=l("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,g=v,m=a("".charAt),b=a("".indexOf),T=a("".replace),k=a("".slice),S=(i=/b*/g,o(v,r=/a/,"a"),o(v,i,"a"),0!==r.lastIndex||0!==i.lastIndex),P=u.BROKEN_CARET,E=void 0!==/()??/.exec("")[1];(S||E||P||y||f)&&(g=function(e){var t,n,r,i,a,u,l,y=this,f=d(y),Z=s(e),w=f.raw;if(w)return w.lastIndex=y.lastIndex,t=o(g,w,Z),y.lastIndex=w.lastIndex,t;var D=f.groups,C=P&&y.sticky,A=o(c,y),R=y.source,x=0,O=Z;if(C&&(A=T(A,"y",""),-1===b(A,"g")&&(A+="g"),O=k(Z,y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&"\n"!==m(Z,y.lastIndex-1))&&(R="(?: "+R+")",O=" "+O,x++),n=new RegExp("^(?:"+R+")",A)),E&&(n=new RegExp("^"+R+"$(?!\\s)",A)),S&&(r=y.lastIndex),i=o(v,C?n:y,O),C?i?(i.input=k(i.input,x),i[0]=k(i[0],x),i.index=y.lastIndex,y.lastIndex+=i[0].length):y.lastIndex=0:S&&i&&(y.lastIndex=y.global?i.index+i[0].length:r),E&&i&&i.length>1&&o(h,i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&D)for(i.groups=u=p(null),a=0;a<D.length;a++)u[(l=D[a])[0]]=i[l[1]];return i}),e.exports=g},67066:function(e,t,n){"use strict";var r=n(19670);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},52999:function(e,t,n){var r=n(47293),i=n(17854).RegExp,o=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),a=o||r((function(){return!i("a","y").sticky})),s=o||r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:o}},9441:function(e,t,n){var r=n(47293),i=n(17854).RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},38173:function(e,t,n){var r=n(47293),i=n(17854).RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},84488:function(e,t,n){var r=n(17854).TypeError;e.exports=function(e){if(null==e)throw r("Can't call method on "+e);return e}},81150:function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},83505:function(e,t,n){var r=n(17854),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},96340:function(e,t,n){"use strict";var r=n(35005),i=n(3070),o=n(5112),a=n(19781),s=o("species");e.exports=function(e){var t=r(e),n=i.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},58003:function(e,t,n){var r=n(3070).f,i=n(92597),o=n(5112)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,o)&&r(e,o,{configurable:!0,value:t})}},6200:function(e,t,n){var r=n(72309),i=n(69711),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5465:function(e,t,n){var r=n(17854),i=n(83505),o=r["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=o},72309:function(e,t,n){var r=n(31913),i=n(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:r?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},36707:function(e,t,n){var r=n(19670),i=n(39483),o=n(5112)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},43429:function(e,t,n){var r=n(47293);e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},28710:function(e,t,n){var r=n(1702),i=n(19303),o=n(41340),a=n(84488),s=r("".charAt),c=r("".charCodeAt),u=r("".slice),l=function(e){return function(t,n){var r,l,p=o(a(t)),d=i(n),y=p.length;return d<0||d>=y?e?"":void 0:(r=c(p,d))<55296||r>56319||d+1===y||(l=c(p,d+1))<56320||l>57343?e?s(p,d):r:e?u(p,d,d+2):l-56320+(r-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},76091:function(e,t,n){var r=n(76530).PROPER,i=n(47293),o=n(81361);e.exports=function(e){return i((function(){return!!o[e]()||""!==""[e]()||r&&o[e].name!==e}))}},53111:function(e,t,n){var r=n(1702),i=n(84488),o=n(41340),a=n(81361),s=r("".replace),c="["+a+"]",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),p=function(e){return function(t){var n=o(i(t));return 1&e&&(n=s(n,u,"")),2&e&&(n=s(n,l,"")),n}};e.exports={start:p(1),end:p(2),trim:p(3)}},20261:function(e,t,n){var r,i,o,a,s=n(17854),c=n(22104),u=n(49974),l=n(60614),p=n(92597),d=n(47293),y=n(60490),f=n(50206),h=n(80317),v=n(48053),g=n(6833),m=n(35268),b=s.setImmediate,T=s.clearImmediate,k=s.process,S=s.Dispatch,P=s.Function,E=s.MessageChannel,Z=s.String,w=0,D={};try{r=s.location}catch(e){}var C=function(e){if(p(D,e)){var t=D[e];delete D[e],t()}},A=function(e){return function(){C(e)}},R=function(e){C(e.data)},x=function(e){s.postMessage(Z(e),r.protocol+"//"+r.host)};b&&T||(b=function(e){v(arguments.length,1);var t=l(e)?e:P(e),n=f(arguments,1);return D[++w]=function(){c(t,void 0,n)},i(w),w},T=function(e){delete D[e]},m?i=function(e){k.nextTick(A(e))}:S&&S.now?i=function(e){S.now(A(e))}:E&&!g?(a=(o=new E).port2,o.port1.onmessage=R,i=u(a.postMessage,a)):s.addEventListener&&l(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!d(x)?(i=x,s.addEventListener("message",R,!1)):i="onreadystatechange"in h("script")?function(e){y.appendChild(h("script")).onreadystatechange=function(){y.removeChild(this),C(e)}}:function(e){setTimeout(A(e),0)}),e.exports={set:b,clear:T}},50863:function(e,t,n){var r=n(1702);e.exports=r(1..valueOf)},51400:function(e,t,n){var r=n(19303),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},57067:function(e,t,n){var r=n(17854),i=n(19303),o=n(17466),a=r.RangeError;e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=o(t);if(t!==n)throw a("Wrong length or index");return n}},45656:function(e,t,n){var r=n(68361),i=n(84488);e.exports=function(e){return r(i(e))}},19303:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){var r=+e;return r!=r||0===r?0:(r>0?n:t)(r)}},17466:function(e,t,n){var r=n(19303),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},47908:function(e,t,n){var r=n(17854),i=n(84488),o=r.Object;e.exports=function(e){return o(i(e))}},84590:function(e,t,n){var r=n(17854),i=n(73002),o=r.RangeError;e.exports=function(e,t){var n=i(e);if(n%t)throw o("Wrong offset");return n}},73002:function(e,t,n){var r=n(17854),i=n(19303),o=r.RangeError;e.exports=function(e){var t=i(e);if(t<0)throw o("The argument can't be less than 0");return t}},57593:function(e,t,n){var r=n(17854),i=n(46916),o=n(70111),a=n(52190),s=n(58173),c=n(92140),u=n(5112),l=r.TypeError,p=u("toPrimitive");e.exports=function(e,t){if(!o(e)||a(e))return e;var n,r=s(e,p);if(r){if(void 0===t&&(t="default"),n=i(r,e,t),!o(n)||a(n))return n;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),c(e,t)}},34948:function(e,t,n){var r=n(57593),i=n(52190);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},51694:function(e,t,n){var r={};r[n(5112)("toStringTag")]="z",e.exports="[object z]"===String(r)},41340:function(e,t,n){var r=n(17854),i=n(70648),o=r.String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},66330:function(e,t,n){var r=n(17854).String;e.exports=function(e){try{return r(e)}catch(e){return"Object"}}},19843:function(e,t,n){"use strict";var r=n(82109),i=n(17854),o=n(46916),a=n(19781),s=n(63832),c=n(90260),u=n(13331),l=n(25787),p=n(79114),d=n(68880),y=n(55988),f=n(17466),h=n(57067),v=n(84590),g=n(34948),m=n(92597),b=n(70648),T=n(70111),k=n(52190),S=n(70030),P=n(47976),E=n(27674),Z=n(8006).f,w=n(97321),D=n(42092).forEach,C=n(96340),A=n(3070),R=n(31236),x=n(29909),O=n(79587),I=x.get,M=x.set,j=A.f,L=R.f,N=Math.round,B=i.RangeError,_=u.ArrayBuffer,F=_.prototype,U=u.DataView,q=c.NATIVE_ARRAY_BUFFER_VIEWS,K=c.TYPED_ARRAY_CONSTRUCTOR,V=c.TYPED_ARRAY_TAG,H=c.TypedArray,G=c.TypedArrayPrototype,Q=c.aTypedArrayConstructor,z=c.isTypedArray,W=function(e,t){Q(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},Y=function(e,t){j(e,t,{get:function(){return I(this)[t]}})},J=function(e){var t;return P(F,e)||"ArrayBuffer"==(t=b(e))||"SharedArrayBuffer"==t},X=function(e,t){return z(e)&&!k(t)&&t in e&&y(+t)&&t>=0},$=function(e,t){return t=g(t),X(e,t)?p(2,e[t]):L(e,t)},ee=function(e,t,n){return t=g(t),!(X(e,t)&&T(n)&&m(n,"value"))||m(n,"get")||m(n,"set")||n.configurable||m(n,"writable")&&!n.writable||m(n,"enumerable")&&!n.enumerable?j(e,t,n):(e[t]=n.value,e)};a?(q||(R.f=$,A.f=ee,Y(G,"buffer"),Y(G,"byteOffset"),Y(G,"byteLength"),Y(G,"length")),r({target:"Object",stat:!0,forced:!q},{getOwnPropertyDescriptor:$,defineProperty:ee}),e.exports=function(e,t,n){var a=e.match(/\d+$/)[0]/8,c=e+(n?"Clamped":"")+"Array",u="get"+e,p="set"+e,y=i[c],g=y,m=g&&g.prototype,b={},k=function(e,t){j(e,t,{get:function(){return function(e,t){var n=I(e);return n.view[u](t*a+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=I(e);n&&(r=(r=N(r))<0?0:r>255?255:255&r),i.view[p](t*a+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};q?s&&(g=t((function(e,t,n,r){return l(e,m),O(T(t)?J(t)?void 0!==r?new y(t,v(n,a),r):void 0!==n?new y(t,v(n,a)):new y(t):z(t)?W(g,t):o(w,g,t):new y(h(t)),e,g)})),E&&E(g,H),D(Z(y),(function(e){e in g||d(g,e,y[e])})),g.prototype=m):(g=t((function(e,t,n,r){l(e,m);var i,s,c,u=0,p=0;if(T(t)){if(!J(t))return z(t)?W(g,t):o(w,g,t);i=t,p=v(n,a);var d=t.byteLength;if(void 0===r){if(d%a)throw B("Wrong length");if((s=d-p)<0)throw B("Wrong length")}else if((s=f(r)*a)+p>d)throw B("Wrong length");c=s/a}else c=h(t),i=new _(s=c*a);for(M(e,{buffer:i,byteOffset:p,byteLength:s,length:c,view:new U(i)});u<c;)k(e,u++)})),E&&E(g,H),m=g.prototype=S(G)),m.constructor!==g&&d(m,"constructor",g),d(m,K,g),V&&d(m,V,c),b[c]=g,r({global:!0,forced:g!=y,sham:!q},b),"BYTES_PER_ELEMENT"in g||d(g,"BYTES_PER_ELEMENT",a),"BYTES_PER_ELEMENT"in m||d(m,"BYTES_PER_ELEMENT",a),C(c)}):e.exports=function(){}},63832:function(e,t,n){var r=n(17854),i=n(47293),o=n(17072),a=n(90260).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;e.exports=!a||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new s(2),1,void 0).length}))},43074:function(e,t,n){var r=n(97745),i=n(66304);e.exports=function(e,t){return r(i(e),t)}},97321:function(e,t,n){var r=n(49974),i=n(46916),o=n(39483),a=n(47908),s=n(26244),c=n(18554),u=n(71246),l=n(97659),p=n(90260).aTypedArrayConstructor;e.exports=function(e){var t,n,d,y,f,h,v=o(this),g=a(e),m=arguments.length,b=m>1?arguments[1]:void 0,T=void 0!==b,k=u(g);if(k&&!l(k))for(h=(f=c(g,k)).next,g=[];!(y=i(h,f)).done;)g.push(y.value);for(T&&m>2&&(b=r(b,arguments[2])),n=s(g),d=new(p(v))(n),t=0;n>t;t++)d[t]=T?b(g[t],t):g[t];return d}},66304:function(e,t,n){var r=n(90260),i=n(36707),o=r.TYPED_ARRAY_CONSTRUCTOR,a=r.aTypedArrayConstructor;e.exports=function(e){return a(i(e,e[o]))}},69711:function(e,t,n){var r=n(1702),i=0,o=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},43307:function(e,t,n){var r=n(30133);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,n){var r=n(19781),i=n(47293);e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},48053:function(e,t,n){var r=n(17854).TypeError;e.exports=function(e,t){if(e<t)throw r("Not enough arguments");return e}},6061:function(e,t,n){var r=n(5112);t.f=r},5112:function(e,t,n){var r=n(17854),i=n(72309),o=n(92597),a=n(69711),s=n(30133),c=n(43307),u=i("wks"),l=r.Symbol,p=l&&l.for,d=c?l:l&&l.withoutSetter||a;e.exports=function(e){if(!o(u,e)||!s&&"string"!=typeof u[e]){var t="Symbol."+e;s&&o(l,e)?u[e]=l[e]:u[e]=c&&p?p(t):d(t)}return u[e]}},81361:function(e){e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},18264:function(e,t,n){"use strict";var r=n(82109),i=n(17854),o=n(13331),a=n(96340),s=o.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==s},{ArrayBuffer:s}),a("ArrayBuffer")},92222:function(e,t,n){"use strict";var r=n(82109),i=n(17854),o=n(47293),a=n(43157),s=n(70111),c=n(47908),u=n(26244),l=n(86135),p=n(65417),d=n(81194),y=n(5112),f=n(7392),h=y("isConcatSpreadable"),v=i.TypeError,g=f>=51||!o((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),m=d("concat"),b=function(e){if(!s(e))return!1;var t=e[h];return void 0!==t?!!t:a(e)};r({target:"Array",proto:!0,forced:!g||!m},{concat:function(e){var t,n,r,i,o,a=c(this),s=p(a,0),d=0;for(t=-1,r=arguments.length;t<r;t++)if(b(o=-1===t?a:arguments[t])){if(d+(i=u(o))>9007199254740991)throw v("Maximum allowed index exceeded");for(n=0;n<i;n++,d++)n in o&&l(s,d,o[n])}else{if(d>=9007199254740991)throw v("Maximum allowed index exceeded");l(s,d++,o)}return s.length=d,s}})},57327:function(e,t,n){"use strict";var r=n(82109),i=n(42092).filter;r({target:"Array",proto:!0,forced:!n(81194)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},34553:function(e,t,n){"use strict";var r=n(82109),i=n(42092).findIndex,o=n(51223),a=!0;"findIndex"in[]&&Array(1).findIndex((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},69826:function(e,t,n){"use strict";var r=n(82109),i=n(42092).find,o=n(51223),a=!0;"find"in[]&&Array(1).find((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("find")},91038:function(e,t,n){var r=n(82109),i=n(48457);r({target:"Array",stat:!0,forced:!n(17072)((function(e){Array.from(e)}))},{from:i})},26699:function(e,t,n){"use strict";var r=n(82109),i=n(41318).includes,o=n(51223);r({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},66992:function(e,t,n){"use strict";var r=n(45656),i=n(51223),o=n(97497),a=n(29909),s=n(3070).f,c=n(70654),u=n(31913),l=n(19781),p=a.set,d=a.getterFor("Array Iterator");e.exports=c(Array,"Array",(function(e,t){p(this,{type:"Array Iterator",target:r(e),index:0,kind:t})}),(function(){var e=d(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");var y=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!u&&l&&"values"!==y.name)try{s(y,"name",{value:"values"})}catch(e){}},69600:function(e,t,n){"use strict";var r=n(82109),i=n(1702),o=n(68361),a=n(45656),s=n(9341),c=i([].join),u=o!=Object,l=s("join",",");r({target:"Array",proto:!0,forced:u||!l},{join:function(e){return c(a(this),void 0===e?",":e)}})},21249:function(e,t,n){"use strict";var r=n(82109),i=n(42092).map;r({target:"Array",proto:!0,forced:!n(81194)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},47042:function(e,t,n){"use strict";var r=n(82109),i=n(17854),o=n(43157),a=n(4411),s=n(70111),c=n(51400),u=n(26244),l=n(45656),p=n(86135),d=n(5112),y=n(81194),f=n(50206),h=y("slice"),v=d("species"),g=i.Array,m=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(e,t){var n,r,i,d=l(this),y=u(d),h=c(e,y),b=c(void 0===t?y:t,y);if(o(d)&&(n=d.constructor,(a(n)&&(n===g||o(n.prototype))||s(n)&&null===(n=n[v]))&&(n=void 0),n===g||void 0===n))return f(d,h,b);for(r=new(void 0===n?g:n)(m(b-h,0)),i=0;h<b;h++,i++)h in d&&p(r,i,d[h]);return r.length=i,r}})},2707:function(e,t,n){"use strict";var r=n(82109),i=n(1702),o=n(19662),a=n(47908),s=n(26244),c=n(41340),u=n(47293),l=n(94362),p=n(9341),d=n(68886),y=n(30256),f=n(7392),h=n(98008),v=[],g=i(v.sort),m=i(v.push),b=u((function(){v.sort(void 0)})),T=u((function(){v.sort(null)})),k=p("sort"),S=!u((function(){if(f)return f<70;if(!(d&&d>3)){if(y)return!0;if(h)return h<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)v.push({k:t+r,v:n})}for(v.sort((function(e,t){return t.v-e.v})),r=0;r<v.length;r++)t=v[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));r({target:"Array",proto:!0,forced:b||!T||!k||!S},{sort:function(e){void 0!==e&&o(e);var t=a(this);if(S)return void 0===e?g(t):g(t,e);var n,r,i=[],u=s(t);for(r=0;r<u;r++)r in t&&m(i,t[r]);for(l(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:c(t)>c(n)?1:-1}}(e)),n=i.length,r=0;r<n;)t[r]=i[r++];for(;r<u;)delete t[r++];return t}})},40561:function(e,t,n){"use strict";var r=n(82109),i=n(17854),o=n(51400),a=n(19303),s=n(26244),c=n(47908),u=n(65417),l=n(86135),p=n(81194)("splice"),d=i.TypeError,y=Math.max,f=Math.min;r({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var n,r,i,p,h,v,g=c(this),m=s(g),b=o(e,m),T=arguments.length;if(0===T?n=r=0:1===T?(n=0,r=m-b):(n=T-2,r=f(y(a(t),0),m-b)),m+n-r>9007199254740991)throw d("Maximum allowed length exceeded");for(i=u(g,r),p=0;p<r;p++)(h=b+p)in g&&l(i,p,g[h]);if(i.length=r,n<r){for(p=b;p<m-r;p++)v=p+n,(h=p+r)in g?g[v]=g[h]:delete g[v];for(p=m;p>m-r+n;p--)delete g[p-1]}else if(n>r)for(p=m-r;p>b;p--)v=p+n-1,(h=p+r-1)in g?g[v]=g[h]:delete g[v];for(p=0;p<n;p++)g[p+b]=arguments[p+2];return g.length=m-r+n,i}})},68309:function(e,t,n){var r=n(19781),i=n(76530).EXISTS,o=n(1702),a=n(3070).f,s=Function.prototype,c=o(s.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=o(u.exec);r&&!i&&a(s,"name",{configurable:!0,get:function(){try{return l(u,c(this))[1]}catch(e){return""}}})},9653:function(e,t,n){"use strict";var r=n(19781),i=n(17854),o=n(1702),a=n(54705),s=n(31320),c=n(92597),u=n(79587),l=n(47976),p=n(52190),d=n(57593),y=n(47293),f=n(8006).f,h=n(31236).f,v=n(3070).f,g=n(50863),m=n(53111).trim,b=i.Number,T=b.prototype,k=i.TypeError,S=o("".slice),P=o("".charCodeAt),E=function(e){var t=d(e,"number");return"bigint"==typeof t?t:Z(t)},Z=function(e){var t,n,r,i,o,a,s,c,u=d(e,"number");if(p(u))throw k("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=m(u),43===(t=P(u,0))||45===t){if(88===(n=P(u,2))||120===n)return NaN}else if(48===t){switch(P(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=(o=S(u,2)).length,s=0;s<a;s++)if((c=P(o,s))<48||c>i)return NaN;return parseInt(o,r)}return+u};if(a("Number",!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var w,D=function(e){var t=arguments.length<1?0:b(E(e)),n=this;return l(T,n)&&y((function(){g(n)}))?u(Object(t),n,D):t},C=r?f(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),A=0;C.length>A;A++)c(b,w=C[A])&&!c(D,w)&&v(D,w,h(b,w));D.prototype=T,T.constructor=D,s(i,"Number",D)}},44048:function(e,t,n){n(82109)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},19601:function(e,t,n){var r=n(82109),i=n(21574);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},69720:function(e,t,n){var r=n(82109),i=n(44699).entries;r({target:"Object",stat:!0},{entries:function(e){return i(e)}})},38880:function(e,t,n){var r=n(82109),i=n(47293),o=n(45656),a=n(31236).f,s=n(19781),c=i((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||c,sham:!s},{getOwnPropertyDescriptor:function(e,t){return a(o(e),t)}})},49337:function(e,t,n){var r=n(82109),i=n(19781),o=n(53887),a=n(45656),s=n(31236),c=n(86135);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,n,r=a(e),i=s.f,u=o(r),l={},p=0;u.length>p;)void 0!==(n=i(r,t=u[p++]))&&c(l,t,n);return l}})},36210:function(e,t,n){var r=n(82109),i=n(47293),o=n(1156).f;r({target:"Object",stat:!0,forced:i((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:o})},47941:function(e,t,n){var r=n(82109),i=n(47908),o=n(81956);r({target:"Object",stat:!0,forced:n(47293)((function(){o(1)}))},{keys:function(e){return o(i(e))}})},41539:function(e,t,n){var r=n(51694),i=n(31320),o=n(90288);r||i(Object.prototype,"toString",o,{unsafe:!0})},26833:function(e,t,n){var r=n(82109),i=n(44699).values;r({target:"Object",stat:!0},{values:function(e){return i(e)}})},17727:function(e,t,n){"use strict";var r=n(82109),i=n(31913),o=n(13366),a=n(47293),s=n(35005),c=n(60614),u=n(36707),l=n(69478),p=n(31320);if(r({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=u(this,s("Promise")),n=c(e);return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}}),!i&&c(o)){var d=s("Promise").prototype.finally;o.prototype.finally!==d&&p(o.prototype,"finally",d,{unsafe:!0})}},88674:function(e,t,n){"use strict";var r,i,o,a,s=n(82109),c=n(31913),u=n(17854),l=n(35005),p=n(46916),d=n(13366),y=n(31320),f=n(12248),h=n(27674),v=n(58003),g=n(96340),m=n(19662),b=n(60614),T=n(70111),k=n(25787),S=n(42788),P=n(20408),E=n(17072),Z=n(36707),w=n(20261).set,D=n(95948),C=n(69478),A=n(842),R=n(78523),x=n(12534),O=n(18572),I=n(29909),M=n(54705),j=n(5112),L=n(7871),N=n(35268),B=n(7392),_=j("species"),F="Promise",U=I.getterFor(F),q=I.set,K=I.getterFor(F),V=d&&d.prototype,H=d,G=V,Q=u.TypeError,z=u.document,W=u.process,Y=R.f,J=Y,X=!!(z&&z.createEvent&&u.dispatchEvent),$=b(u.PromiseRejectionEvent),ee=!1,te=M(F,(function(){var e=S(H),t=e!==String(H);if(!t&&66===B)return!0;if(c&&!G.finally)return!0;if(B>=51&&/native code/.test(e))return!1;var n=new H((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[_]=r,!(ee=n.then((function(){}))instanceof r)||!t&&L&&!$})),ne=te||!E((function(e){H.all(e).catch((function(){}))})),re=function(e){var t;return!(!T(e)||!b(t=e.then))&&t},ie=function(e,t){var n,r,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(a||(2===t.rejection&&ue(t),t.rejection=1),!0===s?n=o:(l&&l.enter(),n=s(o),l&&(l.exit(),i=!0)),n===e.promise?u(Q("Promise-chain cycle")):(r=re(n))?p(r,n,c,u):c(n)):u(o)}catch(e){l&&!i&&l.exit(),u(e)}},oe=function(e,t){e.notified||(e.notified=!0,D((function(){for(var n,r=e.reactions;n=r.get();)ie(n,e);e.notified=!1,t&&!e.rejection&&se(e)})))},ae=function(e,t,n){var r,i;X?((r=z.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!$&&(i=u["on"+e])?i(r):"unhandledrejection"===e&&A("Unhandled promise rejection",n)},se=function(e){p(w,u,(function(){var t,n=e.facade,r=e.value;if(ce(e)&&(t=x((function(){N?W.emit("unhandledRejection",r,n):ae("unhandledrejection",n,r)})),e.rejection=N||ce(e)?2:1,t.error))throw t.value}))},ce=function(e){return 1!==e.rejection&&!e.parent},ue=function(e){p(w,u,(function(){var t=e.facade;N?W.emit("rejectionHandled",t):ae("rejectionhandled",t,e.value)}))},le=function(e,t,n){return function(r){e(t,r,n)}},pe=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,oe(e,!0))},de=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Q("Promise can't be resolved itself");var r=re(t);r?D((function(){var n={done:!1};try{p(r,t,le(de,n,e),le(pe,n,e))}catch(t){pe(n,t,e)}})):(e.value=t,e.state=1,oe(e,!1))}catch(t){pe({done:!1},t,e)}}};if(te&&(G=(H=function(e){k(this,G),m(e),p(r,this);var t=U(this);try{e(le(de,t),le(pe,t))}catch(e){pe(t,e)}}).prototype,(r=function(e){q(this,{type:F,done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=f(G,{then:function(e,t){var n=K(this),r=Y(Z(this,H));return n.parent=!0,r.ok=!b(e)||e,r.fail=b(t)&&t,r.domain=N?W.domain:void 0,0==n.state?n.reactions.add(r):D((function(){ie(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=U(e);this.promise=e,this.resolve=le(de,t),this.reject=le(pe,t)},R.f=Y=function(e){return e===H||e===o?new i(e):J(e)},!c&&b(d)&&V!==Object.prototype)){a=V.then,ee||(y(V,"then",(function(e,t){var n=this;return new H((function(e,t){p(a,n,e,t)})).then(e,t)}),{unsafe:!0}),y(V,"catch",G.catch,{unsafe:!0}));try{delete V.constructor}catch(e){}h&&h(V,G)}s({global:!0,wrap:!0,forced:te},{Promise:H}),v(H,F,!1,!0),g(F),o=l(F),s({target:F,stat:!0,forced:te},{reject:function(e){var t=Y(this);return p(t.reject,void 0,e),t.promise}}),s({target:F,stat:!0,forced:c||te},{resolve:function(e){return C(c&&this===o?H:this,e)}}),s({target:F,stat:!0,forced:ne},{all:function(e){var t=this,n=Y(t),r=n.resolve,i=n.reject,o=x((function(){var n=m(t.resolve),o=[],a=0,s=1;P(e,(function(e){var c=a++,u=!1;s++,p(n,t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=Y(t),r=n.reject,i=x((function(){var i=m(t.resolve);P(e,(function(e){p(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},36535:function(e,t,n){var r=n(82109),i=n(22104),o=n(19662),a=n(19670);r({target:"Reflect",stat:!0,forced:!n(47293)((function(){Reflect.apply((function(){}))}))},{apply:function(e,t,n){return i(o(e),t,a(n))}})},12419:function(e,t,n){var r=n(82109),i=n(35005),o=n(22104),a=n(27065),s=n(39483),c=n(19670),u=n(70111),l=n(70030),p=n(47293),d=i("Reflect","construct"),y=Object.prototype,f=[].push,h=p((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),v=!p((function(){d((function(){}))})),g=h||v;r({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(e,t){s(e),c(t);var n=arguments.length<3?e:s(arguments[2]);if(v&&!h)return d(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return o(f,r,t),new(o(a,e,r))}var i=n.prototype,p=l(u(i)?i:y),g=o(e,p,t);return u(g)?g:p}})},74819:function(e,t,n){var r=n(82109),i=n(46916),o=n(70111),a=n(19670),s=n(45032),c=n(31236),u=n(79518);r({target:"Reflect",stat:!0},{get:function e(t,n){var r,l,p=arguments.length<3?t:arguments[2];return a(t)===p?t[n]:(r=c.f(t,n))?s(r)?r.value:void 0===r.get?void 0:i(r.get,p):o(l=u(t))?e(l,n,p):void 0}})},83593:function(e,t,n){var r=n(82109),i=n(46916),o=n(19670),a=n(70111),s=n(45032),c=n(47293),u=n(3070),l=n(31236),p=n(79518),d=n(79114);r({target:"Reflect",stat:!0,forced:c((function(){var e=function(){},t=u.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}))},{set:function e(t,n,r){var c,y,f,h=arguments.length<4?t:arguments[3],v=l.f(o(t),n);if(!v){if(a(y=p(t)))return e(y,n,r,h);v=d(0)}if(s(v)){if(!1===v.writable||!a(h))return!1;if(c=l.f(h,n)){if(c.get||c.set||!1===c.writable)return!1;c.value=r,u.f(h,n,c)}else u.f(h,n,d(0,r))}else{if(void 0===(f=v.set))return!1;i(f,h,r)}return!0}})},24603:function(e,t,n){var r=n(19781),i=n(17854),o=n(1702),a=n(54705),s=n(79587),c=n(68880),u=n(3070).f,l=n(8006).f,p=n(47976),d=n(47850),y=n(41340),f=n(67066),h=n(52999),v=n(31320),g=n(47293),m=n(92597),b=n(29909).enforce,T=n(96340),k=n(5112),S=n(9441),P=n(38173),E=k("match"),Z=i.RegExp,w=Z.prototype,D=i.SyntaxError,C=o(f),A=o(w.exec),R=o("".charAt),x=o("".replace),O=o("".indexOf),I=o("".slice),M=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,j=/a/g,L=/a/g,N=new Z(j)!==j,B=h.MISSED_STICKY,_=h.UNSUPPORTED_Y,F=r&&(!N||B||S||P||g((function(){return L[E]=!1,Z(j)!=j||Z(L)==L||"/a/i"!=Z(j,"i")})));if(a("RegExp",F)){for(var U=function(e,t){var n,r,i,o,a,u,l=p(w,this),f=d(e),h=void 0===t,v=[],g=e;if(!l&&f&&h&&e.constructor===U)return e;if((f||p(w,e))&&(e=e.source,h&&(t="flags"in g?g.flags:C(g))),e=void 0===e?"":y(e),t=void 0===t?"":y(t),g=e,S&&"dotAll"in j&&(r=!!t&&O(t,"s")>-1)&&(t=x(t,/s/g,"")),n=t,B&&"sticky"in j&&(i=!!t&&O(t,"y")>-1)&&_&&(t=x(t,/y/g,"")),P&&(e=(o=function(e){for(var t,n=e.length,r=0,i="",o=[],a={},s=!1,c=!1,u=0,l="";r<=n;r++){if("\\"===(t=R(e,r)))t+=R(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:A(M,I(e,r+1))&&(r+=2,c=!0),i+=t,u++;continue;case">"===t&&c:if(""===l||m(a,l))throw new D("Invalid capture group name");a[l]=!0,o[o.length]=[l,u],c=!1,l="";continue}c?l+=t:i+=t}return[i,o]}(e))[0],v=o[1]),a=s(Z(e,t),l?this:w,U),(r||i||v.length)&&(u=b(a),r&&(u.dotAll=!0,u.raw=U(function(e){for(var t,n=e.length,r=0,i="",o=!1;r<=n;r++)"\\"!==(t=R(e,r))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+R(e,++r);return i}(e),n)),i&&(u.sticky=!0),v.length&&(u.groups=v)),e!==g)try{c(a,"source",""===g?"(?:)":g)}catch(e){}return a},q=function(e){e in U||u(U,e,{configurable:!0,get:function(){return Z[e]},set:function(t){Z[e]=t}})},K=l(Z),V=0;K.length>V;)q(K[V++]);w.constructor=U,U.prototype=w,v(i,"RegExp",U)}T("RegExp")},74916:function(e,t,n){"use strict";var r=n(82109),i=n(22261);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},39714:function(e,t,n){"use strict";var r=n(1702),i=n(76530).PROPER,o=n(31320),a=n(19670),s=n(47976),c=n(41340),u=n(47293),l=n(67066),p=RegExp.prototype,d=p.toString,y=r(l),f=u((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),h=i&&"toString"!=d.name;(f||h)&&o(RegExp.prototype,"toString",(function(){var e=a(this),t=c(e.source),n=e.flags;return"/"+t+"/"+c(void 0===n&&s(p,e)&&!("flags"in p)?y(e):n)}),{unsafe:!0})},32023:function(e,t,n){"use strict";var r=n(82109),i=n(1702),o=n(3929),a=n(84488),s=n(41340),c=n(84964),u=i("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(s(a(this)),s(o(e)),arguments.length>1?arguments[1]:void 0)}})},78783:function(e,t,n){"use strict";var r=n(28710).charAt,i=n(41340),o=n(29909),a=n(70654),s=o.set,c=o.getterFor("String Iterator");a(String,"String",(function(e){s(this,{type:"String Iterator",string:i(e),index:0})}),(function(){var e,t=c(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},29254:function(e,t,n){"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("link")},{link:function(e){return i(this,"a","href",e)}})},4723:function(e,t,n){"use strict";var r=n(46916),i=n(27007),o=n(19670),a=n(17466),s=n(41340),c=n(84488),u=n(58173),l=n(31530),p=n(97651);i("match",(function(e,t,n){return[function(t){var n=c(this),i=null==t?void 0:u(t,e);return i?r(i,t,n):new RegExp(t)[e](s(n))},function(e){var r=o(this),i=s(e),c=n(t,r,i);if(c.done)return c.value;if(!r.global)return p(r,i);var u=r.unicode;r.lastIndex=0;for(var d,y=[],f=0;null!==(d=p(r,i));){var h=s(d[0]);y[f]=h,""===h&&(r.lastIndex=l(i,a(r.lastIndex),u)),f++}return 0===f?null:y}]}))},15306:function(e,t,n){"use strict";var r=n(22104),i=n(46916),o=n(1702),a=n(27007),s=n(47293),c=n(19670),u=n(60614),l=n(19303),p=n(17466),d=n(41340),y=n(84488),f=n(31530),h=n(58173),v=n(10647),g=n(97651),m=n(5112)("replace"),b=Math.max,T=Math.min,k=o([].concat),S=o([].push),P=o("".indexOf),E=o("".slice),Z="$0"==="a".replace(/./,"$0"),w=!!/./[m]&&""===/./[m]("a","$0");a("replace",(function(e,t,n){var o=w?"$":"$0";return[function(e,n){var r=y(this),o=null==e?void 0:h(e,m);return o?i(o,e,r,n):i(t,d(r),e,n)},function(e,i){var a=c(this),s=d(e);if("string"==typeof i&&-1===P(i,o)&&-1===P(i,"$<")){var y=n(t,a,s,i);if(y.done)return y.value}var h=u(i);h||(i=d(i));var m=a.global;if(m){var Z=a.unicode;a.lastIndex=0}for(var w=[];;){var D=g(a,s);if(null===D)break;if(S(w,D),!m)break;""===d(D[0])&&(a.lastIndex=f(s,p(a.lastIndex),Z))}for(var C,A="",R=0,x=0;x<w.length;x++){for(var O=d((D=w[x])[0]),I=b(T(l(D.index),s.length),0),M=[],j=1;j<D.length;j++)S(M,void 0===(C=D[j])?C:String(C));var L=D.groups;if(h){var N=k([O],M,I,s);void 0!==L&&S(N,L);var B=d(r(i,void 0,N))}else B=v(O,s,I,M,L,i);I>=R&&(A+=E(s,R,I)+B,R=I+O.length)}return A+E(s,R)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!Z||w)},64765:function(e,t,n){"use strict";var r=n(46916),i=n(27007),o=n(19670),a=n(84488),s=n(81150),c=n(41340),u=n(58173),l=n(97651);i("search",(function(e,t,n){return[function(t){var n=a(this),i=null==t?void 0:u(t,e);return i?r(i,t,n):new RegExp(t)[e](c(n))},function(e){var r=o(this),i=c(e),a=n(t,r,i);if(a.done)return a.value;var u=r.lastIndex;s(u,0)||(r.lastIndex=0);var p=l(r,i);return s(r.lastIndex,u)||(r.lastIndex=u),null===p?-1:p.index}]}))},23123:function(e,t,n){"use strict";var r=n(22104),i=n(46916),o=n(1702),a=n(27007),s=n(47850),c=n(19670),u=n(84488),l=n(36707),p=n(31530),d=n(17466),y=n(41340),f=n(58173),h=n(41589),v=n(97651),g=n(22261),m=n(52999),b=n(47293),T=m.UNSUPPORTED_Y,k=Math.min,S=[].push,P=o(/./.exec),E=o(S),Z=o("".slice);a("split",(function(e,t,n){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var o=y(u(this)),a=void 0===n?4294967295:n>>>0;if(0===a)return[];if(void 0===e)return[o];if(!s(e))return i(t,o,e,a);for(var c,l,p,d=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,m=new RegExp(e.source,f+"g");(c=i(g,m,o))&&!((l=m.lastIndex)>v&&(E(d,Z(o,v,c.index)),c.length>1&&c.index<o.length&&r(S,d,h(c,1)),p=c[0].length,v=l,d.length>=a));)m.lastIndex===c.index&&m.lastIndex++;return v===o.length?!p&&P(m,"")||E(d,""):E(d,Z(o,v)),d.length>a?h(d,0,a):d}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:i(t,this,e,n)}:t,[function(t,n){var r=u(this),a=null==t?void 0:f(t,e);return a?i(a,t,r,n):i(o,y(r),t,n)},function(e,r){var i=c(this),a=y(e),s=n(o,i,a,r,o!==t);if(s.done)return s.value;var u=l(i,RegExp),f=i.unicode,h=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(T?"g":"y"),g=new u(T?"^(?:"+i.source+")":i,h),m=void 0===r?4294967295:r>>>0;if(0===m)return[];if(0===a.length)return null===v(g,a)?[a]:[];for(var b=0,S=0,P=[];S<a.length;){g.lastIndex=T?0:S;var w,D=v(g,T?Z(a,S):a);if(null===D||(w=k(d(g.lastIndex+(T?S:0)),a.length))===b)S=p(a,S,f);else{if(E(P,Z(a,b,S)),P.length===m)return P;for(var C=1;C<=D.length-1;C++)if(E(P,D[C]),P.length===m)return P;S=b=w}}return E(P,Z(a,b)),P}]}),!!b((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),T)},23157:function(e,t,n){"use strict";var r,i=n(82109),o=n(1702),a=n(31236).f,s=n(17466),c=n(41340),u=n(3929),l=n(84488),p=n(84964),d=n(31913),y=o("".startsWith),f=o("".slice),h=Math.min,v=p("startsWith");i({target:"String",proto:!0,forced:!(!d&&!v&&(r=a(String.prototype,"startsWith"),r&&!r.writable)||v)},{startsWith:function(e){var t=c(l(this));u(e);var n=s(h(arguments.length>1?arguments[1]:void 0,t.length)),r=c(e);return y?y(t,r,n):f(t,n,n+r.length)===r}})},73210:function(e,t,n){"use strict";var r=n(82109),i=n(53111).trim;r({target:"String",proto:!0,forced:n(76091)("trim")},{trim:function(){return i(this)}})},41817:function(e,t,n){"use strict";var r=n(82109),i=n(19781),o=n(17854),a=n(1702),s=n(92597),c=n(60614),u=n(47976),l=n(41340),p=n(3070).f,d=n(99920),y=o.Symbol,f=y&&y.prototype;if(i&&c(y)&&(!("description"in f)||void 0!==y().description)){var h={},v=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),t=u(f,this)?new y(e):void 0===e?y():y(e);return""===e&&(h[t]=!0),t};d(v,y),v.prototype=f,f.constructor=v;var g="Symbol(test)"==String(y("test")),m=a(f.toString),b=a(f.valueOf),T=/^Symbol\((.*)\)[^)]+$/,k=a("".replace),S=a("".slice);p(f,"description",{configurable:!0,get:function(){var e=b(this),t=m(e);if(s(h,e))return"";var n=g?S(t,7,-1):k(t,T,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:v})}},32165:function(e,t,n){n(97235)("iterator")},82526:function(e,t,n){"use strict";var r=n(82109),i=n(17854),o=n(35005),a=n(22104),s=n(46916),c=n(1702),u=n(31913),l=n(19781),p=n(30133),d=n(47293),y=n(92597),f=n(43157),h=n(60614),v=n(70111),g=n(47976),m=n(52190),b=n(19670),T=n(47908),k=n(45656),S=n(34948),P=n(41340),E=n(79114),Z=n(70030),w=n(81956),D=n(8006),C=n(1156),A=n(25181),R=n(31236),x=n(3070),O=n(36048),I=n(55296),M=n(50206),j=n(31320),L=n(72309),N=n(6200),B=n(3501),_=n(69711),F=n(5112),U=n(6061),q=n(97235),K=n(58003),V=n(29909),H=n(42092).forEach,G=N("hidden"),Q=F("toPrimitive"),z=V.set,W=V.getterFor("Symbol"),Y=Object.prototype,J=i.Symbol,X=J&&J.prototype,$=i.TypeError,ee=i.QObject,te=o("JSON","stringify"),ne=R.f,re=x.f,ie=C.f,oe=I.f,ae=c([].push),se=L("symbols"),ce=L("op-symbols"),ue=L("string-to-symbol-registry"),le=L("symbol-to-string-registry"),pe=L("wks"),de=!ee||!ee.prototype||!ee.prototype.findChild,ye=l&&d((function(){return 7!=Z(re({},"a",{get:function(){return re(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=ne(Y,t);r&&delete Y[t],re(e,t,n),r&&e!==Y&&re(Y,t,r)}:re,fe=function(e,t){var n=se[e]=Z(X);return z(n,{type:"Symbol",tag:e,description:t}),l||(n.description=t),n},he=function(e,t,n){e===Y&&he(ce,t,n),b(e);var r=S(t);return b(n),y(se,r)?(n.enumerable?(y(e,G)&&e[G][r]&&(e[G][r]=!1),n=Z(n,{enumerable:E(0,!1)})):(y(e,G)||re(e,G,E(1,{})),e[G][r]=!0),ye(e,r,n)):re(e,r,n)},ve=function(e,t){b(e);var n=k(t),r=w(n).concat(Te(n));return H(r,(function(t){l&&!s(ge,n,t)||he(e,t,n[t])})),e},ge=function(e){var t=S(e),n=s(oe,this,t);return!(this===Y&&y(se,t)&&!y(ce,t))&&(!(n||!y(this,t)||!y(se,t)||y(this,G)&&this[G][t])||n)},me=function(e,t){var n=k(e),r=S(t);if(n!==Y||!y(se,r)||y(ce,r)){var i=ne(n,r);return!i||!y(se,r)||y(n,G)&&n[G][r]||(i.enumerable=!0),i}},be=function(e){var t=ie(k(e)),n=[];return H(t,(function(e){y(se,e)||y(B,e)||ae(n,e)})),n},Te=function(e){var t=e===Y,n=ie(t?ce:k(e)),r=[];return H(n,(function(e){!y(se,e)||t&&!y(Y,e)||ae(r,se[e])})),r};if(p||(j(X=(J=function(){if(g(X,this))throw $("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?P(arguments[0]):void 0,t=_(e),n=function(e){this===Y&&s(n,ce,e),y(this,G)&&y(this[G],t)&&(this[G][t]=!1),ye(this,t,E(1,e))};return l&&de&&ye(Y,t,{configurable:!0,set:n}),fe(t,e)}).prototype,"toString",(function(){return W(this).tag})),j(J,"withoutSetter",(function(e){return fe(_(e),e)})),I.f=ge,x.f=he,O.f=ve,R.f=me,D.f=C.f=be,A.f=Te,U.f=function(e){return fe(F(e),e)},l&&(re(X,"description",{configurable:!0,get:function(){return W(this).description}}),u||j(Y,"propertyIsEnumerable",ge,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!p,sham:!p},{Symbol:J}),H(w(pe),(function(e){q(e)})),r({target:"Symbol",stat:!0,forced:!p},{for:function(e){var t=P(e);if(y(ue,t))return ue[t];var n=J(t);return ue[t]=n,le[n]=t,n},keyFor:function(e){if(!m(e))throw $(e+" is not a symbol");if(y(le,e))return le[e]},useSetter:function(){de=!0},useSimple:function(){de=!1}}),r({target:"Object",stat:!0,forced:!p,sham:!l},{create:function(e,t){return void 0===t?Z(e):ve(Z(e),t)},defineProperty:he,defineProperties:ve,getOwnPropertyDescriptor:me}),r({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:be,getOwnPropertySymbols:Te}),r({target:"Object",stat:!0,forced:d((function(){A.f(1)}))},{getOwnPropertySymbols:function(e){return A.f(T(e))}}),te&&r({target:"JSON",stat:!0,forced:!p||d((function(){var e=J();return"[null]"!=te([e])||"{}"!=te({a:e})||"{}"!=te(Object(e))}))},{stringify:function(e,t,n){var r=M(arguments),i=t;if((v(t)||void 0!==e)&&!m(e))return f(t)||(t=function(e,t){if(h(i)&&(t=s(i,this,e,t)),!m(t))return t}),r[1]=t,a(te,null,r)}}),!X[Q]){var ke=X.valueOf;j(X,Q,(function(e){return s(ke,this)}))}K(J,"Symbol"),B[G]=!0},92990:function(e,t,n){"use strict";var r=n(1702),i=n(90260),o=r(n(1048)),a=i.aTypedArray;(0,i.exportTypedArrayMethod)("copyWithin",(function(e,t){return o(a(this),e,t,arguments.length>2?arguments[2]:void 0)}))},18927:function(e,t,n){"use strict";var r=n(90260),i=n(42092).every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},33105:function(e,t,n){"use strict";var r=n(90260),i=n(46916),o=n(21285),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){var t=arguments.length;return i(o,a(this),e,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}))},35035:function(e,t,n){"use strict";var r=n(90260),i=n(42092).filter,o=n(43074),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(e){var t=i(a(this),e,arguments.length>1?arguments[1]:void 0);return o(this,t)}))},7174:function(e,t,n){"use strict";var r=n(90260),i=n(42092).findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},74345:function(e,t,n){"use strict";var r=n(90260),i=n(42092).find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},32846:function(e,t,n){"use strict";var r=n(90260),i=n(42092).forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},44731:function(e,t,n){"use strict";var r=n(90260),i=n(41318).includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},77209:function(e,t,n){"use strict";var r=n(90260),i=n(41318).indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},96319:function(e,t,n){"use strict";var r=n(17854),i=n(47293),o=n(1702),a=n(90260),s=n(66992),c=n(5112)("iterator"),u=r.Uint8Array,l=o(s.values),p=o(s.keys),d=o(s.entries),y=a.aTypedArray,f=a.exportTypedArrayMethod,h=u&&u.prototype,v=!i((function(){h[c].call([1])})),g=!!h&&h.values&&h[c]===h.values&&"values"===h.values.name,m=function(){return l(y(this))};f("entries",(function(){return d(y(this))}),v),f("keys",(function(){return p(y(this))}),v),f("values",m,v||!g,{name:"values"}),f(c,m,v||!g,{name:"values"})},58867:function(e,t,n){"use strict";var r=n(90260),i=n(1702),o=r.aTypedArray,a=r.exportTypedArrayMethod,s=i([].join);a("join",(function(e){return s(o(this),e)}))},37789:function(e,t,n){"use strict";var r=n(90260),i=n(22104),o=n(86583),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return i(o,a(this),t>1?[e,arguments[1]]:[e])}))},33739:function(e,t,n){"use strict";var r=n(90260),i=n(42092).map,o=n(66304),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("map",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(o(e))(t)}))}))},14483:function(e,t,n){"use strict";var r=n(90260),i=n(53671).right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return i(o(this),e,t,t>1?arguments[1]:void 0)}))},29368:function(e,t,n){"use strict";var r=n(90260),i=n(53671).left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return i(o(this),e,t,t>1?arguments[1]:void 0)}))},12056:function(e,t,n){"use strict";var r=n(90260),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){for(var e,t=i(this).length,n=a(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}))},3462:function(e,t,n){"use strict";var r=n(17854),i=n(46916),o=n(90260),a=n(26244),s=n(84590),c=n(47908),u=n(47293),l=r.RangeError,p=r.Int8Array,d=p&&p.prototype,y=d&&d.set,f=o.aTypedArray,h=o.exportTypedArrayMethod,v=!u((function(){var e=new Uint8ClampedArray(2);return i(y,e,{length:1,0:3},1),3!==e[1]})),g=v&&o.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var e=new p(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));h("set",(function(e){f(this);var t=s(arguments.length>1?arguments[1]:void 0,1),n=c(e);if(v)return i(y,this,n,t);var r=this.length,o=a(n),u=0;if(o+t>r)throw l("Wrong length");for(;u<o;)this[t+u]=n[u++]}),!v||g)},30678:function(e,t,n){"use strict";var r=n(90260),i=n(66304),o=n(47293),a=n(50206),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("slice",(function(e,t){for(var n=a(s(this),e,t),r=i(this),o=0,c=n.length,u=new r(c);c>o;)u[o]=n[o++];return u}),o((function(){new Int8Array(1).slice()})))},27462:function(e,t,n){"use strict";var r=n(90260),i=n(42092).some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},33824:function(e,t,n){"use strict";var r=n(17854),i=n(1702),o=n(47293),a=n(19662),s=n(94362),c=n(90260),u=n(68886),l=n(30256),p=n(7392),d=n(98008),y=r.Array,f=c.aTypedArray,h=c.exportTypedArrayMethod,v=r.Uint16Array,g=v&&i(v.prototype.sort),m=!(!g||o((function(){g(new v(2),null)}))&&o((function(){g(new v(2),{})}))),b=!!g&&!o((function(){if(p)return p<74;if(u)return u<67;if(l)return!0;if(d)return d<602;var e,t,n=new v(516),r=y(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(g(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));h("sort",(function(e){return void 0!==e&&a(e),b?g(this,e):s(f(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!b||m)},55021:function(e,t,n){"use strict";var r=n(90260),i=n(17466),o=n(51400),a=n(66304),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=s(this),r=n.length,c=o(e,r);return new(a(n))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,i((void 0===t?r:o(t,r))-c))}))},12974:function(e,t,n){"use strict";var r=n(17854),i=n(22104),o=n(90260),a=n(47293),s=n(50206),c=r.Int8Array,u=o.aTypedArray,l=o.exportTypedArrayMethod,p=[].toLocaleString,d=!!c&&a((function(){p.call(new c(1))}));l("toLocaleString",(function(){return i(p,d?s(u(this)):u(this),s(arguments))}),a((function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()}))||!a((function(){c.prototype.toLocaleString.call([1,2])})))},15016:function(e,t,n){"use strict";var r=n(90260).exportTypedArrayMethod,i=n(47293),o=n(17854),a=n(1702),s=o.Uint8Array,c=s&&s.prototype||{},u=[].toString,l=a([].join);i((function(){u.call({})}))&&(u=function(){return l(this)});var p=c.toString!=u;r("toString",u,p)},82472:function(e,t,n){n(19843)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},38478:function(e,t,n){"use strict";n(77710)("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(29320))},43561:function(e,t,n){"use strict";n(82109)({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:n(31501)})},32049:function(e,t,n){"use strict";n(82109)({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:n(34092)})},54747:function(e,t,n){var r=n(17854),i=n(48324),o=n(98509),a=n(18533),s=n(68880),c=function(e){if(e&&e.forEach!==a)try{s(e,"forEach",a)}catch(t){e.forEach=a}};for(var u in i)i[u]&&c(r[u]&&r[u].prototype);c(o)},33948:function(e,t,n){var r=n(17854),i=n(48324),o=n(98509),a=n(66992),s=n(68880),c=n(5112),u=c("iterator"),l=c("toStringTag"),p=a.values,d=function(e,t){if(e){if(e[u]!==p)try{s(e,u,p)}catch(t){e[u]=p}if(e[l]||s(e,l,t),i[t])for(var n in a)if(e[n]!==a[n])try{s(e,n,a[n])}catch(t){e[n]=a[n]}}};for(var y in i)d(r[y]&&r[y].prototype,y);d(o,"DOMTokenList")},41637:function(e,t,n){"use strict";n(66992);var r=n(82109),i=n(17854),o=n(35005),a=n(46916),s=n(1702),c=n(590),u=n(31320),l=n(12248),p=n(58003),d=n(24994),y=n(29909),f=n(25787),h=n(60614),v=n(92597),g=n(49974),m=n(70648),b=n(19670),T=n(70111),k=n(41340),S=n(70030),P=n(79114),E=n(18554),Z=n(71246),w=n(48053),D=n(5112),C=n(94362),A=D("iterator"),R=y.set,x=y.getterFor("URLSearchParams"),O=y.getterFor("URLSearchParamsIterator"),I=o("fetch"),M=o("Request"),j=o("Headers"),L=M&&M.prototype,N=j&&j.prototype,B=i.RegExp,_=i.TypeError,F=i.decodeURIComponent,U=i.encodeURIComponent,q=s("".charAt),K=s([].join),V=s([].push),H=s("".replace),G=s([].shift),Q=s([].splice),z=s("".split),W=s("".slice),Y=/\+/g,J=Array(4),X=function(e){return J[e-1]||(J[e-1]=B("((?:%[\\da-f]{2}){"+e+"})","gi"))},$=function(e){try{return F(e)}catch(t){return e}},ee=function(e){var t=H(e,Y," "),n=4;try{return F(t)}catch(e){for(;n;)t=H(t,X(n--),$);return t}},te=/[!'()~]|%20/g,ne={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},re=function(e){return ne[e]},ie=function(e){return H(U(e),te,re)},oe=d((function(e,t){R(this,{type:"URLSearchParamsIterator",iterator:E(x(e).entries),kind:t})}),"Iterator",(function(){var e=O(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),ae=function(e){this.entries=[],this.url=null,void 0!==e&&(T(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===q(e,0)?W(e,1):e:k(e)))};ae.prototype={type:"URLSearchParams",bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,s,c,u=Z(e);if(u)for(n=(t=E(e,u)).next;!(r=a(n,t)).done;){if(o=(i=E(b(r.value))).next,(s=a(o,i)).done||(c=a(o,i)).done||!a(o,i).done)throw _("Expected sequence with length 2");V(this.entries,{key:k(s.value),value:k(c.value)})}else for(var l in e)v(e,l)&&V(this.entries,{key:l,value:k(e[l])})},parseQuery:function(e){if(e)for(var t,n,r=z(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=z(t,"="),V(this.entries,{key:ee(G(n)),value:ee(K(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],V(n,ie(e.key)+"="+ie(e.value));return K(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var se=function(){f(this,ce);var e=arguments.length>0?arguments[0]:void 0;R(this,new ae(e))},ce=se.prototype;if(l(ce,{append:function(e,t){w(arguments.length,2);var n=x(this);V(n.entries,{key:k(e),value:k(t)}),n.updateURL()},delete:function(e){w(arguments.length,1);for(var t=x(this),n=t.entries,r=k(e),i=0;i<n.length;)n[i].key===r?Q(n,i,1):i++;t.updateURL()},get:function(e){w(arguments.length,1);for(var t=x(this).entries,n=k(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){w(arguments.length,1);for(var t=x(this).entries,n=k(e),r=[],i=0;i<t.length;i++)t[i].key===n&&V(r,t[i].value);return r},has:function(e){w(arguments.length,1);for(var t=x(this).entries,n=k(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){w(arguments.length,1);for(var n,r=x(this),i=r.entries,o=!1,a=k(e),s=k(t),c=0;c<i.length;c++)(n=i[c]).key===a&&(o?Q(i,c--,1):(o=!0,n.value=s));o||V(i,{key:a,value:s}),r.updateURL()},sort:function(){var e=x(this);C(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=x(this).entries,r=g(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new oe(this,"keys")},values:function(){return new oe(this,"values")},entries:function(){return new oe(this,"entries")}},{enumerable:!0}),u(ce,A,ce.entries,{name:"entries"}),u(ce,"toString",(function(){return x(this).serialize()}),{enumerable:!0}),p(se,"URLSearchParams"),r({global:!0,forced:!c},{URLSearchParams:se}),!c&&h(j)){var ue=s(N.has),le=s(N.set),pe=function(e){if(T(e)){var t,n=e.body;if("URLSearchParams"===m(n))return t=e.headers?new j(e.headers):new j,ue(t,"content-type")||le(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),S(e,{body:P(0,k(n)),headers:P(0,t)})}return e};if(h(I)&&r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return I(e,arguments.length>1?pe(arguments[1]):{})}}),h(M)){var de=function(e){return f(this,L),new M(e,arguments.length>1?pe(arguments[1]):{})};L.constructor=de,de.prototype=L,r({global:!0,forced:!0},{Request:de})}}e.exports={URLSearchParams:se,getState:x}},44020:function(e){"use strict";var t=new RegExp("%[a-f0-9]{2}","gi"),n=new RegExp("(%[a-f0-9]{2})+","gi");function r(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],r(n),r(i))}function i(e){try{return decodeURIComponent(e)}catch(o){for(var n=e.match(t),i=1;i<n.length;i++)n=(e=r(n,i).join("")).match(t);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},r=n.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var o=i(r[0]);o!==r[0]&&(t[r[0]]=o)}r=n.exec(e)}t["%C2"]="";for(var a=Object.keys(t),s=0;s<a.length;s++){var c=a[s];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},17187:function(e){"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}h(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&h(e,"error",t,n)}(e,i,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var i,o,a,u;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):f(i,i.length)}function y(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function h(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=f(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,p(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,p(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):y.call(e,t)},o.prototype.listenerCount=y,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},27418:function(e){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,c=i(e),u=1;u<arguments.length;u++){for(var l in a=Object(arguments[u]))n.call(a,l)&&(c[l]=a[l]);if(t){s=t(a);for(var p=0;p<s.length;p++)r.call(a,s[p])&&(c[s[p]]=a[s[p]])}}return c}},17563:function(e,t,n){"use strict";var r=n(70610),i=n(27418),o=n(44020);function a(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=i({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),i=t.shift(),a=t.length>0?t.join("="):void 0;a=void 0===a?null:o(a),n(o(i),a,r)})),Object.keys(r).sort().reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(n):e[t]=n,e}),Object.create(null))):r},t.stringify=function(e,t){var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[a(t,e),"[",r,"]"].join(""):[a(t,e),"[",a(r,e),"]=",a(n,e)].join("")};case"bracket":return function(t,n){return null===n?a(t,e):[a(t,e),"[]=",a(n,e)].join("")};default:return function(t,n){return null===n?a(t,e):[a(t,e),"=",a(n,e)].join("")}}}(t=i({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(r){var i=e[r];if(void 0===i)return"";if(null===i)return a(r,t);if(Array.isArray(i)){var o=[];return i.slice().forEach((function(e){void 0!==e&&o.push(n(r,e,o.length))})),o.join("&")}return a(r,t)+"="+a(i,t)})).filter((function(e){return e.length>0})).join("&"):""}},35666:function(e){var t=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function p(){}function d(){}function y(){}var f={};s(f,i,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(E([])));v&&v!==t&&n.call(v,i)&&(f=v);var g=y.prototype=p.prototype=Object.create(f);function m(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var r;this._invoke=function(i,o){function a(){return new t((function(r,a){!function r(i,o,a,s){var c=u(e[i],e,o);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function T(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:Z}}function Z(){return{value:void 0,done:!0}}return d.prototype=y,s(g,"constructor",y),s(y,"constructor",d),d.displayName=s(y,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},70610:function(e){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},53229:function(e,t,n){"use strict";function r(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,{Z:function(){return r}})},30907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},97326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},15861:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return i}})},15671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},43144:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return i}})},4942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},2291:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(61120);function i(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r.Z)(e)););return e}function o(){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=i(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}},61120:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,{Z:function(){return r}})},60136:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(89611);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},55786:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{Z:function(){return r}})},82963:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(71002),i=n(97326);function o(e,t){if(t&&("object"===(0,r.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},89611:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,{Z:function(){return r}})},54546:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(40181);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},42138:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(30907),i=n(40181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},71002:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{Z:function(){return r}})},40181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(30907);function i(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return function(){"use strict";n.r(r),n.d(r,{default:function(){return wu}});var e,t=n(79457),i=n(42033),o=n(92727),a=n(65533),s=n(55809),c=n(37111),u={Account:i.Z,AccountGrant:o.Z,Identity:a.Z,UserProfile:s.Z,CreateAccountResult:c.Z};!function(e){e.female="female",e.male="male",e.unspecified="unspecified"}(e||(e={}));var l={Gender:e},p=n(18788),d=n(75745),y={pluginName:"Account",entry:l,service:u,createApi:function(e){var n=e.sdkSession,r=e.logger,i=e.clients,o=i.orchestrationClient,a=i.httpClient,s=i.subscriptionClient;n.accountApi=new t.Z({accountClient:new p.Z({config:n.config.services.account,logger:r,httpClient:a,orchestrationClient:o}),tokenManager:n.managers.tokenManager,subscriptionClient:s,logger:r})},applyConfig:function(e,t){var n,r,i,o;e.account=new d.Z({baseUrl:null==t||null===(n=t.account)||void 0===n||null===(r=n.client)||void 0===r?void 0:r.baseUrl,endpoints:e.processEndpoints(null==t||null===(i=t.account)||void 0===i||null===(o=i.client)||void 0===o?void 0:o.endpoints)})}},f=n(90262),h=n(51431),v=n(48900),g={pluginName:"Advertising",entry:{AdvertisingIdProvider:f.Z,LimitAdTrackingEnabled:h.Z,PrivacyOptOut:v.Z}},m=n(19612),b={BrowserInfoProvider:m.Z},T=n(31658),k={BrowserInfo:n(40815).Z,OrderStatus:T.OrderStatus,PaymentCardType:T.PaymentCardType,PaymentMethodType:T.PaymentMethodType,PaymentType:T.PaymentType,UpdateOrderType:T.UpdateOrderType},S=n(74023),P=n(35659),E=n(75621),Z=n(7126),w=n(96522),D=n(91564),C=n(15399),A=n(93776),R=n(66263),x=n(49915),O=n(30253),I={pluginName:"Commerce",entry:b,service:k,createApi:function(e){var t=e.sdkSession,n=e.logger,r=e.clients,i=t.accessTokenProvider,o=t.environmentConfiguration,a=t.browserInfoProvider,s=void 0===a?new m.Z({logger:n}):a,c=O.Z.parse(t.config.services.commerce.extras),u=new S.Z({config:t.config.services.commerce,logger:n,httpClient:r.httpClient,environmentConfiguration:o,browserInfoProvider:s});t.commerceApi=new P.Z({commerceClient:u,accessTokenProvider:i,configExtras:c,logger:n}),t.commerce={comcastApi:new E.Z({commerceClient:u,accessTokenProvider:i,logger:n}),iDealApi:new Z.Z({commerceClient:u,accessTokenProvider:i,logger:n}),klarnaApi:new w.Z({commerceClient:u,accessTokenProvider:i,logger:n}),mercadoApi:new D.Z({commerceClient:u,accessTokenProvider:i,logger:n}),paymentCardApi:new C.Z({commerceClient:u,accessTokenProvider:i,logger:n}),payPalApi:new A.Z({commerceClient:u,accessTokenProvider:i,logger:n})}},applyConfig:function(e,t){var n,r,i,o,a,s,c,u,l;e.commerce=new R.Z({baseUrl:t.commerce.client.baseUrl,endpoints:e.processEndpoints(t.commerce.client.endpoints),extras:new x.Z({clientId:null==t||null===(n=t.commerce)||void 0===n||null===(r=n.client)||void 0===r||null===(i=r.extras)||void 0===i?void 0:i.clientId,namespaceId:null==t||null===(o=t.commerce)||void 0===o||null===(a=o.client)||void 0===a||null===(s=a.extras)||void 0===s?void 0:s.namespaceId,createPaymentMethodRegionalEndpoints:null==t||null===(c=t.commerce)||void 0===c||null===(u=c.client)||void 0===u||null===(l=u.extras)||void 0===l?void 0:l.createPaymentMethodRegionalEndpoints})})}},M=n(86083),j=(n(41539),n(12419),n(15671)),L=n(43144),N=n(97326),B=n(60136),_=n(82963),F=n(61120),U=(n(74916),n(15306),n(67682)),q=n(17563),K=n(81763),V=n(82886),H=n(29466);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var Q=function(e){(0,B.Z)(n,e);var t=G(n);function n(e,r){var i;(0,j.Z)(this,n),i=t.call(this);var o={queryId:U.Types.nonEmptyString,variables:U.Types.object().optional};return(0,U.typecheck)((0,N.Z)(i),o,arguments),i.queryId=e,i.variables=r||{},i}return(0,L.Z)(n,[{key:"createQueryUrl",value:function(e,t){var n={url:U.Types.nonEmptyString,method:U.Types.in(K.Z)};(0,U.typecheck)(this,n,arguments);var r=this.queryId,i=this.variables,o=e.replace(/\{queryId\}/,r);if(t===K.Z.GET&&U.Check.nonEmptyObject(i)){var a={variables:JSON.stringify(i)},s=q.stringify(a);o=(0,H.Z)(o,s)}return o}},{key:"createPostContent",value:function(){var e=this.queryId,t=this.variables;return JSON.stringify({id:e,variables:t})}},{key:"toString",value:function(){return"SDK.Content.GraphQlPersistedQuery"}}]),n}(V.Z),z=n(10917),W=n(39507),Y={SearchQuery:n(97264).Z},J={GraphQlQuery:M.Z,GraphQlPersistedQuery:Q,ContentQuery:z.Z,SearchOverrides:W.Z,Search:Y},X=n(54546),$=(n(54747),n(69720),n(4723),n(69600),n(5301));function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var te,ne,re,ie,oe,ae,se,ce,ue,le,pe,de,ye,fe,he=function(e){(0,B.Z)(n,e);var t=ee(n);function n(e){var r;(0,j.Z)(this,n),r=t.call(this);var i={variables:U.Types.object()};return(0,U.typecheck)((0,N.Z)(r),i,arguments),r.variables=e,r}return(0,L.Z)(n,[{key:"createQueryUrl",value:function(e){var t={url:U.Types.nonEmptyString};(0,U.typecheck)(this,t,arguments);var n=this.variables,r=e;Object.entries(n).forEach((function(e){var t=(0,X.Z)(e,2),n=t[0],i=t[1];r=r.replace("{".concat(n,"}"),encodeURIComponent(i))}));var i=this.validateQueryVars(r);if(i)throw(0,$.ZP)(i);return r}},{key:"createPostContent",value:function(){return JSON.stringify(this)}},{key:"validateQueryVars",value:function(e){var t=e.match(/\{\w+\}/g);if(!t)return null;var n=t.join(", ");return n=n.replace(/{|}/g,""),"The following variables are missing: ".concat(n,".")}},{key:"toString",value:function(){return"SDK.Services.Content.RestQuery"}}]),n}(V.Z),ve={QueryBuilder:V.Z,RestQuery:he},ge=n(89789),me=n(59912),be=n(9417),Te=function(){function e(t){(0,j.Z)(this,e);var n={urlSizeLimit:U.Types.positive};U.typecheck.warn(this,n,arguments),this.urlSizeLimit=t}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Content.ContentClientExtrasMap"}}]),e}(),ke={pluginName:"Content",entry:J,service:ve,createApi:function(e){var t=e.sdkSession,n=e.logger,r=e.clients,i=t.accessTokenProvider;t.contentApi=new ge.Z({contentClient:new me.Z({config:t.config.services.content,logger:n,httpClient:r.httpClient}),accessTokenProvider:i,logger:n})},applyConfig:function(e,t){var n,r=null==t||null===(n=t.content)||void 0===n?void 0:n.client,i=r.endpoints,o=r.extras,a=r.baseUrl;e.content=new be.Z({baseUrl:a,endpoints:e.processEndpoints(i),extras:new Te(o.urlSizeLimit)})}},Se=n(27838),Pe=n(10789),Ee={CustomerServiceClient:Pe.Z},Ze=n(72e3),we=n(71111),De={pluginName:"CustomerService",service:Ee,createManager:function(e){var t=e.managers,n=e.logger,r=e.httpClient,i=e.services;t.customerServiceManager=new Se.Z({config:i.customerService,customerServiceClient:new Pe.Z({config:i.customerService.client,logger:n,httpClient:r}),logger:n})},applyConfig:function(e,t){var n,r,i,o,a=new Ze.Z({baseUrl:null==t||null===(n=t.customerService)||void 0===n||null===(r=n.client)||void 0===r?void 0:r.baseUrl,endpoints:e.processEndpoints(null==t||null===(i=t.customerService)||void 0===i||null===(o=i.client)||void 0===o?void 0:o.endpoints)});e.customerService=new we.Z({client:a,disabled:t.customerService.disabled})}},Ce={PlayReadyMessage:n(28481).Z},Ae=n(60753),Re=function(){function e(t){(0,j.Z)(this,e);var n=t.licenseEndpoints;this.licenseEndpoints=n}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Drm.DrmClientExtrasMap"}}]),e}(),xe={pluginName:"Drm",service:Ce,applyConfig:function(e,t){var n,r,i=null==t||null===(n=t.drm)||void 0===n?void 0:n.client,o=i.endpoints,a=i.extras;e.drm=new Ae.Z({baseUrl:null==t||null===(r=t.drm)||void 0===r?void 0:r.baseUrl,endpoints:e.processEndpoints(o),extras:new Re(a)})}},Oe=n(67966),Ie=n(76454),Me=n(61338),je={EligibilityStatus:Oe.Z,EligibilityStatusResponse:Ie.Z,Partner:Me.Z},Le=n(88203),Ne={pluginName:"Eligibility",service:je,applyConfig:function(e,t){var n,r,i,o;e.eligibility=new Le.Z({baseUrl:null==t||null===(n=t.eligibility)||void 0===n||null===(r=n.client)||void 0===r?void 0:r.baseUrl,endpoints:e.processEndpoints(null==t||null===(i=t.eligibility)||void 0===i||null===(o=i.client)||void 0===o?void 0:o.endpoints)})}},Be=n(88540),_e=n(41361),Fe=n(2794),Ue={pluginName:"Entitlement",createApi:function(e){var t=e.sdkSession,n=e.logger,r=e.clients,i=t.accessTokenProvider;t.entitlementApi=new Be.Z({entitlementClient:new _e.Z({config:t.config.services.entitlement,logger:n,httpClient:r.httpClient}),accessTokenProvider:i,logger:n})},applyConfig:function(e,t){var n,r,i,o;e.entitlement=new Fe.Z({baseUrl:null==t||null===(n=t.entitlement)||void 0===n||null===(r=n.client)||void 0===r?void 0:r.baseUrl,endpoints:e.processEndpoints(null==t||null===(i=t.entitlement)||void 0===i||null===(o=i.client)||void 0===o?void 0:o.endpoints)})}},qe=n(40986),Ke=n(54544),Ve=n(67993),He={ActivationToken:qe.Z,ExternalActivationResult:Ke.Z,TemporaryDefaultAccessActivationStatus:Ve.Z},Ge=n(91546),Qe={pluginName:"ExternalActivation",service:He,applyConfig:function(e,t){var n,r,i,o;e.externalActivation=new Ge.Z({baseUrl:null==t||null===(n=t.externalActivation)||void 0===n||null===(r=n.client)||void 0===r?void 0:r.baseUrl,endpoints:e.processEndpoints(null==t||null===(i=t.externalActivation)||void 0===i||null===(o=i.client)||void 0===o?void 0:o.endpoints)})}},ze=n(15861),We=n(2291),Ye=n(53229),Je=n(87757),Xe=n.n(Je),$e=(n(39714),n(64765),n(38880),n(82625)),et=n(59132),tt=n(84983),nt=n(9598),rt=n(92847),it=n(2342),ot=n(35840),at=n(77309),st=n(43118);function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var ut=tt.Z.explore.exploreApi,lt=nt.Z.apiMethodDecorator.bind(null,ut),pt=(te=lt({paramTypes:{query:U.Types.object(rt.PageQueryTypedef)}}),ne=lt({paramTypes:{query:U.Types.object(rt.SetQueryTypedef)}}),re=lt({paramTypes:{query:U.Types.object(rt.DeeplinkQueryTypedef)}}),ie=lt({paramTypes:{input:U.Types.object(rt.UserStateInputTypedef)}}),oe=lt({paramTypes:{query:U.Types.object(rt.PlayerExperienceQueryTypedef)}}),ae=lt({paramTypes:{request:U.Types.object(rt.WatchlistRequestTypedef)}}),se=lt({paramTypes:{request:U.Types.object(rt.WatchlistRequestTypedef)}}),ce=lt({paramTypes:{query:U.Types.object(rt.SeasonQueryTypedef)}}),ue=lt({paramTypes:{query:U.Types.object(rt.UpNextQueryTypedef)}}),le=lt({paramTypes:{input:U.Types.object(rt.DownloadMetadataInputTypedef)}}),pe=lt({paramTypes:{query:U.Types.object(rt.SearchQueryTypedef)}}),de=lt({paramTypes:{query:U.Types.object(rt.ExploreQueryTypedef)}}),ye=lt({paramTypes:{query:U.Types.object(rt.GetPartnerContinueWatchingQueryTypedef)}}),fe=function(e){(0,B.Z)(v,e);var t,n,r,i,o,a,s,c,u,l,p,d,y,f,h=ct(v);function v(e){var t;(0,j.Z)(this,v),t=h.call(this,e);var n={options:U.Types.object({exploreClient:U.Types.instanceStrict(et.Z),sessionManager:U.Types.instanceStrict(ot.Z),source:U.Types.nonEmptyString})};(0,U.typecheck)((0,N.Z)(t),n,arguments);var r=e.exploreClient,i=e.sessionManager,o=e.source;return t.exploreClient=r,t.sessionManager=i,t.source=o,t.logger.info(t.toString(),"Created."),t}return(0,L.Z)(v,[{key:"getPage",value:(f=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,X.Z)(n.args,1),o=i[0],e.abrupt("return",this.exploreClient.getPage({query:o,accessToken:(0,We.Z)((0,F.Z)(v.prototype),"accessToken",this),logTransaction:r}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"getSet",value:(y=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,X.Z)(n.args,1),o=i[0],e.abrupt("return",this.exploreClient.getSet({query:o,accessToken:(0,We.Z)((0,F.Z)(v.prototype),"accessToken",this),logTransaction:r}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"getDeeplink",value:(d=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,X.Z)(n.args,1),o=i[0],e.abrupt("return",this.exploreClient.getDeeplink({query:o,accessToken:(0,We.Z)((0,F.Z)(v.prototype),"accessToken",this),logTransaction:r}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"getUserState",value:(p=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,X.Z)(n.args,1),o=i[0],e.abrupt("return",this.exploreClient.getUserState({input:o,accessToken:(0,We.Z)((0,F.Z)(v.prototype),"accessToken",this),logTransaction:r}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"getPlayerExperience",value:(l=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,X.Z)(n.args,1),o=i[0],e.abrupt("return",this.exploreClient.getPlayerExperience({query:o,accessToken:(0,We.Z)((0,F.Z)(v.prototype),"accessToken",this),logTransaction:r}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"addToWatchlist",value:(u=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,X.Z)(n.args,1),o=i[0],e.next=3,this.sendUserAction(o,it.WatchListEventType.add,r);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"removeFromWatchlist",value:(c=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,X.Z)(n.args,1),o=i[0],e.next=3,this.sendUserAction(o,it.WatchListEventType.remove,r);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"getSeason",value:(s=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,X.Z)(n.args,1),o=i[0],e.abrupt("return",this.exploreClient.getSeason({query:o,accessToken:(0,We.Z)((0,F.Z)(v.prototype),"accessToken",this),logTransaction:r}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"getUpNext",value:(a=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,X.Z)(n.args,1),o=i[0],e.abrupt("return",this.exploreClient.getUpNext({query:o,accessToken:(0,We.Z)((0,F.Z)(v.prototype),"accessToken",this),logTransaction:r}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getDownloadMetadata",value:(o=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,X.Z)(n.args,1),o=i[0],e.abrupt("return",this.exploreClient.getDownloadMetadata({input:o,accessToken:(0,We.Z)((0,F.Z)(v.prototype),"accessToken",this),logTransaction:r}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"search",value:(i=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,X.Z)(n.args,1),o=i[0],e.abrupt("return",this.exploreClient.search({query:o,accessToken:(0,We.Z)((0,F.Z)(v.prototype),"accessToken",this),logTransaction:r}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"query",value:(r=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,X.Z)(n.args,1),o=i[0],e.abrupt("return",this.exploreClient.query({query:o,accessToken:(0,We.Z)((0,F.Z)(v.prototype),"accessToken",this),logTransaction:r}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"sendUserAction",value:(n=(0,ze.Z)(Xe().mark((function e(t,n,r){var i,o,a,s,c;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionManager.createMessageSubject();case 2:return i=e.sent,o=new at.Z({eventType:ut.watchlist,schemaUrl:st.Z.watchlist,data:{action_info_block:t.actionInfoBlock,page_info_block:t.pageInfoBlock,container_info_block:t.containerInfoBlock,item_info_block:t.itemInfoBlock,event_type:n,event_occurred_timestamp:(new Date).toISOString()}}),a=this.source,s=this.accessToken,c=o.getSocketMessage({subject:i,source:a}),e.next=8,this.exploreClient.sendUserAction({request:[c],accessToken:s,logTransaction:r});case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"getPartnerContinueWatching",value:(t=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=(0,X.Z)(n.args,1),o=i[0],a=this.accessToken,e.abrupt("return",this.exploreClient.getPartnerContinueWatching({logTransaction:r,query:o,accessToken:a}));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Explore.ExploreApi"}}]),v}($e.Z),(0,Ye.Z)(fe.prototype,"getPage",[te],Object.getOwnPropertyDescriptor(fe.prototype,"getPage"),fe.prototype),(0,Ye.Z)(fe.prototype,"getSet",[ne],Object.getOwnPropertyDescriptor(fe.prototype,"getSet"),fe.prototype),(0,Ye.Z)(fe.prototype,"getDeeplink",[re],Object.getOwnPropertyDescriptor(fe.prototype,"getDeeplink"),fe.prototype),(0,Ye.Z)(fe.prototype,"getUserState",[ie],Object.getOwnPropertyDescriptor(fe.prototype,"getUserState"),fe.prototype),(0,Ye.Z)(fe.prototype,"getPlayerExperience",[oe],Object.getOwnPropertyDescriptor(fe.prototype,"getPlayerExperience"),fe.prototype),(0,Ye.Z)(fe.prototype,"addToWatchlist",[ae],Object.getOwnPropertyDescriptor(fe.prototype,"addToWatchlist"),fe.prototype),(0,Ye.Z)(fe.prototype,"removeFromWatchlist",[se],Object.getOwnPropertyDescriptor(fe.prototype,"removeFromWatchlist"),fe.prototype),(0,Ye.Z)(fe.prototype,"getSeason",[ce],Object.getOwnPropertyDescriptor(fe.prototype,"getSeason"),fe.prototype),(0,Ye.Z)(fe.prototype,"getUpNext",[ue],Object.getOwnPropertyDescriptor(fe.prototype,"getUpNext"),fe.prototype),(0,Ye.Z)(fe.prototype,"getDownloadMetadata",[le],Object.getOwnPropertyDescriptor(fe.prototype,"getDownloadMetadata"),fe.prototype),(0,Ye.Z)(fe.prototype,"search",[pe],Object.getOwnPropertyDescriptor(fe.prototype,"search"),fe.prototype),(0,Ye.Z)(fe.prototype,"query",[de],Object.getOwnPropertyDescriptor(fe.prototype,"query"),fe.prototype),(0,Ye.Z)(fe.prototype,"getPartnerContinueWatching",[ye],Object.getOwnPropertyDescriptor(fe.prototype,"getPartnerContinueWatching"),fe.prototype),fe),dt={ExploreApi:pt},yt={ActionType:it.ActionType,RefIdType:it.RefIdType},ft=n(67452),ht={pluginName:"Explore",entry:dt,service:yt,createApi:function(e){var t=e.sdkSession,n=e.logger,r=e.sourceUrn,i=e.clients,o=t.accessTokenProvider,a=t.managers;t.exploreApi=new pt({exploreClient:new et.Z({config:t.config.services.explore,logger:n,httpClient:i.httpClient}),sessionManager:a.sessionManager,accessTokenProvider:o,source:r,logger:n})},applyConfig:function(e,t){var n,r=null==t||null===(n=t.explore)||void 0===n?void 0:n.client,i=r.baseUrl,o=r.endpoints,a=r.extras;e.explore=new ft.Z({baseUrl:i,endpoints:e.processEndpoints(o),extras:a})}},vt=n(40068),gt=n(62370),mt=n(63580),bt={pluginName:"Flex",createApi:function(e){var t=e.sdkSession,n=e.logger,r=e.clients,i=t.accessTokenProvider;t.flexApi=new vt.Z({flexClient:new gt.Z({config:t.config.services.flex,logger:n,httpClient:r.httpClient}),accessTokenProvider:i,logger:n})},applyConfig:function(e,t){var n,r,i,o;e.flex=new mt.Z({baseUrl:null==t||null===(n=t.flex)||void 0===n||null===(r=n.client)||void 0===r?void 0:r.baseUrl,endpoints:e.processEndpoints(null==t||null===(i=t.flex)||void 0===i||null===(o=i.client)||void 0===o?void 0:o.endpoints)})}},Tt={QRCodeFormat:n(84217).Z},kt=n(66008),St=n(14988),Pt=n(59034),Et={pluginName:"QRCode",entry:Tt,createApi:function(e){var t=e.sdkSession,n=e.logger,r=t.accessTokenProvider;t.qrCodeApi=new Pt.Z({qrCodeClient:new St.Z({config:t.config.services.qrCode,logger:n}),accessTokenProvider:r,logger:n})},applyConfig:function(e,t){var n,r,i,o;e.qrCode=new kt.Z({baseUrl:null==t||null===(n=t.qrcode)||void 0===n||null===(r=n.client)||void 0===r?void 0:r.baseUrl,endpoints:e.processEndpoints(null==t||null===(i=t.qrcode)||void 0===i||null===(o=i.client)||void 0===o?void 0:o.endpoints)})}},Zt=n(52414),wt=n(70280),Dt=n(60777),Ct={pluginName:"Invoice",createApi:function(e){var t=e.sdkSession,n=e.logger,r=e.clients,i=t.accessTokenProvider;t.invoiceApi=new Zt.Z({invoiceClient:new wt.Z({config:t.config.services.invoice,logger:n,httpClient:r.httpClient}),accessTokenProvider:i,logger:n})},applyConfig:function(e,t){var n,r,i,o;e.invoice=new Dt.Z({baseUrl:null==t||null===(n=t.invoice)||void 0===n||null===(r=n.client)||void 0===r?void 0:r.baseUrl,endpoints:e.processEndpoints(null==t||null===(i=t.invoice)||void 0===i||null===(o=i.client)||void 0===o?void 0:o.endpoints)})}},At=(n(19601),n(36399)),Rt=n(46467),xt=n(88813),Ot=n(48258),It=n(34391),Mt=n(63362),jt=n(53908),Lt=n(49976),Nt=n(92534),Bt=n(97938),_t=n(2904),Ft=n(76229),Ut=n(10129),qt=n(59403),Kt=n(403),Vt=n(53158),Ht=n(58605),Gt=(n(88674),n(82526),n(41817),n(80540)),Qt=n(19546),zt=n(57890),Wt=n(25279);function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var Jt="playbackStarted",Xt="playbackStateChanged",$t="playbackFailed",en="bitrateChanged",tn=2,nn=6,rn=8,on=function(e){(0,B.Z)(i,e);var t,n,r=Yt(i);function i(e){var t;(0,j.Z)(this,i),t=r.call(this,e);var n={options:U.Types.object({nativePlayer:U.Types.object({load:U.Types.function})})};return(0,U.typecheck)((0,N.Z)(t),n,arguments),t.hasStarted=!1,t.playlist=null,t.playbackStartupEventData=new zt.Z({startupActivity:Qt.StartupActivity.reattempt}),t.cdnFallbackTimerId=0,t.cdnFallbackTimeoutReached=!1,t.offHandlerRemovalList=[],t}return(0,L.Z)(i,[{key:"setSource",value:(n=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o,a=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.nativePlayer,this.playlist=t,this.playlistUri=t.streamUri,this.currentStreamUrl=t.streamUri,o=t.getTrackingData(Wt.aD.qos),null===(n=this.playbackStartupEventData)||void 0===n||n.fallbackAttempt(o.cdnVendor),null!==(r=this.playbackStartupEventData)&&void 0!==r&&r.isCdnFallback&&this.playbackStartupEventData.setQosData(o),0===this.cdnFallbackTimerId&&(this.cdnFallbackTimerId=setTimeout((function(){a.cdnFallbackTimeoutReached=!0}),1e3*this.cdnFallback.defaultTimeout)),null==i||i.load(t.streamUri),null==i||i.addCustomHTTPHeader("Cookie","Authorization=".concat(this.accessToken)),this.adEngineData.ssess&&(null==i||i.addCustomHTTPHeader("ssess",this.adEngineData.ssess));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getPlaybackMetrics",value:function(){var e,t,n=(null===(e=this.nativePlayer)||void 0===e?void 0:e.getCurrentVideoBitrate())/1e3,r=null===(t=this.nativePlayer)||void 0===t?void 0:t.getCurrentPosition();return new Bt.Z({currentBitrate:n,currentPlayhead:r})}},{key:"addListener",value:function(e){var t={listener:U.Types.instanceStrict(Nt.Z)};(0,U.typecheck)(this,"addListener",t,arguments);var n=this.nativePlayer,r=this.playbackStartedEvent,i=this.playbackStateChangedEvent,o=this.bitrateChangedEvent,a=this.playbackError,s=Jt,c=Xt,u=$t,l=en;n&&n.addEventListener&&(this.listener=e,this.eventListenerProvider=new Ht.Z({onHandler:n.addEventListener,offHandler:n.removeEventListener,logger:this.logger}),this.eventListenerProvider.addEventHandler(this,s,r),this.eventListenerProvider.addEventHandler(this,c,i),this.eventListenerProvider.addEventHandler(this,u,a),this.eventListenerProvider.addEventHandler(this,l,o))}},{key:"playbackStateChangedEvent",value:function(e){switch(e.state){case nn:this.playbackPausedEvent();break;case rn:this.playbackResumedEvent();break;case tn:this.playbackInitializedEvent()}}},{key:"setDrmProvider",value:function(e){return this.drmProvider=e,Promise.resolve()}},{key:"clean",value:function(){var e=this.listener;(0,We.Z)((0,F.Z)(i.prototype),"clean",this).call(this),this.playlistUri="",this.drmProvider=null,this.cdnFallbackTimerId=0,this.cdnFallbackTimeoutReached=!1,this.hasStarted=!1,this.playbackStartupEventData=new zt.Z({startupActivity:Qt.StartupActivity.reattempt}),this.removeListener(e)}},{key:"playbackEndedEvent",value:(t=(0,ze.Z)(Xe().mark((function e(t,n){var r,i,o,a,s,c,u,l,p,d,y,f,h,v,g,m;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getPlaybackMetrics(),o=(i=n||{}).code,a=i.description,c=!1,n?(s=Qt.PlaybackExitedCause.error,c=10===o):s=t?Qt.PlaybackExitedCause.playedToEnd:Qt.PlaybackExitedCause.user,u=this.cdnFallback,l=this.playlist,p=this.hasStarted,d=this.playbackStartupEventData,y=this.cdnFallbackTimeoutReached,f=null==d?void 0:d.cdnFallbackCount,h={cause:s,errorDetail:a,playheadPosition:r.currentPlayhead,cdnRequestedTrail:null==d?void 0:d.cdnRequestedTrail,cdnFailedTrail:null==d?void 0:d.cdnFailedTrail,cdnFallbackCount:f,isCdnFallback:null==d?void 0:d.isCdnFallback},U.Check.assigned(n)&&(null==d||d.fallbackFailed()),e.next=10,this.onPlaybackEnded(h);case 10:c&&u.isEnabled&&!y&&void 0!==f&&f<u.fallbackLimit&&!p&&l&&l.advanceNextSource()&&(v=l.mediaSourceIndex,g=l.mediaSources,m=g[v]||{},this.emit(Gt.Z.UpdateAdEngine,m.priority),this.setSource(l));case 11:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"dispose",value:function(){this.clean(),this.nativePlayer=null,this.accessToken=null,this.adEngineData={},this.cdnFallbackTimerId=0,this.playbackStartupEventData=void 0}},{key:"playbackError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e,n=t.shouldRetry,r=t.code,i=t.description,o={code:r,description:i},a=10;n&&r!==a||(this.playbackEndedEvent(!0,o),r!==a&&this.removeListener(this.listener))}},{key:"playbackStartedEvent",value:function(){this.hasStarted=!0;var e={playheadPosition:this.getPlaybackMetrics().currentPlayhead};this.onPlaybackStarted(e)}},{key:"playbackPausedEvent",value:function(){var e=this.getPlaybackMetrics().currentPlayhead,t={cause:Qt.PlaybackPausedCause.user,playheadPosition:e};this.onPlaybackPaused(t)}},{key:"playbackResumedEvent",value:function(){var e=this.getPlaybackMetrics().currentPlayhead,t={cause:Qt.PlaybackResumedCause.user,playheadPosition:e};this.onPlaybackResumed(t)}},{key:"bitrateChangedEvent",value:function(){var e=this.getPlaybackMetrics();this.onBitrateChanged({bitrateAvg:e.currentBitrateAvg,bitratePeak:e.currentBitratePeak,playheadPosition:e.currentPlayhead})}},{key:"playbackInitializedEvent",value:function(){var e={streamUrl:this.currentStreamUrl,playheadPosition:this.getPlaybackMetrics().currentPlayhead};this.onPlaybackInitialized(e)}},{key:"toString",value:function(){return"SDK.Media.PlayerAdapter.AampUvePlayerAdapter"}}]),i}(Kt.Z),an=n(39072),sn=(n(92222),n(66282)),cn=n(43425),un=n(97244),ln=n(83668);function pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var dn=function(e){(0,B.Z)(r,e);var t,n=pn(r);function r(e){var t;(0,j.Z)(this,r),t=n.call(this,e);var i={options:U.Types.object({nativePlayer:U.Types.object({loadSource:U.Types.function})})};return(0,U.typecheck)((0,N.Z)(t),i,arguments),t.mediaElement=t.nativePlayer.media,t.xhrSetupCallback=t.setupXhrCallback.bind((0,N.Z)(t)),t.hasStarted=!1,t.playlist=null,t.playbackStartupEventData=new zt.Z({startupActivity:Qt.StartupActivity.reattempt}),t.cdnFallbackTimerId=0,t.cdnFallbackTimeoutReached=!1,t}return(0,L.Z)(r,[{key:"setSource",value:function(e){var t=this,n={playlist:U.Types.instanceStrict(Vt.Z)};(0,U.typecheck)(this,"setSource",n,arguments);var r=this.nativePlayer,i=this.xhrSetupCallback,o=this.playbackStartupEventData;return new Promise((function(n,a){t.playlist=e,t.playlistUri=e.streamUri,t.currentStreamUrl=e.streamUri;try{var s=e.getTrackingData(Wt.aD.qos);return o.fallbackAttempt(s.cdnVendor),o.isCdnFallback&&(o.setQosData(s),t.onPlaybackReattempt(o)),r.config.xhrSetup=function(e,t){i(e,t)},0===t.cdnFallbackTimerId&&(t.cdnFallbackTimerId=setTimeout((function(){t.cdnFallbackTimeoutReached=!0}),1e3*t.cdnFallback.defaultTimeout)),r.loadSource(e.streamUri),n()}catch(e){return a((0,$.ZP)("".concat(t.toString(),".setSource(playlist) unable to set playlistUri on NativePlayer - ").concat(e)))}}))}},{key:"clean",value:function(){var e=this.listener;(0,We.Z)((0,F.Z)(r.prototype),"clean",this).call(this),this.playlistUri="",this.drmProvider=null,this.playbackReattemptEventData=new zt.Z({startupActivity:Qt.StartupActivity.reattempt}),this.cdnFallbackTimerId=0,this.cdnFallbackTimeoutReached=!1,this.hasStarted=!1,this.playbackStartupEventData=new zt.Z({startupActivity:Qt.StartupActivity.reattempt}),this.removeListener(e),this.boundHandlers={}}},{key:"playbackEndedEvent",value:(t=(0,ze.Z)(Xe().mark((function e(t,n){var r,i,o,a,s,c,u,l,p,d,y;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=!1,U.Check.assigned(t)?(r=Qt.PlaybackExitedCause.error,i=t===Qt.QoePlaybackError.serviceError||t===Qt.QoePlaybackError.unknown):r=n?Qt.PlaybackExitedCause.playedToEnd:Qt.PlaybackExitedCause.user,o={cause:r,errorDetail:t,playheadPosition:this.currentPlayhead},a=this.cdnFallback,s=this.playlist,c=this.hasStarted,u=this.playbackStartupEventData,l=this.cdnFallbackTimeoutReached,U.Check.assigned(t)&&u.fallbackFailed(),o.cdnRequestedTrail=u.cdnRequestedTrail,o.cdnFailedTrail=u.cdnFailedTrail,o.cdnFallbackCount=u.cdnFallbackCount,o.isCdnFallback=u.isCdnFallback,e.next=11,this.onPlaybackEnded(o);case 11:i&&a.isEnabled&&!l&&o.cdnFallbackCount<a.fallbackLimit&&!c&&s&&s.advanceNextSource()&&(p=s.mediaSourceIndex,d=s.mediaSources,y=d[p]||{},this.emit(Gt.Z.UpdateAdEngine,y.priority),this.setSource(s));case 12:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getPlaybackMetrics",value:function(){if(U.Check.not.assigned(this.mediaElement.currentTime))throw(0,$.ZP)("".concat(this.toString(),".getPlaybackMetrics() unable to get NativePlayer playhead data"));var e=this.mediaElement.currentTime;return new Bt.Z({currentPlayhead:e})}},{key:"addListener",value:function(e){var t=this,n={listener:U.Types.instanceStrict(Nt.Z)};(0,U.typecheck)(this,"addListener",n,arguments);var r=this.boundHandlers,i=this.mediaElement,o=this.nativePlayer,a=this.playbackStartedEvent,s=this.playbackPausedEvent,c=this.playbackEndedEvent,u=this.successfulPlaylistLoad;if(!U.Check.function(i.play))throw(0,$.ZP)("".concat(this.toString(),".addListener(listener) unable to add PlaybackEventListener"));this.listener=e,r.onPlay=a.bind(this),r.onPause=s.bind(this),r.playbackEndedEvent=c.bind(this),r.successfulPlaylistLoad=u.bind(this),r.onPlayedToCompletion=function(){r.playbackEndedEvent.call(t,null,!0)},r.onError=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null;try{n=JSON.stringify(e,(0,cn.Z)())}catch(e){n="Cannot stringify original error"}return r.playbackEndedEvent.call(t,n),t.removeListener(t.listener)},i.onplay=r.onPlay,i.onpause=r.onPause,i.onerror=r.onError,i.onended=r.onPlayedToCompletion,U.Check.assigned(o.on)&&o.on("MANIFEST_LOADED",r.successfulPlaylistLoad)}},{key:"removeListener",value:function(e){var t={listener:U.Types.instanceStrict(Nt.Z).optional};if((0,U.typecheck)(this,"removeListener",t,arguments),e){var n=this.mediaElement,r=this.boundHandlers,i=this.nativePlayer;U.Check.function(n.play)&&this.listener===e&&(this.listener=void 0,n.onplay=null,n.onpause=null,n.onerror=null,n.onended=null,U.Check.assigned(i.off)&&i.off("MANIFEST_LOADED",r.successfulPlaylistLoad))}}},{key:"setDrmProvider",value:function(e){var t={drmProvider:U.Types.instanceStrict(sn.Z)};return(0,U.typecheck)(this,"setDrmProvider",t,arguments),this.drmProvider=e,Promise.resolve()}},{key:"getCdnName",value:function(){return this.playlist.getTrackingData(Wt.aD.qos).cdnName}},{key:"playbackStartedEvent",value:function(){this.hasStarted||this.onPlaybackStarted({}),this.hasStarted=!0}},{key:"playbackPausedEvent",value:function(){this.onPlaybackPaused({})}},{key:"successfulPlaylistLoad",value:function(e){var t={eventData:U.Types.object()};(0,U.typecheck)(this,"successfulPlaylistLoad",t,arguments);var n=e.playlist;n&&n.tracking&&this.onSuccessfulPlaylistLoad(n)}},{key:"setupXhrCallback",value:function(e,t){var n=this.accessToken,r=this.adEngineData,i=(void 0===r?{}:r).ssess,o=(0,un.Z)(t);e.withCredentials=!1,e.readyState||e.open("GET",t,!0),o&&U.Check.assigned(i)?(e.withCredentials=!0,e.setRequestHeader("ssess",i)):(t.indexOf("/keys/")>-1||t.indexOf("/obtain-license/")>-1)&&e.setRequestHeader(ln.AUTHORIZATION,n)}},{key:"dispose",value:function(){this.nativePlayer=null,this.accessToken=null,this.mediaElement=null,this.playbackStartupEventData=null,this.cdnFallbackTimerId=0}},{key:"toString",value:function(){return"SDK.Media.PlayerAdapter.HlsJsPlayerAdapter"}}]),r}(Kt.Z),yn=n(71330);function fn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}n(47042),n(68309),n(91038),n(78783),n(32165),n(66992),n(33948),n(47941);var gn,mn=function(e){(0,B.Z)(r,e);var t,n=vn(r);function r(e){var t;(0,j.Z)(this,r),t=n.call(this,e);var i={options:U.Types.object({nativePlayer:U.Types.object({setStreamingProperty:U.Types.function,setListener:U.Types.function,open:U.Types.function}),clientListener:U.Types.object().optional})};(0,U.typecheck)((0,N.Z)(t),i,arguments);var o=e.clientListener,a=void 0===o?null:o;return t.streamingProperty=null,t.playerListener=null,t.clientListener=a,t}return(0,L.Z)(r,[{key:"setSource",value:function(e){var t=this,n={playlist:U.Types.instanceStrict(Vt.Z)};return(0,U.typecheck)(this,"setSource",n,arguments),new Promise((function(n,r){t.playlistUri=e.streamUri;try{if(U.Check.assigned(t.accessToken)){var i,o,a="|COOKIE={Authorization=".concat(t.accessToken,";}");return t.playlistUri=e.streamUri,t.streamingProperty=a,null===(i=t.nativePlayer)||void 0===i||i.open(e.streamUri),null===(o=t.nativePlayer)||void 0===o||o.setStreamingProperty("ADAPTIVE_INFO",a),n()}return r((0,$.ZP)("".concat(t.toString(),".setSource(playlist) needs valid accessToken")))}catch(e){return r((0,$.ZP)("".concat(t.toString(),".setSource(playlist) unable to set playlistUri on NativePlayer - ").concat(e)))}}))}},{key:"clean",value:function(){var e=this.listener;(0,We.Z)((0,F.Z)(r.prototype),"clean",this).call(this),this.playlistUri="",this.boundHandlers={},this.drmProvider=null,this.removeListener(e)}},{key:"playbackEndedEvent",value:(t=(0,ze.Z)(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getPlaybackMetrics(),e.next=3,this.onPlaybackEnded({error:null,playheadPosition:t.currentPlayhead});case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getPlaybackMetrics",value:function(){var e,t;if(U.Check.not.function(null===(e=this.nativePlayer)||void 0===e?void 0:e.getCurrentStreamInfo))throw(0,$.ZP)("".concat(this.toString(),".getPlaybackMetrics() unable to get NativePlayer playhead data"));if(U.Check.not.function(null===(t=this.nativePlayer)||void 0===t?void 0:t.getCurrentTime))throw(0,$.ZP)("".concat(this.toString(),".getPlaybackMetrics() unable to get NativePlayer bitrate data"));var n=this.nativePlayer.getCurrentStreamInfo(),r=this.getBitrate(n),i=this.nativePlayer.getCurrentTime()/1e3;return new Bt.Z({currentBitrate:r,currentPlayhead:i})}},{key:"addListener",value:function(e){var t={listener:U.Types.instanceStrict(Nt.Z)};(0,U.typecheck)(this,"addListener",t,arguments);var n=this.boundHandlers,r=this.nativePlayer,i=this.clientListener,o=this.playbackStartedEvent,a=this.playbackEndedEvent;if(!U.Check.function(null==r?void 0:r.setListener))throw(0,$.ZP)("".concat(this.toString(),".addListener(listener) unable to add PlaybackEventListener"));this.listener=e,n.onPlay=o.bind(this),n.onPlayedToCompletion=a.bind(this);var s={onbufferingstart:n.onPlay,onstreamcompleted:n.onPlayedToCompletion};i&&Object.keys(i).forEach((function(e){U.Check.assigned(i[e])&&U.Check.function(i[e])&&(U.Check.assigned(s[e])&&U.Check.function(s[e])?s[e]=function(t){i[e](t),s[e](t)}:s[e]=i[e])})),this.playerListener=s,null==r||r.setListener(this.playerListener)}},{key:"removeListener",value:function(e){var t={listener:U.Types.instanceStrict(Nt.Z).optional};if((0,U.typecheck)(this,"removeListener",t,arguments),e){var n=this.nativePlayer;U.Check.function(null==n?void 0:n.setListener)&&this.listener===e&&(this.listener=void 0,this.playerListener=null,n.onbufferingstart=null,n.onstreamcompleted=null)}}},{key:"setDrmProvider",value:function(e){var t={drmProvider:U.Types.instanceStrict(sn.Z)};return(0,U.typecheck)(this,"setDrmProvider",t,arguments),this.drmProvider=e,Promise.resolve()}},{key:"playbackStartedEvent",value:function(){this.onPlaybackStarted({})}},{key:"dispose",value:function(){this.nativePlayer=null,this.accessToken=null,this.playerListener=null}},{key:"getBitrate",value:function(e){var t,n=null,r=fn(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if("VIDEO"===i.type){var o=JSON.parse(i.extra_info);n=parseInt(o.Bit_rate,10)}}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"toString",value:function(){return"SDK.Media.PlayerAdapter.SamsungTizenPlayerAdapter"}}]),r}(Kt.Z),bn=n(10259),Tn=n(65714),kn=n(56352),Sn=n(91926),Pn={PlayerAdapter:Object.assign(Kt.Z,{AampUvePlayerAdapter:on,BamWebPlayerAdapter:an.Z,HlsJsPlayerAdapter:dn,CafPlayerAdapter:yn.Z,SamsungTizenPlayerAdapter:mn,BamHlsPlayerAdapter:bn.Z,DssHlsPlayerAdapter:Tn.Z,DssWebPlayerAdapter:kn.Z,MelHivePlayerAdapter:Sn.Z}),AssetInsertionStrategy:Wt.We,AuthCookieProvider:At.Z,BamHlsErrorMapping:Rt.Z,EventListenerProvider:Ht.Z,HdcpSecurityLevel:Wt.fG,MediaAnalyticsKey:Wt.aD,MediaCapabilitiesProvider:xt.Z,MediaDescriptor:Ot.Z,MediaItem:It.Z,MediaLocator:Mt.Z,MediaLocatorType:Wt.$g,MediaPreferences:jt.Z,MediaSource:Lt.Z,PlaybackEventListener:Nt.Z,PlaybackInitiationContext:Wt.Fz,PlaybackMetrics:Bt.Z,PlaybackMetricsProvider:_t.Z,PlaybackSession:Ft.Z,PlaybackTelemetryConfiguration:Ut.Z,PlaybackTelemetryDispatcher:qt.Z,Playlist:Vt.Z,SlugDuration:Wt.nG,ThumbnailResolution:Wt.xy,WidevineSecurityLevel:Wt.Xs},En=n(99565),Zn=n(11908),wn=n(90450),Dn=n(28928),Cn=function(){function e(t){(0,j.Z)(this,e);var n={video:U.Types.array.of.in(Dn.SupportedCodec).optional};(0,U.typecheck)(this,n,arguments),this.video=t}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.CodecAttributes"}}]),e}(),An=n(15004),Rn=n(12204),xn=n(283),On=n(90642),In=n(84961),Mn=n(33738),jn=n(33657),Ln=n(36149),Nn=n(66165),Bn=n(5714),_n=n(59410),Fn=function(){function e(t){(0,j.Z)(this,e);var n={playbackSessionId:U.Types.nonEmptyString.optional};(0,U.typecheck)(this,n,arguments),this.playbackSessionId=t}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.PlaybackSelectionTracking"}}]),e}(),Un=n(62120),qn=n(59056),Kn=n(28979),Vn=n(43898),Hn=n(61719),Gn=function(){function e(t){(0,j.Z)(this,e);var n={max:U.Types.array.of.in(Dn.ResolutionMax).optional};(0,U.typecheck)(this,n,arguments),this.max=t}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Media.VideoResolution"}}]),e}(),Qn=n(60532),zn={AssetInsertionStrategyQos:Dn.AssetInsertionStrategyQos,AudioRole:Dn.AudioRole,AudioType:Dn.AudioType,BifThumbnailSet:wn.Z,CodecAttributes:Cn,DrmType:Dn.DrmType,EncryptionMode:Dn.EncryptionMode,HdrType:Dn.HdrType,InsertionMode:Dn.InsertionMode,InsertionPointActionType:Dn.InsertionPointActionType,InsertionPointContentType:Dn.InsertionPointContentType,InsertionPointContentSubType:Dn.InsertionPointContentSubType,InsertionPointPlacement:Dn.InsertionPointPlacement,InsertionPointVisualElementType:Dn.InsertionPointVisualElementType,MediaFetchErrorMapping:Qn.G,MediaPayload:An.Z,MediaPayloadStream:Rn.Z,MediaPlaybackSelectionPayload:xn.Z,MediaPlayhead:On.Z,MediaPlayheadStatus:Dn.MediaPlayheadStatus,MediaQuality:Dn.MediaQuality,PlaybackAttributes:In.Z,PlaybackContext:Mn.Z,MediaThumbnailLink:jn.Z,MediaThumbnailLinks:Ln.Z,PlaybackSelectionAdTracking:Nn.Z,PlaybackSelectionAttributes:Bn.Z,PlaybackSelectionProperties:_n.Z,PlaybackSelectionTracking:Fn,PlaybackVariant:Un.Z,PlaylistType:Dn.PlaylistType,Presentation:qn.Z,Protocol:Dn.Protocol,ResolutionMax:Dn.ResolutionMax,StreamSampleConfiguration:Vn.Z,SpriteThumbnailSet:Kn.Z,StreamingType:Dn.StreamingType,SubscriptionType:Dn.SubscriptionType,SubtitleRole:Dn.SubtitleRole,SupportedCodec:Dn.SupportedCodec,ThumbnailPresentationType:Dn.ThumbnailPresentationType,ThumbnailSet:Hn.Z,VideoResolution:Gn},Wn=n(54268),Yn=n(91966),Jn=n(11355),Xn=n(78318),$n=n(6078),er=n(39046),tr=n(6438),nr=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({playbackSession:U.Types.nonEmptyObject,playbackEncryptionDefault:U.Types.nonEmptyString,mediaQualityDefault:U.Types.nonEmptyString,playlistUrlHttpProtocolDefault:U.Types.nonEmptyString.optional,securityCheckRequirements:U.Types.nonEmptyObject.optional,cookieEnabled:U.Types.boolean,adPartner:U.Types.nonEmptyString.optional,isContentAccessRestricted:U.Types.boolean.optional,cdnFallback:U.Types.object(tr.i5),playbackSnapshotEvents:U.Types.object(tr.IC)})};U.typecheck.warn(this,n,arguments);var r=t||{},i=r.playbackSession,o=r.playbackEncryptionDefault,a=r.mediaQualityDefault,s=r.playlistUrlHttpProtocolDefault,c=r.securityCheckRequirements,u=r.cookieEnabled,l=void 0!==u&&u,p=r.adPartner,d=r.isContentAccessRestricted,y=void 0===d||d,f=r.cdnFallback,h=r.playbackSnapshotEvents;this.playbackSession=i,this.playbackEncryptionDefault=o,this.mediaQualityDefault=a,this.playlistUrlHttpProtocolDefault=s,this.cookieEnabled=!!l,this.adPartner=p,this.securityCheckRequirements=c,this.isContentAccessRestricted=!!y,this.cdnFallback=U.Check.object(f)?f:{},this.playbackSnapshotEvents=U.Check.object(h)?h:{}}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Configuration.MediaManagerExtrasMap"}}]),e}(),rr=n(16576),ir={pluginName:"Media",entry:Pn,service:zn,dependencies:[xe],createApi:function(e){var t=e.sdkSession,n=e.logger,r=t.platformMetricsProvider,i=t.managers.mediaManager;t.mediaApi=new En.Z({mediaManager:i,platformMetricsProvider:r,logger:n})},createManager:function(e){var t=e.managers,n=e.logger,r=e.httpClient,i=e.services,o=e.mediaCapabilitiesProvider,a=e.platformMetricsProvider,s=e.geoProvider,c=e.advertisingIdProvider,u=e.monotonicTimestampProvider,l=e.storage,p=e.metadata,d=p.clientId,y=p.environment,f=t.tokenManager,h=t.telemetryManager,v=t.deviceManager,g=new rr.Z({config:i.drm,clientId:d,environment:y,storage:l,logger:n,httpClient:r}),m=new Yn.Z({config:i.adEngine,sdkver:v.environmentConfiguration.sdkVersion,geoProvider:s,advertisingIdProvider:c,disabled:i.adEngine.disabled,logger:n,httpClient:r});t.mediaManager=new Zn.Z({mediaManagerConfiguration:i.media.config,tokenManager:f,drmClient:g,telemetryManager:h,mediaCapabilitiesProvider:o,platformMetricsProvider:a,mediaClient:new Wn.Z({config:i.media.client,logger:n,httpClient:r,monotonicTimestampProvider:u}),adEngineClient:m,logger:n,advertisingIdProvider:c,monotonicTimestampProvider:u})},applyConfig:function(e,t){var n,r,i,o,a,s,c,u,l=t.adEngine.extras.adTargeting,p=t.media.extras;e.adEngine=new Jn.Z({baseUrl:null==t||null===(n=t.adEngine)||void 0===n||null===(r=n.client)||void 0===r?void 0:r.baseUrl,endpoints:e.processEndpoints(null==t||null===(i=t.adEngine)||void 0===i||null===(o=i.client)||void 0===o?void 0:o.endpoints),extras:new Xn.Z(l)});var d=new $n.Z({baseUrl:null==t||null===(a=t.media)||void 0===a||null===(s=a.client)||void 0===s?void 0:s.baseUrl,endpoints:e.processEndpoints(null==t||null===(c=t.media)||void 0===c||null===(u=c.client)||void 0===u?void 0:u.endpoints)});e.media={config:new er.Z({client:d,extras:new nr(p),disabled:t.media.disabled}),client:d}}},or=n(34140);!function(e){e.accountActiveEntitlement="account_active_entitlement",e.accountExpiredEntitlement="account_expired_entitlement",e.accountNeverEntitled="account_never_entitled",e.anonymous="anonymous",e.accountOnBillingHold="account_on_billing_hold"}(gn||(gn={}));var ar,sr=gn,cr=n(23279),ur=n(21650);!function(e){e.subscriberConfirmation="subscriberConfirmation",e.taxID="taxID",e.streetAddress="streetAddress",e.city="city",e.state="state",e.postalCode="postalCode"}(ar||(ar={}));var lr,pr=ar,dr=n(88141);!function(e){e.year="YEAR",e.month="MONTH",e.day="DAY",e.season="SEASON",e.none="NONE"}(lr||(lr={}));var yr,fr=lr,hr=n(87131),vr=n(80194),gr=n(87968),mr=n(73812);!function(e){e.planPicker="planPicker",e.earlyAccessPlanPicker="earlyAccessPlanPicker",e.accountDetails="accountDetails",e.earlyAccess="earlyAccess",e.planSwitch="planSwitch"}(yr||(yr={}));var br,Tr=yr;!function(e){e.day="day",e.week="week",e.month="month",e.year="year"}(br||(br={}));var kr,Sr=br,Pr=n(26151),Er={AccountEntitlementContext:sr,Assertion:cr.Z,Campaign:ur.Z,DocumentCode:pr,IntroPrice:dr.Z,PaymentPeriod:fr,Paywall:hr.Z,PaywallSubscription:vr.Z,Product:gr.Z,ProductType:mr.Z,PurchaseContext:Tr,TimeUnit:Sr,Reason:Pr.Z},Zr=n(64504),wr=n(88144),Dr={pluginName:"Paywall",service:Er,createApi:function(e){var t=e.sdkSession,n=e.logger,r=e.clients,i=t.accessTokenProvider;t.paywallApi=new or.Z({paywallClient:new Zr.Z({config:t.config.services.paywall,logger:n,httpClient:r.httpClient}),accessTokenProvider:i,logger:n})},applyConfig:function(e,t){var n,r;e.paywall=new wr.Z({baseUrl:null==t||null===(n=t.paywall)||void 0===n||null===(r=n.client)||void 0===r?void 0:r.baseUrl,endpoints:e.processEndpoints(t.paywall.client.endpoints)})}},Cr=n(53298),Ar={pluginName:"Platform",entry:{PlatformMetricsProvider:Cr.Z}},Rr=n(70054),xr=n(86691),Or=n(98931),Ir={pluginName:"Purchase",dependencies:[Ne,Qe],createApi:function(e){var t=e.sdkSession,n=e.logger,r=e.clients.httpClient;t.purchaseApi=new Rr.Z({eligibilityClient:new xr.Z({config:t.config.services.eligibility,logger:n,httpClient:r}),externalActivationClient:new Or.Z({config:t.config.services.externalActivation,logger:n,httpClient:r}),tokenManager:t.managers.tokenManager,logger:n})}},Mr=n(5872),jr=n(43160),Lr=n(14859),Nr=n(18850),Br=n(10063);!function(e){e.badgingConfig="badgingConfig",e.composeConfig="composeConfig"}(kr||(kr={}));var _r=kr,Fr={ImageFormat:Mr.Z,PNGCompression:jr.Z,PVRTexture:Lr.Z,PVRTextureQuality:Nr.Z,RipcutImageRequestMode:Br.Z,RipcutLabelConfigurationRequestMode:_r},Ur=n(35498),qr=n(87172),Kr=n(75298),Vr={pluginName:"Ripcut",entry:Fr,createApi:function(e){var t=e.sdkSession,n=e.logger,r=e.clients,i=t.accessTokenProvider,o=t.managers.sessionManager;t.ripcutApi=new Ur.Z({ripcutClient:new qr.Z({config:t.config.services.ripcut,logger:n,httpClient:r.httpClient}),accessTokenProvider:i,sessionManager:o,logger:n})},applyConfig:function(e,t){var n,r,i,o;e.ripcut=new Kr.Z({baseUrl:null==t||null===(n=t.ripcut)||void 0===n||null===(r=n.client)||void 0===r?void 0:r.baseUrl,endpoints:e.processEndpoints(null==t||null===(i=t.ripcut)||void 0===i||null===(o=i.client)||void 0===o?void 0:o.endpoints)})}},Hr=n(4942),Gr=(n(57327),n(49337),n(31545)),Qr=function(){function e(t){(0,j.Z)(this,e);var n=t.exception,r=t.actionGrant,i=t.offDeviceRedemptionFlow,o=t.refreshToken,a=t.offerId;this.exception=n,this.actionGrant=r,this.offDeviceRedemptionFlow=i,this.refreshToken=o,this.offerId=a}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.OffDeviceTokenRefreshEvent"}}]),e}(),zr=n(2956),Wr=n(9493),Yr=n(15910),Jr=n(65550),Xr={FlowControlPolicy:zr.Z,FlowControlPolicyType:Wr.Z,SocketConnectionState:Yr.Z,MessageEnvelope:at.Z,SocketEvents:Jr.Z},$r=n(67324),ei=n(88988),ti=n(31386),ni=n(9989),ri=function(){function e(t){(0,j.Z)(this,e);var n=t.protocolHeaders,r=void 0===n?{}:n,i=t.regionalEndpointMapping,o=void 0===i?{}:i,a=t.supportedProtocols,s=void 0===a?[]:a,c=t.headers,u=void 0===c?{}:c;this.protocolHeaders=r,this.regionalEndpointMapping=o,this.supportedProtocols=s,this.headers=u}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Socket.SocketClientExtrasMap"}}]),e}(),ii=n(92522),oi=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({retryPolicy:U.Types.instanceStrict(ti.Z),messageDeduplicationStoreSize:U.Types.number,pingPolicy:U.Types.object({disabled:U.Types.boolean,pingInterval:U.Types.number,pingMaxAttempts:U.Types.number,pongTimeout:U.Types.number}),unacknowledgedEventBuffer:U.Types.object(tr.fP)})};U.typecheck.warn(this,n,arguments);var r=t.retryPolicy,i=t.messageDeduplicationStoreSize,o=t.pingPolicy,a=t.unacknowledgedEventBuffer;this.retryPolicy=r,this.messageDeduplicationStoreSize=i||100,this.pingPolicy=o,this.unacknowledgedEventBuffer=a}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Configuration.SocketManagerExtrasMap"}}]),e}();function ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ai(Object(n),!0).forEach((function(t){(0,Hr.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ai(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ci={pluginName:"Socket",entry:Xr,createApi:function(e){var t=e.sdkSession,n=e.logger,r=e.envelopeMessageRouter,i=t.managers.socketManager;t.socketApi=new ei.Z({socketManager:i,logger:n,envelopeMessageRouter:r})},createManager:function(e){var t=e.managers,n=e.logger,r=e.services,i=e.bootstrapConfiguration,o=e.deviceAttributeProvider,a=e.metadata.sourceUrn,s=t.tokenManager,c=t.sessionManager,u=t.deviceManager,l=new $r.Z({config:r.socket,clientConfig:r.socket.client,tokenManager:s,sessionManager:c,logger:n,environmentConfiguration:u.environmentConfiguration,bootstrapConfiguration:i,deviceAttributeProvider:o,sourceUrn:a,envelopeMessageQueue:e.envelopeMessageQueue});t.socketManager=l},onSdkSessionCreated:function(e){var t=e.sdkSession,n=e.logger,r=t.managers.socketManager;r.on(Jr.Z.tokenRefreshRequested,function(){var e=(0,ze.Z)(Xe().mark((function e(r){var i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.reason,e.next=3,t.reauthorize({reason:i});case 3:n.info(t.toString(),"Token refreshed due to web socket request.");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.on(Jr.Z.offDeviceTokenRefresh,(function(e){n.info(t.toString(),"Dispatch OffDeviceTokenRefresh event."),t.emit(Gr.Z.OffDeviceTokenRefresh,new Qr(e))}))},applyConfig:function(e,t){var n=t.socket,r=n.client,i=n.extras,o=r.endpoints,a=r.extras,s=i.retryPolicy,c=i.messageDeduplicationStoreSize,u=i.pingPolicy,l=i.unacknowledgedEventBuffer,p=new ti.Z(s),d=new ni.Z({baseUrl:r.baseUrl,endpoints:e.processEndpoints(o),extras:new ri(si(si({},{headers:e.commonHeaders}),a))});e.socket=new ii.Z({client:d,extras:new oi({retryPolicy:p,messageDeduplicationStoreSize:c,pingPolicy:u,unacknowledgedEventBuffer:l}),disabled:t.socket.disabled})}},ui=n(55814),li=n(21840),pi=n(71814),di=n(60839),yi=n(58637),fi=n(67584),hi=n(45905),vi={BundleStatus:ui.Z,Product:li.Z,ProductEntitlement:pi.Z,ProductStatus:di.Z,Subscription:yi.Z,SubscriptionProvider:fi.Z,SubscriptionSource:hi.Z},gi=n(77082),mi=n(71800),bi=n(86650),Ti=n(94353),ki=n(96532),Si=n(72887),Pi={pluginName:"Subscription",entry:vi,service:{SubscriptionStatus:mi.Z,SubscriptionExpiryType:Si.SubscriptionExpiryType,SubscriptionSourceSubType:Si.SubscriptionSourceSubType,SubscriptionSourceType:Si.SubscriptionSourceType,SubscriptionStatusSubType:Si.SubscriptionStatusSubType,SubscriptionStatusType:Si.SubscriptionStatusType,SubscriptionType:Si.SubscriptionType,SubscriptionOffer:bi.Z,SubscriptionFreeTrial:Ti.Z,SubscriptionFreeTrialStatus:Si.SubscriptionFreeTrialStatus,SubscriptionCancellation:ki.Z,SubscriptionCancellationReason:Si.SubscriptionCancellationReason,SubscriptionCancellationStatus:Si.SubscriptionCancellationStatus,BundleType:Si.BundleType},createApi:function(e){var t=e.sdkSession,n=e.logger,r=e.clients,i=t.accessTokenProvider;t.subscriptionApi=new gi.Z({subscriptionClient:r.subscriptionClient,accessTokenProvider:i,logger:n})}},Ei=n(69708),Zi=(n(26833),function(){function e(t){(0,j.Z)(this,e),this.value=U.Check.function(t)?t:function(){return t}}return(0,L.Z)(e,[{key:"generateValue",value:function(e){var t={payload:U.Types.object()};return(0,U.typecheck)(this,"generateValue",t,arguments),this.value(e)}},{key:"toString",value:function(){return"SDK.UserActivity.EventValue"}}]),e}()),wi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,j.Z)(this,e);var n={values:U.Types.custom((function(e){return U.Check.object(e)&&Object.values(e).every((function(e){return U.Check.instanceStrict(e,Zi)}))})).optional};(0,U.typecheck)(this,n,arguments),this.values=t}return(0,L.Z)(e,[{key:"setValue",value:function(e,t){var n={name:U.Types.nonEmptyString,value:U.Types.instanceStrict(Zi)};(0,U.typecheck)(this,"setValue",n,arguments),this.values[e]=t}},{key:"removeValue",value:function(e){var t={name:U.Types.nonEmptyString};(0,U.typecheck)(this,"removeValue",t,arguments),delete this.values[e]}},{key:"generateEventData",value:function(e){var t={trackingParameters:U.Types.object()};(0,U.typecheck)(this,"generateEventData",t,arguments);for(var n=this.values,r={},i=0,o=Object.keys(n);i<o.length;i++){var a=o[i];try{r[a]=n[a].generateValue(e)}catch(e){var s=e,c=s.stack;Array.isArray(r._failures)?r._failures.push(c):r._failures=[c]}}return r}},{key:"toString",value:function(){return"SDK.UserActivity.EventSchema"}}]),e}(),Di=n(42138),Ci=function(){function e(t,n){(0,j.Z)(this,e);var r={schemata:U.Types.array.of.instanceStrict(wi),passthrough:U.Types.boolean};(0,U.typecheck)(this,r,arguments),this.schemata=t,this.passthrough=n}return(0,L.Z)(e,[{key:"generateEventPayload",value:function(e){var t={trackingParameters:U.Types.object()};(0,U.typecheck)(this,"generateEventPayload",t,arguments);for(var n=this.schemata,r=this.passthrough,i=[],o=r?e:{},a=0,s=Object.keys(n);a<s.length;a++){var c=s[a],u=n[c].generateEventData(e);U.Check.nonEmptyArray(u._failures)&&(i.push.apply(i,(0,Di.Z)(u._failures)),delete u._failures),o=Object.assign(o,u)}return U.Check.nonEmptyArray(i)&&(o._failures=i),o}},{key:"toString",value:function(){return"SDK.UserActivity.EventSchemata"}}]),e}(),Ai=function(){function e(){(0,j.Z)(this,e),this.schemata={}}return(0,L.Z)(e,[{key:"setSchemata",value:function(e){var t={options:U.Types.object({event:U.Types.object(Ei.h),schemata:U.Types.array.of.instanceStrict(wi),passthrough:U.Types.boolean})};(0,U.typecheck)(this,"setSchemata",t,arguments);var n=this.schemata,r=e.event,i=e.schemata,o=e.passthrough;n[r.eventUrn]=new Ci(i,o)}},{key:"getSchemata",value:function(e){var t={event:U.Types.object(Ei.h)};(0,U.typecheck)(this,"getSchemata",t,arguments);var n=this.schemata;return n[e.eventUrn]||new Ci([],!0)}},{key:"toString",value:function(){return"SDK.UserActivity.EventSchemataProvider"}}]),e}(),Ri=n(40206),xi=n(3920),Oi=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({applicationContext:U.Types.in(Qt.ApplicationContext),isFatal:U.Types.boolean,source:U.Types.in(Qt.ErrorSource),errorId:U.Types.nonEmptyString,errorLevel:U.Types.in(Qt.ErrorLevel),errorName:U.Types.in(Qt.QoePlaybackError),errorLocalizationKey:U.Types.nonEmptyString.optional,dictionaryVersion:U.Types.nonEmptyString.optional,underlyingSdkError:U.Types.instanceStrict(xi.Z).optional,errorMessage:U.Types.nonEmptyString.optional})};(0,U.typecheck)(this,n,arguments);var r=t.applicationContext,i=t.isFatal,o=t.source,a=t.errorId,s=t.errorLevel,c=t.errorName,u=t.errorLocalizationKey,l=t.dictionaryVersion,p=t.underlyingSdkError,d=t.errorMessage;this.applicationContext=r,this.isFatal=i,this.source=o,this.errorId=a,this.errorLevel=s,this.errorName=c,this.errorLocalizationKey=u,this.dictionaryVersion=l,this.underlyingSdkError=p,this.errorMessage=d}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.QualityOfService.QoeError"}}]),e}(),Ii=n(1206),Mi=n(36047),ji=n(87891),Li=n(12719),Ni=n(4954),Bi=n(16471);function _i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_i(Object(n),!0).forEach((function(t){(0,Hr.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ui=tt.Z.qualityOfService,qi=tt.Z.userActivity.personalization,Ki=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({sessionManager:U.Types.instanceStrict(ot.Z),socketManager:U.Types.instanceStrict($r.Z),monotonicTimestampProvider:U.Types.object(Bi.z),logger:U.Types.instanceStrict(ji.Z)})};(0,U.typecheck)(this,n,arguments);var r=t.sessionManager,i=t.socketManager,o=t.monotonicTimestampProvider,a=t.logger;this.sessionManager=r,this.socketManager=i,this.trackingParameters={},this.schemataProvider=new Ai,this.monotonicTimestampProvider=o,this.logger=a,this.logger.info(this.toString(),"Created.")}var t,n,r;return(0,L.Z)(e,[{key:"sendContentReward",value:(r=(0,ze.Z)(Xe().mark((function e(t,n,r,i){var o,a,s,c,u=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={rewardToken:U.Types.nonEmptyString,contentId:U.Types.nonEmptyString,action:U.Types.nonEmptyString,recommendedContentIds:U.Types.array.of.nonEmptyString},(0,U.typecheck)(this,"sendContentReward",o,u),a=this.logger,s={rewardToken:t,rewardContentId:n,action:r,recommendedContentIds:i},a.dustEnabled&&(c=qi.contentRecommendationAward,new Ii.Z({category:Mi.Z.personalization,logger:a,source:this.toString(),urn:c,skipLogTransaction:!0,data:s}).log()),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"trackEvent",value:(n=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,d,y,f=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},r=f.length>2?f[2]:void 0,i=f.length>3?f[3]:void 0,o={event:U.Types.object(Ei.h),parameters:U.Types.object().optional,category:U.Types.in(Ni.c).optional,version:U.Types.nonEmptyString.optional},(0,U.typecheck)(this,"trackEvent",o,f),a=this.logger,s=this.schemataProvider,c=Fi(Fi({},this.trackingParameters),n),u=s.getSchemata(t),l=u.generateEventPayload(c),a.dustEnabled&&(d=t.eventUrn,p={},(0,Hr.Z)(p,Ni.c.AppQoe,Mi.Z.qoe),(0,Hr.Z)(p,Ni.c.Glimpse,Mi.Z.glimpse),y=p[r]||Mi.Z.glimpse,new Ii.Z({category:y,logger:a,source:this.toString(),urn:d,skipLogTransaction:!0,data:Fi(Fi({},l),{},{_failures:void 0}),dataVersion:i}).log()),e.abrupt("return",l);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setTrackingParameters",value:function(e){var t={trackingParameters:U.Types.object()};(0,U.typecheck)(this,"setTrackingParameters",t,arguments),this.trackingParameters=Object.assign(this.trackingParameters,e)}},{key:"trackExperimentExposure",value:(t=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,d,y,f,h,v,g=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={featureId:U.Types.nonEmptyString},(0,U.typecheck)(this,"trackExperimentExposure",n,g),r=this.sessionManager,i=this.socketManager,e.next=4,r.getInfo();case 4:return o=e.sent,a=o.id,s=o.account,c=o.device,u=o.experiments,l=U.Check.assigned(s)?null==s?void 0:s.id:c.id,p=u[t],d=p.version,y=p.variantId,f=a,h=(new Date).toISOString(),v={participantId:l,featureId:t,featureVersion:d,variantId:y,sessionId:f,exposureTimestamp:h},e.abrupt("return",i.sendExposureExperiment(v));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"logQoeError",value:function(e){var t={qoeError:U.Types.instanceStrict(Oi)};(0,U.typecheck)(this,"logQoeError",t,arguments);var n,r=this.logger,i=r.analyticsProvider,o={};if(r.dustEnabled){i&&(n=i.getDictionaryVersion(),o=i.getCommonProperties());var a=this.monotonicTimestampProvider.getTimestamp(),s=new Ri.Z(Fi(Fi({},e),{},{dictionaryVersion:n,data:o,monotonicTimestamp:a,mediaFetchSucceeded:!0})),c=new Ii.Z({category:Mi.Z.qoe,logger:r,source:this.toString(),urn:Ui.error,data:Fi({},s),skipLogTransaction:!0,dataVersion:(0,Li.y)(Ui.error)});c.log()}}},{key:"toString",value:function(){return"SDK.UserActivity.UserActivityApi"}}]),e}(),Vi=tt.Z.userActivity.glimpse;function Hi(e){return{eventUrn:e}}var Gi,Qi={GlimpseEvents:{appLaunched:Hi(Vi.appLaunched),backgroundPlaybackStarted:Hi(Vi.backgroundPlaybackStarted),backgroundPlaybackExited:Hi(Vi.backgroundPlaybackExited),contentSelected:Hi(Vi.contentSelected),searchViewLoaded:Hi(Vi.searchViewLoaded),playbackSelected:Hi(Vi.playbackSelected),playbackExited:Hi(Vi.playbackExited),purchaseCompleted:Hi(Vi.purchaseCompleted),purchaseCompletedv2:Hi(Vi.purchaseCompletedv2),viewLoaded:Hi(Vi.viewLoaded)}},zi={contentRecommendationAward:{eventUrn:tt.Z.userActivity.personalization.contentRecommendationAward}};!function(e){e.CLICK="CLICK"}(Gi||(Gi={}));var Wi={pluginName:"UserActivity",entry:{UserActivityApi:Ki,EventSchema:wi,EventSchemata:Ci,EventSchemataProvider:Ai,EventValue:Zi,Glimpse:Qi,Personalization:{PersonalizationEvents:zi,UserActivityAction:Gi},UserActivityEventCategory:Ni.c},dependencies:[ci],createApi:function(e){var t=e.sdkSession,n=e.logger,r=t.managers,i=r.sessionManager,o=r.socketManager,a=t.monotonicTimestampProvider;t.userActivityApi=new Ki({logger:n,sessionManager:i,socketManager:o,monotonicTimestampProvider:a})}},Yi=n(72431),Ji=n(37892),Xi=n(25824),$i=n(8535);function eo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var to=function(e){(0,B.Z)(n,e);var t=eo(n);function n(e,r){var i;(0,j.Z)(this,n),i=t.call(this,e);var o={logger:U.Types.instanceStrict(ji.Z).optional,userAgent:U.Types.nonEmptyString.optional};return(0,U.typecheck)((0,N.Z)(i),o,arguments),i.device=new Ji.Z(r),i}return(0,L.Z)(n,[{key:"getDeviceAttributes",value:function(){var e=this.device;return new Xi.Z({osDeviceIds:[],manufacturer:e.details.family,brand:"web",operatingSystem:e.platform||"UnknownWeb",operatingSystemVersion:e.platformVersion,browserName:e.browser||null,browserVersion:e.browserVersion||null,deviceLanguage:e.browserLanguage||void 0})}},{key:"toString",value:function(){return"SDK.Device.BrowserDeviceAttributeProvider"}}]),n}($i.Z),no=n(87020),ro=n(21288),io=n(35833),oo={BrowserDeviceAttributeProvider:to,DeviceAttributes:Xi.Z,DeviceAttributeProvider:$i.Z,DeviceMetadata:no.Z,OsDeviceId:ro.Z,OsDeviceIdType:io.Z},ao=n(48269),so=n(95),co=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({host:U.Types.nonEmptyString,path:U.Types.nonEmptyString,method:U.Types.nonEmptyString,statusCode:U.Types.number.optional,requestId:U.Types.nonEmptyString.optional,roundTripTime:U.Types.number.optional})};(0,U.typecheck)(this,n,arguments);var r=t.host,i=t.path,o=t.method,a=t.statusCode,s=t.requestId,c=t.roundTripTime;this.host=r,this.path=i,this.method=o,this.statusCode=a,this.requestId=s,this.roundTripTime=c}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Internal.Dust.DustServerPayload"}}]),e}(),uo=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({os:U.Types.nonEmptyString,model:U.Types.nonEmptyString,brand:U.Types.nonEmptyString.optional,modelFamily:U.Types.nonEmptyString.optional,platformId:U.Types.nonEmptyString.optional})};(0,U.typecheck)(this,n,arguments);var r=t.os,i=t.model,o=t.brand,a=t.modelFamily,s=t.platformId;this.os=r,this.model=i,this.brand=o,this.modelFamily=a||null,this.platformId=s}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Internal.Dust.DustDevicePayload"}}]),e}(),lo=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({version:U.Types.nonEmptyString,id:U.Types.nonEmptyString,name:U.Types.nonEmptyString})};(0,U.typecheck)(this,n,arguments);var r=t.version,i=t.id,o=t.name;this.version=r,this.id=i,this.name=o}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Internal.Dust.DustApplicationPayload"}}]),e}(),po=function(){function e(t){(0,j.Z)(this,e);var n={version:U.Types.nonEmptyString,platform:U.Types.nonEmptyString.optional};(0,U.typecheck)(this,n,arguments),this.version=t,this.platform="javascript"}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Internal.Dust.DustSdkPayload"}}]),e}(),yo=n(18479),fo=n(53169),ho=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({category:U.Types.nonEmptyString,device:U.Types.instanceStrict(uo),data:U.Types.object().optional,event:U.Types.nonEmptyString,application:U.Types.instanceStrict(lo),sdk:U.Types.instanceStrict(po),transactionId:U.Types.string.optional,correlationIds:U.Types.object().optional,timestamp:U.Types.dateString.optional,version:U.Types.nonEmptyString.optional,dataVersion:U.Types.nonEmptyString.optional})};(0,U.typecheck)(this,n,arguments);var r=t.category,i=t.device,o=t.data,a=void 0===o?{}:o,s=t.event,c=t.application,u=t.sdk,l=t.transactionId,p=t.correlationIds,d=t.timestamp,y=void 0===d?(new Date).toISOString():d,f=t.version,h=t.dataVersion;this.category=r,this.device=i,this.data=a,a&&null!=a&&a.experiments&&(a.experiments=yo.Z.convertSessionExperimentsToArray(null==a?void 0:a.experiments)),this.event=s,this.eventId=(0,fo.Z)(),this.application=c,this.sdk=u,this.transactionId=l,this.correlationIds=p,this.timestamp=y,this.version=f,this.dataVersion=h}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Internal.Dust.DustClientPayload"}}]),e}(),vo=n(31759);function go(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var mo=function(e){(0,B.Z)(n,e);var t=go(n);function n(e){var r;(0,j.Z)(this,n),r=t.call(this,e);{function i(e){return U.Check.nonEmptyObject(e)?U.Check.instanceStrict(e,co):U.Check.object(e)}var o={options:U.Types.object({server:U.Types.custom(i).optional,client:U.Types.instanceStrict(ho)})};(0,U.typecheck)((0,N.Z)(r),o,arguments)}return r}return(0,L.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Internal.Dust.DustPayload"}}]),n}(vo.Z);function bo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var To=function(e){(0,B.Z)(n,e);var t=bo(n);function n(e){var r;(0,j.Z)(this,n),r=t.call(this);{function i(e){return U.Check.nonEmptyObject(e)?U.Check.instanceStrict(e,co):U.Check.object(e)}var o={options:U.Types.object({client:U.Types.instanceStrict(ho),server:U.Types.custom(i).optional})};(0,U.typecheck)((0,N.Z)(r),o,arguments)}var a=e.server,s=void 0===a?{}:a,c=e.client;return r.client=c,r.server=s,r}return(0,L.Z)(n,[{key:"getPayload",value:function(){var e=this.server,t=this.client;return new mo({server:e,client:t})}},{key:"toString",value:function(){return"SDK.Internal.Dust.DustEvent"}}]),n}(so.Z),ko=n(73585),So=n(70187),Po=n(60387);function Eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var wo=function(e){(0,B.Z)(n,e);var t=Zo(n);function n(e){var r;(0,j.Z)(this,n),r=t.call(this);var i={logger:U.Types.instanceStrict(ji.Z)};return(0,U.typecheck)((0,N.Z)(r),i,arguments),r.queue=[],r.telemetryManager=null,r.eventBufferReady=!1,r.environment=null,r.application=null,r.enabled=!1,r.logger=e,r.initialized=!1,r}return(0,L.Z)(n,[{key:"log",value:function(e){var t=this.enabled,n=this.queue,r=Po.Z.getExtraData(e);return e.isPublic&&!r.isEdge&&n&&(t?this.postEvent(e):n.push(e)),Promise.resolve()}},{key:"enableDustSink",value:function(){this.enabled=!0}},{key:"emptySink",value:function(){for(var e=this.queue;e.length;)this.postEvent(e.shift())}},{key:"disableDustSink",value:function(){this.enabled=!1,this.queue=[]}},{key:"initializeDustSink",value:function(e){try{var t={options:U.Types.object({telemetryManager:U.Types.instanceStrict(ao.Z),environment:U.Types.object({device:U.Types.nonEmptyObject,sdk:U.Types.nonEmptyObject}),application:U.Types.nonEmptyObject.optional})};(0,U.typecheck)(this,"initializeDustSink",t,arguments);var n=e.telemetryManager,r=e.environment,i=e.application;this.application=new lo(i),this.environment={device:new uo(r.device),sdk:new po(r.sdk.version)},this.telemetryManager=n,this.initialized=!0}catch(e){throw(0,$.Kf)({description:e.message,exceptionData:So.Z.internal.invalidDustConfiguration})}}},{key:"createDustEvent",value:function(e){var t=this.environment,n=this.application,r=this.logger,i=t,o=i.device,a=i.sdk,s=Po.Z.getExtraData(e),c=U.Check.nonEmptyObject(r.correlationIds)?r.correlationIds:void 0,u=s.category,l=void 0===u?"urn:bamtech:dust:bamsdk:unknown":u,p=s.timestamp,d=s.error,y=s.dataVersion,f=s.server,h=void 0===f?{}:f,v=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eo(Object(n),!0).forEach((function(t){(0,Hr.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},s.data),g={};d&&(v.error=d),U.Check.nonEmptyObject(h)&&(g=new co(h));var m=new ho({application:n,device:o,sdk:a,category:l,correlationIds:c,data:v,event:e.message,timestamp:p,dataVersion:y});return new To({server:g,client:m})}},{key:"postEvent",value:function(e){try{var t=this.telemetryManager,n=Po.Z.getExtraData(e).category,r=this.createDustEvent(e);t&&(n===Mi.Z.qoe?t.qoeBuffer.postEvent(r):n===Mi.Z.glimpse?t.trackingBuffer.postEvent(r):t.eventBuffer.postEvent(r))}catch(e){this.logger.warn(this.toString(),"Error creating SDK.Internal.Dust.DustEvent ".concat(e.message))}}},{key:"toString",value:function(){return"SDK.Internal.Dust.DustSink"}}]),n}(ko.Z),Do=n(78641),Co=n(48387),Ao=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({invocation:U.Types.object(Co.j3),services:U.Types.array.of.object(Co.jx),startTime:U.Types.date,totalDuration:U.Types.number,error:U.Types.instanceStrict(Do.Z).optional,sdkInstanceId:U.Types.nonEmptyString})};(0,U.typecheck)(this,n,arguments);var r=t.invocation,i=t.services,o=t.startTime,a=t.totalDuration,s=t.error,c=t.sdkInstanceId;this.invocation=r,this.startTime=o.toISOString(),this.totalDuration=a,this.services=i,this.error=s?{code:s.name}:void 0,this.sdkInstanceId=c}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Internal.Dust.EdgeEvent"}}]),e}(),Ro=n(32696);function xo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var Oo=tt.Z.socket,Io=function(e){(0,B.Z)(r,e);var t,n=xo(r);function r(e,t){var i;(0,j.Z)(this,r),i=n.call(this);var o={logger:U.Types.instanceStrict(ji.Z),envelopeMessageRouter:U.Types.instanceStrict(Ro.Z)};return(0,U.typecheck)((0,N.Z)(i),o,arguments),i.envelopeMessageRouter=t,i.isEnabled=!0,i.logger=e,i}return(0,L.Z)(r,[{key:"log",value:function(e){var t=Po.Z.getExtraData(e);return this.isEnabled&&e.isPublic&&t.isEdge&&this.postEvent(e),Promise.resolve()}},{key:"enableEdgeSink",value:function(){this.isEnabled=!0}},{key:"disableEdgeSink",value:function(){this.isEnabled=!1}},{key:"createEdgeEvent",value:function(e){var t=Po.Z.getExtraData(e),n=t.urn,r=t.file,i=t.line,o=t.serviceRequests,a=t.startTime,s=t.totalDuration,c=t.error,u=t.sdkInstanceId;return new Ao({invocation:{urn:n,location:{file:r,line:i}},startTime:a,totalDuration:s,services:o,error:c,sdkInstanceId:u})}},{key:"postEvent",value:(t=(0,ze.Z)(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.createEdgeEvent(t),r=new at.Z({eventType:Oo.socketManager.event,schemaUrl:st.Z.event,data:n}),e.next=5,this.envelopeMessageRouter.route(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.logger.warn(this.toString(),"Error creating SDK.Internal.Dust.EdgeEvent ".concat(e.t0.message));case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return t.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Internal.Dust.EdgeSink"}}]),r}(ko.Z),Mo={DustSink:wo,DustEvent:To,EdgeEvent:Ao,EdgeSink:Io},jo=n(28892),Lo={Dust:Mo,Telemetry:{TelemetryManager:ao.Z,TelemetryEvent:so.Z,StreamSampleTelemetryEvent:jo.Z}},No=function(){function e(){(0,j.Z)(this,e)}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Logging.AnalyticsProvider"}}]),e}(),Bo=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({logger:U.Types.instanceStrict(ji.Z)})};(0,U.typecheck)(this,n,arguments);var r=t.logger;this.permitAppDustEvents=!1,this.logger=r,this.logger.info(this.toString(),"Created.")}var t;return(0,L.Z)(e,[{key:"registerCorrelationId",value:function(e,t){var n={id:U.Types.nonEmptyString,forProvider:U.Types.nonEmptyString};(0,U.typecheck)(this,"registerCorrelationId",n,arguments),this.logger.correlationIds[t]=e}},{key:"deregisterCorrelationId",value:function(e){var t={forProvider:U.Types.nonEmptyString};(0,U.typecheck)(this,"deregisterCorrelationId",t,arguments),delete this.logger.correlationIds[e]}},{key:"logDustEvent",value:(t=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o,a,s,c,u=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={dustEvent:U.Types.object({category:U.Types.nonEmptyString,event:U.Types.nonEmptyString,data:U.Types.nonEmptyObject.optional,server:U.Types.object({method:U.Types.nonEmptyString.optional}).optional})},(0,U.typecheck)(this,"logDustEvent",n,u),r=t.category,i=t.event,o=t.data,a=t.server,s=(a||{}).method,!this.permitAppDustEvents){e.next=7;break}return c=new Ii.Z({logger:this.logger,category:r,source:this.toString(),urn:i,data:o,payload:{method:s},skipLogTransaction:!0}),e.next=7,c.log();case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setAnalyticsProvider",value:function(e){var t={analyticsProvider:U.Types.instanceStrict(No)};(0,U.typecheck)(this,"setAnalyticsProvider",t,arguments),this.logger.analyticsProvider=e}},{key:"getAnalyticsProvider",value:function(){return this.logger.analyticsProvider}},{key:"correlationIDs",value:function(){return this.logger.correlationIds}},{key:"enableCustomDustEvents",value:function(){this.permitAppDustEvents=!0}},{key:"toString",value:function(){return"SDK.Logging.LoggingApi"}}]),e}(),_o=n(33044),Fo=n(52662),Uo=function(){function e(t){(0,j.Z)(this,e);var n=t||{},r=n.isPublic,i=n.level,o=n.name,a=n.extraData;this.isPublic=r||!1,this.level=i||null,this.name=o||"",this.extraData=a||{}}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Logging.Metric"}}]),e}(),qo=n(2578),Ko=0,Vo={timestamp:function(){if("undefined"!=typeof performance&&"function"==typeof performance.now)return performance.now();var e,t=Date.now();return Ko=e=Ko>t?t+(Ko-t)+1:t,e}},Ho=function(){function e(){(0,j.Z)(this,e)}return(0,L.Z)(e,[{key:"getTimestamp",value:function(){return Math.round(Vo.timestamp()-e.startTimestamp)}},{key:"toString",value:function(){return"SDK.Logging.MonotonicTimestampProvider"}}]),e}();(0,Hr.Z)(Ho,"startTimestamp",Vo.timestamp());var Go,Qo=Object.assign(ji.Z.instance,{LoggingApi:Bo,Logger:ji.Z,LogEvent:Po.Z,LogSink:Object.assign(ko.Z,{ConsoleSink:qo.Z}),LogLevel:_o.Z,LogTransaction:Fo.Z,Metric:Uo,AnalyticsProvider:No,MonotonicTimestampProvider:Ho}),zo=n(64932),Wo=n(75742),Yo=n(49160),Jo=function(){function e(t){(0,j.Z)(this,e);var n={baseUrl:U.Types.nonEmptyString};(0,U.typecheck)(this,n,arguments),this.baseUrl=t}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Configuration.ConfigurationClientHostParams"}}]),e}(),Xo=n(4484),$o=n(47549),ea=n(7980),ta=n(58405),na=n(10664),ra=n(47539),ia=n(62339),oa=n(61530),aa=n(19307),sa=n(41408),ca=n(53034),ua=n(55765),la=n(61205),pa={BootstrapConfiguration:zo.Z,ConfigurationClientConfiguration:Wo.Z,ConfigurationClientExtrasMap:Yo.Z,ConfigurationClientHostParams:Jo,ConfigurationHostName:Xo.Z,OrchestrationManagerConfiguration:$o.Z,Platform:ea.Z,PlatformProfileReference:ta.Z,SdkSessionConfiguration:na.Z,ServiceConfiguration:ra.Z,ServiceEnvironmentName:ia.Z,ServiceDefinitionsConfiguration:oa.Z,TelemetryManagerConfiguration:aa.Z,TelemetryManagerExtrasMap:sa.Z,TokenManagerConfiguration:ca.Z,TokenManagerExtrasMap:ua.Z,TelemetryBufferConfiguration:la.Z,RetryPolicy:ti.Z,HttpMethod:K.Z},da=n(40176),ya=n(77831),fa=n(10869),ha={ErrorReason:xi.Z,ErrorCode:da.Z,ExceptionReference:So.Z,InvalidArgumentException:ya.Z,ProviderException:fa.Z,ServiceException:Do.Z},va=n(84191),ga=n(80761),ma=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({tokenType:U.Types.nonEmptyString,token:U.Types.nonEmptyString})};(0,U.typecheck)(this,n,arguments);var r=t.tokenType,i=t.token;this.tokenType=r,this.token=i}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.GraphQl.GraphQlAccountDelegationRefreshToken"}}]),e}(),ba={GraphQlClient:va.Z,GraphQlRequest:ga.Z,GraphQlAccountDelegationRefreshToken:ma},Ta=n(81143),ka=n(62221),Sa=n(67230),Pa=n(580),Ea=n(25888),Za=n(26957),wa={ExchangeDeviceGrantForAccessTokenRequest:ka.Z,OrchestrationRequest:Sa.Z,RefreshTokenRequest:Pa.Z,RegisterDeviceRequest:Ea.Z,UpdateDeviceOperatingSystemRequest:Za.Z},Da={OffDeviceRedemptionFlowServiceMap:Ta.Z,Internal:wa},Ca=n(66311),Aa=n(47940),Ra=n(42658),xa=n(97682),Oa=n(66796),Ia=n(23404);n(69826),function(e){e.other="other",e.success="com.disneystreaming.sdp.http.Success",e.unknownTypeError="com.disneystreaming.sdp.http.UnknownTypeError",e.jsonDustEventDecodeError="com.disneystreaming.sdp.http.JsonEventDecodeError"}(Go||(Go={}));var Ma=Go,ja=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({_type:U.Types.string,message:U.Types.nonEmptyString.optional})};U.typecheck.warn(this,n,arguments);var r=t._type,i=t.message,o=Object.values(Ma).find((function(e){return e===r}));this.validationResultType=o||Ma.other,this.message=i}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.ValidationResult"}}]),e}();function La(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var Na=function(e){(0,B.Z)(n,e);var t=La(n);function n(e){var r;(0,j.Z)(this,n),r=t.call(this,e);var i={options:U.Types.object({errors:U.Types.array.of.nonEmptyString.optional})};U.typecheck.warn((0,N.Z)(r),i,arguments);var o=e.errors;return r.errors=o,r}return(0,L.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.ValidationResultJsonDustEventDecodeError"}}]),n}(ja);function Ba(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var _a=function(e){(0,B.Z)(n,e);var t=Ba(n);function n(){return(0,j.Z)(this,n),t.apply(this,arguments)}return(0,L.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.ValidationResultSuccess"}}]),n}(ja);function Fa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var Ua=function(e){(0,B.Z)(n,e);var t=Fa(n);function n(e){var r;(0,j.Z)(this,n),r=t.call(this,e);var i={options:U.Types.object({receivedType:U.Types.nonEmptyString.optional})};U.typecheck.warn((0,N.Z)(r),i,arguments);var o=e.receivedType;return r.receivedType=o,r}return(0,L.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.ValidationResultUnknownTypeError"}}]),n}(ja),qa={TelemetryClientConfiguration:Ca.Z,TelemetryClient:Aa.Z,TelemetryPayload:vo.Z,TelemetryResponse:Ra.Z,HoraValidatedTelemetryResponse:xa.Z,HoraValidationResultType:{success:"Success",horaFailure:"HoraFailure",sdpFailure:"SdpFailure",multipleFailures:"MultipleFailures",schemaParsingFailure:"SchemaParsingFailure",healthCheckFailure:"HealthCheckFailure",internalServerError:"InternalServerError",unableToReachServer:"UnableToReachServer",dataValidationFailure:"DataValidationFailure",noValidationPerformed:"NoValidationPerformed"},HoraValidationSource:{hora:"Hora",sdp:"Sdp",root:"Root",edsMl:"EdsMl"},StreamSamplePayload:Oa.Z,StreamSampleClientPayload:Ia.Z,ValidationResult:ja,ValidationResultJsonDustEventDecodeError:Na,ValidationResultSuccess:_a,ValidationResultType:Ma,ValidationResultUnknownTypeError:Ua},Ka={DustApplicationPayload:lo,DustCategory:Mi.Z,DustClientPayload:ho,DustDecorators:nt.Z,DustDevicePayload:uo,DustLogUtility:Ii.Z,DustPayload:mo,DustSdkPayload:po,DustServerPayload:co,DustUrnReference:tt.Z},Va=n(73492),Ha=n(14008),Ga={Telemetry:qa,Dust:Ka,TokenUpdater:Va.Z,PlatformProviders:Ha.Z},Qa=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({experimentPlatform:U.Types.in(Qt.ExperimentPlatform),experimentFeatureId:U.Types.nonEmptyString,experimentId:U.Types.nonEmptyString,variantId:U.Types.nonEmptyString})};(0,U.typecheck)(this,n,arguments);var r=t.experimentPlatform,i=t.experimentFeatureId,o=t.experimentId,a=t.variantId;this.experimentPlatform=r,this.experimentFeatureId=i,this.experimentId=o,this.variantId=a}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.Services.QualityOfService.ExperimentsDetails"}}]),e}(),za=n(25745),Wa=n(72462),Ya=n(82209),Ja=n(66229),Xa=n(6456),$a=n(85569),es=n(67045),ts=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({pqmVersion:U.Types.nonEmptyString.optional,pqmGroupId:U.Types.nonEmptyString.optional,snapshotEvents:U.Types.array.of.object(es.SnapshotEventTypedef).optional,playbackSessionId:U.Types.nonEmptyString.optional,productType:U.Types.in(Qt.ProductType).optional,networkType:U.Types.in(Qt.NetworkType).optional,presentationType:U.Types.in(Qt.PresentationType).optional,monotonicTimestamp:U.Types.number.optional,contentKeys:U.Types.object().optional,data:U.Types.object().optional,mediaFetchSucceeded:U.Types.boolean,qoe:U.Types.object().optional,programBoundaryInfoBlock:U.Types.nonEmptyString.optional}).optional};U.typecheck.warn(this,n,arguments);var r=t||{},i=r.pqmVersion,o=r.pqmGroupId,a=r.snapshotEvents,s=r.playbackSessionId,c=r.productType,u=r.networkType,l=r.presentationType,p=r.monotonicTimestamp,d=r.contentKeys,y=r.mediaFetchSucceeded,f=r.programBoundaryInfoBlock,h=r.data,v=void 0===h?{}:h,g=r.qoe,m=void 0===g?{}:g;this.pqmVersion=i||"0.0.0",this.pqmGroupId=o||"-1",this.snapshotEvents=a,this.playbackSessionId=s,this.productType=c,this.networkType=u||Qt.NetworkType.unknown,this.presentationType=l,this.monotonicTimestamp=p,this.contentKeys=d||{},this.data=v||{},this.mediaFetchSucceeded=null==y||y,this.programBoundaryInfoBlock=f,this.setData(v),this.setData(m)}return(0,L.Z)(e,[{key:"setData",value:function(e){Object.assign(this,e)}},{key:"toString",value:function(){return"SDK.Services.QualityOfService.PlaybackSnapshotEventData"}}]),e}(),ns=n(73688),rs={ApplicationContext:Qt.ApplicationContext,BufferType:Qt.BufferType,ErrorEventData:Ri.Z,ErrorLevel:Qt.ErrorLevel,ErrorSource:Qt.ErrorSource,ExperimentPlatform:Qt.ExperimentPlatform,ExperimentsDetails:Qa,FetchStatus:Qt.FetchStatus,HeartbeatSampleType:Qt.HeartbeatSampleType,HttpMethod:Qt.HttpMethod,InterstitialActivity:Qt.InterstitialActivity,InterstitialEventData:za.Z,InterstitialInsertionType:Qt.InterstitialInsertionType,InterstitialPlacement:Qt.InterstitialPlacement,InterstitialType:Qt.InterstitialType,mapHiveToQoeErrorCodes:Wa.Z,MediaFetchError:Qt.MediaFetchError,MediaSegmentType:Qt.MediaSegmentType,NetworkError:Qt.NetworkError,NetworkType:Qt.NetworkType,PlaybackActivity:Qt.PlaybackActivity,PlaybackAdEventData:Ya.Z,PlaybackCustomEventData:Ja.Z,PlaybackEventData:Xa.Z,PlaybackExitedCause:Qt.PlaybackExitedCause,PlaybackHeartbeatEventData:$a.Z,PlaybackIntent:Qt.PlaybackIntent,PlaybackMode:Qt.PlaybackMode,PlaybackPausedCause:Qt.PlaybackPausedCause,PlaybackResumedCause:Qt.PlaybackResumedCause,PlaybackSeekCause:Qt.PlaybackSeekCause,PlaybackSnapshotEventData:ts,PlaybackStartupEventData:zt.Z,PlaybackState:Qt.PlaybackState,PlayerSeekDirection:Qt.PlayerSeekDirection,PlaylistBitrateType:Qt.PlaylistBitrateType,ProductType:Qt.ProductType,QoeError:Oi,QoePlaybackError:Qt.QoePlaybackError,SeekDirection:Qt.SeekDirection,ServerRequest:ns.Z,SkipType:Qt.SkipType,StartupActivity:Qt.StartupActivity,AdActivity:Qt.AdActivity,AdInsertionType:Qt.AdInsertionType,ApplicationProtocol:Qt.ApplicationProtocol,AudioTrackType:Qt.AudioTrackType,PodPosition:Qt.PodPosition,PresentationType:Qt.PresentationType,SnapshotEventType:Qt.SnapshotEventType,SnapshotNextAction:Qt.SnapshotNextAction,SnapshotDownloadDataType:Qt.SnapshotDownloadDataType,SnapshotDownloadFailure:Qt.SnapshotDownloadFailure,TimedTextTrackType:Qt.TimedTextTrackType},is={LocationType:n(50786).Z,SessionInfo:yo.Z},os=n(22243),as={CancellationType:os.CancellationType,RiskState:os.RiskState,SourceSubType:os.SourceSubType,StackingStatus:os.StackingStatus,SubscriberPeriod:os.SubscriberPeriod,SubscriberStatus:os.SubscriberStatus,SubscriptionState:os.SubscriptionState},ss=n(23731),cs=n(70928),us=n(80920);function ls(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var ps,ds=function(e){(0,B.Z)(n,e);var t=ls(n);function n(e){var r;(0,j.Z)(this,n);var i=e;return(r=t.call(this,i,"urn:ietf:params:oauth:token-type:access_token")).accessToken=e,r}return(0,L.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Token.AccessTokenDelegation"}}]),n}(us.Z);!function(e){e.device="Device",e.account="Account",e.accountWithoutActiveProfile="AccountWithoutActiveProfile"}(ps||(ps={}));var ys,fs=ps,hs=n(46516),vs=n(19436),gs=n(58761),ms=n(72667),bs=n(36630),Ts=n(58052),ks=n(80921),Ss=n(431),Ps=n(98289),Es=n(40937),Zs={AccessContext:ss.Z,AccessToken:cs.Z,AccessTokenDelegation:ds,AccessTokenType:fs,DeviceGrant:hs.Z,DelegationToken:us.Z,Grant:vs.Z,RefreshTokenDelegation:gs.Z,RefreshGrant:ms.Z,ExchangeGrant:bs.Z,TokenClient:Ts.Z,TokenClientConfiguration:ks.Z,TokenClientExtrasMap:Ss.Z,TokenRequest:Ps.Z,TokenRequestBuilder:Es.Z},ws=n(7694),Ds=n(79337),Cs=n(40467),As=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([.,]\d+(?!:))?)?(\17[0-5]\d([.,]\d+)?)?(Z|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,Rs=n(20987),xs=n(24965),Os=n(35493),Is=n(37736),Ms=n(88534),js={handleServiceResponse:ws.Z,delay:Ds.Z,getScope:Cs.Z,adEngineRegex:un.Z,dateRegex:function(e){return As.test(e)},circularReplacer:cn.Z,toUpperFirst:function(e){if(U.Check.nonEmptyString(e)){var t=e.toLowerCase();return t.substr(0,1).toUpperCase()+t.substr(1)}},appendQuerystring:H.Z,hasLocalStorage:Rs.Z,replaceHeaders:xs.Z,replaceUrl:Os.Z,monotonicClock:Vo,parseUrl:Is.Z,isValidURL:Ms.Z,uuidv4:fo.Z};!function(e){e.authenticate="Login",e.forgotPassword="ForgotPassword",e.changeEmail="ChangeEmail",e.changePassword="ChangePassword"}(ys||(ys={}));var Ls={Bam:{OneTimePasscodeRequestReason:ys}},Ns={get Configuration(){return pa},get Exception(){return ha},get GraphQl(){return ba},get Internal(){return Ga},get Identity(){return Ls},get Orchestration(){return Da},get QualityOfService(){return rs},get Session(){return is},get Subscriber(){return as},get Token(){return Zs},get Util(){return js},get PlatformProviders(){return Ha.Z}},Bs=n(357),_s=n(37347),Fs=n(70986),Us=n(57797),qs=function(){function e(){(0,j.Z)(this,e)}return(0,L.Z)(e,[{key:"refreshAccessToken",value:function(e){return new Promise((function(e,t){return t(new Error("not-implemented"))}))}},{key:"toString",value:function(){return"SDK.Token.AccessTokenUpdater"}}]),e}(),Ks=n(43473),Vs=n(87360),Hs=n(19966),Gs=n(55758),Qs={GeoLocation:Bs.Z,get GeoProvider(){return _s.Z.GeoProvider},AccessContextState:Fs.Z,Access:Us.Z,AccessTokenUpdater:qs,AccessToken:Ks.Z,AccessState:Vs.Z,AccessStateData:Hs.Z,TokenRefreshFailure:Gs.Z},zs=n(36109),Ws=n(17187),Ys=n(55322),Js=n(58665),Xs=n(74325),$s=n(27216),ec=n(41824),tc=n(82616),nc=n(7135),rc=n(95400),ic=n(43469),oc=n(76073),ac=n(60439),sc=n(9978),cc=n(7607),uc=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({deviceGrant:U.Types.instanceStrict(hs.Z),access:U.Types.instanceStrict(Us.Z),sessionInfo:U.Types.instanceStrict(yo.Z),accountDelegationRefreshToken:U.Types.nonEmptyString.optional,featureFlags:U.Types.object()})};(0,U.typecheck)(this,n,arguments);var r=t.deviceGrant,i=t.access,o=t.sessionInfo,a=t.accountDelegationRefreshToken,s=t.featureFlags;this.deviceGrant=r,this.access=i,this.sessionInfo=o,this.accountDelegationRefreshToken=a||null,this.featureFlags=s}return(0,L.Z)(e,[{key:"toString",value:function(){return"SDK.InitializationState"}}],[{key:"createWithSdkExtensionInfo",value:function(t){var n={options:U.Types.object({sdk:U.Types.object({grant:U.Types.object({device:U.Types.object()}),session:U.Types.nonEmptyObject,featureFlags:U.Types.object().optional,token:U.Types.object(),accountDelegationRefreshToken:U.Types.object({tokenType:U.Types.nonEmptyString,token:U.Types.nonEmptyString}).optional}),region:U.Types.nonEmptyString.optional,provider:U.Types.nonEmptyString.optional})};(0,U.typecheck)(this,"createWithSdkExtensionInfo",n,arguments);var r=t.region,i=t.sdk,o=t.provider,a=i.grant.device,s=a.grantType,c=a.assertion,u=i.accountDelegationRefreshToken||{},l=u.token,p=void 0===l?null:l,d=new hs.Z(s,c),y=i.token,f=y.accessToken,h=y.tokenType,v=y.refreshToken,g=y.expiresIn,m=y.accessTokenType,b=new ss.Z({token:f,tokenType:h,refreshToken:v,expiresIn:g,region:r,accessTokenType:m}),T=[];o&&T.push(o);var k=new Fs.Z(T),S=new Us.Z(b,k),P=yo.Z.create(i.session),E=i.featureFlags||{};return new e({deviceGrant:d,access:S,sessionInfo:P,accountDelegationRefreshToken:p,featureFlags:E})}},{key:"deserialize",value:function(t){var n=t.featureFlags,r=void 0===n?{}:n,i=t.deviceGrant,o=i.grantType,a=i.assertion,s=new hs.Z(o,a),c=new ss.Z(t.access.context),u=new Fs.Z(t.access.contextState.modes);return new e({deviceGrant:s,access:new Us.Z(c,u),sessionInfo:yo.Z.create(t.sessionInfo),accountDelegationRefreshToken:t.accountDelegationRefreshToken||null,featureFlags:r})}}]),e}();function lc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var pc,dc,yc,fc,hc,vc,gc,mc,bc,Tc,kc,Sc,Pc,Ec,Zc,wc=function(e){(0,B.Z)(n,e);var t=lc(n);function n(){return(0,j.Z)(this,n),t.apply(this,arguments)}return(0,L.Z)(n,[{key:"toString",value:function(){return"SDK.ReauthorizationFailure"}}]),n}(Gs.Z),Dc=n(96497),Cc=function(){function e(t){(0,j.Z)(this,e);var n={options:U.Types.object({telemetryManager:U.Types.instanceStrict(ao.Z),logger:U.Types.instanceStrict(ji.Z)})};(0,U.typecheck)(this,n,arguments);var r=t.telemetryManager,i=t.logger;this.telemetryManager=r,this.glimpseBuffer=r.trackingBuffer,this.qoeBuffer=r.qoeBuffer,this.logger=i,this.logger.info(this.toString(),"Created.")}return(0,L.Z)(e,[{key:"enable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={diagnosticFeature:U.Types.in(Dc.Z),useProxy:U.Types.boolean.optional};(0,U.typecheck)(this,"enable",n,arguments);var r=this.getEventBuffer(e);r.enableValidation(t)}},{key:"disable",value:function(e){var t={diagnosticFeature:U.Types.in(Dc.Z)};(0,U.typecheck)(this,"disable",t,arguments);var n=this.getEventBuffer(e);n.disableValidation()}},{key:"isEnabled",value:function(e){var t={diagnosticFeature:U.Types.in(Dc.Z)};(0,U.typecheck)(this,"isEnabled",t,arguments);var n=this.getEventBuffer(e);return n.isValidationEnabled()}},{key:"getEventBuffer",value:function(e){switch(e){case Dc.Z.glimpseValidation:return this.glimpseBuffer;default:return this.qoeBuffer}}},{key:"toString",value:function(){return"SDK.DiagnosticsApi"}}]),e}(),Ac=n(89565),Rc=n(81350),xc=n(31880),Oc=n(19496);function Ic(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var Mc,jc=tt.Z.sdkSession,Lc=nt.Z.apiMethodDecorator.bind(null,jc),Nc=(pc=Lc(),dc=Lc({paramTypes:{options:U.Types.object({userToken:U.Types.nonEmptyString})}}),yc=Lc({skipDustLogUtility:!0}),fc=Lc(),hc=Lc({skipDustLogUtility:!0,paramTypes:{options:U.Types.object({reason:U.Types.nonEmptyString.optional}).optional}}),vc=Lc(),gc=Lc(),mc=Lc({paramTypes:{accessState:U.Types.nonEmptyString}}),bc=Lc({skipDustLogUtility:!0,paramTypes:{grant:U.Types.nonEmptyString,provider:U.Types.nonEmptyString}}),Tc=Lc({paramTypes:{delegationToken:U.Types.instanceStrict(us.Z),provider:U.Types.nonEmptyString}}),kc=Lc({paramTypes:{provider:U.Types.nonEmptyString}}),Sc=Lc(),Pc=Lc({paramTypes:{featureId:U.Types.nonEmptyString}}),Ec=Lc(),Zc=function(e){(0,B.Z)(w,e);var t,n,r,i,a,s,c,u,l,p,d,y,h,v,g,m,b,T,k,S,P,E,Z=Ic(w);function w(e){var t,n;(0,j.Z)(this,w),n=Z.call(this),(0,Hr.Z)((0,N.Z)(n),"commerceApi",null),(0,Hr.Z)((0,N.Z)(n),"mediaApi",null),(0,Hr.Z)((0,N.Z)(n),"socketApi",null),(0,Hr.Z)((0,N.Z)(n),"purchaseApi",null),(0,Hr.Z)((0,N.Z)(n),"paywallApi",null),(0,Hr.Z)((0,N.Z)(n),"contentApi",null),(0,Hr.Z)((0,N.Z)(n),"invoiceApi",null),(0,Hr.Z)((0,N.Z)(n),"accountApi",null),(0,Hr.Z)((0,N.Z)(n),"userActivityApi",null),(0,Hr.Z)((0,N.Z)(n),"entitlementApi",null),(0,Hr.Z)((0,N.Z)(n),"exploreApi",null),(0,Hr.Z)((0,N.Z)(n),"flexApi",null),(0,Hr.Z)((0,N.Z)(n),"qrCodeApi",null),(0,Hr.Z)((0,N.Z)(n),"ripcutApi",null);var r={options:U.Types.object({sdkSessionConfiguration:U.Types.instanceStrict(na.Z),logger:U.Types.instanceStrict(ji.Z),managers:U.Types.object({deviceManager:U.Types.instanceStrict(Js.Z),tokenManager:U.Types.instanceStrict(rc.Z),telemetryManager:U.Types.instanceStrict(ao.Z),sessionManager:U.Types.instanceStrict(ot.Z)}),clients:U.Types.object({httpClient:U.Types.instanceStrict(Oc.Z),orchestrationClient:U.Types.instanceStrict(cc.Z)}),metadata:U.Types.object({clientId:U.Types.nonEmptyString,clientApiKey:U.Types.nonEmptyString,environment:U.Types.keyIn(ia.Z),debugEnabled:U.Types.boolean}),providers:U.Types.object({accessTokenProvider:U.Types.instanceStrict($s.Z),advertisingIdProvider:U.Types.instanceStrict(f.Z),geoProvider:U.Types.instanceStrict(_s.Z.GeoProvider),mediaCapabilitiesProvider:U.Types.instanceStrict(xt.Z),monotonicTimestampProvider:U.Types.object(Bi.z),platformMetricsProvider:U.Types.instanceStrict(Cr.Z),storage:U.Types.object({accessStorage:U.Types.instanceStrict(ec.Z),accountDelegationRefreshTokenStorage:U.Types.instanceStrict(tc.Z),deviceGrantStorage:U.Types.instanceStrict(nc.Z),featureFlagsStorage:U.Types.instanceStrict(ic.Z),sessionInfoStorage:U.Types.instanceStrict(ac.Z),storage:U.Types.instanceStrict(Ac.Z)})}),sdkInstanceId:U.Types.nonEmptyString,envelopeMessageRouter:U.Types.instanceStrict(Ro.Z),sourceUrn:U.Types.nonEmptyString})};(0,U.typecheck)((0,N.Z)(n),r,arguments);var i=e.sdkSessionConfiguration,o=e.logger,a=e.managers,s=e.clients,c=e.metadata,u=e.providers,l=u.accessTokenProvider,p=u.advertisingIdProvider,d=u.browserInfoProvider,y=u.geoProvider,h=u.mediaCapabilitiesProvider,v=u.monotonicTimestampProvider,g=u.platformMetricsProvider,m=u.storage,b=m.accessStorage,T=m.accountDelegationRefreshTokenStorage,k=m.deviceGrantStorage,S=m.featureFlagsStorage,P=m.sessionInfoStorage,E=m.storage,D=e.sdkInstanceId,C=e.envelopeMessageRouter,A=e.sourceUrn;return n.config=i,n.environmentConfiguration=null===(t=a.configurationManager)||void 0===t?void 0:t.environmentConfiguration,n.accessStorage=b,n.deviceGrantStorage=k,n.accountDelegationRefreshTokenStorage=T,n.sessionInfoStorage=P,n.featureFlagsStorage=S,n.logger=o,n.geoProvider=y,n.mediaCapabilitiesProvider=h,n.platformMetricsProvider=g,n.advertisingIdProvider=p,n.browserInfoProvider=d,n.managers=a,n.accessTokenProvider=l,n.clientApiKey=c.clientApiKey||"",n.clientId=c.clientId||"",n.environment=c.environment||"",n.version=zs.Z.version,n.versionShort=zs.Z.versionShort,n.debugEnabled=c.debugEnabled||!1,n.monotonicTimestampProvider=v,n.storage=E,Yi.getPlugins().forEach((function(e){e.createApi&&e.createApi({sdkSession:(0,N.Z)(n),logger:o,envelopeMessageRouter:C,clients:s,sourceUrn:A})})),n.loggingApi=new Bo({logger:n.logger}),n.diagnosticsApi=new Cc({telemetryManager:n.managers.telemetryManager,logger:n.logger}),n.orchestrationApi=new oc.Z({orchestrationManager:n.managers.orchestrationManager,logger:n.logger}),n.deviceAttributeProvider=n.managers.deviceManager.deviceAttributeProvider,n.isInitialized=!1,n.sdkInstanceId=D,n.isDisposed=!1,n.logger.info(n.toString(),"Created."),n}return(0,L.Z)(w,[{key:"attachLateBoundPlugin",value:function(e,t){var n=[t];return this.attachLateBoundPlugins(e,n)}},{key:"attachLateBoundPlugins",value:function(e,t){return Yi.attachLateBoundPlugin(e,this,t)}},{key:"initialize",value:(E=(0,ze.Z)(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.internalInitialize(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return E.apply(this,arguments)})},{key:"initializeWithUserToken",value:(P=(0,ze.Z)(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.internalInitialize(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return P.apply(this,arguments)})},{key:"getInitializationState",value:(S=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwErrorIfDisposed(),n=this.deviceGrantStorage.getDeviceGrant(),r=this.accessStorage.getAccess(),e.next=5,this.sessionInfoStorage.getSessionInfo();case 5:return i=e.sent,o=this.accountDelegationRefreshTokenStorage.getAccountDelegationRefreshToken(),e.next=9,this.featureFlagsStorage.getFeatureFlags();case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:return a=e.t0,e.abrupt("return",new uc({deviceGrant:n,access:r,sessionInfo:i,accountDelegationRefreshToken:o,featureFlags:a}));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)})},{key:"initializeWithState",value:(k=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o,a,s,c,u=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwErrorIfDisposed(),n={initializationState:U.Types.instanceStrict(uc)},(0,U.typecheck)(this,"initializeWithState",n,u),!this.isInitialized){e.next=4;break}throw this.createAlreadyInitializedException();case 4:if(r=t.deviceGrant,i=t.access,o=t.sessionInfo,a=t.accountDelegationRefreshToken,s=t.featureFlags,c=[this.deviceGrantStorage.saveDeviceGrant(r),this.accessStorage.saveAccess(i),this.sessionInfoStorage.saveSessionInfo(o),this.featureFlagsStorage.saveFeatureFlags(s)],!a){e.next=10;break}c.push(this.accountDelegationRefreshTokenStorage.saveAccountDelegationRefreshToken(a)),e.next=12;break;case 10:return e.next=12,this.accountDelegationRefreshTokenStorage.clear();case 12:return e.next=14,Promise.all(c);case 14:this.isInitialized=!0,this.enableDustSink();case 16:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"reset",value:(T=(0,ze.Z)(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwErrorIfDisposed(),e.abrupt("return",this.internalReset(t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return T.apply(this,arguments)})},{key:"reauthorize",value:(b=(0,ze.Z)(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwErrorIfDisposed(),e.abrupt("return",this.internalReauthorize(t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"getSessionToken",value:(m=(0,ze.Z)(Xe().mark((function e(){var t,n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwErrorIfDisposed(),this.logger.info(this.toString(),"Getting current session/access token."),(n=this.accessTokenProvider.getAccessToken())?t=n.token:this.logger.info(this.toString(),"Current session/access token is not defined."),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"getAccessState",value:(g=(0,ze.Z)(Xe().mark((function e(){var t,n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwErrorIfDisposed(),this.logger.info(this.toString(),"Get access state."),n=JSON.stringify(null===(t=this.managers.tokenManager)||void 0===t?void 0:t.getAccessState()),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"restoreAccessState",value:(v=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o,a,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwErrorIfDisposed(),i=(r=t).logTransaction,o=(0,X.Z)(r.args,1),a=o[0],(s=this.logger).info(this.toString(),"Restore access state from another device or SDK instance."),!this.isInitialized){e.next=8;break}throw s.warn(this.toString(),"Already initialized."),this.createAlreadyInitializedException();case 8:return e.next=10,this.internalReset(t);case 10:return e.next=12,null===(n=this.managers.tokenManager)||void 0===n?void 0:n.restoreAccessState(a,i);case 12:this.isInitialized=!0,this.enableDustSink();case 14:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"authorize",value:(h=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,a,s,c,u,l;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwErrorIfDisposed(),i=(r=t).logTransaction,a=(0,X.Z)(r.args,2),s=a[0],c=a[1],u=new Fs.Z([c]),l=new o.Z({assertion:s}),e.next=6,null===(n=this.managers.tokenManager)||void 0===n?void 0:n.exchangeAccountGrant(l,u,i);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"assumeIdentity",value:(y=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o,a,s,c,u;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwErrorIfDisposed(),r=(n=t).logTransaction,i=(0,X.Z)(n.args,2),o=i[0],a=i[1],this.logger.info(this.toString(),'Assume identity for "'.concat(a,'"')),e.next=5,this.internalReset(t);case 5:return s=this.managers.tokenManager,c=null==s?void 0:s.storage.getAccess(),u=new Fs.Z([a]),o.actor=null==c?void 0:c.context.refreshToken,e.abrupt("return",null==s?void 0:s.exchangeRequest(o,u,r));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"isAuthorized",value:(d=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o,a,s,c,u,l;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwErrorIfDisposed(),r=(n=t).logTransaction,i=(0,X.Z)(n.args,1),o=i[0],this.logger.info(this.toString(),'Check authorization state for "'.concat(o,'"')),a=this.managers,s=a.sessionManager,c=a.tokenManager,!(u=null==c?void 0:c.hasAccessMode(o))){e.next=8;break}return e.abrupt("return",u);case 8:return e.next=10,null==s?void 0:s.getInfo(r);case 10:if(!(l=e.sent)||!l.account){e.next=13;break}return e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"getSessionInfo",value:(p=(0,ze.Z)(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwErrorIfDisposed(),r=t.logTransaction,this.logger.info(this.toString(),"Get session information."),e.abrupt("return",null===(n=this.managers.sessionManager)||void 0===n?void 0:n.getInfo(r));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"getExperimentAssignment",value:(l=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o,a,s,c,u,l;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwErrorIfDisposed(),i=(r=t).logTransaction,o=(0,X.Z)(r.args,1),a=o[0],(s=this.logger).info(this.toString(),"Get experiment assignment for feature ID: ".concat(a,".")),e.next=6,null===(n=this.managers.sessionManager)||void 0===n?void 0:n.getInfo(i);case 6:if(c=e.sent,u=null==c?void 0:c.experiments,l=null==u?void 0:u[a],!U.Check.not.assigned(l)){e.next=12;break}return s.warn(this.toString(),"Cannot find experiment assignment for feature ID: ".concat(a,".")),e.abrupt("return",null);case 12:return e.abrupt("return",l);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"createCustomerSupportCode",value:(u=(0,ze.Z)(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwErrorIfDisposed(),n=t.logTransaction,r=this.accessTokenProvider.getAccessToken(),!this.managers.customerServiceManager){e.next=5;break}return e.abrupt("return",this.managers.customerServiceManager.createSupportCode(r,n));case 5:throw(0,$.ZP)("".concat(this.toString()," targeted build does not have CustomerService plugin."));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"isEventsAtEdgeEnabled",get:function(){this.throwErrorIfDisposed();var e=this.logger.findSink(Io);return(null==e?void 0:e.isEnabled)||!1},set:function(e){this.throwErrorIfDisposed(),e?this.enableEdgeSink():this.disableEdgeSink()}},{key:"getFeatureFlags",value:(c=(0,ze.Z)(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwErrorIfDisposed(),e.next=3,this.featureFlagsStorage.getFeatureFlags();case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getAccountDelegationRefreshToken",value:function(){return this.throwErrorIfDisposed(),this.accountDelegationRefreshTokenStorage.getAccountDelegationRefreshToken()}},{key:"internalInitialize",value:(s=(0,ze.Z)(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwErrorIfDisposed(),(n=this.logger).info(this.toString(),"Initialize."),!this.isInitialized){e.next=7;break}throw n.error(this.toString(),"Already initialized."),this.createAlreadyInitializedException();case 7:return e.prev=7,e.next=10,this.internalReauthorize(t);case 10:n.info(this.toString(),"Successfully initialized."),this.isInitialized=!0,this.enableDustSink(),e.next=21;break;case 15:throw e.prev=15,e.t0=e.catch(7),n.error("".concat(this.toString(),".initialize()"),e.t0),n.info("".concat(this.toString(),".initialize()"),"Dispatch ReauthorizationFailure event."),this.emit(Gr.Z.ReauthorizationFailure,new wc(e.t0)),e.t0;case 21:case"end":return e.stop()}}),e,this,[[7,15]])}))),function(e){return s.apply(this,arguments)})},{key:"internalReset",value:(a=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o,a,s,c=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={options:U.Types.object({logTransaction:U.Types.instanceStrict(Fo.Z)})},(0,U.typecheck)(this,"internalReset",n,c),r=t.logTransaction,this.logger.info(this.toString(),"Reset SDK to an anonymous state."),i=this.managers,o=i.sessionManager,a=i.socketManager,s=i.tokenManager,null==a||a.stopPing(),e.next=7,null==o?void 0:o.storage.clear();case 7:return e.next=9,null==s?void 0:s.logout(r);case 9:null==a||a.startPing(),this.isInitialized=!0;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"internalReauthorize",value:(i=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o,a,s,c,u,l,p,d,y,f,h,v,g,m,b,T,k,S;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t).logTransaction,i=void 0===(i=n.args)?[]:i,o=(0,X.Z)(i,1),a=o[0],c=(s=a||{}).reason,u=s.userToken,l=this.logger,p=c?{reason:c}:void 0,l.info(this.toString(),"Reauthorize the current access."),d=new Ii.Z({logger:l,source:this.toString(),urn:jc.reauthorize,data:p,endpointKey:"reauthorize",logTransaction:r}),e.prev=9,y=this.managers,f=y.deviceManager,h=y.orchestrationManager,v=y.tokenManager,g=!!this.deviceGrantStorage.getDeviceGrant(),e.next=14,f.getDeviceGrant({userToken:u},r);case 14:if(m=e.sent,b=null==v?void 0:v.getAccessToken(),T=U.Check.assigned(b),!1!==g||!U.Check.assigned(m)||!T){e.next=20;break}return e.abrupt("return");case 20:if(!T||u){e.next=26;break}return e.next=24,null==v?void 0:v.refreshAccessToken({forceRefresh:!0,reason:c,logTransaction:r});case 24:e.next=28;break;case 26:return e.next=28,null==v?void 0:v.exchangeDeviceGrant({deviceGrant:m,userToken:u},r);case 28:return k=this.deviceAttributeProvider.getDeviceAttributes(),S=this.advertisingIdProvider.getId(),$i.Z.validateAttributes(k,S),e.next=33,h.updateDeviceOperatingSystem(k,r);case 33:e.next=39;break;case 35:throw e.prev=35,e.t0=e.catch(9),d.captureError(e.t0),e.t0;case 39:return e.prev=39,d.log(),e.finish(39);case 42:case"end":return e.stop()}}),e,this,[[9,35,39,42]])}))),function(e){return i.apply(this,arguments)})},{key:"createAlreadyInitializedException",value:function(){return(0,$.ZP)("".concat(this.toString()," already initialized."))}},{key:"enableDustSink",value:function(){var e=this.logger.findSink(wo);null!=e&&e.initialized&&(e.enableDustSink(),e.emptySink())}},{key:"enableEdgeSink",value:function(){var e=this.logger.findSink(Io);e&&e.enableEdgeSink()}},{key:"disableEdgeSink",value:function(){var e=this.logger.findSink(Io);null==e||e.disableEdgeSink()}},{key:"throwErrorIfDisposed",value:function(){if(this.isDisposed)throw(0,$.ZP)("".concat(this.toString()," has been disposed."))}},{key:"dispose",value:(r=(0,ze.Z)(Xe().mark((function e(){var t,n,r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDisposed=!0,t=this.managers,n=t.socketManager,r=t.telemetryManager,i=t.tokenManager,!r){e.next=5;break}return e.next=5,r.dispose();case 5:i&&i.clearRetryRefresh(),n&&n.stop(),w.singletonInstance===this&&(w.singletonInstance=void 0);case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getServerTime",value:(n=(0,ze.Z)(Xe().mark((function e(){var t,n,r,i,o,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,this.storage.get(Rc.SERVER_TIME_KEY);case 3:if(e.t1=e.sent,e.t1){e.next=6;break}e.t1="{}";case 6:if(e.t2=e.t1,t=e.t0.parse.call(e.t0,e.t2),n=t.date,r=t.retrievedTime,n&&r){e.next=12;break}return e.abrupt("return",null);case 12:return i=Date.parse(n),o=this.monotonicTimestampProvider.getTimestamp()-r,a=new Date(i+o),e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getPlatformHeaderValue",value:function(){return this.config.commonHeaders[ln.SDK_PLATFORM]}},{key:"toString",value:function(){return w.toString()}}],[{key:"attachPlugin",value:function(e){Yi.addPlugin(e)}},{key:"createManager",value:function(e){Yi.getPlugins().forEach((function(t){var n;null===(n=t.createManager)||void 0===n||n.call(t,e)}))}},{key:"createSdkSessionAndInitialize",value:function(e){return Mc||(Mc=this.createSdkSession(e).then(function(){var e=(0,ze.Z)(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initialize();case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},{key:"createSdkSession",value:(t=(0,ze.Z)(Xe().mark((function e(t){var n,r,i,o=this,a=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ji.Z.instance,r=(0,fo.Z)(),i=a,n.sdkInstanceId=r,e.abrupt("return",Fo.Z.wrapLogTransaction({file:w.toString(),urn:jc.createSdkSession,logger:n,action:function(){var e=(0,ze.Z)(Xe().mark((function e(a){var s,c,u,l,p,d,y,h,v,g,m,b,T,k,S,P,E,Z,D,C,A,R,x,O,I,M,j,L,N,B,_,F,q,K,V,H,G,Q,z,W,Y,J,X,$,ee,te,ne,re,ie,oe,ae,se,ce,ue,le,pe,de,ye,fe,he,ve,ge,me;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={options:U.Types.object({bootstrapConfiguration:U.Types.instanceStrict(zo.Z),geoProvider:U.Types.instanceStrict(_s.Z.GeoProvider).optional,mediaCapabilitiesProvider:U.Types.instanceStrict(xt.Z).optional,platformMetricsProvider:U.Types.instanceStrict(Cr.Z).optional,deviceAttributeProvider:U.Types.instanceStrict($i.Z).optional,advertisingIdProvider:U.Types.instanceStrict(f.Z).optional,browserInfoProvider:U.Types.object({getBrowserInfo:U.Types.function}).optional,monotonicTimestampProvider:U.Types.object(Bi.z).optional,getConfiguration:U.Types.custom((function(e){var t;return"function"==typeof(null==e||null===(t=e())||void 0===t?void 0:t.then)})).optional})},(0,U.typecheck)(o,"createSdkSession",s,i),c=t.bootstrapConfiguration,u=t.deviceAttributeProvider,l=void 0===u?new to:u,p=t.platformMetricsProvider,d=void 0===p?new Cr.Z(n):p,y=t.advertisingIdProvider,h=void 0===y?new f.Z(n):y,v=t.browserInfoProvider,g=t.monotonicTimestampProvider,m=void 0===g?new Ho:g,b=t.getConfiguration,T=t.mediaCapabilitiesProvider||new xt.Z(n),k=t.geoProvider||new _s.Z.GeoProvider(n),S=c.clientId,P=c.clientApiKey,E=c.environment,Z=c.debugEnabled,D=c.application,C=c.extras,A=n.findSink(wo),U.Check.not.assigned(A)&&(A=new wo(n),n.addSink(A)),n.console(Z),n.info(w.toString(),"Create SDK session sdkInstanceId: ".concat(r,", ").concat(S,"/").concat(E,".")),n.info(w.toString(),"Version, ".concat(zs.Z.version,".")),n.info(w.toString(),"Debug mode enabled."),R=new Ii.Z({logger:n,source:w.toString(),urn:jc.createSdkSession,logTransaction:a}),x=Object.create(null),O=new Va.Z({updateAccessToken:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=x.tokenManager.updateAccessToken).call.apply(e,[x.tokenManager].concat(n))},refreshAccessToken:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=x.tokenManager.refreshAccessToken).call.apply(e,[x.tokenManager].concat(n))},getAccessToken:function(){return x.tokenManager.getAccessToken.call(x.tokenManager)},once:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=x.tokenManager.once).call.apply(e,[x.tokenManager].concat(n))},emit:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=x.tokenManager.emit).call.apply(e,[x.tokenManager].concat(n))}}),M=(I=null!=C?C:{}).useStorageCompression,j=I.useMemoryFirst,L=new Ha.Z.Storage({logger:n,useMemoryFirst:j,useStorageCompression:M}),N=new Ha.Z.HttpClient(n,O),B=new ec.Z({clientId:S,environment:E,logger:n,storage:L}),_=new nc.Z({clientId:S,environment:E,logger:n,storage:L}),F=new tc.Z({clientId:S,environment:E,logger:n,storage:L,accountDelegationRefreshToken:c.accountDelegationRefreshToken}),e.prev=20,e.next=23,B.loadAccessFromStorage();case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(20),n.error(w.toString(),e.t0);case 28:return e.prev=28,e.next=31,_.loadDeviceGrantFromStorage();case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(28),n.error(w.toString(),e.t1);case 36:return e.prev=36,e.next=39,F.loadAccountDelegationRefreshTokenFromStorage();case 39:e.next=44;break;case 41:e.prev=41,e.t2=e.catch(36),n.error(w.toString(),e.t2);case 44:return q=new ic.Z({clientId:S,environment:E,logger:n,storage:L}),K=new ac.Z({clientId:S,environment:E,logger:n,storage:L}),V=new Ys.Z({bootstrapConfiguration:c,logger:n,httpClient:N,storage:L}),H=new $s.Z(B,n),e.prev=48,e.next=51,V.getConfiguration({getConfiguration:b,logTransaction:a});case 51:return G=e.sent,Q=G.services,z=V.environmentConfiguration,W=new cc.Z({config:Q.orchestration.client,logger:n,tokenUpdater:O,httpClient:N,deviceGrantStorage:_,sessionInfoStorage:K,accountDelegationRefreshTokenStorage:F,featureFlagsStorage:q,accessStorage:B,apiKey:P,monotonicTimestampProvider:m,storage:L}),x.orchestrationManager=new Xs.Z({config:Q.orchestration,client:W,accessTokenProvider:H,logger:n}),x.deviceManager=new Js.Z({tokenUpdater:O,logger:n,deviceGrantStorage:_,environmentConfiguration:z,advertisingIdProvider:h,deviceAttributeProvider:l,orchestrationManager:x.orchestrationManager,devicePlatformId:Q.commonValues.platformId}),Y=new Ts.Z({config:Q.token.client,platformId:Q.commonValues.platformId,logger:n,httpClient:N}),J=new rc.Z({apiKey:P,tokenManagerConfiguration:Q.token,tokenClient:Y,geoProvider:k,logger:n,accountDelegationRefreshTokenStorage:F,storage:B,deviceManager:x.deviceManager,deviceGrantStorage:_,orchestrationManager:x.orchestrationManager,refreshSessionInfo:function(){var e=(0,ze.Z)(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x.sessionManager){e.next=3;break}return e.next=3,x.sessionManager.getInfoFromServices(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),O.tokenManager=J,x.tokenManager=J,X=function(){var e=z.deviceProfile,t=z.applicationRuntime;return"".concat(tt.Z.socket.socketManager.sourcePrefix,":").concat(e,":").concat(t)}(),$=new xc.Z({logger:n,unacknowledgedEventBuffer:Q.socket.extras.unacknowledgedEventBuffer}),x.telemetryManager=new ao.Z({telemetryManagerConfiguration:Q.telemetry,tokenManager:J,telemetryClient:new Aa.Z({config:Q.telemetry.client,logger:n,httpClient:N}),environmentConfiguration:z,logger:n,envelopeMessageQueue:$,sourceUrn:X}),x.sessionManager=new ot.Z({logger:n,tokenManager:J,sessionInfoStorage:K,featureFlagsStorage:q,orchestrationClient:W}),x.configurationManager=V,o.createManagerOptions={sdkSession:o,managers:x,logger:n,httpClient:N,storage:L,services:Q,accessTokenProvider:H,browserInfoProvider:v,mediaCapabilitiesProvider:T,platformMetricsProvider:d,advertisingIdProvider:h,geoProvider:k,metadata:{clientId:S,environment:E,sourceUrn:X},environmentConfiguration:z,orchestrationClient:W,sessionInfoStorage:K,featureFlagsStorage:q,bootstrapConfiguration:c,deviceAttributeProvider:l,monotonicTimestampProvider:m,envelopeMessageQueue:$},o.createManager(o.createManagerOptions),ee={clientId:S,clientApiKey:P,environment:E,debugEnabled:Z},te=x.telemetryManager,ne=x.socketManager,re=n.findSink(Io),ie=Q.telemetry.extras.isEventsAtEdgeEnabled,oe=new Ro.Z({logger:n,dustEnvelopeBuffer:te.dustEnvelopeBuffer,isEventsAtEdgeEnabled:ie,socketManager:ne,envelopeMessageQueue:$}),U.Check.not.assigned(re)&&(re=new Io(n,oe),n.addSink(re)),ae=new w({sdkSessionConfiguration:G,logger:n,managers:x,clients:{httpClient:N,orchestrationClient:W,subscriptionClient:new sc.Z({config:Q.subscription,httpClient:N,logger:n})},metadata:ee,providers:{accessTokenProvider:H,advertisingIdProvider:h,browserInfoProvider:v,geoProvider:k,mediaCapabilitiesProvider:T,monotonicTimestampProvider:m,platformMetricsProvider:d,storage:{accessStorage:B,accountDelegationRefreshTokenStorage:F,deviceGrantStorage:_,featureFlagsStorage:q,sessionInfoStorage:K,storage:L}},sdkInstanceId:r,envelopeMessageRouter:oe,sourceUrn:X}),o.singletonInstance=ae,J.on(Gt.Z.TokenRefreshFailed,(function(e){n.info(w.toString(),"Reauthorization Failure event."),n.error(w.toString(),e.error),ae.emit(Gr.Z.ReauthorizationFailure,new wc(e.error))})),ne&&(J.once(Gt.Z.AccessChanged,(function(e){ne.init(e.accessToken)})),ne.on(Jr.Z.ageVerificationChanged,(function(e){n.info(w.toString(),"AgeVerification Changed event."),ae.emit(Gr.Z.AgeVerificationChanged,e)}))),J.on(Gt.Z.AccessChanged,(function(e){n.info(w.toString(),"Access Changed event."),ae.emit(Gr.Z.AccessChanged,e)})),K.on(Gt.Z.SessionInfoChanged,(function(e){n.info(w.toString(),"SessionInfo Changed event."),ae.emit(Gr.Z.SessionInfoChanged,e)})),q.on(Gr.Z.FeatureFlagsChanged,(function(e){n.info(w.toString(),"Feature Flags Changed event."),ae.emit(Gr.Z.FeatureFlagsChanged,e)})),F.on(Gr.Z.AccountDelegationRefreshTokenChanged,(function(e){n.info(w.toString(),"Account Delegation Refresh Token Changed event."),ae.emit(Gr.Z.AccountDelegationRefreshTokenChanged,e)})),te.on(Gt.Z.ValidationResultsReceived,(function(e){n.info(w.toString(),"Validation Results Received event."),ae.emit(Gr.Z.ValidationResultsReceived,e)})),Yi.getPlugins().forEach((function(e){e.onSdkSessionCreated&&e.onSdkSessionCreated({SdkSession:w,sdkSession:ae,logger:n})})),!1===Q.telemetry.disabled?(ce=z.deviceRuntimeProfile,ue=z.deviceProfile,le=z.platform,pe=l.getDeviceAttributes(),de=pe.manufacturer,ye=pe.model,fe=pe.operatingSystem,he=pe.modelFamily,ve=pe.brand,Q.telemetry.extras.permitAppDustEvents&&ae.loggingApi.enableCustomDustEvents(),ge={os:fe&&"n/a"!==fe?fe:ce,model:ye||ue,brand:ve||de||void 0,modelFamily:he,platformId:Q.commonValues.platformId},null===(se=A)||void 0===se||se.initializeDustSink({telemetryManager:te,environment:{device:ge,sdk:{version:zs.Z.version,platform:le}},application:D})):(null===(me=A)||void 0===me||me.disableDustSink(),n.dustEnabled=!1),ae.enableEdgeSink(),e.abrupt("return",ae);case 89:throw e.prev=89,e.t3=e.catch(48),R.captureError(e.t3),e.t3;case 93:return e.prev=93,R.log(),e.finish(93);case 96:case"end":return e.stop()}}),e,null,[[20,25],[28,33],[36,41],[48,89,93,96]])})));return function(t){return e.apply(this,arguments)}}()}));case 5:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"instance",get:function(){if(!this.singletonInstance)throw(0,$.ZP)("".concat(this.toString()," not yet created."));return this.singletonInstance},set:function(e){this.singletonInstance=e}},{key:"toString",value:function(){return"SDK.SdkSession"}}]),w}(Ws.EventEmitter),(0,Ye.Z)(Zc.prototype,"initialize",[pc],Object.getOwnPropertyDescriptor(Zc.prototype,"initialize"),Zc.prototype),(0,Ye.Z)(Zc.prototype,"initializeWithUserToken",[dc],Object.getOwnPropertyDescriptor(Zc.prototype,"initializeWithUserToken"),Zc.prototype),(0,Ye.Z)(Zc.prototype,"getInitializationState",[yc],Object.getOwnPropertyDescriptor(Zc.prototype,"getInitializationState"),Zc.prototype),(0,Ye.Z)(Zc.prototype,"reset",[fc],Object.getOwnPropertyDescriptor(Zc.prototype,"reset"),Zc.prototype),(0,Ye.Z)(Zc.prototype,"reauthorize",[hc],Object.getOwnPropertyDescriptor(Zc.prototype,"reauthorize"),Zc.prototype),(0,Ye.Z)(Zc.prototype,"getSessionToken",[vc],Object.getOwnPropertyDescriptor(Zc.prototype,"getSessionToken"),Zc.prototype),(0,Ye.Z)(Zc.prototype,"getAccessState",[gc],Object.getOwnPropertyDescriptor(Zc.prototype,"getAccessState"),Zc.prototype),(0,Ye.Z)(Zc.prototype,"restoreAccessState",[mc],Object.getOwnPropertyDescriptor(Zc.prototype,"restoreAccessState"),Zc.prototype),(0,Ye.Z)(Zc.prototype,"authorize",[bc],Object.getOwnPropertyDescriptor(Zc.prototype,"authorize"),Zc.prototype),(0,Ye.Z)(Zc.prototype,"assumeIdentity",[Tc],Object.getOwnPropertyDescriptor(Zc.prototype,"assumeIdentity"),Zc.prototype),(0,Ye.Z)(Zc.prototype,"isAuthorized",[kc],Object.getOwnPropertyDescriptor(Zc.prototype,"isAuthorized"),Zc.prototype),(0,Ye.Z)(Zc.prototype,"getSessionInfo",[Sc],Object.getOwnPropertyDescriptor(Zc.prototype,"getSessionInfo"),Zc.prototype),(0,Ye.Z)(Zc.prototype,"getExperimentAssignment",[Pc],Object.getOwnPropertyDescriptor(Zc.prototype,"getExperimentAssignment"),Zc.prototype),(0,Ye.Z)(Zc.prototype,"createCustomerSupportCode",[Ec],Object.getOwnPropertyDescriptor(Zc.prototype,"createCustomerSupportCode"),Zc.prototype),Zc);function Bc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}Nc.plugins=[];var _c=function(e){(0,B.Z)(n,e);var t=Bc(n);function n(){return(0,j.Z)(this,n),t.apply(this,arguments)}return(0,L.Z)(n,[{key:"toString",value:function(){return"SDK.Endpoint"}}]),n}(n(53514).Z),Fc=n(97666),Uc=n(26390),qc=n(61650),Kc=n(53744);function Vc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vc(Object(n),!0).forEach((function(t){(0,Hr.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}U.Config.setup({ErrorType:Ns.Exception.InvalidArgumentException,logger:Qo});var Gc=Hc(Hc({},{get VersionInfo(){return zs.Z},bootstrapProviders:function(e){Ha.Z.setProviders(e)},get Device(){return oo},get InitializationState(){return uc},get Internal(){return Lo},get Logging(){return Qo},get Services(){return Ns},get Token(){return Qs},get SdkSession(){return Nc},get InternalEvents(){return Gt.Z},get Events(){return Gr.Z},get OffDeviceTokenRefreshEvent(){return Qr},get ReauthorizationFailure(){return wc},get MonotonicTimestampProvider(){return Ho},get Endpoint(){return _c},get DiagnosticsApi(){return Cc},get DiagnosticFeature(){return Dc.Z},get SessionInfoChangedEvent(){return Fc.Z},get AccessChangedEvent(){return Uc.Z},get FeatureFlagsChangedEvent(){return qc.Z},get AgeVerificationFlowType(){return Kc.Z}}),{},{extendSDKWithPlugins:Yi.extendSDKWithPlugins}),Qc=[y,I,ke,De,xe,Ne,Ue,Qe,ht,bt,Et,Ct,ir,Dr,Ar,Ir,Vr,ci,Pi,Wi,g],zc=(0,Yi.extendSDKWithPlugins)(Gc,Gc.SdkSession,Qc),Wc=n(71002),Yc=(n(41637),n(18264),n(21249),n(36210),n(82472),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016),n(23123),n(73210),"object"===(0,Wc.Z)(Yc)&&Yc.self===Yc&&Yc||"object"===(void 0===n.g?"undefined":(0,Wc.Z)(n.g))&&n.g.global===n.g&&n.g||window||{}),Jc="URLSearchParams"in Yc,Xc="Symbol"in Yc&&"iterator"in Symbol,$c="FileReader"in Yc&&"Blob"in Yc&&function(){try{return new Blob,!0}catch(e){return!1}}(),eu="FormData"in Yc,tu="ArrayBuffer"in Yc;if(tu)var nu=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],ru=ArrayBuffer.isView||function(e){return e&&nu.indexOf(Object.prototype.toString.call(e))>-1};function iu(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function ou(e){return"string"!=typeof e&&(e=String(e)),e}function au(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return Xc&&(t[Symbol.iterator]=function(){return t}),t}function su(e){this.map={},e instanceof su?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function cu(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function uu(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function lu(e){var t=new FileReader,n=uu(t);return t.readAsArrayBuffer(e),n}function pu(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function du(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:$c&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:eu&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:Jc&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():tu&&$c&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=pu(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):tu&&(ArrayBuffer.prototype.isPrototypeOf(e)||ru(e))?this._bodyArrayBuffer=pu(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Jc&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},$c&&(this.blob=function(){var e=cu(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?cu(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(lu)}),this.text=function(){var e,t,n,r=cu(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=uu(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},eu&&(this.formData=function(){return this.text().then(hu)}),this.json=function(){return this.text().then(JSON.parse)},this}su.prototype.append=function(e,t){e=iu(e),t=ou(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},su.prototype.delete=function(e){delete this.map[iu(e)]},su.prototype.get=function(e){return e=iu(e),this.has(e)?this.map[e]:null},su.prototype.has=function(e){return this.map.hasOwnProperty(iu(e))},su.prototype.set=function(e,t){this.map[iu(e)]=ou(t)},su.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},su.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),au(e)},su.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),au(e)},su.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),au(e)},Xc&&(su.prototype[Symbol.iterator]=su.prototype.entries);var yu=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function fu(e,t){var n,r,i=(t=t||{}).body;if(e instanceof fu){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new su(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,this.needArrayBuffer=e.needArrayBuffer,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new su(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),yu.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,this.needArrayBuffer=t.needArrayBuffer||this.needArrayBuffer||!1,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function hu(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function vu(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new su(t.headers),this.url=t.url||"",this._initBody(e)}fu.prototype.clone=function(){return new fu(this,{body:this._bodyInit})},du.call(fu.prototype),du.call(vu.prototype),vu.prototype.clone=function(){return new vu(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new su(this.headers),url:this.url})},vu.error=function(){var e=new vu(null,{status:0,statusText:""});return e.type="error",e};var gu=[301,302,303,307,308];vu.redirect=function(e,t){if(-1===gu.indexOf(t))throw new RangeError("Invalid status code");return new vu(null,{status:t,headers:{location:e}})};var mu=Yc.DOMException;try{new mu}catch(e){(mu=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),mu.prototype.constructor=mu}function bu(e,t){return new Promise((function(n,r){var i=new fu(e,t);if(i.signal&&i.signal.aborted)return r(new mu("Aborted","AbortError"));var o=new XMLHttpRequest;function a(){o.abort()}o.onload=function(){var e,t,r={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new su,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL");var i="response"in o?o.response:o.responseText;n(new vu(i,r))},o.onerror=function(e){r(e)},o.ontimeout=function(e){r(e)},o.onabort=function(){r(new mu("Aborted","AbortError"))},o.open(i.method,i.url,!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),("responseType"in o&&"application/octet-stream"===i.headers.get("Content-Type")||i.needArrayBuffer)&&(o.responseType="arraybuffer"),i.headers.forEach((function(e,t){o.setRequestHeader(t,e)})),i.signal&&(i.signal.addEventListener("abort",a),o.onreadystatechange=function(){4===o.readyState&&i.signal.removeEventListener("abort",a)}),o.send(void 0===i._bodyInit?null:i._bodyInit)}))}bu.polyfill=!0,bu.Headers=su,bu.Request=fu,bu.Response=vu;var Tu=bu;function ku(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var Su=function(e){(0,B.Z)(n,e);var t=ku(n);function n(e,r){var i;return(0,j.Z)(this,n),(i=t.call(this,{logger:e,tokenUpdater:r,fetch:Tu,Request:Tu.Request,Headers:Tu.Headers})).logger.log(i.toString(),"Created Legacy Browser HttpClient Provider."),i}return(0,L.Z)(n,[{key:"toString",value:function(){return"SDK.Services.Providers.Browser.HttpClientLegacy"}}]),n}(n(49636).Z),Pu=n(88681),Eu=n(22221),Zu={HttpClient:Su,EnvironmentConfiguration:Pu.Z,Storage:Eu.Z};zc.bootstrapProviders(Zu);var wu=zc}(),r}()},e.exports=r()},function(e,t,n){(function(r){var i;!function(r){"undefined"!=typeof window&&window;void 0===(i=function(e,t,r){return function(e,t,n,r){function i(e){var t;return e&&e.postMessage?t=e:e instanceof Node&&(t=e.window||e.contentWindow),t}function o(e){var i,o=e||this;if(e)for(i in a)e[i]=this[i].bind(this);var s=this.switchboard=new t,c=this.hub=s.port1,u=(this.dock=s.port2,c=this.hub,this.topics={}),l=(new t).port1;(this.allTopicsRepeater=new n("*",l)).addConsumer(this,(function(e,t){n.publishTopic(u["*"],e,t.originalType)}),!1,{}),this.channelBroker=new r(this.dock,this),o.on=o.addListener=function(e,t){n.addTopicListener(this,c,u,e,t,!1)},o.off=o.removeListener=function(e,t){n.removeTopicListener(this,u,e,t)},o.one=o.once=function(e,t){n.addTopicListener(this,c,u,e,t,!0)}}var a=o.prototype={publish:function(e,t,r){var i=n.publishTopic(this.topics[e],t);return n.publishTopic(this.allTopicsRepeater,t,e),!0!==r&&this.channelBroker.publish(e,t),i},publishChannel:function(e,t){return this.channelBroker.publish(e,t)},removeAllListeners:function(e){var t,r=this.topics;if(e)n.removeAllTopicListeners(r,e);else for(t in r)n.removeAllTopicListeners(r,t)},getTopics:function(e){return this.topics},hasListeners:function(e){var t=this.topics[e];return!(!e||!t)&&!!t.consumerCount},openChannel:function(e,t,n){var r=i(e),o=t||"global";return!(!r||!r.postMessage)&&this.channelBroker.connect(r,o,n)},closeChannel:function(e,t){var n=i(e),r=t||"global";return!(!n||!n.postMessage)&&(this.channelBroker.disconnect(n,r),!0)}},s=function(e){var t=new o(e);return t.sharedMessageService=c,e||t},c=s();return c.sharedMessageService=c,c.bind=function(e){if(!e)throw new Error("Binding object not specified");return s(e)},c.create=s,c}(0,n(3),n(4),n(18))}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(1))},function(e,t,n){(function(r){var i;void 0===(i=function(e,t,r){return function(e,t,n){"undefined"!=typeof window&&window;var r=e.events.CHANNELMESSAGE_REPEATER;function i(e){return!(!e.target||e.target!==this||(e.disconnect(),0))}function o(e,n){this.hub=e,this.topics=n.topics,this.messageService=n,null===e&&(this.isMessageChannel=!1,this.hub=(new t).port1),this.channelTopics={},this.channels={}}return o.prototype={isMessageChannel:!0,publish:function(e,t){var i=n.createEvent(r);i.data={topic:e,msg:t},this.hub.dispatchEvent(i)},connect:function(t,n,r){var i=this.channels,o=i[n]||(i[n]=[]),a=new e(t,n,r,this);return!!a.connect()&&(o.push(a),a)},disconnect:function(e,t){var n=this.channels[t];n&&n.length&&openChannels.some(i,e)}},o}(n(19),n(3),n(4))}.call(t,n,t,e))||(e.exports=i)}).call(this,n(1))},function(e,t,n){(function(r){var i;void 0===(i=function(e,t,i){return function(e,t){var n="undefined"!=typeof window?window:void 0!==r?r:this,i="MessageService::channel";function o(e,t,n,r){var i=this;this.target=e,this.handshake=t,this.initData=n,this.initDataFromTarget=null,this.hub=r.hub,this.messageService=r.messageService,this.topics=r.topics,this.channelTopics=r.channelTopics,this.status="pending",this.isMessageChannel=r.isMessageChannel,this.handshakeMessageCallback=function(e){i.handshakeMessage(e)},this.channelRepeaterCallback=function(e){i.channelRepeater(e)},this.channelConfirmationCallback=function(e){i.channelConfirmation(e)}}return o.events={CHANNELMESSAGE:i,CHANNELMESSAGE_REPEATER:"MessageService::channel::repeater",CHANNELMESSAGE_READY:"channel::ready",CHANNELMESSAGE_ERROR:"channel::error",CHANNELMESSAGE_COMPLETE:"MessageService::channel::complete",CHANNELMESSAGE_DISCONNECT:"MessageService::channel::disconnect",CHANNELMESSAGE_CLOSED:"channel::closed"},o.prototype={publish:function(e,t){this.repeatToChannel({topic:e,msg:t})},acceptInvitation:function(r,o){if(this.target&&this.handshake&&this.isMessageChannel){this.topics;var a,s=this.target;if(!r){var c=new e;r=c.port1,a=c.port2,this.initDataFromTarget=o}r.start(),this.port=r,r.addEventListener("message",this.channelRepeaterCallback,!1),t.addTopicListener(this,this.hub,this.channelTopics,"MessageService::channel::repeater",this.repeatToChannel,!1),a?(r.addEventListener("message",this.channelConfirmationCallback,!1),s.postMessage({type:i,handshake:this.handshake,initData:this.initData},"*",[a])):(this.status="ready",n.removeEventListener("message",this.handshakeMessage,!1),r.postMessage({type:"MessageService::channel::complete",handshake:this.handshake}),this.messageService.publish("channel::ready",{id:this.handshake,data:o},!0))}},handshakeMessage:function(e){var n=this.handshakeListener(this.target,e);if(n)if(n===i)this.acceptInvitation(e.ports&&e.ports[0],e.data&&e.data.initData);else if("MessageService::channel::repeater"===n){var r=e.data;r&&r.topic&&r.hasOwnProperty("msg")&&t.publishTopic(this.topics[r.topic],r.msg)}},channelRepeater:function(e){var n=e.data;n&&n.topic&&n.hasOwnProperty("msg")?t.publishTopic(this.topics[n.topic],n.msg):"MessageService::channel::disconnect"===this.handshakeListener(this.port,e)&&this.disconnect()},repeatToChannel:function(e,t){var n=this.target,r=this.port;n&&!0!==n.closed?e&&e.topic&&e.hasOwnProperty("msg")&&r.postMessage({topic:e.topic,msg:e.msg}):this.disconnect()},channelConfirmation:function(e){"MessageService::channel::complete"===this.handshakeListener(this.port,e)&&(n.removeEventListener("message",this.handshakeMessageCallback,!1),this.port.removeEventListener("message",this.channelConfirmationCallback,!1),this.status="ready",this.messageService.publish("channel::ready",{id:this.handshake,data:this.initDataFromTarget},!0))},connect:function(){var e,t=!0;this.target,n.addEventListener("message",this.handshakeMessageCallback,!1);try{this.target.postMessage({type:i,handshake:this.handshake,initData:this.initData},"*")}catch(e){t=!1,channelError=e}finally{t||(this.disconnect(),this.messageService.publish("channel::error",{id:this.handshake,data:channelError},!0))}return t},disconnect:function(){var e=this.port;n.removeEventListener("message",this.handshakeMessageCallback,!1),t.removeTopicListener(this,this.channelTopics,"MessageService::channel::repeater",this.repeatToChannel),this.status="closed",e&&(e.removeEventListener("message",this.channelRepeaterCallback,!1),e.postMessage({type:"MessageService::channel::disconnect",handshake:this.handshake}),e.close()),this.messageService.publish("channel::closed",{id:this.handshake,data:this},!0)},handshakeListener:function(e,t){var n=t.data,r=this.handshake;return!(!n||n.type!==i&&"MessageService::channel::repeater"!==n.type&&"MessageService::channel::complete"!==n.type&&"MessageService::channel::disconnect"!==n.type||r!==n.handshake||e!==(t.source||t.srcElement))&&n.type}},o}(n(3),n(4))}.call(t,n,t,e))||(e.exports=i)}).call(this,n(1))},,function(e,t,n){"use strict";n.r(t);var r=n(5),i=n.n(r),o=n(2),a=n.n(o),s=n(0),c=n.n(s),u=n(6),l=n.n(u);window.browser_device=l()();var p=window.location.host,d=l()().is.msie;c.a.showInAllBrowsers||d&&window.location.replace("//".concat(p,"/unsupported"));var y=n(8),f=n.n(y).a.Location().getParam("locale"),h=["AS","GU","MP","PR","VI","UM","US"];var v={isUserInGeofence:function(e){var t=f||e;return new Promise((function(e){e(!t||h.indexOf(t.toUpperCase())>=0)}))}},g=n(9),m=n.n(g),b={initialized:"__applicationInitialized__",embedReady:"__applicationEmbedReady__",ready:"__applicationReady__"},T={ready:"__syndicatedPlayerConfigReady__"},k={userSet:"__user_set__",trackingInfo:"__trackingInfo__",loggedIn:"__user_loggedIn__"},S={sdkServiceReady:"__sdkServiceReady__",sdkSessionResetOnError:"__sdkSessionResetOnError__"},P=n(10),E=n.n(P),Z=function(){function e(){this.ee=new E.a}return e.getInstance=function(){return e.instance||(e.instance=new e,window.broadcastService=e.instance),e.instance},e.prototype.emit=function(e,t){this.ee.emit(e,t)},e.prototype.on=function(e,t){this.ee.on(e,t)},e.prototype.once=function(e,t){this.ee.once(e,t)},e.prototype.off=function(e,t){this.ee.off(e,t)},e}(),w=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},D=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},C=function(){function e(e,t,n){this._broadcastService=e,this._userService=t,this._sdkService=n}return e.getInstance=function(t,n,r){return e.instance||(e.instance=new e(t,n,r)),e.instance},e.prototype.loginRedirect=function(){var e=sessionStorage.getItem("loginSuccessUrl");e&&window.open(e,"_self")},e.prototype.setEntitlementLevel=function(e){document.body.classList.remove("entitlement-none"),document.body.classList.add(e)},e.prototype.getOneIDLangPref=function(){var e=c.a.locale.split("_")[0];return e&&"es"===e?"es-LA":"en-US"},e.prototype.getConfig=function(){var e=window.server_path;c.a.section;return{clientId:"ESPN-ONESITE.WEB",responderPage:window.location.hostname.indexOf("espnqa.com")>-1?e.responder_espnqa:e.responder,cssOverride:e.espnstatic+"/espn/data/oneid/override.basesite.css",langPref:this.getOneIDLangPref(),optionalConfigs:{reporting:{source:"DTC",context:"direct"}}}},e.prototype.initListeners=function(){var e=this;this.oneId.on("login",(function(t){return w(e,void 0,void 0,(function(){var e,n;return D(this,(function(r){switch(r.label){case 0:e=t.token.id_token,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._sdkService.login(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),console.error(n),[3,4];case 4:return this._userService.setOneIdGuestInformation(t),this._userService.unid="deprecated",this.setEntitlementLevel(this._userService.accountDetails.entitlementLevel),this._broadcastService.emit(k.userSet,this._userService),this._broadcastService.emit(k.loggedIn,!0),this.loginRedirect(),[2]}}))}))})),this.oneId.on("error",(function(t){console.error(t),e.loginRedirect()})),this.oneId.on("refresh",(function(t){return w(e,void 0,void 0,(function(){return D(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,6]),[4,this._sdkService.logout()];case 1:return e.sent(),[4,this._sdkService.login(t.id_token)];case 2:return e.sent(),[3,6];case 3:return e.sent(),[4,this.oneId.logout()];case 4:return e.sent(),[4,this._sdkService.logout()];case 5:return e.sent(),[3,6];case 6:return[2]}}))}))}))},e.prototype.initialize=function(){var e;return w(this,void 0,void 0,(function(){var t,n,r,i,o,a;return D(this,(function(s){switch(s.label){case 0:if(!(t=window.OneID))return console.log("Unable to initialize, OneID not found on window"),[2];s.label=1;case 1:return s.trys.push([1,16,,17]),n=this.getConfig(),this.oneId||(this.oneId=t.get(n)),[4,this.oneId.init()];case 2:if(!(r=s.sent()).guest)return[3,13];i=(null===(e=r.guest.token)||void 0===e?void 0:e.id_token)||"",s.label=3;case 3:return s.trys.push([3,9,,12]),[4,this.oneId.getTrustStateStatus()];case 4:return s.sent()?[4,this._sdkService.login(i)]:[3,6];case 5:return s.sent(),this._userService.setOneIdGuestInformation(r.guest),this._userService.unid="deprecated",this.setEntitlementLevel(this._userService.accountDetails.entitlementLevel),this._broadcastService.emit(k.userSet,this._userService),[3,8];case 6:return window.isLoggedIn=!1,[4,this.oneId.logout()];case 7:s.sent(),s.label=8;case 8:return[3,12];case 9:return o=s.sent(),console.error(o),[4,this.oneId.logout()];case 10:return s.sent(),[4,this._sdkService.logout()];case 11:return s.sent(),[3,12];case 12:return[3,15];case 13:return[4,this._sdkService.logout()];case 14:s.sent(),this.setEntitlementLevel(this._userService.accountDetails.entitlementLevel),this._broadcastService.emit(k.userSet,this._userService),s.label=15;case 15:return this.initListeners(),[3,17];case 16:throw a=s.sent(),console.error(a),a;case 17:return[2]}}))}))},e}(),A=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},R=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},x=function(){function e(e,t,n){this._SDK=e,this._userService=t,this._broadcastService=n;var r=window.server_path,i=new URLSearchParams(window.location.search).get("sdkConfigHostName");i&&"prod"!==i&&(r.sdk.configHostName=i),this._bootstrapConfiguration=new this.SDK.Services.Configuration.BootstrapConfiguration(r.sdk)}return e.getInstance=function(t,n,r){return e.instance||(e.instance=new e(t,n,r)),e.instance},Object.defineProperty(e.prototype,"SDK",{get:function(){return this._SDK},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sdkSession",{get:function(){return this._sdkSession},set:function(e){this._sdkSession=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionInfo",{get:function(){return this._sessionInfo},enumerable:!1,configurable:!0}),e.prototype.setSessionInfo=function(){return A(this,void 0,void 0,(function(){var e;return R(this,(function(t){switch(t.label){case 0:return e=this,[4,this.sdkSession.getSessionInfo()];case 1:return e._sessionInfo=t.sent(),this.setUserDssId(this.sessionInfo),[2]}}))}))},Object.defineProperty(e.prototype,"experiments",{get:function(){return this._sessionInfo.experiments},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoggedIn",{get:function(){return this._isLoggedIn},set:function(e){this._isLoggedIn=e},enumerable:!1,configurable:!0}),e.prototype.setupUser=function(){return A(this,void 0,void 0,(function(){var e,t;return R(this,(function(n){switch(n.label){case 0:return[4,this.setSessionInfo()];case 1:return n.sent(),e=this,[4,this.sdkSession.isAuthorized("espn")];case 2:return e.isLoggedIn=n.sent(),t=this._userService,[4,this.getSubscriptions()];case 3:return t.subscriptions=n.sent(),[2]}}))}))},e.prototype.login=function(e,t){return void 0===t&&(t=!1),A(this,void 0,void 0,(function(){var n,r;return R(this,(function(i){switch(i.label){case 0:n=this.sdkSession.accountApi,i.label=1;case 1:return i.trys.push([1,4,,12]),[4,n.authorize(e,this.sdkSession.clientId)];case 2:return i.sent(),[4,this.setupUser()];case 3:return i.sent(),[3,12];case 4:i.sent(),i.label=5;case 5:return i.trys.push([5,7,,11]),[4,n.createAccount(e)];case 6:return i.sent(),[2,this.login(e)];case 7:return r=i.sent(),console.error("createAccount fail",r),[4,this.logout()];case 8:return i.sent(),t?[3,10]:[4,this.login(e,!0)];case 9:i.sent(),i.label=10;case 10:return[3,11];case 11:return[3,12];case 12:return[2]}}))}))},e.prototype.setUserDssId=function(e){var t,n,r=e.id||"error",i=(null===(t=e.device)||void 0===t?void 0:t.id)||"error",o=(null===(n=e.account)||void 0===n?void 0:n.id)||"";this._userService.dssId=i+","+r,o&&(this._userService.dssId=this._userService.dssId+","+o)},e.prototype.logout=function(){return A(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,this.sdkSession.reset()];case 1:return[2,e.sent()]}}))}))},e.prototype.getInitializationState=function(){return A(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,this.sdkSession.getInitializationState()];case 1:return[2,e.sent()]}}))}))},e.prototype.initialize=function(e){return A(this,void 0,void 0,(function(){var t,n,r,i,o;return R(this,(function(a){switch(a.label){case 0:return t=this._bootstrapConfiguration,n=this,[4,this._SDK.SdkSession.createSdkSession({bootstrapConfiguration:t})];case 1:n.sdkSession=a.sent(),a.label=2;case 2:return a.trys.push([2,10,,16]),e?[4,this._SDK.InitializationState.deserialize(e)]:[3,6];case 3:return r=a.sent(),[4,this.sdkSession.initializeWithState(r)];case 4:return a.sent(),[4,this.setSessionInfo()];case 5:return a.sent(),[3,9];case 6:return[4,this.sdkSession.initialize()];case 7:return a.sent(),[4,this.setSessionInfo()];case 8:a.sent(),a.label=9;case 9:return[3,16];case 10:i=a.sent(),console.error(i),a.label=11;case 11:return a.trys.push([11,14,,15]),[4,this.sdkSession.initialize()];case 12:return a.sent(),[4,this.setSessionInfo()];case 13:return a.sent(),[3,15];case 14:throw o=a.sent(),this.notifySdkSessionResetOnError(),o;case 15:return[3,16];case 16:return[2]}}))}))},e.prototype.getSubscriptions=function(){return A(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,this.sdkSession.subscriptionApi.getSubscriptions()];case 1:return[2,e.sent()]}}))}))},e.prototype.getSessionToken=function(){return A(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,this.sdkSession.getSessionToken()];case 1:return[2,e.sent()]}}))}))},e.prototype.sendContentReward=function(e){return A(this,void 0,void 0,(function(){var t,n;return R(this,(function(r){return t=this.sdkSession.userActivityApi,n=e.action||"CLICK",[2,t.sendContentReward(e.rewardToken,e.contentId,n,e.recommendedContentIds)]}))}))},e.prototype.onReauthorizationFailure=function(e){var t=this._SDK.Services.Exception.ExceptionReference.common.authenticationExpired;this.sdkSession.on("ReauthorizationFailure",(function(n){n&&n.error&&n.error.data&&n.error.data.name===t.name&&e()}))},e.prototype.notifySdkSessionResetOnError=function(){return A(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,this.sdkSession.reset()];case 1:return e.sent(),this._broadcastService.emit(S.sdkSessionResetOnError,new Error("SdkSessionResetOnError")),[2]}}))}))},e}(),O=n(11),I=n.n(O),M=n(12),j=function(){function e(e){this._broadcastService=e}return e.getInstance=function(t){return e.instance||(e.instance=new e(t)),e.instance},e.prototype.initialize=function(){var e=this,t=Object(M.Location)().hash.split("#id=")[1],n=I.a.getInstanceByKey(t);n.openChannel(window.parent,t),n.one("channel::ready",(function(t){window.syndicatedPlayerDispatcher=n,e._broadcastService.emit(T.ready,{config:t,syndicatedPlayerDispatcher:n})}))},e}(),L=function(){return(L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};var N=function(){function e(){this._accountDetails={activeEspnAccount:{},entitlementLevel:"entitlement-none",subscriptionType:"not subscribed",provider:"no entitlements",isActive:!1,upgradeEligible:!1,bundleUser:!1,execUser:!1,isLoggedIn:!1},this._subscriptions=[],this._entitlements=[]}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.letterCase=function(e){var t=e||"";return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},e.prototype.convertGender=function(e){return{1:"M",2:"F"}[e]||"not set"},e.prototype.setOneIdGuestInformation=function(e){var t=e.profile||{};this.oneIdGuestInformation={registrationtype:"espn",loginstatus:"Registered:Logged in "+this.letterCase(t.status),swid:t.swid,gender:this.convertGender(t.gender),birthage:(t.dateOfBirth||"").slice(0,4)}},Object.defineProperty(e.prototype,"oneIdGuestInformation",{get:function(){return this._oneIdGuestInformation},set:function(e){this._oneIdGuestInformation=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subscriptions",{get:function(){return this._subscriptions},set:function(e){this._subscriptions=e,this.setAccoutDetails(e),this.setEntitlements(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unid",{get:function(){return this._unid},set:function(e){this._unid=e},enumerable:!1,configurable:!0}),e.prototype.setAccoutDetails=function(e){var t=e.filter((function(e){return e.isActive&&e.products.some((function(e){return e.categoryCodes.includes("ESPN_submgmt_products")||e.categoryCodes.includes("espn_submgmt_products")||e.entitlements.some((function(e){return"ESPN_EXEC"===e.name}))}))}))[0];if(this.accountDetails.isLoggedIn=!0,n=t,![Object,Array].includes((n||{}).constructor)||Object.entries(n||{}).length){var n,r=t.products[0],i=r.categoryCodes.includes("MONTHLY"),o=r.categoryCodes.includes("YEARLY"),a=r.categoryCodes.includes("espn_switch_from"),s="bundle"===t.bundleStatus,c=r.entitlements.some((function(e){return"ESPN_EXEC"===e.name}));this.accountDetails=L(L({},this.accountDetails),{activeEspnAccount:t,provider:t.source.provider.toLowerCase(),subscriptionType:"active",isActive:!0,upgradeEligible:a,bundleUser:s,execUser:c}),this.accountDetails.entitlementLevel=o||c?"entitlement-annual":s?"entitlement-bundle":i?"entitlement-monthly":"entitlement-unknown"}},Object.defineProperty(e.prototype,"accountDetails",{get:function(){return this._accountDetails},set:function(e){this._accountDetails=e},enumerable:!1,configurable:!0}),e.prototype.setEntitlements=function(e){this.entitlements=e.reduce((function(e,t){return t.isActive&&t.products.forEach((function(t){t.entitlements.forEach((function(t){e.includes(t.name)||e.push(t.name)}))})),e}),[])},Object.defineProperty(e.prototype,"entitlements",{get:function(){return this._entitlements},set:function(e){this._entitlements=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dssId",{get:function(){return this._dssId},set:function(e){this._dssId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userTrackingInfo",{get:function(){return{unid:this.unid,dssId:this.dssId,oneIdGuestInformation:this.oneIdGuestInformation,entitlements:this.entitlements,accountDetails:this.accountDetails}},enumerable:!1,configurable:!0}),e}(),B=function(){return(B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},F=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},U=function(){function e(){this.broadcastService=Z.getInstance(),this.syndicatedDispatcherService=j.getInstance(this.broadcastService),this.userService=N.getInstance(),this.sdkService=x.getInstance(m.a,this.userService,this.broadcastService),this.oneIdService=C.getInstance(this.broadcastService,this.userService,this.sdkService)}return e.getInstance=function(){return this.appState||(e.appState=new e),e.instance.resolve(this.appState)},e.prototype.isEmbedded=function(){return window.self!==window.top},e.prototype.initialize=function(){return _(this,void 0,void 0,(function(){var t,n,r=this;return F(this,(function(i){switch(i.label){case 0:return t=window.deviceBootstrap(),this.browserInfo={isIE:t.is.msie,version:parseInt(t.browserVersion,10),isFireFox:t.is.firefox},this.isEmbedded()?(this.syndicatedDispatcherService.initialize(),this.broadcastService.on(T.ready,(function(t){return _(r,void 0,void 0,(function(){var n,r,i,o,a;return F(this,(function(s){switch(s.label){case 0:return n=null===(o=null==t?void 0:t.config)||void 0===o?void 0:o.data,r=null==n?void 0:n.sdkInitialState,i=null===(a=n.auth)||void 0===a?void 0:a.token,r?[4,this.sdkService.initialize(r)]:[3,2];case 1:return s.sent(),[3,4];case 2:return[4,this.sdkService.initialize()];case 3:s.sent(),s.label=4;case 4:return i?[4,this.sdkService.login(i)]:[3,6];case 5:return s.sent(),[3,7];case 6:this.broadcastService.emit(k.userSet,this.userService),s.label=7;case 7:return this.broadcastService.emit(b.embedReady,B(B({},t),{state:e.appState})),this.broadcastService.emit(b.ready,!0),[2]}}))}))})),[3,4]):[3,1];case 1:return[4,this.sdkService.initialize()];case 2:return i.sent(),[4,this.oneIdService.initialize()];case 3:i.sent(),window.disneyOneIdWrapper={disneyIdService:this.oneIdService.oneId},this.broadcastService.emit(b.ready,e.appState),n=this.sdkService.sdkSession.purchaseApi,window.redeemBundle=n.redeemBundle.bind(n),window.redeemToken=n.redeemToken.bind(n),window.resetSdkSesion=this.sdkService.sdkSession.reset.bind(this.sdkService.sdkSession),i.label=4;case 4:return[2]}}))}))},e.instance=Promise,e}(),q=n(7);function K(){var e=Object(q.deepGet)(window,"espnTrackingConfig.adobeAnalytics.launchScript",null);Object(q.deepGet)(window,"espnTrackingConfig.suppressAdobeLaunch",!1)||function(e){if(!e)return!1;var t=document.createElement("script");t.setAttribute("src",e),document.head.appendChild(t)}(e)}function V(e){var t,n=e.oneIdService.oneId,r=e.sdkService,i=(t=0,function(){return t++}),o=function(){var e=i();return console.log("Attempting to refresh OneId token, try ".concat(e)),e>2?(console.warn("Refresh OneId token attempt limit hit."),n.logout().then((function(){return r.logout()}))):n.forceTokenRefresh().fail((function(){return n.logout().then((function(){return r.logout()}))}))},a=function(e){return console.error(e),e&&e.reasons&&e.reasons.length>0&&"invalid_grant"===e.reasons[0].code?o().fail((function(){return n.logout().then((function(){return r.logout()}))})):Promise.resolve()};return n.getGuest().then((function(e){var t,n,i=e.token&&e.token.id_token?e.token.id_token:"",s=e.profile&&e.profile.swid?e.profile.swid:"";!i||!s||(t=e.token.expires,n=new Date(t),new Date>n)?o():r.logout().then((function(){r.login(i)})).catch(a)})).catch((function(){o()}))}(function(){var e=i()(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.a.section,n=JSON.parse(!!c.a.oneIdEnabled),e.next=4,U.getInstance();case 4:return(r=e.sent).broadcastService.on(b.ready,i()(a.a.mark((function e(){var i,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window,o=i.espnTrackingConfig,(void 0===o?{}:o).dcfBootstrapEnabled&&(window.Bootstrapper?K():document.addEventListener("tms.ready",K)),r.browserInfo.isIE&&11===r.browserInfo.version&&document.body.classList.add("isIE"),r.browserInfo.isFireFox&&document.body.classList.add("firefox"),"video"===t||-1!==window.location.pathname.indexOf("denied")){e.next=16;break}return e.prev=5,s=r.sdkService.sessionInfo.location,e.next=9,v.isUserInGeofence(s.countryCode);case 9:e.sent||window.location.replace("/denied?block=geo"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.error(e.t0);case 16:return e.prev=16,e.next=19,r.sdkService.sdkSession.socketApi.start();case 19:n&&(r.sdkService.onReauthorizationFailure((function(){V(r)})),r.broadcastService.on(S.sdkSessionResetOnError,(function(){V(r)}))),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(16),console.error(e.t1);case 25:case"end":return e.stop()}}),e,null,[[5,13],[16,22]])})))),e.prev=6,e.next=9,r.initialize();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(){return e.apply(this,arguments)}})()(),console.log("site-core: all devices")}])}));
//# sourceMappingURL=basesite_script_bundle.js.map